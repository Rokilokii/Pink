"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _wcs;function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(X){X.ui=X.ui||{},X.ui.version="1.13.0";var n,s,w,C,r,a,o,l,h,i,e,t,p,D=0,I=Array.prototype.hasOwnProperty,R=Array.prototype.slice;function z(e,t,i){return[parseFloat(e[0])*(h.test(e[0])?t/100:1),parseFloat(e[1])*(h.test(e[1])?i/100:1)]}function S(e,t){return parseInt(X.css(e,t),10)||0}function B(e){return null!=e&&e===e.window}X.cleanData=(n=X.cleanData,function(e){for(var t,i,s=0;null!=(i=e[s]);s++)(t=X._data(i,"events"))&&t.remove&&X(i).triggerHandler("remove");n(e)}),X.widget=function(e,i,t){var s,n,r,a={},o=e.split(".")[0],l=o+"-"+(e=e.split(".")[1]);return t||(t=i,i=X.Widget),Array.isArray(t)&&(t=X.extend.apply(null,[{}].concat(t))),X.expr.pseudos[l.toLowerCase()]=function(e){return!!X.data(e,l)},X[o]=X[o]||{},s=X[o][e],n=X[o][e]=function(e,t){if(!this._createWidget)return new n(e,t);arguments.length&&this._createWidget(e,t)},X.extend(n,s,{version:t.version,_proto:X.extend({},t),_childConstructors:[]}),(r=new i).options=X.widget.extend({},r.options),X.each(t,function(t,s){function n(){return i.prototype[t].apply(this,arguments)}function r(e){return i.prototype[t].apply(this,e)}a[t]="function"==typeof s?function(){var e,t=this._super,i=this._superApply;return this._super=n,this._superApply=r,e=s.apply(this,arguments),this._super=t,this._superApply=i,e}:s}),n.prototype=X.widget.extend(r,{widgetEventPrefix:s&&r.widgetEventPrefix||e},a,{constructor:n,namespace:o,widgetName:e,widgetFullName:l}),s?(X.each(s._childConstructors,function(e,t){var i=t.prototype;X.widget(i.namespace+"."+i.widgetName,n,t._proto)}),delete s._childConstructors):i._childConstructors.push(n),X.widget.bridge(e,n),n},X.widget.extend=function(e){for(var t,i,s=R.call(arguments,1),n=0,r=s.length;n<r;n++)for(t in s[n])i=s[n][t],I.call(s[n],t)&&void 0!==i&&(X.isPlainObject(i)?e[t]=X.isPlainObject(e[t])?X.widget.extend({},e[t],i):X.widget.extend({},i):e[t]=i);return e},X.widget.bridge=function(r,t){var a=t.prototype.widgetFullName||r;X.fn[r]=function(i){var e="string"==typeof i,s=R.call(arguments,1),n=this;return e?this.length||"instance"!==i?this.each(function(){var e,t=X.data(this,a);return"instance"===i?(n=t,!1):t?"function"!=typeof t[i]||"_"===i.charAt(0)?X.error("no such method '"+i+"' for "+r+" widget instance"):(e=t[i].apply(t,s))!==t&&void 0!==e?(n=e&&e.jquery?n.pushStack(e.get()):e,!1):void 0:X.error("cannot call methods on "+r+" prior to initialization; attempted to call method '"+i+"'")}):n=void 0:(s.length&&(i=X.widget.extend.apply(null,[i].concat(s))),this.each(function(){var e=X.data(this,a);e?(e.option(i||{}),e._init&&e._init()):X.data(this,a,new t(i,this))})),n}},X.Widget=function(){},X.Widget._childConstructors=[],X.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,t){t=X(t||this.defaultElement||this)[0],this.element=X(t),this.uuid=D++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=X(),this.hoverable=X(),this.focusable=X(),this.classesElementLookup={},t!==this&&(X.data(t,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===t&&this.destroy()}}),this.document=X(t.style?t.ownerDocument:t.document||t),this.window=X(this.document[0].defaultView||this.document[0].parentWindow)),this.options=X.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:X.noop,_create:X.noop,_init:X.noop,destroy:function(){var i=this;this._destroy(),X.each(this.classesElementLookup,function(e,t){i._removeClass(t,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:X.noop,widget:function(){return this.element},option:function(e,t){var i,s,n,r=e;if(0===arguments.length)return X.widget.extend({},this.options);if("string"==typeof e)if(r={},e=(i=e.split(".")).shift(),i.length){for(s=r[e]=X.widget.extend({},this.options[e]),n=0;n<i.length-1;n++)s[i[n]]=s[i[n]]||{},s=s[i[n]];if(e=i.pop(),1===arguments.length)return void 0===s[e]?null:s[e];s[e]=t}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];r[e]=t}return this._setOptions(r),this},_setOptions:function(e){for(var t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(e){var t,i,s;for(t in e)s=this.classesElementLookup[t],e[t]!==this.options.classes[t]&&s&&s.length&&(i=X(s.get()),this._removeClass(s,t),i.addClass(this._classes({element:i,keys:t,classes:e,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(n){var r=[],a=this;function e(e,t){for(var i,s=0;s<e.length;s++)i=a.classesElementLookup[e[s]]||X(),i=n.add?(n.element.each(function(e,t){X.map(a.classesElementLookup,function(e){return e}).some(function(e){return e.is(t)})||a._on(X(t),{remove:"_untrackClassesElement"})}),X(X.uniqueSort(i.get().concat(n.element.get())))):X(i.not(n.element).get()),a.classesElementLookup[e[s]]=i,r.push(e[s]),t&&n.classes[e[s]]&&r.push(n.classes[e[s]])}return(n=X.extend({element:this.element,classes:this.options.classes||{}},n)).keys&&e(n.keys.match(/\S+/g)||[],!0),n.extra&&e(n.extra.match(/\S+/g)||[]),r.join(" ")},_untrackClassesElement:function(i){var s=this;X.each(s.classesElementLookup,function(e,t){-1!==X.inArray(i.target,t)&&(s.classesElementLookup[e]=X(t.not(i.target).get()))}),this._off(X(i.target))},_removeClass:function(e,t,i){return this._toggleClass(e,t,i,!1)},_addClass:function(e,t,i){return this._toggleClass(e,t,i,!0)},_toggleClass:function(e,t,i,s){var n="string"==typeof e||null===e;return(i={extra:n?t:i,keys:n?e:t,element:n?this.element:e,add:s="boolean"==typeof s?s:i}).element.toggleClass(this._classes(i),s),this},_on:function(n,r,e){var a,o=this;"boolean"!=typeof n&&(e=r,r=n,n=!1),e?(r=a=X(r),this.bindings=this.bindings.add(r)):(e=r,r=this.element,a=this.widget()),X.each(e,function(e,t){function i(){if(n||!0!==o.options.disabled&&!X(this).hasClass("ui-state-disabled"))return("string"==typeof t?o[t]:t).apply(o,arguments)}"string"!=typeof t&&(i.guid=t.guid=t.guid||i.guid||X.guid++);var s=e.match(/^([\w:-]*)\s*(.*)$/),e=s[1]+o.eventNamespace;(s=s[2])?a.on(e,s,i):r.on(e,i)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(t),this.bindings=X(this.bindings.not(e).get()),this.focusable=X(this.focusable.not(e).get()),this.hoverable=X(this.hoverable.not(e).get())},_delay:function(e,t){var i=this;return setTimeout(function(){return("string"==typeof e?i[e]:e).apply(i,arguments)},t||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(X(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(X(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(X(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(X(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,t,i){var s,n,r=this.options[e];if(i=i||{},(t=X.Event(t)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),t.target=this.element[0],n=t.originalEvent)for(s in n)s in t||(t[s]=n[s]);return this.element.trigger(t,i),!("function"==typeof r&&!1===r.apply(this.element[0],[t].concat(i))||t.isDefaultPrevented())}},X.each({show:"fadeIn",hide:"fadeOut"},function(r,a){X.Widget.prototype["_"+r]=function(t,e,i){var s,n=(e="string"==typeof e?{effect:e}:e)?!0!==e&&"number"!=typeof e&&e.effect||a:r;"number"==typeof(e=e||{})?e={duration:e}:!0===e&&(e={}),s=!X.isEmptyObject(e),e.complete=i,e.delay&&t.delay(e.delay),s&&X.effects&&X.effects.effect[n]?t[r](e):n!==r&&t[n]?t[n](e.duration,e.easing,i):t.queue(function(e){X(this)[r](),i&&i.call(t[0]),e()})}}),X.widget,w=Math.max,C=Math.abs,r=/left|center|right/,a=/top|center|bottom/,o=/[\+\-]\d+(\.[\d]+)?%?/,l=/^\w+/,h=/%$/,i=X.fn.position,X.position={scrollbarWidth:function(){if(void 0!==s)return s;var e,t=X("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>"),i=t.children()[0];return X("body").append(t),e=i.offsetWidth,t.css("overflow","scroll"),e===(i=i.offsetWidth)&&(i=t[0].clientWidth),t.remove(),s=e-i},getScrollInfo:function(e){var t=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),i=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),t="scroll"===t||"auto"===t&&e.width<e.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight?X.position.scrollbarWidth():0,height:t?X.position.scrollbarWidth():0}},getWithinInfo:function(e){var t=X(e||window),i=B(t[0]),s=!!t[0]&&9===t[0].nodeType;return{element:t,isWindow:i,isDocument:s,offset:i||s?{left:0,top:0}:X(e).offset(),scrollLeft:t.scrollLeft(),scrollTop:t.scrollTop(),width:t.outerWidth(),height:t.outerHeight()}}},X.fn.position=function(u){if(!u||!u.of)return i.apply(this,arguments);var c,d,y,m,f,e,g="string"==typeof(u=X.extend({},u)).of?X(document).find(u.of):X(u.of),v=X.position.getWithinInfo(u.within),L=X.position.getScrollInfo(v),O=(u.collision||"flip").split(" "),b={},t=9===(e=(t=g)[0]).nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:B(e)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:e.preventDefault?{width:0,height:0,offset:{top:e.pageY,left:e.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()};return g[0].preventDefault&&(u.at="left top"),d=t.width,y=t.height,f=X.extend({},m=t.offset),X.each(["my","at"],function(){var e,t,i=(u[this]||"").split(" ");(i=1===i.length?r.test(i[0])?i.concat(["center"]):a.test(i[0])?["center"].concat(i):["center","center"]:i)[0]=r.test(i[0])?i[0]:"center",i[1]=a.test(i[1])?i[1]:"center",e=o.exec(i[0]),t=o.exec(i[1]),b[this]=[e?e[0]:0,t?t[0]:0],u[this]=[l.exec(i[0])[0],l.exec(i[1])[0]]}),1===O.length&&(O[1]=O[0]),"right"===u.at[0]?f.left+=d:"center"===u.at[0]&&(f.left+=d/2),"bottom"===u.at[1]?f.top+=y:"center"===u.at[1]&&(f.top+=y/2),c=z(b.at,d,y),f.left+=c[0],f.top+=c[1],this.each(function(){var i,e,a=X(this),o=a.outerWidth(),l=a.outerHeight(),t=S(this,"marginLeft"),s=S(this,"marginTop"),n=o+t+S(this,"marginRight")+L.width,r=l+s+S(this,"marginBottom")+L.height,h=X.extend({},f),p=z(b.my,a.outerWidth(),a.outerHeight());"right"===u.my[0]?h.left-=o:"center"===u.my[0]&&(h.left-=o/2),"bottom"===u.my[1]?h.top-=l:"center"===u.my[1]&&(h.top-=l/2),h.left+=p[0],h.top+=p[1],i={marginLeft:t,marginTop:s},X.each(["left","top"],function(e,t){X.ui.position[O[e]]&&X.ui.position[O[e]][t](h,{targetWidth:d,targetHeight:y,elemWidth:o,elemHeight:l,collisionPosition:i,collisionWidth:n,collisionHeight:r,offset:[c[0]+p[0],c[1]+p[1]],my:u.my,at:u.at,within:v,elem:a})}),u.using&&(e=function(e){var t=m.left-h.left,i=t+d-o,s=m.top-h.top,n=s+y-l,r={target:{element:g,left:m.left,top:m.top,width:d,height:y},element:{element:a,left:h.left,top:h.top,width:o,height:l},horizontal:i<0?"left":0<t?"right":"center",vertical:n<0?"top":0<s?"bottom":"middle"};d<o&&C(t+i)<d&&(r.horizontal="center"),y<l&&C(s+n)<y&&(r.vertical="middle"),w(C(t),C(i))>w(C(s),C(n))?r.important="horizontal":r.important="vertical",u.using.call(this,e,r)}),a.offset(X.extend(h,{using:e}))})},X.ui.position={fit:{left:function(e,t){var i=t.within,s=i.isWindow?i.scrollLeft:i.offset.left,n=i.width,r=e.left-t.collisionPosition.marginLeft,a=s-r,o=r+t.collisionWidth-n-s;t.collisionWidth>n?0<a&&o<=0?(i=e.left+a+t.collisionWidth-n-s,e.left+=a-i):e.left=!(0<o&&a<=0)&&o<a?s+n-t.collisionWidth:s:0<a?e.left+=a:0<o?e.left-=o:e.left=w(e.left-r,e.left)},top:function(e,t){var i=t.within,s=i.isWindow?i.scrollTop:i.offset.top,n=t.within.height,r=e.top-t.collisionPosition.marginTop,a=s-r,o=r+t.collisionHeight-n-s;t.collisionHeight>n?0<a&&o<=0?(i=e.top+a+t.collisionHeight-n-s,e.top+=a-i):e.top=!(0<o&&a<=0)&&o<a?s+n-t.collisionHeight:s:0<a?e.top+=a:0<o?e.top-=o:e.top=w(e.top-r,e.top)}},flip:{left:function(e,t){var i=(l=t.within).offset.left+l.scrollLeft,s=l.width,n=l.isWindow?l.scrollLeft:l.offset.left,r=(h=e.left-t.collisionPosition.marginLeft)-n,a=h+t.collisionWidth-s-n,o="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,l="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,h=-2*t.offset[0];r<0?((i=e.left+o+l+h+t.collisionWidth-s-i)<0||i<C(r))&&(e.left+=o+l+h):0<a&&(0<(n=e.left-t.collisionPosition.marginLeft+o+l+h-n)||C(n)<a)&&(e.left+=o+l+h)},top:function(e,t){var i=(l=t.within).offset.top+l.scrollTop,s=l.height,n=l.isWindow?l.scrollTop:l.offset.top,r=(h=e.top-t.collisionPosition.marginTop)-n,a=h+t.collisionHeight-s-n,o="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,l="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,h=-2*t.offset[1];r<0?((i=e.top+o+l+h+t.collisionHeight-s-i)<0||i<C(r))&&(e.top+=o+l+h):0<a&&(0<(n=e.top-t.collisionPosition.marginTop+o+l+h-n)||C(n)<a)&&(e.top+=o+l+h)}},flipfit:{left:function(){X.ui.position.flip.left.apply(this,arguments),X.ui.position.fit.left.apply(this,arguments)},top:function(){X.ui.position.flip.top.apply(this,arguments),X.ui.position.fit.top.apply(this,arguments)}}},X.ui.position,X.extend(X.expr.pseudos,{data:X.expr.createPseudo?X.expr.createPseudo(function(t){return function(e){return!!X.data(e,t)}}):function(e,t,i){return!!X.data(e,i[3])}}),X.fn.extend({disableSelection:(e="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(e+".ui-disableSelection",function(e){e.preventDefault()})}),enableSelection:function(){return this.off(".ui-disableSelection")}}),X.ui.focusable=function(e,t){var i,s,n,r=e.nodeName.toLowerCase();return"area"===r?(i=(n=e.parentNode).name,!(!e.href||!i||"map"!==n.nodeName.toLowerCase())&&0<(i=X("img[usemap='#"+i+"']")).length&&i.is(":visible")):(/^(input|select|textarea|button|object)$/.test(r)?(s=!e.disabled)&&(n=X(e).closest("fieldset")[0])&&(s=!n.disabled):s="a"===r&&e.href||t,s&&X(e).is(":visible")&&function(e){for(var t=e.css("visibility");"inherit"===t;)t=(e=e.parent()).css("visibility");return"visible"===t}(X(e)))},X.extend(X.expr.pseudos,{focusable:function(e){return X.ui.focusable(e,null!=X.attr(e,"tabindex"))}}),X.ui.focusable,X.fn._form=function(){return"string"==typeof this[0].form?this.closest("form"):X(this[0].form)},X.ui.formResetMixin={_formResetHandler:function(){var t=X(this);setTimeout(function(){var e=t.data("ui-form-reset-instances");X.each(e,function(){this.refresh()})})},_bindFormResetHandler:function(){var e;this.form=this.element._form(),this.form.length&&((e=this.form.data("ui-form-reset-instances")||[]).length||this.form.on("reset.ui-form-reset",this._formResetHandler),e.push(this),this.form.data("ui-form-reset-instances",e))},_unbindFormResetHandler:function(){var e;this.form.length&&((e=this.form.data("ui-form-reset-instances")).splice(X.inArray(this,e),1),e.length?this.form.data("ui-form-reset-instances",e):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset"))}},X.expr.pseudos||(X.expr.pseudos=X.expr[":"]),X.uniqueSort||(X.uniqueSort=X.unique),X.escapeSelector||(t=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,p=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},X.escapeSelector=function(e){return(e+"").replace(t,p)}),X.fn.even&&X.fn.odd||X.fn.extend({even:function(){return this.filter(function(e){return e%2==0})},odd:function(){return this.filter(function(e){return e%2==1})}}),X.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},X.fn.labels=function(){var e,t,i;return this.length?this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(t=this.eq(0).parents("label"),(e=this.attr("id"))&&(i=(i=this.eq(0).parents().last()).add((i.length?i:this).siblings()),e="label[for='"+X.escapeSelector(e)+"']",t=t.add(i.find(e).addBack(e))),this.pushStack(t)):this.pushStack([])},X.fn.scrollParent=function(e){var t=this.css("position"),i="absolute"===t,s=e?/(auto|scroll|hidden)/:/(auto|scroll)/,e=this.parents().filter(function(){var e=X(this);return(!i||"static"!==e.css("position"))&&s.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==t&&e.length?e:X(this[0].ownerDocument||document)},X.extend(X.expr.pseudos,{tabbable:function(e){var t=X.attr(e,"tabindex"),i=null!=t;return(!i||0<=t)&&X.ui.focusable(e,i)}}),X.fn.extend({uniqueId:(U=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++U)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&X(this).removeAttr("id")})}}),X.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var U,u=!1;function G(e,t,i){return t<=e&&e<t+i}X(document).on("mouseup",function(){u=!1}),X.widget("ui.mouse",{version:"1.13.0",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(e){if(!0===X.data(e.target,t.widgetName+".preventClickEvent"))return X.removeData(e.target,t.widgetName+".preventClickEvent"),e.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){var t,i,s;if(!u)return this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),i=1===(this._mouseDownEvent=e).which,s=!("string"!=typeof(t=this).options.cancel||!e.target.nodeName)&&X(e.target).closest(this.options.cancel).length,!(i&&!s&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){t.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===X.data(e.target,this.widgetName+".preventClickEvent")&&X.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return t._mouseMove(e)},this._mouseUpDelegate=function(e){return t._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),u=!0))},_mouseMove:function(e){if(this._mouseMoved){if(X.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&X.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,u=!1,e.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),X.ui.plugin={add:function(e,t,i){var s,n=X.ui[e].prototype;for(s in i)n.plugins[s]=n.plugins[s]||[],n.plugins[s].push([t,i[s]])},call:function(e,t,i,s){var n,r=e.plugins[t];if(r&&(s||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(n=0;n<r.length;n++)e.options[r[n][0]]&&r[n][1].apply(e.element,i)}},X.ui.safeActiveElement=function(t){var i;try{i=t.activeElement}catch(e){i=t.body}return(i=i||t.body).nodeName?i:t.body},X.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&X(e).trigger("blur")},X.widget("ui.draggable",X.ui.mouse,{version:"1.13.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(e){var t=this.options;return!(this.helper||t.disabled||0<X(e.target).closest(".ui-resizable-handle").length||(this.handle=this._getHandle(e),!this.handle||(this._blurActiveElement(e),this._blockFrames(!0===t.iframeFix?"iframe":t.iframeFix),0)))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=X(this);return X("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var t=X.ui.safeActiveElement(this.document[0]);X(e.target).closest(t).length||X.ui.safeBlur(t)},_mouseStart:function(e){var t=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),X.ui.ddmanager&&(X.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===X(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,t.cursorAt&&this._adjustOffsetFromHelper(t.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),X.ui.ddmanager&&!t.dropBehaviour&&X.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),X.ui.ddmanager&&X.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(e,t){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!t){if(t=this._uiHash(),!1===this._trigger("drag",e,t))return this._mouseUp(new X.Event("mouseup",e)),!1;this.position=t.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",X.ui.ddmanager&&X.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var t=this,i=!1;return X.ui.ddmanager&&!this.options.dropBehaviour&&(i=X.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||"function"==typeof this.options.revert&&this.options.revert.call(this.element,i)?X(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==t._trigger("stop",e)&&t._clear()}):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),X.ui.ddmanager&&X.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),X.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new X.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!X(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var t=this.options,i="function"==typeof t.helper;return(e=i?X(t.helper.apply(this.element[0],[e])):"clone"===t.helper?this.element.clone().removeAttr("id"):this.element).parents("body").length||e.appendTo("parent"===t.appendTo?this.element[0].parentNode:t.appendTo),i&&e[0]===this.element[0]&&this._setPositionRelative(),e[0]===this.element[0]||/(fixed|absolute)/.test(e.css("position"))||e.css("position","absolute"),e},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),"left"in(e=Array.isArray(e)?{left:+e[0],top:+e[1]||0}:e)&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),t=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==t&&X.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),{top:(e=this._isRootNode(this.offsetParent[0])?{top:0,left:0}:e).top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,t,i,s=this.options,n=this.document[0];this.relativeContainer=null,s.containment?"window"!==s.containment?"document"!==s.containment?s.containment.constructor!==Array?("parent"===s.containment&&(s.containment=this.helper[0].parentNode),(i=(t=X(s.containment))[0])&&(e=/(scroll|auto)/.test(t.css("overflow")),this.containment=[(parseInt(t.css("borderLeftWidth"),10)||0)+(parseInt(t.css("paddingLeft"),10)||0),(parseInt(t.css("borderTopWidth"),10)||0)+(parseInt(t.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(t.css("borderRightWidth"),10)||0)-(parseInt(t.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(t.css("borderBottomWidth"),10)||0)-(parseInt(t.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=t)):this.containment=s.containment:this.containment=[0,0,X(n).width()-this.helperProportions.width-this.margins.left,(X(n).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[X(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,X(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,X(window).scrollLeft()+X(window).width()-this.helperProportions.width-this.margins.left,X(window).scrollTop()+(X(window).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(e,t){t=t||this.position;var i="absolute"===e?1:-1,e=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:e?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:e?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,s=this.options,n=this._isRootNode(this.scrollParent[0]),r=e.pageX,a=e.pageY;return n&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(i=this.relativeContainer?(i=this.relativeContainer.offset(),[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):this.containment,e.pageX-this.offset.click.left<i[0]&&(r=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(a=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(r=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(a=i[3]+this.offset.click.top)),s.grid&&(e=s.grid[1]?this.originalPageY+Math.round((a-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,a=!i||e-this.offset.click.top>=i[1]||e-this.offset.click.top>i[3]?e:e-this.offset.click.top>=i[1]?e-s.grid[1]:e+s.grid[1],e=s.grid[0]?this.originalPageX+Math.round((r-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,r=!i||e-this.offset.click.left>=i[0]||e-this.offset.click.left>i[2]?e:e-this.offset.click.left>=i[0]?e-s.grid[0]:e+s.grid[0]),"y"===s.axis&&(r=this.originalPageX),"x"===s.axis&&(a=this.originalPageY)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,t,i){return i=i||this._uiHash(),X.ui.plugin.call(this,e,[t,i,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),X.Widget.prototype._trigger.call(this,e,t,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),X.ui.plugin.add("draggable","connectToSortable",{start:function(t,e,i){var s=X.extend({},e,{item:i.element});i.sortables=[],X(i.options.connectToSortable).each(function(){var e=X(this).sortable("instance");e&&!e.options.disabled&&(i.sortables.push(e),e.refreshPositions(),e._trigger("activate",t,s))})},stop:function(t,e,i){var s=X.extend({},e,{item:i.element});i.cancelHelperRemoval=!1,X.each(i.sortables,function(){var e=this;e.isOver?(e.isOver=0,i.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,s))})},drag:function(i,s,n){X.each(n.sortables,function(){var e=!1,t=this;t.positionAbs=n.positionAbs,t.helperProportions=n.helperProportions,t.offset.click=n.offset.click,t._intersectsWith(t.containerCache)&&(e=!0,X.each(n.sortables,function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,e=(this===t||!this._intersectsWith(this.containerCache)||!X.contains(t.element[0],this.element[0]))&&e})),e?(t.isOver||(t.isOver=1,n._parent=s.helper.parent(),t.currentItem=s.helper.appendTo(t.element).data("ui-sortable-item",!0),t.options._helper=t.options.helper,t.options.helper=function(){return s.helper[0]},i.target=t.currentItem[0],t._mouseCapture(i,!0),t._mouseStart(i,!0,!0),t.offset.click.top=n.offset.click.top,t.offset.click.left=n.offset.click.left,t.offset.parent.left-=n.offset.parent.left-t.offset.parent.left,t.offset.parent.top-=n.offset.parent.top-t.offset.parent.top,n._trigger("toSortable",i),n.dropped=t.element,X.each(n.sortables,function(){this.refreshPositions()}),n.currentItem=n.element,t.fromOutside=n),t.currentItem&&(t._mouseDrag(i),s.position=t.position)):t.isOver&&(t.isOver=0,t.cancelHelperRemoval=!0,t.options._revert=t.options.revert,t.options.revert=!1,t._trigger("out",i,t._uiHash(t)),t._mouseStop(i,!0),t.options.revert=t.options._revert,t.options.helper=t.options._helper,t.placeholder&&t.placeholder.remove(),s.helper.appendTo(n._parent),n._refreshOffsets(i),s.position=n._generatePosition(i,!0),n._trigger("fromSortable",i),n.dropped=!1,X.each(n.sortables,function(){this.refreshPositions()}))})}}),X.ui.plugin.add("draggable","cursor",{start:function(e,t,i){var s=X("body"),i=i.options;s.css("cursor")&&(i._cursor=s.css("cursor")),s.css("cursor",i.cursor)},stop:function(e,t,i){(i=i.options)._cursor&&X("body").css("cursor",i._cursor)}}),X.ui.plugin.add("draggable","opacity",{start:function(e,t,i){t=X(t.helper),i=i.options,t.css("opacity")&&(i._opacity=t.css("opacity")),t.css("opacity",i.opacity)},stop:function(e,t,i){(i=i.options)._opacity&&X(t.helper).css("opacity",i._opacity)}}),X.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,t,i){var s=i.options,n=!1,r=i.scrollParentNotHidden[0],a=i.document[0];r!==a&&"HTML"!==r.tagName?(s.axis&&"x"===s.axis||(i.overflowOffset.top+r.offsetHeight-e.pageY<s.scrollSensitivity?r.scrollTop=n=r.scrollTop+s.scrollSpeed:e.pageY-i.overflowOffset.top<s.scrollSensitivity&&(r.scrollTop=n=r.scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(i.overflowOffset.left+r.offsetWidth-e.pageX<s.scrollSensitivity?r.scrollLeft=n=r.scrollLeft+s.scrollSpeed:e.pageX-i.overflowOffset.left<s.scrollSensitivity&&(r.scrollLeft=n=r.scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(e.pageY-X(a).scrollTop()<s.scrollSensitivity?n=X(a).scrollTop(X(a).scrollTop()-s.scrollSpeed):X(window).height()-(e.pageY-X(a).scrollTop())<s.scrollSensitivity&&(n=X(a).scrollTop(X(a).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(e.pageX-X(a).scrollLeft()<s.scrollSensitivity?n=X(a).scrollLeft(X(a).scrollLeft()-s.scrollSpeed):X(window).width()-(e.pageX-X(a).scrollLeft())<s.scrollSensitivity&&(n=X(a).scrollLeft(X(a).scrollLeft()+s.scrollSpeed)))),!1!==n&&X.ui.ddmanager&&!s.dropBehaviour&&X.ui.ddmanager.prepareOffsets(i,e)}}),X.ui.plugin.add("draggable","snap",{start:function(e,t,i){var s=i.options;i.snapElements=[],X(s.snap.constructor!==String?s.snap.items||":data(ui-draggable)":s.snap).each(function(){var e=X(this),t=e.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:t.top,left:t.left})})},drag:function(e,t,i){for(var s,n,r,a,o,l,h,p,u,c=i.options,d=c.snapTolerance,y=t.offset.left,m=y+i.helperProportions.width,f=t.offset.top,g=f+i.helperProportions.height,v=i.snapElements.length-1;0<=v;v--)l=(o=i.snapElements[v].left-i.margins.left)+i.snapElements[v].width,p=(h=i.snapElements[v].top-i.margins.top)+i.snapElements[v].height,m<o-d||l+d<y||g<h-d||p+d<f||!X.contains(i.snapElements[v].item.ownerDocument,i.snapElements[v].item)?(i.snapElements[v].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,e,X.extend(i._uiHash(),{snapItem:i.snapElements[v].item})),i.snapElements[v].snapping=!1):("inner"!==c.snapMode&&(s=Math.abs(h-g)<=d,n=Math.abs(p-f)<=d,r=Math.abs(o-m)<=d,a=Math.abs(l-y)<=d,s&&(t.position.top=i._convertPositionTo("relative",{top:h-i.helperProportions.height,left:0}).top),n&&(t.position.top=i._convertPositionTo("relative",{top:p,left:0}).top),r&&(t.position.left=i._convertPositionTo("relative",{top:0,left:o-i.helperProportions.width}).left),a&&(t.position.left=i._convertPositionTo("relative",{top:0,left:l}).left)),u=s||n||r||a,"outer"!==c.snapMode&&(s=Math.abs(h-f)<=d,n=Math.abs(p-g)<=d,r=Math.abs(o-y)<=d,a=Math.abs(l-m)<=d,s&&(t.position.top=i._convertPositionTo("relative",{top:h,left:0}).top),n&&(t.position.top=i._convertPositionTo("relative",{top:p-i.helperProportions.height,left:0}).top),r&&(t.position.left=i._convertPositionTo("relative",{top:0,left:o}).left),a&&(t.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left)),!i.snapElements[v].snapping&&(s||n||r||a||u)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,e,X.extend(i._uiHash(),{snapItem:i.snapElements[v].item})),i.snapElements[v].snapping=s||n||r||a||u)}}),X.ui.plugin.add("draggable","stack",{start:function(e,t,i){var s,i=i.options;(i=X.makeArray(X(i.stack)).sort(function(e,t){return(parseInt(X(e).css("zIndex"),10)||0)-(parseInt(X(t).css("zIndex"),10)||0)})).length&&(s=parseInt(X(i[0]).css("zIndex"),10)||0,X(i).each(function(e){X(this).css("zIndex",s+e)}),this.css("zIndex",s+i.length))}}),X.ui.plugin.add("draggable","zIndex",{start:function(e,t,i){t=X(t.helper),i=i.options,t.css("zIndex")&&(i._zIndex=t.css("zIndex")),t.css("zIndex",i.zIndex)},stop:function(e,t,i){(i=i.options)._zIndex&&X(t.helper).css("zIndex",i._zIndex)}}),X.ui.draggable,X.widget("ui.droppable",{version:"1.13.0",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,t=this.options,i=t.accept;this.isover=!1,this.isout=!0,this.accept="function"==typeof i?i:function(e){return e.is(i)},this.proportions=function(){if(!arguments.length)return e=e||{width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};e=arguments[0]},this._addToManager(t.scope),t.addClasses&&this._addClass("ui-droppable")},_addToManager:function(e){X.ui.ddmanager.droppables[e]=X.ui.ddmanager.droppables[e]||[],X.ui.ddmanager.droppables[e].push(this)},_splice:function(e){for(var t=0;t<e.length;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var e=X.ui.ddmanager.droppables[this.options.scope];this._splice(e)},_setOption:function(e,t){var i;"accept"===e?this.accept="function"==typeof t?t:function(e){return e.is(t)}:"scope"===e&&(i=X.ui.ddmanager.droppables[this.options.scope],this._splice(i),this._addToManager(t)),this._super(e,t)},_activate:function(e){var t=X.ui.ddmanager.current;this._addActiveClass(),t&&this._trigger("activate",e,this.ui(t))},_deactivate:function(e){var t=X.ui.ddmanager.current;this._removeActiveClass(),t&&this._trigger("deactivate",e,this.ui(t))},_over:function(e){var t=X.ui.ddmanager.current;t&&(t.currentItem||t.element)[0]!==this.element[0]&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this._addHoverClass(),this._trigger("over",e,this.ui(t)))},_out:function(e){var t=X.ui.ddmanager.current;t&&(t.currentItem||t.element)[0]!==this.element[0]&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this._removeHoverClass(),this._trigger("out",e,this.ui(t)))},_drop:function(t,e){var i=e||X.ui.ddmanager.current,s=!1;return!(!i||(i.currentItem||i.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var e=X(this).droppable("instance");if(e.options.greedy&&!e.options.disabled&&e.options.scope===i.options.scope&&e.accept.call(e.element[0],i.currentItem||i.element)&&X.ui.intersect(i,X.extend(e,{offset:e.element.offset()}),e.options.tolerance,t))return!(s=!0)}),!s&&!!this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",t,this.ui(i)),this.element))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}}),X.ui.intersect=function(e,t,i,s){if(!t.offset)return!1;var n=(e.positionAbs||e.position.absolute).left+e.margins.left,r=(e.positionAbs||e.position.absolute).top+e.margins.top,a=n+e.helperProportions.width,o=r+e.helperProportions.height,l=t.offset.left,h=t.offset.top,p=l+t.proportions().width,u=h+t.proportions().height;switch(i){case"fit":return l<=n&&a<=p&&h<=r&&o<=u;case"intersect":return l<n+e.helperProportions.width/2&&a-e.helperProportions.width/2<p&&h<r+e.helperProportions.height/2&&o-e.helperProportions.height/2<u;case"pointer":return G(s.pageY,h,t.proportions().height)&&G(s.pageX,l,t.proportions().width);case"touch":return(h<=r&&r<=u||h<=o&&o<=u||r<h&&u<o)&&(l<=n&&n<=p||l<=a&&a<=p||n<l&&p<a);default:return!1}},!(X.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,t){var i,s,n=X.ui.ddmanager.droppables[e.options.scope]||[],r=t?t.type:null,a=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();e:for(i=0;i<n.length;i++)if(!(n[i].options.disabled||e&&!n[i].accept.call(n[i].element[0],e.currentItem||e.element))){for(s=0;s<a.length;s++)if(a[s]===n[i].element[0]){n[i].proportions().height=0;continue e}n[i].visible="none"!==n[i].element.css("display"),n[i].visible&&("mousedown"===r&&n[i]._activate.call(n[i],t),n[i].offset=n[i].element.offset(),n[i].proportions({width:n[i].element[0].offsetWidth,height:n[i].element[0].offsetHeight}))}},drop:function(e,t){var i=!1;return X.each((X.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&X.ui.intersect(e,this,this.options.tolerance,t)&&(i=this._drop.call(this,t)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,t)))}),i},dragStart:function(e,t){e.element.parentsUntil("body").on("scroll.droppable",function(){e.options.refreshPositions||X.ui.ddmanager.prepareOffsets(e,t)})},drag:function(n,r){n.options.refreshPositions&&X.ui.ddmanager.prepareOffsets(n,r),X.each(X.ui.ddmanager.droppables[n.options.scope]||[],function(){var e,t,i,s;this.options.disabled||this.greedyChild||!this.visible||(s=!(i=X.ui.intersect(n,this,this.options.tolerance,r))&&this.isover?"isout":i&&!this.isover?"isover":null)&&(this.options.greedy&&(t=this.options.scope,(i=this.element.parents(":data(ui-droppable)").filter(function(){return X(this).droppable("instance").options.scope===t})).length&&((e=X(i[0]).droppable("instance")).greedyChild="isover"===s)),e&&"isover"===s&&(e.isover=!1,e.isout=!0,e._out.call(e,r)),this[s]=!0,this["isout"===s?"isover":"isout"]=!1,this["isover"===s?"_over":"_out"].call(this,r),e&&"isout"===s&&(e.isout=!1,e.isover=!0,e._over.call(e,r)))})},dragStop:function(e,t){e.element.parentsUntil("body").off("scroll.droppable"),e.options.refreshPositions||X.ui.ddmanager.prepareOffsets(e,t)}})!==X.uiBackCompat&&X.widget("ui.droppable",X.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),X.ui.droppable,X.widget("ui.resizable",X.ui.mouse,{version:"1.13.0",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(e,t){if("hidden"===X(e).css("overflow"))return!1;var i=t&&"left"===t?"scrollLeft":"scrollTop",t=!1;if(0<e[i])return!0;try{e[i]=1,t=0<e[i],e[i]=0}catch(e){}return t},_create:function(){var e,t=this.options,i=this;this._addClass("ui-resizable"),X.extend(this,{_aspectRatio:!!t.aspectRatio,aspectRatio:t.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:t.helper||t.ghost||t.animate?t.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(X("<div class='ui-wrapper'></div>").css({overflow:"hidden",position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),t.autoHide&&X(this.element).on("mouseenter",function(){t.disabled||(i._removeClass("ui-resizable-autohide"),i._handles.show())}).on("mouseleave",function(){t.disabled||i.resizing||(i._addClass("ui-resizable-autohide"),i._handles.hide())}),this._mouseInit()},_destroy:function(){function e(e){X(e).removeData("resizable").removeData("ui-resizable").off(".resizable")}var t;return this._mouseDestroy(),this._addedHandles.remove(),this.elementIsWrapper&&(e(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles();break;case"aspectRatio":this._aspectRatio=!!t}},_setupHandles:function(){var e,t,i,s,n,r=this.options,a=this;if(this.handles=r.handles||(X(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=X(),this._addedHandles=X(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),i=this.handles.split(","),this.handles={},t=0;t<i.length;t++)s="ui-resizable-"+(e=String.prototype.trim.call(i[t])),n=X("<div>"),this._addClass(n,"ui-resizable-handle "+s),n.css({zIndex:r.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.children(this.handles[e]).length||(this.element.append(n),this._addedHandles=this._addedHandles.add(n));this._renderAxis=function(e){var t,i,s;for(t in e=e||this.element,this.handles)this.handles[t].constructor===String?this.handles[t]=this.element.children(this.handles[t]).first().show():(this.handles[t].jquery||this.handles[t].nodeType)&&(this.handles[t]=X(this.handles[t]),this._on(this.handles[t],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(i=X(this.handles[t],this.element),s=/sw|ne|nw|se|n|s/.test(t)?i.outerHeight():i.outerWidth(),i=["padding",/ne|nw|n/.test(t)?"Top":/se|sw|s/.test(t)?"Bottom":/^e$/.test(t)?"Right":"Left"].join(""),e.css(i,s),this._proportionallyResize()),this._handles=this._handles.add(this.handles[t])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){a.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._addedHandles.remove()},_mouseCapture:function(e){var t,i,s=!1;for(t in this.handles)(i=X(this.handles[t])[0])!==e.target&&!X.contains(i,e.target)||(s=!0);return!this.options.disabled&&s},_mouseStart:function(e){var t,i,s=this.options,n=this.element;return this.resizing=!0,this._renderProxy(),t=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),s.containment&&(t+=X(s.containment).scrollLeft()||0,i+=X(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:t,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:n.width(),height:n.height()},this.originalSize=this._helper?{width:n.outerWidth(),height:n.outerHeight()}:{width:n.width(),height:n.height()},this.sizeDiff={width:n.outerWidth()-n.width(),height:n.outerHeight()-n.height()},this.originalPosition={left:t,top:i},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=X(".ui-resizable-"+this.axis).css("cursor"),X("body").css("cursor","auto"===s?this.axis+"-resize":s),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var t=this.originalMousePosition,i=this.axis,s=e.pageX-t.left||0,t=e.pageY-t.top||0,i=this._change[i];return this._updatePrevProperties(),i&&(t=i.apply(this,[e,s,t]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(t=this._updateRatio(t,e)),t=this._respectSize(t,e),this._updateCache(t),this._propagate("resize",e),t=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),X.isEmptyObject(t)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges())),!1},_mouseStop:function(e){this.resizing=!1;var t,i,s,n=this.options,r=this;return this._helper&&(s=(t=(i=this._proportionallyResizeElements).length&&/textarea/i.test(i[0].nodeName))&&this._hasScroll(i[0],"left")?0:r.sizeDiff.height,i=t?0:r.sizeDiff.width,t={width:r.helper.width()-i,height:r.helper.height()-s},i=parseFloat(r.element.css("left"))+(r.position.left-r.originalPosition.left)||null,s=parseFloat(r.element.css("top"))+(r.position.top-r.originalPosition.top)||null,n.animate||this.element.css(X.extend(t,{top:s,left:i})),r.helper.height(r.size.height),r.helper.width(r.size.width),this._helper&&!n.animate&&this._proportionallyResize()),X("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,s=this.options,n={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0};(this._aspectRatio||e)&&(t=n.minHeight*this.aspectRatio,i=n.minWidth/this.aspectRatio,s=n.maxHeight*this.aspectRatio,e=n.maxWidth/this.aspectRatio,t>n.minWidth&&(n.minWidth=t),i>n.minHeight&&(n.minHeight=i),s<n.maxWidth&&(n.maxWidth=s),e<n.maxHeight&&(n.maxHeight=e)),this._vBoundaries=n},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,s=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,s=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,n=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,r=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,a=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,o=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,h=/sw|nw|w/.test(i),i=/nw|ne|n/.test(i);return r&&(e.width=t.minWidth),a&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),n&&(e.height=t.maxHeight),r&&h&&(e.left=o-t.minWidth),s&&h&&(e.left=o-t.maxWidth),a&&i&&(e.top=l-t.minHeight),n&&i&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],s=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],n=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)i[t]=parseFloat(s[t])||0,i[t]+=parseFloat(n[t])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,t=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||X("<div></div>").css({overflow:"hidden"}),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++t.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize;return{left:this.originalPosition.left+t,width:i.width-t}},n:function(e,t,i){var s=this.originalSize;return{top:this.originalPosition.top+i,height:s.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(e,t,i){return X.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,t,i]))},sw:function(e,t,i){return X.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,t,i]))},ne:function(e,t,i){return X.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,t,i]))},nw:function(e,t,i){return X.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,t,i]))}},_propagate:function(e,t){X.ui.plugin.call(this,e,[t,this.ui()]),"resize"!==e&&this._trigger(e,t,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),X.ui.plugin.add("resizable","animate",{stop:function(t){var i=X(this).resizable("instance"),e=i.options,s=i._proportionallyResizeElements,n=(a=s.length&&/textarea/i.test(s[0].nodeName))&&i._hasScroll(s[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,a={width:i.size.width-r,height:i.size.height-n},r=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,n=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(X.extend(a,n&&r?{top:n,left:r}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var e={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};s&&s.length&&X(s[0]).css({width:e.width,height:e.height}),i._updateCache(e),i._propagate("resize",t)}})}}),X.ui.plugin.add("resizable","containment",{start:function(){var i,s,n=X(this).resizable("instance"),e=n.options,t=n.element,r=e.containment,a=r instanceof X?r.get(0):/parent/.test(r)?t.parent().get(0):r;a&&(n.containerElement=X(a),/document/.test(r)||r===document?(n.containerOffset={left:0,top:0},n.containerPosition={left:0,top:0},n.parentData={element:X(document),left:0,top:0,width:X(document).width(),height:X(document).height()||document.body.parentNode.scrollHeight}):(i=X(a),s=[],X(["Top","Right","Left","Bottom"]).each(function(e,t){s[e]=n._num(i.css("padding"+t))}),n.containerOffset=i.offset(),n.containerPosition=i.position(),n.containerSize={height:i.innerHeight()-s[3],width:i.innerWidth()-s[1]},e=n.containerOffset,t=n.containerSize.height,r=n.containerSize.width,r=n._hasScroll(a,"left")?a.scrollWidth:r,t=n._hasScroll(a)?a.scrollHeight:t,n.parentData={element:a,left:e.left,top:e.top,width:r,height:t}))},resize:function(e){var t=X(this).resizable("instance"),i=t.options,s=t.containerOffset,n=t.position,r=t._aspectRatio||e.shiftKey,a={top:0,left:0},o=t.containerElement,e=!0;o[0]!==document&&/static/.test(o.css("position"))&&(a=s),n.left<(t._helper?s.left:0)&&(t.size.width=t.size.width+(t._helper?t.position.left-s.left:t.position.left-a.left),r&&(t.size.height=t.size.width/t.aspectRatio,e=!1),t.position.left=i.helper?s.left:0),n.top<(t._helper?s.top:0)&&(t.size.height=t.size.height+(t._helper?t.position.top-s.top:t.position.top),r&&(t.size.width=t.size.height*t.aspectRatio,e=!1),t.position.top=t._helper?s.top:0),i=t.containerElement.get(0)===t.element.parent().get(0),n=/relative|absolute/.test(t.containerElement.css("position")),i&&n?(t.offset.left=t.parentData.left+t.position.left,t.offset.top=t.parentData.top+t.position.top):(t.offset.left=t.element.offset().left,t.offset.top=t.element.offset().top),n=Math.abs(t.sizeDiff.width+(t._helper?t.offset.left-a.left:t.offset.left-s.left)),s=Math.abs(t.sizeDiff.height+(t._helper?t.offset.top-a.top:t.offset.top-s.top)),n+t.size.width>=t.parentData.width&&(t.size.width=t.parentData.width-n,r&&(t.size.height=t.size.width/t.aspectRatio,e=!1)),s+t.size.height>=t.parentData.height&&(t.size.height=t.parentData.height-s,r&&(t.size.width=t.size.height*t.aspectRatio,e=!1)),e||(t.position.left=t.prevPosition.left,t.position.top=t.prevPosition.top,t.size.width=t.prevSize.width,t.size.height=t.prevSize.height)},stop:function(){var e=X(this).resizable("instance"),t=e.options,i=e.containerOffset,s=e.containerPosition,n=e.containerElement,r=(o=X(e.helper)).offset(),a=o.outerWidth()-e.sizeDiff.width,o=o.outerHeight()-e.sizeDiff.height;e._helper&&!t.animate&&/relative/.test(n.css("position"))&&X(this).css({left:r.left-s.left-i.left,width:a,height:o}),e._helper&&!t.animate&&/static/.test(n.css("position"))&&X(this).css({left:r.left-s.left-i.left,width:a,height:o})}}),X.ui.plugin.add("resizable","alsoResize",{start:function(){var e=X(this).resizable("instance").options;X(e.alsoResize).each(function(){var e=X(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})})},resize:function(e,i){var t=X(this).resizable("instance"),s=t.options,n=t.originalSize,r=t.originalPosition,a={height:t.size.height-n.height||0,width:t.size.width-n.width||0,top:t.position.top-r.top||0,left:t.position.left-r.left||0};X(s.alsoResize).each(function(){var e=X(this),s=X(this).data("ui-resizable-alsoresize"),n={},t=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];X.each(t,function(e,t){var i=(s[t]||0)+(a[t]||0);i&&0<=i&&(n[t]=i||null)}),e.css(n)})},stop:function(){X(this).removeData("ui-resizable-alsoresize")}}),X.ui.plugin.add("resizable","ghost",{start:function(){var e=X(this).resizable("instance"),t=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:t.height,width:t.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),!1!==X.uiBackCompat&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=X(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=X(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),X.ui.plugin.add("resizable","grid",{resize:function(){var e,t=X(this).resizable("instance"),i=t.options,s=t.size,n=t.originalSize,r=t.originalPosition,a=t.axis,o="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=o[0]||1,h=o[1]||1,p=Math.round((s.width-n.width)/l)*l,u=Math.round((s.height-n.height)/h)*h,c=n.width+p,d=n.height+u,y=i.maxWidth&&i.maxWidth<c,m=i.maxHeight&&i.maxHeight<d,f=i.minWidth&&i.minWidth>c,s=i.minHeight&&i.minHeight>d;i.grid=o,f&&(c+=l),s&&(d+=h),y&&(c-=l),m&&(d-=h),/^(se|s|e)$/.test(a)?(t.size.width=c,t.size.height=d):/^(ne)$/.test(a)?(t.size.width=c,t.size.height=d,t.position.top=r.top-u):/^(sw)$/.test(a)?(t.size.width=c,t.size.height=d,t.position.left=r.left-p):((d-h<=0||c-l<=0)&&(e=t._getPaddingPlusBorderDimensions(this)),0<d-h?(t.size.height=d,t.position.top=r.top-u):(d=h-e.height,t.size.height=d,t.position.top=r.top+n.height-d),0<c-l?(t.size.width=c,t.position.left=r.left-p):(c=l-e.width,t.size.width=c,t.position.left=r.left+n.width-c))}}),X.ui.resizable,X.widget("ui.selectable",X.ui.mouse,{version:"1.13.0",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var i=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){i.elementPos=X(i.element[0]).offset(),i.selectees=X(i.options.filter,i.element[0]),i._addClass(i.selectees,"ui-selectee"),i.selectees.each(function(){var e=X(this),t={left:(t=e.offset()).left-i.elementPos.left,top:t.top-i.elementPos.top};X.data(this,"selectable-item",{element:this,$element:e,left:t.left,top:t.top,right:t.left+e.outerWidth(),bottom:t.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=X("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(i){var s=this,e=this.options;this.opos=[i.pageX,i.pageY],this.elementPos=X(this.element[0]).offset(),this.options.disabled||(this.selectees=X(e.filter,this.element[0]),this._trigger("start",i),X(e.appendTo).append(this.helper),this.helper.css({left:i.pageX,top:i.pageY,width:0,height:0}),e.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var e=X.data(this,"selectable-item");e.startselected=!0,i.metaKey||i.ctrlKey||(s._removeClass(e.$element,"ui-selected"),e.selected=!1,s._addClass(e.$element,"ui-unselecting"),e.unselecting=!0,s._trigger("unselecting",i,{unselecting:e.element}))}),X(i.target).parents().addBack().each(function(){var e,t=X.data(this,"selectable-item");if(t)return e=!i.metaKey&&!i.ctrlKey||!t.$element.hasClass("ui-selected"),s._removeClass(t.$element,e?"ui-unselecting":"ui-selected")._addClass(t.$element,e?"ui-selecting":"ui-unselecting"),t.unselecting=!e,t.selecting=e,(t.selected=e)?s._trigger("selecting",i,{selecting:t.element}):s._trigger("unselecting",i,{unselecting:t.element}),!1}))},_mouseDrag:function(s){var e,n,r,a,o,l,h;if(this.dragged=!0,!this.options.disabled)return r=(n=this).options,a=this.opos[0],o=this.opos[1],l=s.pageX,h=s.pageY,l<a&&(e=l,l=a,a=e),h<o&&(e=h,h=o,o=e),this.helper.css({left:a,top:o,width:l-a,height:h-o}),this.selectees.each(function(){var e=X.data(this,"selectable-item"),t=!1,i={};e&&e.element!==n.element[0]&&(i.left=e.left+n.elementPos.left,i.right=e.right+n.elementPos.left,i.top=e.top+n.elementPos.top,i.bottom=e.bottom+n.elementPos.top,"touch"===r.tolerance?t=!(i.left>l||i.right<a||i.top>h||i.bottom<o):"fit"===r.tolerance&&(t=i.left>a&&i.right<l&&i.top>o&&i.bottom<h),t?(e.selected&&(n._removeClass(e.$element,"ui-selected"),e.selected=!1),e.unselecting&&(n._removeClass(e.$element,"ui-unselecting"),e.unselecting=!1),e.selecting||(n._addClass(e.$element,"ui-selecting"),e.selecting=!0,n._trigger("selecting",s,{selecting:e.element}))):(e.selecting&&((s.metaKey||s.ctrlKey)&&e.startselected?(n._removeClass(e.$element,"ui-selecting"),e.selecting=!1,n._addClass(e.$element,"ui-selected"),e.selected=!0):(n._removeClass(e.$element,"ui-selecting"),e.selecting=!1,e.startselected&&(n._addClass(e.$element,"ui-unselecting"),e.unselecting=!0),n._trigger("unselecting",s,{unselecting:e.element}))),!e.selected||s.metaKey||s.ctrlKey||e.startselected||(n._removeClass(e.$element,"ui-selected"),e.selected=!1,n._addClass(e.$element,"ui-unselecting"),e.unselecting=!0,n._trigger("unselecting",s,{unselecting:e.element}))))}),!1},_mouseStop:function(t){var i=this;return this.dragged=!1,X(".ui-unselecting",this.element[0]).each(function(){var e=X.data(this,"selectable-item");i._removeClass(e.$element,"ui-unselecting"),e.unselecting=!1,e.startselected=!1,i._trigger("unselected",t,{unselected:e.element})}),X(".ui-selecting",this.element[0]).each(function(){var e=X.data(this,"selectable-item");i._removeClass(e.$element,"ui-selecting")._addClass(e.$element,"ui-selected"),e.selecting=!1,e.selected=!0,e.startselected=!0,i._trigger("selected",t,{selected:e.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),X.widget("ui.sortable",X.ui.mouse,{version:"1.13.0",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return t<=e&&e<t+i},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),X.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var e=this.items.length-1;0<=e;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,t){var i=null,s=!1,n=this;return!(this.reverting||this.options.disabled||"static"===this.options.type||(this._refreshItems(e),X(e.target).parents().each(function(){if(X.data(this,n.widgetName+"-item")===n)return i=X(this),!1}),!(i=X.data(e.target,n.widgetName+"-item")===n?X(e.target):i)||this.options.handle&&!t&&(X(this.options.handle,i).find("*").addBack().each(function(){this===e.target&&(s=!0)}),!s)||(this.currentItem=i,this._removeCurrentsFromItems(),0)))},_mouseStart:function(e,t,i){var s,n,r=this.options;if((this.currentContainer=this).refreshPositions(),this.appendTo=X("parent"!==r.appendTo?r.appendTo:this.currentItem.parent()),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},X.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),this.scrollParent=this.placeholder.scrollParent(),X.extend(this.offset,{parent:this._getParentOffset()}),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(n=this.document.find("body"),this.storedCursor=n.css("cursor"),n.css("cursor",r.cursor),this.storedStylesheet=X("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(n)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(s=this.containers.length-1;0<=s;s--)this.containers[s]._trigger("activate",e,this._uiHash(this));return X.ui.ddmanager&&(X.ui.ddmanager.current=this),X.ui.ddmanager&&!r.dropBehaviour&&X.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this.helper.parent().is(this.appendTo)||(this.helper.detach().appendTo(this.appendTo),this.offset.parent=this._getParentOffset()),this.position=this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,this.lastPositionAbs=this.positionAbs=this._convertPositionTo("absolute"),this._mouseDrag(e),!0},_scroll:function(e){var t=this.options,i=!1;return this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<t.scrollSensitivity?this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop+t.scrollSpeed:e.pageY-this.overflowOffset.top<t.scrollSensitivity&&(this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop-t.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<t.scrollSensitivity?this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft+t.scrollSpeed:e.pageX-this.overflowOffset.left<t.scrollSensitivity&&(this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft-t.scrollSpeed)):(e.pageY-this.document.scrollTop()<t.scrollSensitivity?i=this.document.scrollTop(this.document.scrollTop()-t.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<t.scrollSensitivity&&(i=this.document.scrollTop(this.document.scrollTop()+t.scrollSpeed)),e.pageX-this.document.scrollLeft()<t.scrollSensitivity?i=this.document.scrollLeft(this.document.scrollLeft()-t.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<t.scrollSensitivity&&(i=this.document.scrollLeft(this.document.scrollLeft()+t.scrollSpeed))),i},_mouseDrag:function(e){var t,i,s,n,r=this.options;if(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),this._contactContainers(e),null!==this.innermostContainer)for(r.scroll&&!1!==this._scroll(e)&&(this._refreshItemPositions(!0),X.ui.ddmanager&&!r.dropBehaviour&&X.ui.ddmanager.prepareOffsets(this,e)),this.dragDirection={vertical:this._getDragVerticalDirection(),horizontal:this._getDragHorizontalDirection()},t=this.items.length-1;0<=t;t--)if(s=(i=this.items[t]).item[0],(n=this._intersectsWithPointer(i))&&i.instance===this.currentContainer&&!(s===this.currentItem[0]||this.placeholder[1===n?"next":"prev"]()[0]===s||X.contains(this.placeholder[0],s)||"semi-dynamic"===this.options.type&&X.contains(this.element[0],s))){if(this.direction=1===n?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(e,i),this._trigger("change",e,this._uiHash());break}return X.ui.ddmanager&&X.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,t){var i,s,n,r;if(e)return X.ui.ddmanager&&!this.options.dropBehaviour&&X.ui.ddmanager.drop(this,e),this.options.revert?(s=(i=this).placeholder.offset(),r={},(n=this.options.axis)&&"x"!==n||(r.left=s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),n&&"y"!==n||(r.top=s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,X(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){i._clear(e)})):this._clear(e,t),!1},cancel:function(){if(this.dragging){this._mouseUp(new X.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;0<=e;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),X.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?X(this.domPosition.prev).after(this.currentItem):X(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var e=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},X(e).each(function(){var e=(X(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);e&&i.push((t.key||e[1]+"[]")+"="+(t.key&&t.expression?e[1]:e[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(e){var t=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},t.each(function(){i.push(X(e.item||this).attr(e.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,r=e.left,a=r+e.width,o=e.top,l=o+e.height,h=this.offset.click.top,p=this.offset.click.left,h="x"===this.options.axis||o<s+h&&s+h<l,p="y"===this.options.axis||r<t+p&&t+p<a;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?h&&p:r<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<a&&o<s+this.helperProportions.height/2&&n-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),e="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width);return!(!t||!e)&&(t=this.dragDirection.vertical,e=this.dragDirection.horizontal,this.floating?"right"===e||"down"===t?2:1:t&&("down"===t?2:1))},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this.dragDirection.vertical,e=this.dragDirection.horizontal;return this.floating&&e?"right"===e&&i||"left"===e&&!i:s&&("down"===s&&t||"up"===s&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!=e&&(0<e?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!=e&&(0<e?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(e){var t,i,s,n,r=[],a=[],o=this._connectWith();if(o&&e)for(t=o.length-1;0<=t;t--)for(i=(s=X(o[t],this.document[0])).length-1;0<=i;i--)(n=X.data(s[i],this.widgetFullName))&&n!==this&&!n.options.disabled&&a.push(["function"==typeof n.options.items?n.options.items.call(n.element):X(n.options.items,n.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),n]);function l(){r.push(this)}for(a.push(["function"==typeof this.options.items?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):X(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),t=a.length-1;0<=t;t--)a[t][0].each(l);return X(r)},_removeCurrentsFromItems:function(){var i=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=X.grep(this.items,function(e){for(var t=0;t<i.length;t++)if(i[t]===e.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var t,i,s,n,r,a,o,l,h=this.items,p=[["function"==typeof this.options.items?this.options.items.call(this.element[0],e,{item:this.currentItem}):X(this.options.items,this.element),this]],u=this._connectWith();if(u&&this.ready)for(t=u.length-1;0<=t;t--)for(i=(s=X(u[t],this.document[0])).length-1;0<=i;i--)(n=X.data(s[i],this.widgetFullName))&&n!==this&&!n.options.disabled&&(p.push(["function"==typeof n.options.items?n.options.items.call(n.element[0],e,{item:this.currentItem}):X(n.options.items,n.element),n]),this.containers.push(n));for(t=p.length-1;0<=t;t--)for(r=p[t][1],l=(a=p[t][i=0]).length;i<l;i++)(o=X(a[i])).data(this.widgetName+"-item",r),h.push({item:o,instance:r,width:0,height:0,left:0,top:0})},_refreshItemPositions:function(e){for(var t,i,s=this.items.length-1;0<=s;s--)t=this.items[s],this.currentContainer&&t.instance!==this.currentContainer&&t.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?X(this.options.toleranceElement,t.item):t.item,e||(t.width=i.outerWidth(),t.height=i.outerHeight()),i=i.offset(),t.left=i.left,t.top=i.top)},refreshPositions:function(e){var t,i;if(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),null!==this.innermostContainer&&this._refreshItemPositions(e),this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(t=this.containers.length-1;0<=t;t--)i=this.containers[t].element.offset(),this.containers[t].containerCache.left=i.left,this.containers[t].containerCache.top=i.top,this.containers[t].containerCache.width=this.containers[t].element.outerWidth(),this.containers[t].containerCache.height=this.containers[t].element.outerHeight();return this},_createPlaceholder:function(i){var s,n,r=(i=i||this).options;r.placeholder&&r.placeholder.constructor!==String||(s=r.placeholder,n=i.currentItem[0].nodeName.toLowerCase(),r.placeholder={element:function(){var e=X("<"+n+">",i.document[0]);return i._addClass(e,"ui-sortable-placeholder",s||i.currentItem[0].className)._removeClass(e,"ui-sortable-helper"),"tbody"===n?i._createTrPlaceholder(i.currentItem.find("tr").eq(0),X("<tr>",i.document[0]).appendTo(e)):"tr"===n?i._createTrPlaceholder(i.currentItem,e):"img"===n&&e.attr("src",i.currentItem.attr("src")),s||e.css("visibility","hidden"),e},update:function(e,t){s&&!r.forcePlaceholderSize||(t.height()&&(!r.forcePlaceholderSize||"tbody"!==n&&"tr"!==n)||t.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10)))}}),i.placeholder=X(r.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder),r.placeholder.update(i,i.placeholder)},_createTrPlaceholder:function(e,t){var i=this;e.children().each(function(){X("<td>&#160;</td>",i.document[0]).attr("colspan",X(this).attr("colspan")||1).appendTo(t)})},_contactContainers:function(e){for(var t,i,s,n,r,a,o,l,h,p=null,u=null,c=this.containers.length-1;0<=c;c--)X.contains(this.currentItem[0],this.containers[c].element[0])||(this._intersectsWith(this.containers[c].containerCache)?p&&X.contains(this.containers[c].element[0],p.element[0])||(p=this.containers[c],u=c):this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",e,this._uiHash(this)),this.containers[c].containerCache.over=0));if(this.innermostContainer=p)if(1===this.containers.length)this.containers[u].containerCache.over||(this.containers[u]._trigger("over",e,this._uiHash(this)),this.containers[u].containerCache.over=1);else{for(i=1e4,s=null,n=(l=p.floating||this._isFloating(this.currentItem))?"left":"top",r=l?"width":"height",h=l?"pageX":"pageY",t=this.items.length-1;0<=t;t--)X.contains(this.containers[u].element[0],this.items[t].item[0])&&this.items[t].item[0]!==this.currentItem[0]&&(a=this.items[t].item.offset()[n],o=!1,e[h]-a>this.items[t][r]/2&&(o=!0),Math.abs(e[h]-a)<i&&(i=Math.abs(e[h]-a),s=this.items[t],this.direction=o?"up":"down"));(s||this.options.dropOnEmpty)&&(this.currentContainer!==this.containers[u]?(s?this._rearrange(e,s,null,!0):this._rearrange(e,null,this.containers[u].element,!0),this._trigger("change",e,this._uiHash()),this.containers[u]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[u],this.options.placeholder.update(this.currentContainer,this.placeholder),this.scrollParent=this.placeholder.scrollParent(),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this.containers[u]._trigger("over",e,this._uiHash(this)),this.containers[u].containerCache.over=1):this.currentContainer.containerCache.over||(this.containers[u]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1))}},_createHelper:function(e){var t=this.options;return(e="function"==typeof t.helper?X(t.helper.apply(this.element[0],[e,this.currentItem])):"clone"===t.helper?this.currentItem.clone():this.currentItem).parents("body").length||this.appendTo[0].appendChild(e[0]),e[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),e[0].style.width&&!t.forceHelperSize||e.width(this.currentItem.width()),e[0].style.height&&!t.forceHelperSize||e.height(this.currentItem.height()),e},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),"left"in(e=Array.isArray(e)?{left:+e[0],top:+e[1]||0}:e)&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&X.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),{top:(e=this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&X.ui.ie?{top:0,left:0}:e).top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,t,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),"document"!==i.containment&&"window"!==i.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===i.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===i.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(e=X(i.containment)[0],t=X(i.containment).offset(),i="hidden"!==X(e).css("overflow"),this.containment=[t.left+(parseInt(X(e).css("borderLeftWidth"),10)||0)+(parseInt(X(e).css("paddingLeft"),10)||0)-this.margins.left,t.top+(parseInt(X(e).css("borderTopWidth"),10)||0)+(parseInt(X(e).css("paddingTop"),10)||0)-this.margins.top,t.left+(i?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(X(e).css("borderLeftWidth"),10)||0)-(parseInt(X(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,t.top+(i?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(X(e).css("borderTopWidth"),10)||0)-(parseInt(X(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,t){t=t||this.position;var i="absolute"===e?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&X.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(s[0].tagName);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():e?0:s.scrollTop())*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():e?0:s.scrollLeft())*i}},_generatePosition:function(e){var t=this.options,i=e.pageX,s=e.pageY,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&X.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(n[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(i=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(i=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),t.grid&&(e=this.originalPageY+Math.round((s-this.originalPageY)/t.grid[1])*t.grid[1],s=!this.containment||e-this.offset.click.top>=this.containment[1]&&e-this.offset.click.top<=this.containment[3]?e:e-this.offset.click.top>=this.containment[1]?e-t.grid[1]:e+t.grid[1],e=this.originalPageX+Math.round((i-this.originalPageX)/t.grid[0])*t.grid[0],i=!this.containment||e-this.offset.click.left>=this.containment[0]&&e-this.offset.click.left<=this.containment[2]?e:e-this.offset.click.left>=this.containment[0]?e-t.grid[0]:e+t.grid[0])),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:n.scrollTop()),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:n.scrollLeft())}},_rearrange:function(e,t,i,s){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(e,t){this.reverting=!1;var i,s=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();function n(t,i,s){return function(e){s._trigger(t,e,i._uiHash(i))}}for(this.fromOutside&&!t&&s.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||s.push(function(e){this._trigger("update",e,this._uiHash())}),this===this.currentContainer||t||(s.push(function(e){this._trigger("remove",e,this._uiHash())}),s.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),s.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer))),i=this.containers.length-1;0<=i;i--)t||s.push(n("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(s.push(n("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(i=0;i<s.length;i++)s[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===X.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var t=e||this;return{helper:t.helper,placeholder:t.placeholder||X([]),position:t.position,originalPosition:t.originalPosition,offset:t.positionAbs,item:t.currentItem,sender:e?e.element:null}}}),X.widget("ui.accordion",{version:"1.13.0",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:function(e){return e.find("> li > :first-child").add(e.find("> :not(li)").even())},heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var e=this.options;this.prevShow=this.prevHide=X(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),e.collapsible||!1!==e.active&&null!=e.active||(e.active=0),this._processPanels(),e.active<0&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():X()}},_createIcons:function(){var e,t=this.options.icons;t&&(e=X("<span>"),this._addClass(e,"ui-accordion-header-icon","ui-icon "+t.header),e.prependTo(this.headers),e=this.active.children(".ui-accordion-header-icon"),this._removeClass(e,t.header)._addClass(e,null,t.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){"active"!==e?("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||!1!==this.options.active||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons())):this._activate(t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",e),this._toggleClass(null,"ui-state-disabled",!!e),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!e)},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var t=X.ui.keyCode,i=this.headers.length,s=this.headers.index(e.target),n=!1;switch(e.keyCode){case t.RIGHT:case t.DOWN:n=this.headers[(s+1)%i];break;case t.LEFT:case t.UP:n=this.headers[(s-1+i)%i];break;case t.SPACE:case t.ENTER:this._eventHandler(e);break;case t.HOME:n=this.headers[0];break;case t.END:n=this.headers[i-1]}n&&(X(e.target).attr("tabIndex",-1),X(n).attr("tabIndex",0),X(n).trigger("focus"),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===X.ui.keyCode.UP&&e.ctrlKey&&X(e.currentTarget).prev().trigger("focus")},refresh:function(){var e=this.options;this._processPanels(),!1===e.active&&!0===e.collapsible||!this.headers.length?(e.active=!1,this.active=X()):!1===e.active?this._activate(0):this.active.length&&!X.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=X()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;"function"==typeof this.options.header?this.headers=this.options.header(this.element):this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),t&&(this._off(e.not(this.headers)),this._off(t.not(this.panels)))},_refresh:function(){var i,e=this.options,t=e.heightStyle,s=this.element.parent();this.active=this._findActive(e.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var e=X(this),t=e.uniqueId().attr("id"),i=e.next(),s=i.uniqueId().attr("id");e.attr("aria-controls",s),i.attr("aria-labelledby",t)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(e.event),"fill"===t?(i=s.height(),this.element.siblings(":visible").each(function(){var e=X(this),t=e.css("position");"absolute"!==t&&"fixed"!==t&&(i-=e.outerHeight(!0))}),this.headers.each(function(){i-=X(this).outerHeight(!0)}),this.headers.next().each(function(){X(this).height(Math.max(0,i-X(this).innerHeight()+X(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.headers.next().each(function(){var e=X(this).is(":visible");e||X(this).show(),i=Math.max(i,X(this).css("height","").height()),e||X(this).hide()}).height(i))},_activate:function(e){(e=this._findActive(e)[0])!==this.active[0]&&(e=e||this.active[0],this._eventHandler({target:e,currentTarget:e,preventDefault:X.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):X()},_setupEvents:function(e){var i={keydown:"_keydown"};e&&X.each(e.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var t=this.options,i=this.active,s=X(e.currentTarget),n=s[0]===i[0],r=n&&t.collapsible,a=r?X():s.next(),o=i.next(),a={oldHeader:i,oldPanel:o,newHeader:r?X():s,newPanel:a};e.preventDefault(),n&&!t.collapsible||!1===this._trigger("beforeActivate",e,a)||(t.active=!r&&this.headers.index(s),this.active=n?X():s,this._toggle(a),this._removeClass(i,"ui-accordion-header-active","ui-state-active"),t.icons&&(i=i.children(".ui-accordion-header-icon"),this._removeClass(i,null,t.icons.activeHeader)._addClass(i,null,t.icons.header)),n||(this._removeClass(s,"ui-accordion-header-collapsed")._addClass(s,"ui-accordion-header-active","ui-state-active"),t.icons&&(n=s.children(".ui-accordion-header-icon"),this._removeClass(n,null,t.icons.header)._addClass(n,null,t.icons.activeHeader)),this._addClass(s.next(),"ui-accordion-content-active")))},_toggle:function(e){var t=e.newPanel,i=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=t,this.prevHide=i,this.options.animate?this._animate(t,i,e):(i.hide(),t.show(),this._toggleComplete(e)),i.attr({"aria-hidden":"true"}),i.prev().attr({"aria-selected":"false","aria-expanded":"false"}),t.length&&i.length?i.prev().attr({tabIndex:-1,"aria-expanded":"false"}):t.length&&this.headers.filter(function(){return 0===parseInt(X(this).attr("tabIndex"),10)}).attr("tabIndex",-1),t.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(e,i,t){var s,n=this,r=0,a=e.css("box-sizing"),o=e.length&&(!i.length||e.index()<i.index()),l=this.options.animate||{},h=o&&l.down||l,o=function(){n._toggleComplete(t)},p=(p="string"==typeof h?h:p)||h.easing||l.easing,u=(u="number"==typeof h?h:u)||h.duration||l.duration;return i.length?e.length?(s=e.show().outerHeight(),i.animate(this.hideProps,{duration:u,easing:p,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(this.showProps,{duration:u,easing:p,complete:o,step:function(e,t){t.now=Math.round(e),"height"!==t.prop?"content-box"===a&&(r+=t.now):"content"!==n.options.heightStyle&&(t.now=Math.round(s-i.outerHeight()-r),r=0)}})):i.animate(this.hideProps,u,p,o):e.animate(this.showProps,u,p,o)},_toggleComplete:function(e){var t=e.oldPanel,i=t.prev();this._removeClass(t,"ui-accordion-content-active"),this._removeClass(i,"ui-accordion-header-active")._addClass(i,"ui-accordion-header-collapsed"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),X.widget("ui.menu",{version:"1.13.0",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.lastMousePosition={x:null,y:null},this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault(),this._activateItem(e)},"click .ui-menu-item":function(e){var t=X(e.target),i=X(X.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&t.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),t.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&i.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":"_activateItem","mousemove .ui-menu-item":"_activateItem",mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this._menuItems().first();t||this.focus(e,i)},blur:function(e){this._delay(function(){X.contains(this.element[0],X.ui.safeActiveElement(this.document[0]))||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e,!0),this.mouseHandled=!1}})},_activateItem:function(e){var t,i;this.previousFilter||e.clientX===this.lastMousePosition.x&&e.clientY===this.lastMousePosition.y||(this.lastMousePosition={x:e.clientX,y:e.clientY},t=X(e.target).closest(".ui-menu-item"),i=X(e.currentTarget),t[0]!==i[0]||i.is(".ui-state-active")||(this._removeClass(i.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(e,i)))},_destroy:function(){var e=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),e.children().each(function(){var e=X(this);e.data("ui-menu-submenu-caret")&&e.remove()})},_keydown:function(e){var t,i,s,n=!0;switch(e.keyCode){case X.ui.keyCode.PAGE_UP:this.previousPage(e);break;case X.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case X.ui.keyCode.HOME:this._move("first","first",e);break;case X.ui.keyCode.END:this._move("last","last",e);break;case X.ui.keyCode.UP:this.previous(e);break;case X.ui.keyCode.DOWN:this.next(e);break;case X.ui.keyCode.LEFT:this.collapse(e);break;case X.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case X.ui.keyCode.ENTER:case X.ui.keyCode.SPACE:this._activate(e);break;case X.ui.keyCode.ESCAPE:this.collapse(e);break;default:t=this.previousFilter||"",s=n=!1,i=96<=e.keyCode&&e.keyCode<=105?(e.keyCode-96).toString():String.fromCharCode(e.keyCode),clearTimeout(this.filterTimer),i===t?s=!0:i=t+i,t=this._filterMenuItems(i),(t=s&&-1!==t.index(this.active.next())?this.active.nextAll(".ui-menu-item"):t).length||(i=String.fromCharCode(e.keyCode),t=this._filterMenuItems(i)),t.length?(this.focus(e,t),this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}n&&e.preventDefault()},_activate:function(e){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var e,t,s=this,n=this.options.icons.submenu,i=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),t=i.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=X(this),t=e.prev(),i=X("<span>").data("ui-menu-submenu-caret",!0);s._addClass(i,"ui-menu-icon","ui-icon "+n),t.attr("aria-haspopup","true").prepend(i),e.attr("aria-labelledby",t.attr("id"))}),this._addClass(t,"ui-menu","ui-widget ui-widget-content ui-front"),(e=i.add(this.element).find(this.options.items)).not(".ui-menu-item").each(function(){var e=X(this);s._isDivider(e)&&s._addClass(e,"ui-menu-divider","ui-widget-content")}),i=(t=e.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(t,"ui-menu-item")._addClass(i,"ui-menu-item-wrapper"),e.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!X.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){var i;"icons"===e&&(i=this.element.find(".ui-menu-icon"),this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,t.submenu)),this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",String(e)),this._toggleClass(null,"ui-state-disabled",!!e)},focus:function(e,t){var i;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),i=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(i=t.children(".ui-menu")).length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(e){var t,i,s;this._hasScroll()&&(i=parseFloat(X.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(X.css(this.activeMenu[0],"paddingTop"))||0,t=e.offset().top-this.activeMenu.offset().top-i-s,i=this.activeMenu.scrollTop(),s=this.activeMenu.height(),e=e.outerHeight(),t<0?this.activeMenu.scrollTop(i+t):s<t+e&&this.activeMenu.scrollTop(i+t-s+e))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",e,{item:this.active}),this.active=null)},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(e){var t=X.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(t)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var e=i?this.element:X(t&&t.target).closest(this.element.find(".ui-menu"));e.length||(e=this.element),this._close(e),this.blur(t),this._removeClass(e.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=e},i?0:this.delay)},_close:function(e){(e=e||(this.active?this.active.parent():this.element)).find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(e){return!X(e.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this._menuItems(this.active.children(".ui-menu")).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_menuItems:function(e){return(e||this.element).find(this.options.items).filter(".ui-menu-item")},_move:function(e,t,i){var s;(s=this.active?"first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").last():this.active[e+"All"](".ui-menu-item").first():s)&&s.length&&this.active||(s=this._menuItems(this.activeMenu)[t]()),this.focus(i,s)},nextPage:function(e){var t,i,s;this.active?this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,s=this.element.innerHeight(),0===X.fn.jquery.indexOf("3.2.")&&(s+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.nextAll(".ui-menu-item").each(function(){return(t=X(this)).offset().top-i-s<0}),this.focus(e,t)):this.focus(e,this._menuItems(this.activeMenu)[this.active?"last":"first"]())):this.next(e)},previousPage:function(e){var t,i,s;this.active?this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,s=this.element.innerHeight(),0===X.fn.jquery.indexOf("3.2.")&&(s+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.prevAll(".ui-menu-item").each(function(){return 0<(t=X(this)).offset().top-i+s}),this.focus(e,t)):this.focus(e,this._menuItems(this.activeMenu).first())):this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||X(e.target).closest(".ui-menu-item");var t={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,t)},_filterMenuItems:function(e){var e=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),t=new RegExp("^"+e,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return t.test(String.prototype.trim.call(X(this).children(".ui-menu-item-wrapper").text()))})}}),X.widget("ui.autocomplete",{version:"1.13.0",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var i,s,n,e="textarea"===(t=this.element[0].nodeName.toLowerCase()),t="input"===t;this.isMultiLine=e||!t&&this._isContentEditable(this.element),this.valueMethod=this.element[e||t?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly"))s=n=i=!0;else{s=n=i=!1;var t=X.ui.keyCode;switch(e.keyCode){case t.PAGE_UP:i=!0,this._move("previousPage",e);break;case t.PAGE_DOWN:i=!0,this._move("nextPage",e);break;case t.UP:i=!0,this._keyEvent("previous",e);break;case t.DOWN:i=!0,this._keyEvent("next",e);break;case t.ENTER:this.menu.active&&(i=!0,e.preventDefault(),this.menu.select(e));break;case t.TAB:this.menu.active&&this.menu.select(e);break;case t.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(e),e.preventDefault());break;default:s=!0,this._searchTimeout(e)}}},keypress:function(e){if(i)return i=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||e.preventDefault());if(!s){var t=X.ui.keyCode;switch(e.keyCode){case t.PAGE_UP:this._move("previousPage",e);break;case t.PAGE_DOWN:this._move("nextPage",e);break;case t.UP:this._keyEvent("previous",e);break;case t.DOWN:this._keyEvent("next",e)}}},input:function(e){if(n)return n=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=X("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().attr({unselectable:"on"}).menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault()},menufocus:function(e,t){var i;if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){X(e.target).trigger(e.originalEvent)});i=t.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:i})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(i.value),(i=t.item.attr("aria-label")||i.value)&&String.prototype.trim.call(i).length&&(this.liveRegion.children().hide(),X("<div>").text(i).appendTo(this.liveRegion))},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==X.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=X("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(e){var t=this.menu.element[0];return e.target===this.element[0]||e.target===t||X.contains(t,e.target)},_closeOnClickOutside:function(e){this._isEventTargetInWidget(e)||this.close()},_appendTo:function(){var e=this.options.appendTo;return(e=(e=e&&(e.jquery||e.nodeType?X(e):this.document.find(e).eq(0)))&&e[0]?e:this.element.closest(".ui-front, dialog")).length?e:this.document[0].body},_initSource:function(){var i,s,n=this;Array.isArray(this.options.source)?(i=this.options.source,this.source=function(e,t){t(X.ui.autocomplete.filter(i,e.term))}):"string"==typeof this.options.source?(s=this.options.source,this.source=function(e,t){n.xhr&&n.xhr.abort(),n.xhr=X.ajax({url:s,data:e,dataType:"json",success:function(e){t(e)},error:function(){t([])}})}):this.source=this.options.source},_searchTimeout:function(s){clearTimeout(this.searching),this.searching=this._delay(function(){var e=this.term===this._value(),t=this.menu.element.is(":visible"),i=s.altKey||s.ctrlKey||s.metaKey||s.shiftKey;e&&(t||i)||(this.selectedItem=null,this.search(null,s))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}.bind(this)},__response:function(e){e=e&&this._normalize(e),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:X.map(e,function(e){return"string"==typeof e?{label:e,value:e}:X.extend({},e,{label:e.label||e.value,value:e.value||e.label})})},_suggest:function(e){var t=this.menu.element.empty();this._renderMenu(t,e),this.isNewMenu=!0,this.menu.refresh(),t.show(),this._resizeMenu(),t.position(X.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(i,e){var s=this;X.each(e,function(e,t){s._renderItemData(i,t)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(e,t){return X("<li>").append(X("<div>").text(t.label)).appendTo(e)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())},_isContentEditable:function(e){if(!e.length)return!1;var t=e.prop("contentEditable");return"inherit"===t?this._isContentEditable(e.parent()):"true"===t}}),X.extend(X.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,t){var i=new RegExp(X.ui.autocomplete.escapeRegex(t),"i");return X.grep(e,function(e){return i.test(e.label||e.value||e)})}}),X.widget("ui.autocomplete",X.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(1<e?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),X("<div>").text(e).appendTo(this.liveRegion))}}),X.ui.autocomplete;var H,c,d,j=/ui-corner-([a-z]){2,6}/g;function W(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:"",selectMonthLabel:"Select month",selectYearLabel:"Select year"},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,onUpdateDatepicker:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},X.extend(this._defaults,this.regional[""]),this.regional.en=X.extend(!0,{},this.regional[""]),this.regional["en-US"]=X.extend(!0,{},this.regional.en),this.dpDiv=V(X("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function V(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.on("mouseout",t,function(){X(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&X(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&X(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",t,q)}function q(){X.datepicker._isDisabledDatepicker((c.inline?c.dpDiv.parent():c.input)[0])||(X(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),X(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&X(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&X(this).addClass("ui-datepicker-next-hover"))}function y(e,t){for(var i in X.extend(e,t),t)null==t[i]&&(e[i]=t[i])}function m(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}X.widget("ui.controlgroup",{version:"1.13.0",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var r=this,a=[];X.each(this.options.items,function(s,e){var t,n;if(e)return"controlgroupLabel"===s?((t=r.element.find(e)).each(function(){var e=X(this);e.children(".ui-controlgroup-label-contents").length||e.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),r._addClass(t,null,"ui-widget ui-widget-content ui-state-default"),void(a=a.concat(t.get()))):void(X.fn[s]&&(n=r["_"+s+"Options"]?r["_"+s+"Options"]("middle"):{classes:{}},r.element.find(e).each(function(){var e=X(this),t=e[s]("instance"),i=X.widget.extend({},n);"button"===s&&e.parent(".ui-spinner").length||((t=t||e[s]()[s]("instance"))&&(i.classes=r._resolveClassesValues(i.classes,t)),e[s](i),i=e[s]("widget"),X.data(i[0],"ui-controlgroup-data",t||e[s]("instance")),a.push(i[0]))})))}),this.childWidgets=X(X.uniqueSort(a)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each(function(){var e=X(this).data("ui-controlgroup-data");e&&e[t]&&e[t]()})},_updateCornerClass:function(e,t){t=this._buildSimpleOptions(t,"label").classes.label,this._removeClass(e,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(e,null,t)},_buildSimpleOptions:function(e,t){var i="vertical"===this.options.direction,s={classes:{}};return s.classes[t]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[e],s},_spinnerOptions:function(e){return(e=this._buildSimpleOptions(e,"ui-spinner")).classes["ui-spinner-up"]="",e.classes["ui-spinner-down"]="",e},_buttonOptions:function(e){return this._buildSimpleOptions(e,"ui-button")},_checkboxradioOptions:function(e){return this._buildSimpleOptions(e,"ui-checkboxradio-label")},_selectmenuOptions:function(e){var t="vertical"===this.options.direction;return{width:t&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[e]}},_resolveClassesValues:function(i,s){var n={};return X.each(i,function(e){var t=s.options.classes[e]||"",t=String.prototype.trim.call(t.replace(j,""));n[e]=(t+" "+i[e]).replace(/\s+/g," ")}),n},_setOption:function(e,t){"direction"===e&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(e,t),"disabled"!==e?this.refresh():this._callChildMethod(t?"disable":"enable")},refresh:function(){var n,r=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),n=this.childWidgets,(n=this.options.onlyVisible?n.filter(":visible"):n).length&&(X.each(["first","last"],function(e,t){var i,s=n[t]().data("ui-controlgroup-data");s&&r["_"+s.widgetName+"Options"]?((i=r["_"+s.widgetName+"Options"](1===n.length?"only":t)).classes=r._resolveClassesValues(i.classes,s),s.element[s.widgetName](i)):r._updateCornerClass(n[t](),t)}),this._callChildMethod("refresh"))}}),X.widget("ui.checkboxradio",[X.ui.formResetMixin,{version:"1.13.0",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var e,t=this,i=this._super()||{};return this._readType(),e=this.element.labels(),this.label=X(e[e.length-1]),this.label.length||X.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){t.originalLabel+=3===this.nodeType?X(this).text():this.outerHTML}),this.originalLabel&&(i.label=this.originalLabel),null!=(e=this.element[0].disabled)&&(i.disabled=e),i},_create:function(){var e=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),e&&this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var e=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===e&&/radio|checkbox/.test(this.type)||X.error("Can't create checkboxradio on element.nodeName="+e+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var e=this.element[0].name,t="input[name='"+X.escapeSelector(e)+"']";return e?(this.form.length?X(this.form[0].elements).filter(t):X(t).filter(function(){return 0===X(this)._form().length})).not(this.element):X([])},_toggleClasses:function(){var e=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",e)._toggleClass(this.icon,null,"ui-icon-blank",!e),"radio"===this.type&&this._getRadioGroup().each(function(){var e=X(this).checkboxradio("instance");e&&e._removeClass(e.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(e,t){if("label"!==e||t){if(this._super(e,t),"disabled"===e)return this._toggleClass(this.label,null,"ui-state-disabled",t),void(this.element[0].disabled=t);this.refresh()}},_updateIcon:function(e){var t="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=X("<span>"),this.iconSpace=X("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(t+=e?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,e?"ui-icon-blank":"ui-icon-check")):t+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",t),e||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var e=this.label.contents().not(this.element[0]);this.icon&&(e=e.not(this.icon[0])),(e=this.iconSpace?e.not(this.iconSpace[0]):e).remove(),this.label.append(this.options.label)},refresh:function(){var e=this.element[0].checked,t=this.element[0].disabled;this._updateIcon(e),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),null!==this.options.label&&this._updateLabel(),t!==this.options.disabled&&this._setOptions({disabled:t})}}]),X.ui.checkboxradio,X.widget("ui.button",{version:"1.13.0",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var e,t=this._super()||{};return this.isInput=this.element.is("input"),null!=(e=this.element[0].disabled)&&(t.disabled=e),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(t.label=this.originalLabel),t},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(e){e.keyCode===X.ui.keyCode.SPACE&&(e.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(e,t){var i="iconPosition"!==e,s=i?this.options.iconPosition:t,e="top"===s||"bottom"===s;this.icon?i&&this._removeClass(this.icon,null,this.options.icon):(this.icon=X("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),i&&this._addClass(this.icon,null,t),this._attachIcon(s),e?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=X("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(s))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(e){this.icon[/^(?:end|bottom)/.test(e)?"before":"after"](this.iconSpace)},_attachIcon:function(e){this.element[/^(?:end|bottom)/.test(e)?"append":"prepend"](this.icon)},_setOptions:function(e){var t=(void 0===e.showLabel?this.options:e).showLabel,i=(void 0===e.icon?this.options:e).icon;t||i||(e.showLabel=!0),this._super(e)},_setOption:function(e,t){"icon"===e&&(t?this._updateIcon(e,t):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===e&&this._updateIcon(e,t),"showLabel"===e&&(this._toggleClass("ui-button-icon-only",null,!t),this._updateTooltip()),"label"===e&&(this.isInput?this.element.val(t):(this.element.html(t),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(e,t),"disabled"===e&&(this._toggleClass(null,"ui-state-disabled",t),(this.element[0].disabled=t)&&this.element.trigger("blur"))},refresh:function(){var e=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOptions({disabled:e}),this._updateTooltip()}}),!1!==X.uiBackCompat&&(X.widget("ui.button",X.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(e,t){"text"!==e?("showLabel"===e&&(this.options.text=t),"icon"===e&&(this.options.icons.primary=t),"icons"===e&&(t.primary?(this._super("icon",t.primary),this._super("iconPosition","beginning")):t.secondary&&(this._super("icon",t.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",t)}}),X.fn.button=(H=X.fn.button,function(i){var e="string"==typeof i,s=Array.prototype.slice.call(arguments,1),n=this;return e?this.length||"instance"!==i?this.each(function(){var e=X(this).attr("type"),t=X.data(this,"ui-"+("checkbox"!==e&&"radio"!==e?"button":"checkboxradio"));return"instance"===i?(n=t,!1):t?"function"!=typeof t[i]||"_"===i.charAt(0)?X.error("no such method '"+i+"' for button widget instance"):(e=t[i].apply(t,s))!==t&&void 0!==e?(n=e&&e.jquery?n.pushStack(e.get()):e,!1):void 0:X.error("cannot call methods on button prior to initialization; attempted to call method '"+i+"'")}):n=void 0:(s.length&&(i=X.widget.extend.apply(null,[i].concat(s))),this.each(function(){var e=X(this).attr("type"),t="checkbox"!==e&&"radio"!==e?"button":"checkboxradio";(e=X.data(this,"ui-"+t))?(e.option(i||{}),e._init&&e._init()):"button"!=t?X(this).checkboxradio(X.extend({icon:!1},i)):H.call(X(this),i)})),n}),X.fn.buttonset=function(){return X.ui.controlgroup||X.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==_typeof(arguments[0])&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),X.ui.button,X.extend(X.ui,{datepicker:{version:"1.13.0"}}),X.extend(W.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return y(this._defaults,e||{}),this},_attachDatepicker:function(e,t){var i,s=e.nodeName.toLowerCase(),n="div"===s||"span"===s;e.id||(this.uuid+=1,e.id="dp"+this.uuid),(i=this._newInst(X(e),n)).settings=X.extend({},t||{}),"input"===s?this._connectDatepicker(e,i):n&&this._inlineDatepicker(e,i)},_newInst:function(e,t){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?V(X("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,t){var i=X(e);t.append=X([]),t.trigger=X([]),i.hasClass(this.markerClassName)||(this._attachments(i,t),i.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(t),X.data(e,"datepicker",t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var i,s=this._get(t,"appendText"),n=this._get(t,"isRTL");t.append&&t.append.remove(),s&&(t.append=X("<span>").addClass(this._appendClass).text(s),e[n?"before":"after"](t.append)),e.off("focus",this._showDatepicker),t.trigger&&t.trigger.remove(),"focus"!==(i=this._get(t,"showOn"))&&"both"!==i||e.on("focus",this._showDatepicker),"button"!==i&&"both"!==i||(s=this._get(t,"buttonText"),i=this._get(t,"buttonImage"),this._get(t,"buttonImageOnly")?t.trigger=X("<img>").addClass(this._triggerClass).attr({src:i,alt:s,title:s}):(t.trigger=X("<button type='button'>").addClass(this._triggerClass),i?t.trigger.html(X("<img>").attr({src:i,alt:s,title:s})):t.trigger.text(s)),e[n?"before":"after"](t.trigger),t.trigger.on("click",function(){return X.datepicker._datepickerShowing&&X.datepicker._lastInput===e[0]?X.datepicker._hideDatepicker():(X.datepicker._datepickerShowing&&X.datepicker._lastInput!==e[0]&&X.datepicker._hideDatepicker(),X.datepicker._showDatepicker(e[0])),!1}))},_autoSize:function(e){var t,i,s,n,r,a;this._get(e,"autoSize")&&!e.inline&&(r=new Date(2009,11,20),(a=this._get(e,"dateFormat")).match(/[DM]/)&&(r.setMonth((t=function(e){for(n=s=i=0;n<e.length;n++)e[n].length>i&&(i=e[n].length,s=n);return s})(this._get(e,a.match(/MM/)?"monthNames":"monthNamesShort"))),r.setDate(t(this._get(e,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-r.getDay())),e.input.attr("size",this._formatDate(e,r).length))},_inlineDatepicker:function(e,t){var i=X(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(t.dpDiv),X.data(e,"datepicker",t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,i,s,n){var r,a=this._dialogInst;return a||(this.uuid+=1,r="dp"+this.uuid,this._dialogInput=X("<input type='text' id='"+r+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),X("body").append(this._dialogInput),(a=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},X.data(this._dialogInput[0],"datepicker",a)),y(a.settings,s||{}),t=t&&t.constructor===Date?this._formatDate(a,t):t,this._dialogInput.val(t),this._pos=n?n.length?n:[n.pageX,n.pageY]:null,this._pos||(r=document.documentElement.clientWidth,s=document.documentElement.clientHeight,t=document.documentElement.scrollLeft||document.body.scrollLeft,n=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[r/2-100+t,s/2-150+n]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),a.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),X.blockUI&&X.blockUI(this.dpDiv),X.data(this._dialogInput[0],"datepicker",a),this},_destroyDatepicker:function(e){var t,i=X(e),s=X.data(e,"datepicker");i.hasClass(this.markerClassName)&&(t=e.nodeName.toLowerCase(),X.removeData(e,"datepicker"),"input"===t?(s.append.remove(),s.trigger.remove(),i.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==t&&"span"!==t||i.removeClass(this.markerClassName).empty(),c===s&&(c=null,this._curInst=null))},_enableDatepicker:function(t){var e,i=X(t),s=X.data(t,"datepicker");i.hasClass(this.markerClassName)&&("input"===(e=t.nodeName.toLowerCase())?(t.disabled=!1,s.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==e&&"span"!==e||((i=i.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=X.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var e,i=X(t),s=X.data(t,"datepicker");i.hasClass(this.markerClassName)&&("input"===(e=t.nodeName.toLowerCase())?(t.disabled=!0,s.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==e&&"span"!==e||((i=i.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=X.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(e){try{return X.data(e,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,i){var s,n,r=this._getInst(e);if(2===arguments.length&&"string"==typeof t)return"defaults"===t?X.extend({},X.datepicker._defaults):r?"all"===t?X.extend({},r.settings):this._get(r,t):null;s=t||{},"string"==typeof t&&((s={})[t]=i),r&&(this._curInst===r&&this._hideDatepicker(),n=this._getDateDatepicker(e,!0),t=this._getMinMaxDate(r,"min"),i=this._getMinMaxDate(r,"max"),y(r.settings,s),null!==t&&void 0!==s.dateFormat&&void 0===s.minDate&&(r.settings.minDate=this._formatDate(r,t)),null!==i&&void 0!==s.dateFormat&&void 0===s.maxDate&&(r.settings.maxDate=this._formatDate(r,i)),"disabled"in s&&(s.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(X(e),r),this._autoSize(r),this._setDate(r,n),this._updateAlternate(r),this._updateDatepicker(r))},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){(e=this._getInst(e))&&this._updateDatepicker(e)},_setDateDatepicker:function(e,t){(e=this._getInst(e))&&(this._setDate(e,t),this._updateDatepicker(e),this._updateAlternate(e))},_getDateDatepicker:function(e,t){return(e=this._getInst(e))&&!e.inline&&this._setDateFromField(e,t),e?this._getDate(e):null},_doKeyDown:function(e){var t,i,s=X.datepicker._getInst(e.target),n=!0,r=s.dpDiv.is(".ui-datepicker-rtl");if(s._keyEvent=!0,X.datepicker._datepickerShowing)switch(e.keyCode){case 9:X.datepicker._hideDatepicker(),n=!1;break;case 13:return(i=X("td."+X.datepicker._dayOverClass+":not(."+X.datepicker._currentClass+")",s.dpDiv))[0]&&X.datepicker._selectDay(e.target,s.selectedMonth,s.selectedYear,i[0]),(t=X.datepicker._get(s,"onSelect"))?(i=X.datepicker._formatDate(s),t.apply(s.input?s.input[0]:null,[i,s])):X.datepicker._hideDatepicker(),!1;case 27:X.datepicker._hideDatepicker();break;case 33:X.datepicker._adjustDate(e.target,e.ctrlKey?-X.datepicker._get(s,"stepBigMonths"):-X.datepicker._get(s,"stepMonths"),"M");break;case 34:X.datepicker._adjustDate(e.target,e.ctrlKey?+X.datepicker._get(s,"stepBigMonths"):+X.datepicker._get(s,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&X.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&X.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&X.datepicker._adjustDate(e.target,r?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&X.datepicker._adjustDate(e.target,e.ctrlKey?-X.datepicker._get(s,"stepBigMonths"):-X.datepicker._get(s,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&X.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&X.datepicker._adjustDate(e.target,r?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&X.datepicker._adjustDate(e.target,e.ctrlKey?+X.datepicker._get(s,"stepBigMonths"):+X.datepicker._get(s,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&X.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else 36===e.keyCode&&e.ctrlKey?X.datepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t,i=X.datepicker._getInst(e.target);if(X.datepicker._get(i,"constrainInput"))return t=X.datepicker._possibleChars(X.datepicker._get(i,"dateFormat")),i=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||i<" "||!t||-1<t.indexOf(i)},_doKeyUp:function(e){if((e=X.datepicker._getInst(e.target)).input.val()!==e.lastVal)try{X.datepicker.parseDate(X.datepicker._get(e,"dateFormat"),e.input?e.input.val():null,X.datepicker._getFormatConfig(e))&&(X.datepicker._setDateFromField(e),X.datepicker._updateAlternate(e),X.datepicker._updateDatepicker(e))}catch(e){}return!0},_showDatepicker:function(e){var t,i,s,n;"input"!==(e=e.target||e).nodeName.toLowerCase()&&(e=X("input",e.parentNode)[0]),X.datepicker._isDisabledDatepicker(e)||X.datepicker._lastInput===e||(n=X.datepicker._getInst(e),X.datepicker._curInst&&X.datepicker._curInst!==n&&(X.datepicker._curInst.dpDiv.stop(!0,!0),n&&X.datepicker._datepickerShowing&&X.datepicker._hideDatepicker(X.datepicker._curInst.input[0])),!1!==(i=(s=X.datepicker._get(n,"beforeShow"))?s.apply(e,[e,n]):{})&&(y(n.settings,i),n.lastVal=null,X.datepicker._lastInput=e,X.datepicker._setDateFromField(n),X.datepicker._inDialog&&(e.value=""),X.datepicker._pos||(X.datepicker._pos=X.datepicker._findPos(e),X.datepicker._pos[1]+=e.offsetHeight),t=!1,X(e).parents().each(function(){return!(t|="fixed"===X(this).css("position"))}),s={left:X.datepicker._pos[0],top:X.datepicker._pos[1]},X.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),X.datepicker._updateDatepicker(n),s=X.datepicker._checkOffset(n,s,t),n.dpDiv.css({position:X.datepicker._inDialog&&X.blockUI?"static":t?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"}),n.inline||(i=X.datepicker._get(n,"showAnim"),s=X.datepicker._get(n,"duration"),n.dpDiv.css("z-index",function(e){for(var t;e.length&&e[0]!==document;){if(("absolute"===(t=e.css("position"))||"relative"===t||"fixed"===t)&&(t=parseInt(e.css("zIndex"),10),!isNaN(t)&&0!==t))return t;e=e.parent()}return 0}(X(e))+1),X.datepicker._datepickerShowing=!0,X.effects&&X.effects.effect[i]?n.dpDiv.show(i,X.datepicker._get(n,"showOptions"),s):n.dpDiv[i||"show"](i?s:null),X.datepicker._shouldFocusInput(n)&&n.input.trigger("focus"),X.datepicker._curInst=n)))},_updateDatepicker:function(e){this.maxRows=4,(c=e).dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var t,i=this._getNumberOfMonths(e),s=i[1],n=e.dpDiv.find("."+this._dayOverClass+" a"),r=X.datepicker._get(e,"onUpdateDatepicker");0<n.length&&q.apply(n.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<s&&e.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",17*s+"em"),e.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===X.datepicker._curInst&&X.datepicker._datepickerShowing&&X.datepicker._shouldFocusInput(e)&&e.input.trigger("focus"),e.yearshtml&&(t=e.yearshtml,setTimeout(function(){t===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year").first().replaceWith(e.yearshtml),t=e.yearshtml=null},0)),r&&r.apply(e.input?e.input[0]:null,[e])},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(e,t,i){var s=e.dpDiv.outerWidth(),n=e.dpDiv.outerHeight(),r=e.input?e.input.outerWidth():0,a=e.input?e.input.outerHeight():0,o=document.documentElement.clientWidth+(i?0:X(document).scrollLeft()),l=document.documentElement.clientHeight+(i?0:X(document).scrollTop());return t.left-=this._get(e,"isRTL")?s-r:0,t.left-=i&&t.left===e.input.offset().left?X(document).scrollLeft():0,t.top-=i&&t.top===e.input.offset().top+a?X(document).scrollTop():0,t.left-=Math.min(t.left,t.left+s>o&&s<o?Math.abs(t.left+s-o):0),t.top-=Math.min(t.top,t.top+n>l&&n<l?Math.abs(n+a):0),t},_findPos:function(e){for(var t=this._getInst(e),i=this._get(t,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||X.expr.pseudos.hidden(e));)e=e[i?"previousSibling":"nextSibling"];return[(t=X(e).offset()).left,t.top]},_hideDatepicker:function(e){var t,i,s=this._curInst;!s||e&&s!==X.data(e,"datepicker")||this._datepickerShowing&&(t=this._get(s,"showAnim"),i=this._get(s,"duration"),e=function(){X.datepicker._tidyDialog(s)},X.effects&&(X.effects.effect[t]||X.effects[t])?s.dpDiv.hide(t,X.datepicker._get(s,"showOptions"),i,e):s.dpDiv["slideDown"===t?"slideUp":"fadeIn"===t?"fadeOut":"hide"](t?i:null,e),t||e(),this._datepickerShowing=!1,(e=this._get(s,"onClose"))&&e.apply(s.input?s.input[0]:null,[s.input?s.input.val():"",s]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),X.blockUI&&(X.unblockUI(),X("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(e){var t;X.datepicker._curInst&&(t=X(e.target),e=X.datepicker._getInst(t[0]),(!(t[0].id===X.datepicker._mainDivId||0!==t.parents("#"+X.datepicker._mainDivId).length||t.hasClass(X.datepicker.markerClassName)||t.closest("."+X.datepicker._triggerClass).length||!X.datepicker._datepickerShowing||X.datepicker._inDialog&&X.blockUI)||t.hasClass(X.datepicker.markerClassName)&&X.datepicker._curInst!==e)&&X.datepicker._hideDatepicker())},_adjustDate:function(e,t,i){var s=X(e),e=this._getInst(s[0]);this._isDisabledDatepicker(s[0])||(this._adjustInstDate(e,t,i),this._updateDatepicker(e))},_gotoToday:function(e){var t=X(e),i=this._getInst(t[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(e=new Date,i.selectedDay=e.getDate(),i.drawMonth=i.selectedMonth=e.getMonth(),i.drawYear=i.selectedYear=e.getFullYear()),this._notifyChange(i),this._adjustDate(t)},_selectMonthYear:function(e,t,i){var s=X(e);(e=this._getInst(s[0]))["selected"+("M"===i?"Month":"Year")]=e["draw"+("M"===i?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(s)},_selectDay:function(e,t,i,s){var n=X(e);X(s).hasClass(this._unselectableClass)||this._isDisabledDatepicker(n[0])||((n=this._getInst(n[0])).selectedDay=n.currentDay=parseInt(X("a",s).attr("data-date")),n.selectedMonth=n.currentMonth=t,n.selectedYear=n.currentYear=i,this._selectDate(e,this._formatDate(n,n.currentDay,n.currentMonth,n.currentYear)))},_clearDate:function(e){e=X(e),this._selectDate(e,"")},_selectDate:function(e,t){var i=X(e),e=this._getInst(i[0]);t=null!=t?t:this._formatDate(e),e.input&&e.input.val(t),this._updateAlternate(e),(i=this._get(e,"onSelect"))?i.apply(e.input?e.input[0]:null,[t,e]):e.input&&e.input.trigger("change"),e.inline?this._updateDatepicker(e):(this._hideDatepicker(),this._lastInput=e.input[0],"object"!=_typeof(e.input[0])&&e.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(e){var t,i,s=this._get(e,"altField");s&&(t=this._get(e,"altFormat")||this._get(e,"dateFormat"),i=this._getDate(e),e=this.formatDate(t,i,this._getFormatConfig(e)),X(document).find(s).val(e))},noWeekends:function(e){return[0<(e=e.getDay())&&e<6,""]},iso8601Week:function(e){var t=new Date(e.getTime());return t.setDate(t.getDate()+4-(t.getDay()||7)),e=t.getTime(),t.setMonth(0),t.setDate(1),Math.floor(Math.round((e-t)/864e5)/7)+1},parseDate:function(t,n,e){if(null==t||null==n)throw"Invalid arguments";if(""===(n="object"==_typeof(n)?n.toString():n+""))return null;for(var i,s,r=0,a="string"!=typeof(a=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff)?a:(new Date).getFullYear()%100+parseInt(a,10),o=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,l=(e?e.dayNames:null)||this._defaults.dayNames,h=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,p=(e?e.monthNames:null)||this._defaults.monthNames,u=-1,c=-1,d=-1,y=-1,m=!1,f=function(e){return(e=O+1<t.length&&t.charAt(O+1)===e)&&O++,e},g=function(e){var t=f(e),t="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,t=new RegExp("^\\d{"+("y"===e?t:1)+","+t+"}");if(t=n.substring(r).match(t))return r+=t[0].length,parseInt(t[0],10);throw"Missing number at position "+r},v=function(e,t,i){var s=-1,t=X.map(f(e)?i:t,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(X.each(t,function(e,t){var i=t[1];if(n.substr(r,i.length).toLowerCase()===i.toLowerCase())return s=t[0],r+=i.length,!1}),-1!==s)return s+1;throw"Unknown name at position "+r},L=function(){if(n.charAt(r)!==t.charAt(O))throw"Unexpected literal at position "+r;r++},O=0;O<t.length;O++)if(m)"'"!==t.charAt(O)||f("'")?L():m=!1;else switch(t.charAt(O)){case"d":d=g("d");break;case"D":v("D",o,l);break;case"o":y=g("o");break;case"m":c=g("m");break;case"M":c=v("M",h,p);break;case"y":u=g("y");break;case"@":u=(s=new Date(g("@"))).getFullYear(),c=s.getMonth()+1,d=s.getDate();break;case"!":u=(s=new Date((g("!")-this._ticksTo1970)/1e4)).getFullYear(),c=s.getMonth()+1,d=s.getDate();break;case"'":f("'")?L():m=!0;break;default:L()}if(r<n.length&&(e=n.substr(r),!/^\s+/.test(e)))throw"Extra/unparsed characters found in date: "+e;if(-1===u?u=(new Date).getFullYear():u<100&&(u+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u<=a?0:-100)),-1<y)for(c=1,d=y;!(d<=(i=this._getDaysInMonth(u,c-1)));)c++,d-=i;if((s=this._daylightSavingAdjust(new Date(u,c-1,d))).getFullYear()!==u||s.getMonth()+1!==c||s.getDate()!==d)throw"Invalid date";return s},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,i){if(!e)return"";function s(e,t,i){var s=""+t;if(p(e))for(;s.length<i;)s="0"+s;return s}function n(e,t,i,s){return(p(e)?s:i)[t]}var r,a=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,l=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,h=(i?i.monthNames:null)||this._defaults.monthNames,p=function(e){return(e=r+1<t.length&&t.charAt(r+1)===e)&&r++,e},u="",c=!1;if(e)for(r=0;r<t.length;r++)if(c)"'"!==t.charAt(r)||p("'")?u+=t.charAt(r):c=!1;else switch(t.charAt(r)){case"d":u+=s("d",e.getDate(),2);break;case"D":u+=n("D",e.getDay(),a,o);break;case"o":u+=s("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=s("m",e.getMonth()+1,2);break;case"M":u+=n("M",e.getMonth(),l,h);break;case"y":u+=p("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":p("'")?u+="'":c=!0;break;default:u+=t.charAt(r)}return u},_possibleChars:function(t){for(var e="",i=!1,s=function(e){return(e=n+1<t.length&&t.charAt(n+1)===e)&&n++,e},n=0;n<t.length;n++)if(i)"'"!==t.charAt(n)||s("'")?e+=t.charAt(n):i=!1;else switch(t.charAt(n)){case"d":case"m":case"y":case"@":e+="0123456789";break;case"D":case"M":return null;case"'":s("'")?e+="'":i=!0;break;default:e+=t.charAt(n)}return e},_get:function(e,t){return(void 0!==e.settings[t]?e.settings:this._defaults)[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),s=e.lastVal=e.input?e.input.val():null,n=this._getDefaultDate(e),r=n,a=this._getFormatConfig(e);try{r=this.parseDate(i,s,a)||n}catch(e){s=t?"":s}e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),e.currentDay=s?r.getDate():0,e.currentMonth=s?r.getMonth():0,e.currentYear=s?r.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(o,e,t){var i,s;return(e=(e=null==e||""===e?t:"string"==typeof e?function(e){try{return X.datepicker.parseDate(X.datepicker._get(o,"dateFormat"),e,X.datepicker._getFormatConfig(o))}catch(e){}for(var t=(e.toLowerCase().match(/^c/)?X.datepicker._getDate(o):null)||new Date,i=t.getFullYear(),s=t.getMonth(),n=t.getDate(),r=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=r.exec(e);a;){switch(a[2]||"d"){case"d":case"D":n+=parseInt(a[1],10);break;case"w":case"W":n+=7*parseInt(a[1],10);break;case"m":case"M":s+=parseInt(a[1],10),n=Math.min(n,X.datepicker._getDaysInMonth(i,s));break;case"y":case"Y":i+=parseInt(a[1],10),n=Math.min(n,X.datepicker._getDaysInMonth(i,s))}a=r.exec(e)}return new Date(i,s,n)}(e):"number"==typeof e?isNaN(e)?t:(i=e,(s=new Date).setDate(s.getDate()+i),s):new Date(e.getTime()))&&"Invalid Date"===e.toString()?t:e)&&(e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)),this._daylightSavingAdjust(e)},_daylightSavingAdjust:function(e){return e?(e.setHours(12<e.getHours()?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var s=!t,n=e.selectedMonth,r=e.selectedYear,t=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=t.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=t.getMonth(),e.drawYear=e.selectedYear=e.currentYear=t.getFullYear(),n===e.selectedMonth&&r===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(s?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),i="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){X.datepicker._adjustDate(i,-t,"M")},next:function(){X.datepicker._adjustDate(i,+t,"M")},hide:function(){X.datepicker._hideDatepicker()},today:function(){X.datepicker._gotoToday(i)},selectDay:function(){return X.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return X.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return X.datepicker._selectMonthYear(i,this,"Y"),!1}};X(this).on(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,s,n,r,I,R,z,B,a,o,U,l,h,p,u,c,d,y,m,f,g,G,v,L,O,b,H,j,w,C,S,x=new Date,W=this._daylightSavingAdjust(new Date(x.getFullYear(),x.getMonth(),x.getDate())),_=this._get(e,"isRTL"),V=this._get(e,"showButtonPanel"),E=this._get(e,"hideIfNoPrevNext"),N=this._get(e,"navigationAsDateFormat"),P=this._getNumberOfMonths(e),T=this._get(e,"showCurrentAtPos"),x=this._get(e,"stepMonths"),q=1!==P[0]||1!==P[1],M=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),A=this._getMinMaxDate(e,"min"),F=this._getMinMaxDate(e,"max"),k=e.drawMonth-T,D=e.drawYear;if(k<0&&(k+=12,D--),F)for(t=this._daylightSavingAdjust(new Date(F.getFullYear(),F.getMonth()-P[0]*P[1]+1,F.getDate())),t=A&&t<A?A:t;this._daylightSavingAdjust(new Date(D,k,1))>t;)--k<0&&(k=11,D--);for(e.drawMonth=k,e.drawYear=D,T=this._get(e,"prevText"),T=N?this.formatDate(T,this._daylightSavingAdjust(new Date(D,k-x,1)),this._getFormatConfig(e)):T,i=this._canAdjustMonth(e,-1,D,k)?X("<a>").attr({class:"ui-datepicker-prev ui-corner-all","data-handler":"prev","data-event":"click",title:T}).append(X("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(_?"e":"w")).text(T))[0].outerHTML:E?"":X("<a>").attr({class:"ui-datepicker-prev ui-corner-all ui-state-disabled",title:T}).append(X("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(_?"e":"w")).text(T))[0].outerHTML,T=this._get(e,"nextText"),T=N?this.formatDate(T,this._daylightSavingAdjust(new Date(D,k+x,1)),this._getFormatConfig(e)):T,s=this._canAdjustMonth(e,1,D,k)?X("<a>").attr({class:"ui-datepicker-next ui-corner-all","data-handler":"next","data-event":"click",title:T}).append(X("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(_?"w":"e")).text(T))[0].outerHTML:E?"":X("<a>").attr({class:"ui-datepicker-next ui-corner-all ui-state-disabled",title:T}).append(X("<span>").attr("class","ui-icon ui-icon-circle-triangle-"+(_?"w":"e")).text(T))[0].outerHTML,x=this._get(e,"currentText"),E=this._get(e,"gotoCurrent")&&e.currentDay?M:W,x=N?this.formatDate(x,E,this._getFormatConfig(e)):x,T="",e.inline||(T=X("<button>").attr({type:"button",class:"ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all","data-handler":"hide","data-event":"click"}).text(this._get(e,"closeText"))[0].outerHTML),N="",V&&(N=X("<div class='ui-datepicker-buttonpane ui-widget-content'>").append(_?T:"").append(this._isInRange(e,E)?X("<button>").attr({type:"button",class:"ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all","data-handler":"today","data-event":"click"}).text(x):"").append(_?"":T)[0].outerHTML),n=parseInt(this._get(e,"firstDay"),10),n=isNaN(n)?0:n,r=this._get(e,"showWeek"),I=this._get(e,"dayNames"),R=this._get(e,"dayNamesMin"),z=this._get(e,"monthNames"),B=this._get(e,"monthNamesShort"),a=this._get(e,"beforeShowDay"),o=this._get(e,"showOtherMonths"),U=this._get(e,"selectOtherMonths"),l=this._getDefaultDate(e),h="",u=0;u<P[0];u++){for(c="",this.maxRows=4,d=0;d<P[1];d++){if(y=this._daylightSavingAdjust(new Date(D,k,e.selectedDay)),m=" ui-corner-all",f="",q){if(f+="<div class='ui-datepicker-group",1<P[1])switch(d){case 0:f+=" ui-datepicker-group-first",m=" ui-corner-"+(_?"right":"left");break;case P[1]-1:f+=" ui-datepicker-group-last",m=" ui-corner-"+(_?"left":"right");break;default:f+=" ui-datepicker-group-middle",m=""}f+="'>"}for(f+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+m+"'>"+(/all|left/.test(m)&&0===u?_?s:i:"")+(/all|right/.test(m)&&0===u?_?i:s:"")+this._generateMonthYearHeader(e,k,D,A,F,0<u||0<d,z,B)+"</div><table class='ui-datepicker-calendar'><thead><tr>",g=r?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",p=0;p<7;p++)g+="<th scope='col'"+(5<=(p+n+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+I[G=(p+n)%7]+"'>"+R[G]+"</span></th>";for(f+=g+"</tr></thead><tbody>",L=this._getDaysInMonth(D,k),D===e.selectedYear&&k===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,L)),v=(this._getFirstDayOfMonth(D,k)-n+7)%7,L=Math.ceil((v+L)/7),O=q&&this.maxRows>L?this.maxRows:L,this.maxRows=O,b=this._daylightSavingAdjust(new Date(D,k,1-v)),H=0;H<O;H++){for(f+="<tr>",j=r?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(b)+"</td>":"",p=0;p<7;p++)w=a?a.apply(e.input?e.input[0]:null,[b]):[!0,""],S=(C=b.getMonth()!==k)&&!U||!w[0]||A&&b<A||F&&F<b,j+="<td class='"+(5<=(p+n+6)%7?" ui-datepicker-week-end":"")+(C?" ui-datepicker-other-month":"")+(b.getTime()===y.getTime()&&k===e.selectedMonth&&e._keyEvent||l.getTime()===b.getTime()&&l.getTime()===y.getTime()?" "+this._dayOverClass:"")+(S?" "+this._unselectableClass+" ui-state-disabled":"")+(C&&!o?"":" "+w[1]+(b.getTime()===M.getTime()?" "+this._currentClass:"")+(b.getTime()===W.getTime()?" ui-datepicker-today":""))+"'"+(C&&!o||!w[2]?"":" title='"+w[2].replace(/'/g,"&#39;")+"'")+(S?"":" data-handler='selectDay' data-event='click' data-month='"+b.getMonth()+"' data-year='"+b.getFullYear()+"'")+">"+(C&&!o?"&#xa0;":S?"<span class='ui-state-default'>"+b.getDate()+"</span>":"<a class='ui-state-default"+(b.getTime()===W.getTime()?" ui-state-highlight":"")+(b.getTime()===M.getTime()?" ui-state-active":"")+(C?" ui-priority-secondary":"")+"' href='#' aria-current='"+(b.getTime()===M.getTime()?"true":"false")+"' data-date='"+b.getDate()+"'>"+b.getDate()+"</a>")+"</td>",b.setDate(b.getDate()+1),b=this._daylightSavingAdjust(b);f+=j+"</tr>"}11<++k&&(k=0,D++),c+=f+="</tbody></table>"+(q?"</div>"+(0<P[0]&&d===P[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}h+=c}return h+=N,e._keyEvent=!1,h},_generateMonthYearHeader:function(e,t,i,s,n,r,a,o){var l,h,p,u,c,d,y=this._get(e,"changeMonth"),m=this._get(e,"changeYear"),f=this._get(e,"showMonthAfterYear"),g=this._get(e,"selectMonthLabel"),v=this._get(e,"selectYearLabel"),L="<div class='ui-datepicker-title'>",O="";if(r||!y)O+="<span class='ui-datepicker-month'>"+a[t]+"</span>";else{for(l=s&&s.getFullYear()===i,h=n&&n.getFullYear()===i,O+="<select class='ui-datepicker-month' aria-label='"+g+"' data-handler='selectMonth' data-event='change'>",p=0;p<12;p++)(!l||p>=s.getMonth())&&(!h||p<=n.getMonth())&&(O+="<option value='"+p+"'"+(p===t?" selected='selected'":"")+">"+o[p]+"</option>");O+="</select>"}if(f||(L+=O+(!r&&y&&m?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",r||!m)L+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(a=this._get(e,"yearRange").split(":"),u=(new Date).getFullYear(),c=(g=function(e){return e=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?u+parseInt(e,10):parseInt(e,10),isNaN(e)?u:e})(a[0]),d=Math.max(c,g(a[1]||"")),c=s?Math.max(c,s.getFullYear()):c,d=n?Math.min(d,n.getFullYear()):d,e.yearshtml+="<select class='ui-datepicker-year' aria-label='"+v+"' data-handler='selectYear' data-event='change'>";c<=d;c++)e.yearshtml+="<option value='"+c+"'"+(c===i?" selected='selected'":"")+">"+c+"</option>";e.yearshtml+="</select>",L+=e.yearshtml,e.yearshtml=null}return L+=this._get(e,"yearSuffix"),f&&(L+=(!r&&y&&m?"":"&#xa0;")+O),L+"</div>"},_adjustInstDate:function(e,t,i){var s=e.selectedYear+("Y"===i?t:0),n=e.selectedMonth+("M"===i?t:0),t=Math.min(e.selectedDay,this._getDaysInMonth(s,n))+("D"===i?t:0),t=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(s,n,t)));e.selectedDay=t.getDate(),e.drawMonth=e.selectedMonth=t.getMonth(),e.drawYear=e.selectedYear=t.getFullYear(),"M"!==i&&"Y"!==i||this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),t=i&&t<i?i:t;return(e=this._getMinMaxDate(e,"max"))&&e<t?e:t},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){return null==(e=this._get(e,"numberOfMonths"))?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,s){var n=this._getNumberOfMonths(e),n=this._daylightSavingAdjust(new Date(i,s+(t<0?t:n[0]*n[1]),1));return t<0&&n.setDate(this._getDaysInMonth(n.getFullYear(),n.getMonth())),this._isInRange(e,n)},_isInRange:function(e,t){var i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),n=null,r=null,a=this._get(e,"yearRange");return a&&(e=a.split(":"),a=(new Date).getFullYear(),n=parseInt(e[0],10),r=parseInt(e[1],10),e[0].match(/[+\-].*/)&&(n+=a),e[1].match(/[+\-].*/)&&(r+=a)),(!i||t.getTime()>=i.getTime())&&(!s||t.getTime()<=s.getTime())&&(!n||t.getFullYear()>=n)&&(!r||t.getFullYear()<=r)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,s){return t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear),t=t?"object"==_typeof(t)?t:this._daylightSavingAdjust(new Date(s,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay)),this.formatDate(this._get(e,"dateFormat"),t,this._getFormatConfig(e))}}),X.fn.datepicker=function(e){if(!this.length)return this;X.datepicker.initialized||(X(document).on("mousedown",X.datepicker._checkExternalClick),X.datepicker.initialized=!0),0===X("#"+X.datepicker._mainDivId).length&&X("body").append(X.datepicker.dpDiv);var t=Array.prototype.slice.call(arguments,1);return"string"==typeof e&&("isDisabled"===e||"getDate"===e||"widget"===e)||"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?X.datepicker["_"+e+"Datepicker"].apply(X.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?X.datepicker["_"+e+"Datepicker"].apply(X.datepicker,[this].concat(t)):X.datepicker._attachDatepicker(this,e)})},X.datepicker=new W,X.datepicker.initialized=!1,X.datepicker.uuid=(new Date).getTime(),X.datepicker.version="1.13.0",X.datepicker,X.widget("ui.dialog",{version:"1.13.0",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var t=X(this).css(e).offset().top;t<0&&X(this).css("top",e.top-t)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&X.fn.draggable&&this._makeDraggable(),this.options.resizable&&X.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?X(e):this.document.find(e||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(e=t.parent.children().eq(t.index)).length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:X.noop,enable:X.noop,close:function(e){var t=this;this._isOpen&&!1!==this._trigger("beforeClose",e)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||X.ui.safeBlur(X.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){t._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var i=!1,s=this.uiDialog.siblings(".ui-front:visible").map(function(){return+X(this).css("z-index")}).get();return(s=Math.max.apply(null,s))>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",s+1),i=!0),i&&!t&&this._trigger("focus",e),i},open:function(){var e=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=X(X.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var e=this._focusedElement;(e=(e=(e=(e=(e=e||this.element.find("[autofocus]")).length?e:this.element.find(":tabbable")).length?e:this.uiDialogButtonPane.find(":tabbable")).length?e:this.uiDialogTitlebarClose.filter(":tabbable")).length?e:this.uiDialog).eq(0).trigger("focus")},_restoreTabbableFocus:function(){var e=X.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===e||X.contains(this.uiDialog[0],e)||this._focusTabbable()},_keepFocus:function(e){e.preventDefault(),this._restoreTabbableFocus(),this._delay(this._restoreTabbableFocus)},_createWrapper:function(){this.uiDialog=X("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===X.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);var t,i,s;e.keyCode!==X.ui.keyCode.TAB||e.isDefaultPrevented()||(t=this.uiDialog.find(":tabbable"),i=t.first(),s=t.last(),e.target!==s[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==i[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(this._delay(function(){s.trigger("focus")}),e.preventDefault()):(this._delay(function(){i.trigger("focus")}),e.preventDefault()))},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=X("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(e){X(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=X("<button type='button'></button>").button({label:X("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),e=X("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(e,"ui-dialog-title"),this._title(e),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(e){this.options.title?e.text(this.options.title):e.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=X("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=X("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var s=this,e=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),X.isEmptyObject(e)||Array.isArray(e)&&!e.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(X.each(e,function(e,t){var i;t=X.extend({type:"button"},t="function"==typeof t?{click:t,text:e}:t),i=t.click,e={icon:t.icon,iconPosition:t.iconPosition,showLabel:t.showLabel,icons:t.icons,text:t.text},delete t.click,delete t.icon,delete t.iconPosition,delete t.showLabel,delete t.icons,"boolean"==typeof t.text&&delete t.text,X("<button></button>",t).button(e).appendTo(s.uiButtonSet).on("click",function(){i.apply(s.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var n=this,r=this.options;function a(e){return{position:e.position,offset:e.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,t){n._addClass(X(this),"ui-dialog-dragging"),n._blockFrames(),n._trigger("dragStart",e,a(t))},drag:function(e,t){n._trigger("drag",e,a(t))},stop:function(e,t){var i=t.offset.left-n.document.scrollLeft(),s=t.offset.top-n.document.scrollTop();r.position={my:"left top",at:"left"+(0<=i?"+":"")+i+" top"+(0<=s?"+":"")+s,of:n.window},n._removeClass(X(this),"ui-dialog-dragging"),n._unblockFrames(),n._trigger("dragStop",e,a(t))}})},_makeResizable:function(){var n=this,r=this.options,e=r.resizable,t=this.uiDialog.css("position"),e="string"==typeof e?e:"n,e,s,w,se,sw,ne,nw";function a(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:r.maxWidth,maxHeight:r.maxHeight,minWidth:r.minWidth,minHeight:this._minHeight(),handles:e,start:function(e,t){n._addClass(X(this),"ui-dialog-resizing"),n._blockFrames(),n._trigger("resizeStart",e,a(t))},resize:function(e,t){n._trigger("resize",e,a(t))},stop:function(e,t){var i=(s=n.uiDialog.offset()).left-n.document.scrollLeft(),s=s.top-n.document.scrollTop();r.height=n.uiDialog.height(),r.width=n.uiDialog.width(),r.position={my:"left top",at:"left"+(0<=i?"+":"")+i+" top"+(0<=s?"+":"")+s,of:n.window},n._removeClass(X(this),"ui-dialog-resizing"),n._unblockFrames(),n._trigger("resizeStop",e,a(t))}}).css("position",t)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget(),this._focusedElement=X(e.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),t=X.inArray(this,e);-1!==t&&e.splice(t,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||this.document.data("ui-dialog-instances",e=[]),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(e){var i=this,s=!1,n={};X.each(e,function(e,t){i._setOption(e,t),e in i.sizeRelatedOptions&&(s=!0),e in i.resizableRelatedOptions&&(n[e]=t)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",n)},_setOption:function(e,t){var i,s=this.uiDialog;"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:X("<a>").text(""+this.options.closeText).html()}),"draggable"===e&&((i=s.is(":data(ui-draggable)"))&&!t&&s.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&((i=s.is(":data(ui-resizable)"))&&!t&&s.resizable("destroy"),i&&"string"==typeof t&&s.resizable("option","handles",t),i||!1===t||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),e=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),t=Math.max(0,s.minHeight-e),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-e):"none","auto"===s.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=X(this);return X("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return!!X(e.target).closest(".ui-dialog").length||!!X(e.target).closest(".ui-datepicker").length},_createOverlay:function(){var i,s;this.options.modal&&(i=X.fn.jquery.substring(0,4),s=!0,this._delay(function(){s=!1}),this.document.data("ui-dialog-overlays")||this.document.on("focusin.ui-dialog",function(e){var t;s||(t=this._trackingInstances()[0])._allowInteraction(e)||(e.preventDefault(),t._focusTabbable(),"3.4."!==i&&"3.5."!==i||t._delay(t._restoreTabbableFocus))}.bind(this)),this.overlay=X("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1))},_destroyOverlay:function(){var e;this.options.modal&&this.overlay&&((e=this.document.data("ui-dialog-overlays")-1)?this.document.data("ui-dialog-overlays",e):(this.document.off("focusin.ui-dialog"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null)}}),!1!==X.uiBackCompat&&X.widget("ui.dialog",X.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(e,t){"dialogClass"===e&&this.uiDialog.removeClass(this.options.dialogClass).addClass(t),this._superApply(arguments)}}),X.ui.dialog,X.widget("ui.progressbar",{version:"1.13.0",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=X("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(e){if(void 0===e)return this.options.value;this.options.value=this._constrainedValue(e),this._refreshValue()},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=!1===e,"number"!=typeof e&&(e=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",e),this._toggleClass(null,"ui-state-disabled",!!e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,t=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).width(t.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,e===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=X("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),e===this.options.max&&this._trigger("complete")}}),X.widget("ui.selectmenu",[X.ui.formResetMixin,{version:"1.13.0",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=X()},_drawButton:function(){var e,t=this,i=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(e){this.button.trigger("focus"),e.preventDefault()}}),this.element.hide(),this.button=X("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),e=X("<span>").appendTo(this.button),this._addClass(e,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(i).appendTo(this.button),!1!==this.options.width&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){t._rendered||t._refreshMenu()})},_drawMenu:function(){var i=this;this.menu=X("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=X("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(e,t){e.preventDefault(),i._setSelection(),i._select(t.item.data("ui-selectmenu-item"),e)},focus:function(e,t){t=t.item.data("ui-selectmenu-item"),null!=i.focusIndex&&t.index!==i.focusIndex&&(i._trigger("focus",e,{item:t}),i.isOpen||i._select(t,e)),i.focusIndex=t.index,i.button.attr("aria-activedescendant",i.menuItems.eq(t.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var e=this.element.find("option");this.menu.empty(),this._parseOptions(e),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,e.length&&(e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e)))},_position:function(){this.menuWrap.position(X.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(e){var t=X("<span>");return this._setText(t,e.label),this._addClass(t,"ui-selectmenu-text"),t},_renderMenu:function(s,e){var n=this,r="";X.each(e,function(e,t){var i;t.optgroup!==r&&(i=X("<li>",{text:t.optgroup}),n._addClass(i,"ui-selectmenu-optgroup","ui-menu-divider"+(t.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),i.appendTo(s),r=t.optgroup),n._renderItemData(s,t)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(e,t){var i=X("<li>"),s=X("<div>",{title:t.element.attr("title")});return t.disabled&&this._addClass(i,null,"ui-state-disabled"),this._setText(s,t.label),i.append(s).appendTo(e)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var i,s=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex).parent("li"):(i=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),s+=":not(.ui-state-disabled)"),(s="first"===e||"last"===e?i["first"===e?"prevAll":"nextAll"](s).eq(-1):i[e+"All"](s).eq(0)).length&&this.menuInstance.focus(t,s)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;this.range&&(window.getSelection?((e=window.getSelection()).removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(e){!this.isOpen||X(e.target).closest(".ui-selectmenu-menu, #"+X.escapeSelector(this.ids.button)).length||this.close(e)}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection()).rangeCount&&(this.range=e.getRangeAt(0)):this.range=document.selection.createRange()},click:function(e){this._setSelection(),this._toggle(e)},keydown:function(e){var t=!0;switch(e.keyCode){case X.ui.keyCode.TAB:case X.ui.keyCode.ESCAPE:this.close(e),t=!1;break;case X.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(e);break;case X.ui.keyCode.UP:e.altKey?this._toggle(e):this._move("prev",e);break;case X.ui.keyCode.DOWN:e.altKey?this._toggle(e):this._move("next",e);break;case X.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(e):this._toggle(e);break;case X.ui.keyCode.LEFT:this._move("prev",e);break;case X.ui.keyCode.RIGHT:this._move("next",e);break;case X.ui.keyCode.HOME:case X.ui.keyCode.PAGE_UP:this._move("first",e);break;case X.ui.keyCode.END:case X.ui.keyCode.PAGE_DOWN:this._move("last",e);break;default:this.menu.trigger(e),t=!1}t&&e.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex).parent("li");t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(e)),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==i&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){e=this.menuItems.eq(e.index).attr("id"),this.button.attr({"aria-labelledby":e,"aria-activedescendant":e}),this.menu.attr("aria-activedescendant",e)},_setOption:function(e,t){var i;"icons"===e&&(i=this.button.find("span.ui-icon"),this._removeClass(i,null,this.options.icons.button)._addClass(i,null,t.button)),this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"width"===e&&this._resizeButton()},_setOptionDisabled:function(e){this._super(e),this.menuInstance.option("disabled",e),this.button.attr("aria-disabled",e),this._toggleClass(this.button,null,"ui-state-disabled",e),this.element.prop("disabled",e),e?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var e=this.options.appendTo;return(e=(e=e&&(e.jquery||e.nodeType?X(e):this.document.find(e).eq(0)))&&e[0]?e:this.element.closest(".ui-front, dialog")).length?e:this.document[0].body},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;!1!==e?(null===e&&(e=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(e)):this.button.css("width","")},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var e=this._super();return e.disabled=this.element.prop("disabled"),e},_parseOptions:function(e){var i=this,s=[];e.each(function(e,t){t.hidden||s.push(i._parseOption(X(t),e))}),this.items=s},_parseOption:function(e,t){var i=e.parent("optgroup");return{element:e,index:t,value:e.val(),label:e.text(),optgroup:i.attr("label")||"",disabled:i.prop("disabled")||e.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),X.widget("ui.slider",X.ui.mouse,{version:"1.13.0",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,t=this.options,i=this.element.find(".ui-slider-handle"),s=[],n=t.values&&t.values.length||1;for(i.length>n&&(i.slice(n).remove(),i=i.slice(0,n)),e=i.length;e<n;e++)s.push("<span tabindex='0'></span>");this.handles=i.add(X(s.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(e){X(this).data("ui-slider-handle-index",e).attr("tabIndex",0)})},_createRange:function(){var e=this.options;e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:Array.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=X("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==e.range&&"max"!==e.range||this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var i,s,n,r,t,a,o=this,l=this.options;return!l.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),a={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(a),s=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var t=Math.abs(i-o.values(e));(t<s||s===t&&(e===o._lastChangedValue||o.values(e)===l.min))&&(s=t,n=X(this),r=e)}),!1!==this._start(e,r)&&(this._mouseSliding=!0,this._handleIndex=r,this._addClass(n,null,"ui-state-active"),n.trigger("focus"),t=n.offset(),a=!X(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=a?{left:0,top:0}:{left:e.pageX-t.left-n.width()/2,top:e.pageY-t.top-n.height()/2-(parseInt(n.css("borderTopWidth"),10)||0)-(parseInt(n.css("borderBottomWidth"),10)||0)+(parseInt(n.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,r,i),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},t=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,t),!1},_mouseStop:function(e){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t;return(e=1<(e=(e="horizontal"===this.orientation?(t=this.elementSize.width,e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)))/t)?1:e)<0&&(e=0),"vertical"===this.orientation&&(e=1-e),t=this._valueMax()-this._valueMin(),t=this._valueMin()+e*t,this._trimAlignValue(t)},_uiHash:function(e,t,i){var s={handle:this.handles[e],handleIndex:e,value:void 0!==t?t:this.value()};return this._hasMultipleValues()&&(s.value=void 0!==t?t:this.values(e),s.values=i||this.values()),s},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(e,t){return this._trigger("start",e,this._uiHash(t))},_slide:function(e,t,i){var s,n=this.value(),r=this.values();this._hasMultipleValues()&&(s=this.values(t?0:1),n=this.values(t),2===this.options.values.length&&!0===this.options.range&&(i=0===t?Math.min(s,i):Math.max(s,i)),r[t]=i),i!==n&&!1!==this._trigger("slide",e,this._uiHash(t,i,r))&&(this._hasMultipleValues()?this.values(t,i):this.value(i))},_stop:function(e,t){this._trigger("stop",e,this._uiHash(t))},_change:function(e,t){this._keySliding||this._mouseSliding||(this._lastChangedValue=t,this._trigger("change",e,this._uiHash(t)))},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,t){var i,s,n;if(1<arguments.length)return this.options.values[e]=this._trimAlignValue(t),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!Array.isArray(e))return this._hasMultipleValues()?this._values(e):this.value();for(i=this.options.values,s=e,n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(s[n]),this._change(null,n);this._refreshValue()},_setOption:function(e,t){var i,s=0;switch("range"===e&&!0===this.options.range&&("min"===t?(this.options.value=this._values(0),this.options.values=null):"max"===t&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),Array.isArray(this.options.values)&&(s=this.options.values.length),this._super(e,t),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(t),this.handles.css("horizontal"===t?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=s-1;0<=i;i--)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(e){this._super(e),this._toggleClass(null,"ui-state-disabled",!!e)},_value:function(){var e=this.options.value;return this._trimAlignValue(e)},_values:function(e){var t,i;if(arguments.length)return e=this.options.values[e],this._trimAlignValue(e);if(this._hasMultipleValues()){for(t=this.options.values.slice(),i=0;i<t.length;i+=1)t[i]=this._trimAlignValue(t[i]);return t}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=0<this.options.step?this.options.step:1,i=(e-this._valueMin())%t,e=e-i;return 2*Math.abs(i)>=t&&(e+=0<i?t:-t),parseFloat(e.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),i=this.options.step;(e=Math.round((e-t)/i)*i+t)>this.options.max&&(e-=i),this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min?Math.max(e,this._precisionOf(this.options.min)):e},_precisionOf:function(e){var t=e.toString();return-1===(e=t.indexOf("."))?0:t.length-e-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(e){"vertical"===e&&this.range.css({width:"",left:""}),"horizontal"===e&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var t,i,e,s,n,r=this.options.range,a=this.options,o=this,l=!this._animateOff&&a.animate,h={};this._hasMultipleValues()?this.handles.each(function(e){i=(o.values(e)-o._valueMin())/(o._valueMax()-o._valueMin())*100,h["horizontal"===o.orientation?"left":"bottom"]=i+"%",X(this).stop(1,1)[l?"animate":"css"](h,a.animate),!0===o.options.range&&("horizontal"===o.orientation?(0===e&&o.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},a.animate),1===e&&o.range[l?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:a.animate})):(0===e&&o.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},a.animate),1===e&&o.range[l?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:a.animate}))),t=i}):(e=this.value(),s=this._valueMin(),n=this._valueMax(),i=n!==s?(e-s)/(n-s)*100:0,h["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](h,a.animate),"min"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},a.animate),"max"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:100-i+"%"},a.animate),"min"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},a.animate),"max"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:100-i+"%"},a.animate))},_handleEvents:{keydown:function(e){var t,i,s,n=X(e.target).data("ui-slider-handle-index");switch(e.keyCode){case X.ui.keyCode.HOME:case X.ui.keyCode.END:case X.ui.keyCode.PAGE_UP:case X.ui.keyCode.PAGE_DOWN:case X.ui.keyCode.UP:case X.ui.keyCode.RIGHT:case X.ui.keyCode.DOWN:case X.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(X(e.target),null,"ui-state-active"),!1===this._start(e,n)))return}switch(s=this.options.step,t=i=this._hasMultipleValues()?this.values(n):this.value(),e.keyCode){case X.ui.keyCode.HOME:i=this._valueMin();break;case X.ui.keyCode.END:i=this._valueMax();break;case X.ui.keyCode.PAGE_UP:i=this._trimAlignValue(t+(this._valueMax()-this._valueMin())/this.numPages);break;case X.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(t-(this._valueMax()-this._valueMin())/this.numPages);break;case X.ui.keyCode.UP:case X.ui.keyCode.RIGHT:if(t===this._valueMax())return;i=this._trimAlignValue(t+s);break;case X.ui.keyCode.DOWN:case X.ui.keyCode.LEFT:if(t===this._valueMin())return;i=this._trimAlignValue(t-s)}this._slide(e,n,i)},keyup:function(e){var t=X(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,t),this._change(e,t),this._removeClass(X(e.target),null,"ui-state-active"))}}}),X.widget("ui.spinner",{version:"1.13.0",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var s=this._super(),n=this.element;return X.each(["min","max","step"],function(e,t){var i=n.attr(t);null!=i&&i.length&&(s[t]=i)}),s},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e))},mousewheel:function(e,t){var i=X.ui.safeActiveElement(this.document[0]);if(this.element[0]===i&&t){if(!this.spinning&&!this._start(e))return!1;this._spin((0<t?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(e){var t;function i(){this.element[0]!==X.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=t,this._delay(function(){this.previous=t}))}t=this.element[0]===X.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),e.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),!1!==this._start(e)&&this._repeat(null,X(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){if(X(e.currentTarget).hasClass("ui-state-active"))return!1!==this._start(e)&&void this._repeat(null,X(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&0<this.uiSpinner.height()&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(e){var t=this.options,i=X.ui.keyCode;switch(e.keyCode){case i.UP:return this._repeat(null,1,e),!0;case i.DOWN:return this._repeat(null,-1,e),!0;case i.PAGE_UP:return this._repeat(null,t.page,e),!0;case i.PAGE_DOWN:return this._repeat(null,-t.page,e),!0}return!1},_start:function(e){return!(!this.spinning&&!1===this._trigger("start",e))&&(this.counter||(this.counter=1),this.spinning=!0)},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",t,{value:i})||(this._value(i),this.counter++)},_increment:function(e){var t=this.options.incremental;return t?"function"==typeof t?t(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min?Math.max(e,this._precisionOf(this.options.min)):e},_precisionOf:function(e){var t=e.toString();return-1===(e=t.indexOf("."))?0:t.length-e-1},_adjustValue:function(e){var t=this.options,i=null!==t.min?t.min:0;return e=i+Math.round((e-i)/t.step)*t.step,e=parseFloat(e.toFixed(this._precision())),null!==t.max&&e>t.max?t.max:null!==t.min&&e<t.min?t.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){var i;if("culture"===e||"numberFormat"===e)return i=this._parse(this.element.val()),this.options[e]=t,void this.element.val(this._format(i));"max"!==e&&"min"!==e&&"step"!==e||"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(i=this.buttons.first().find(".ui-icon"),this._removeClass(i,null,this.options.icons.up),this._addClass(i,null,t.up),i=this.buttons.last().find(".ui-icon"),this._removeClass(i,null,this.options.icons.down),this._addClass(i,null,t.down)),this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!e),this.element.prop("disabled",!!e),this.buttons.button(e?"disable":"enable")},_setOptions:m(function(e){this._super(e)}),_parse:function(e){return""===(e="string"==typeof e&&""!==e?window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e:e)||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null!==e&&e===this._adjustValue(e)},_value:function(e,t){var i;""!==e&&null!==(i=this._parse(e))&&(t||(i=this._adjustValue(i)),e=this._format(i)),this.element.val(e),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:m(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:m(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:m(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:m(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){if(!arguments.length)return this._parse(this.element.val());m(this._value).call(this,e)},widget:function(){return this.uiSpinner}}),!1!==X.uiBackCompat&&X.widget("ui.spinner",X.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}}),X.ui.spinner,X.widget("ui.tabs",{version:"1.13.0",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(d=/#.*$/,function(e){var t=e.href.replace(d,""),i=location.href.replace(d,"");try{t=decodeURIComponent(t)}catch(e){}try{i=decodeURIComponent(i)}catch(e){}return 1<e.hash.length&&t===i}),_create:function(){var t=this,e=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,e.collapsible),this._processTabs(),e.active=this._initialActive(),Array.isArray(e.disabled)&&(e.disabled=X.uniqueSort(e.disabled.concat(X.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(e.active):this.active=X(),this._refresh(),this.active.length&&this.load(e.active)},_initialActive:function(){var i=this.options.active,e=this.options.collapsible,s=location.hash.substring(1);return null===i&&(s&&this.tabs.each(function(e,t){if(X(t).attr("aria-controls")===s)return i=e,!1}),null!==(i=null===i?this.tabs.index(this.tabs.filter(".ui-tabs-active")):i)&&-1!==i||(i=!!this.tabs.length&&0)),!1!==i&&-1===(i=this.tabs.index(this.tabs.eq(i)))&&(i=!e&&0),i=!e&&!1===i&&this.anchors.length?0:i},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):X()}},_tabKeydown:function(e){var t=X(X.ui.safeActiveElement(this.document[0])).closest("li"),i=this.tabs.index(t),s=!0;if(!this._handlePageNav(e)){switch(e.keyCode){case X.ui.keyCode.RIGHT:case X.ui.keyCode.DOWN:i++;break;case X.ui.keyCode.UP:case X.ui.keyCode.LEFT:s=!1,i--;break;case X.ui.keyCode.END:i=this.anchors.length-1;break;case X.ui.keyCode.HOME:i=0;break;case X.ui.keyCode.SPACE:return e.preventDefault(),clearTimeout(this.activating),void this._activate(i);case X.ui.keyCode.ENTER:return e.preventDefault(),clearTimeout(this.activating),void this._activate(i!==this.options.active&&i);default:return}e.preventDefault(),clearTimeout(this.activating),i=this._focusNextTab(i,s),e.ctrlKey||e.metaKey||(t.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",i)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===X.ui.keyCode.UP&&(e.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(e){return e.altKey&&e.keyCode===X.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):e.altKey&&e.keyCode===X.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(e,t){for(var i=this.tabs.length-1;-1!==X.inArray(e=(e=i<e?0:e)<0?i:e,this.options.disabled);)e=t?e+1:e-1;return e},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).trigger("focus"),e},_setOption:function(e,t){"active"!==e?(this._super(e,t),"collapsible"===e&&(this._toggleClass("ui-tabs-collapsible",null,t),t||!1!==this.options.active||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t)):this._activate(t)},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,t=this.tablist.children(":has(a[href])");e.disabled=X.map(t.filter(".ui-state-disabled"),function(e){return t.index(e)}),this._processTabs(),!1!==e.active&&this.anchors.length?this.active.length&&!X.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=X()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=X()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var l=this,e=this.tabs,t=this.anchors,i=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(e){X(this).is(".ui-state-disabled")&&e.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){X(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return X("a",this)[0]}).attr({tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=X(),this.anchors.each(function(e,t){var i,s,n,r=X(t).uniqueId().attr("id"),a=X(t).closest("li"),o=a.attr("aria-controls");l._isLocal(t)?(n=(i=t.hash).substring(1),s=l.element.find(l._sanitizeSelector(i))):(n=a.attr("aria-controls")||X({}).uniqueId()[0].id,(s=l.element.find(i="#"+n)).length||(s=l._createPanel(n)).insertAfter(l.panels[e-1]||l.tablist),s.attr("aria-live","polite")),s.length&&(l.panels=l.panels.add(s)),o&&a.data("ui-tabs-aria-controls",o),a.attr({"aria-controls":n,"aria-labelledby":r}),s.attr("aria-labelledby",r)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),e&&(this._off(e.not(this.tabs)),this._off(t.not(this.anchors)),this._off(i.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(e){return X("<div>").attr("id",e).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(e){var t,i;for(Array.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1),i=0;t=this.tabs[i];i++)t=X(t),!0===e||-1!==X.inArray(i,e)?(t.attr("aria-disabled","true"),this._addClass(t,null,"ui-state-disabled")):(t.removeAttr("aria-disabled"),this._removeClass(t,null,"ui-state-disabled"));this.options.disabled=e,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===e)},_setupEvents:function(e){var i={};e&&X.each(e.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,t=this.element.parent();"fill"===e?(i=t.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=X(this),t=e.css("position");"absolute"!==t&&"fixed"!==t&&(i-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=X(this).outerHeight(!0)}),this.panels.each(function(){X(this).height(Math.max(0,i-X(this).innerHeight()+X(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each(function(){i=Math.max(i,X(this).height("").height())}).height(i))},_eventHandler:function(e){var t=this.options,i=this.active,s=X(e.currentTarget).closest("li"),n=s[0]===i[0],r=n&&t.collapsible,a=r?X():this._getPanelForTab(s),o=i.length?this._getPanelForTab(i):X(),i={oldTab:i,oldPanel:o,newTab:r?X():s,newPanel:a};e.preventDefault(),s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||n&&!t.collapsible||!1===this._trigger("beforeActivate",e,i)||(t.active=!r&&this.tabs.index(s),this.active=n?X():s,this.xhr&&this.xhr.abort(),o.length||a.length||X.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(s),e),this._toggle(e,i))},_toggle:function(e,t){var i=this,s=t.newPanel,n=t.oldPanel;function r(){i.running=!1,i._trigger("activate",e,t)}function a(){i._addClass(t.newTab.closest("li"),"ui-tabs-active","ui-state-active"),s.length&&i.options.show?i._show(s,i.options.show,r):(s.show(),r())}this.running=!0,n.length&&this.options.hide?this._hide(n,this.options.hide,function(){i._removeClass(t.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),a()}):(this._removeClass(t.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),n.hide(),a()),n.attr("aria-hidden","true"),t.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),s.length&&n.length?t.oldTab.attr("tabIndex",-1):s.length&&this.tabs.filter(function(){return 0===X(this).attr("tabIndex")}).attr("tabIndex",-1),s.attr("aria-hidden","false"),t.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(e){(e=this._findActive(e))[0]!==this.active[0]&&(e=(e=e.length?e:this.active).find(".ui-tabs-anchor")[0],this._eventHandler({target:e,currentTarget:e,preventDefault:X.noop}))},_findActive:function(e){return!1===e?X():this.tabs.eq(e)},_getIndex:function(e){return"string"==typeof e?this.anchors.index(this.anchors.filter("[href$='"+X.escapeSelector(e)+"']")):e},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){X.data(this,"ui-tabs-destroy")?X(this).remove():X(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var e=X(this),t=e.data("ui-tabs-aria-controls");t?e.attr("aria-controls",t).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var e=this.options.disabled;!1!==e&&(e=void 0!==i&&(i=this._getIndex(i),Array.isArray(e)?X.map(e,function(e){return e!==i?e:null}):X.map(this.tabs,function(e,t){return t!==i?t:null})),this._setOptionDisabled(e))},disable:function(e){var t=this.options.disabled;if(!0!==t){if(void 0===e)t=!0;else{if(e=this._getIndex(e),-1!==X.inArray(e,t))return;t=Array.isArray(t)?X.merge([e],t).sort():[e]}this._setOptionDisabled(t)}},load:function(e,s){function n(e,t){"abort"===t&&r.panels.stop(!1,!0),r._removeClass(i,"ui-tabs-loading"),a.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr}e=this._getIndex(e);var r=this,i=this.tabs.eq(e),e=i.find(".ui-tabs-anchor"),a=this._getPanelForTab(i),o={tab:i,panel:a};this._isLocal(e[0])||(this.xhr=X.ajax(this._ajaxSettings(e,s,o)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(i,"ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.done(function(e,t,i){setTimeout(function(){a.html(e),r._trigger("load",s,o),n(i,t)},1)}).fail(function(e,t){setTimeout(function(){n(e,t)},1)})))},_ajaxSettings:function(e,i,s){var n=this;return{url:e.attr("href").replace(/#.*$/,""),beforeSend:function(e,t){return n._trigger("beforeLoad",i,X.extend({jqXHR:e,ajaxSettings:t},s))}}},_getPanelForTab:function(e){return e=X(e).attr("aria-controls"),this.element.find(this._sanitizeSelector("#"+e))}}),!1!==X.uiBackCompat&&X.widget("ui.tabs",X.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),X.ui.tabs,X.widget("ui.tooltip",{version:"1.13.0",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var e=X(this).attr("title");return X("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(e,t){var i=(e.attr("aria-describedby")||"").split(/\s+/);i.push(t),e.data("ui-tooltip-id",t).attr("aria-describedby",String.prototype.trim.call(i.join(" ")))},_removeDescribedBy:function(e){var t=e.data("ui-tooltip-id"),i=(e.attr("aria-describedby")||"").split(/\s+/);-1!==(t=X.inArray(t,i))&&i.splice(t,1),e.removeData("ui-tooltip-id"),(i=String.prototype.trim.call(i.join(" ")))?e.attr("aria-describedby",i):e.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=X("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=X([])},_setOption:function(e,t){var i=this;this._super(e,t),"content"===e&&X.each(this.tooltips,function(e,t){i._updateContent(t.element)})},_setOptionDisabled:function(e){this[e?"_disable":"_enable"]()},_disable:function(){var s=this;X.each(this.tooltips,function(e,t){var i=X.Event("blur");i.target=i.currentTarget=t.element[0],s.close(i,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var e=X(this);if(e.is("[title]"))return e.data("ui-tooltip-title",e.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var e=X(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))}),this.disabledTitles=X([])},open:function(e){var i=this,t=X(e?e.target:this.element).closest(this.options.items);t.length&&!t.data("ui-tooltip-id")&&(t.attr("title")&&t.data("ui-tooltip-title",t.attr("title")),t.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&t.parents().each(function(){var e,t=X(this);t.data("ui-tooltip-open")&&((e=X.Event("blur")).target=e.currentTarget=this,i.close(e,!0)),t.attr("title")&&(t.uniqueId(),i.parents[this.id]={element:this,title:t.attr("title")},t.attr("title",""))}),this._registerCloseHandlers(e,t),this._updateContent(t,e))},_updateContent:function(t,i){var e=this.options.content,s=this,n=i?i.type:null;if("string"==typeof e||e.nodeType||e.jquery)return this._open(i,t,e);(e=e.call(t[0],function(e){s._delay(function(){t.data("ui-tooltip-open")&&(i&&(i.type=n),this._open(i,t,e))})}))&&this._open(i,t,e)},_open:function(e,t,i){var s,n,r,a=X.extend({},this.options.position);function o(e){a.of=e,n.is(":hidden")||n.position(a)}i&&((s=this._find(t))?s.tooltip.find(".ui-tooltip-content").html(i):(t.is("[title]")&&(e&&"mouseover"===e.type?t.attr("title",""):t.removeAttr("title")),s=this._tooltip(t),n=s.tooltip,this._addDescribedBy(t,n.attr("id")),n.find(".ui-tooltip-content").html(i),this.liveRegion.children().hide(),(i=X("<div>").html(n.find(".ui-tooltip-content").html())).removeAttr("name").find("[name]").removeAttr("name"),i.removeAttr("id").find("[id]").removeAttr("id"),i.appendTo(this.liveRegion),this.options.track&&e&&/^mouse/.test(e.type)?(this._on(this.document,{mousemove:o}),o(e)):n.position(X.extend({of:t},this.options.position)),n.hide(),this._show(n,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(r=this.delayedShow=setInterval(function(){n.is(":visible")&&(o(a.of),clearInterval(r))},13)),this._trigger("open",e,{tooltip:n})))},_registerCloseHandlers:function(e,t){var i={keyup:function(e){e.keyCode===X.ui.keyCode.ESCAPE&&((e=X.Event(e)).currentTarget=t[0],this.close(e,!0))}};t[0]!==this.element[0]&&(i.remove=function(){this._removeTooltip(this._find(t).tooltip)}),e&&"mouseover"!==e.type||(i.mouseleave="close"),e&&"focusin"!==e.type||(i.focusout="close"),this._on(!0,t,i)},close:function(e){var t,i=this,s=X(e?e.currentTarget:this.element),n=this._find(s);n?(t=n.tooltip,n.closing||(clearInterval(this.delayedShow),s.data("ui-tooltip-title")&&!s.attr("title")&&s.attr("title",s.data("ui-tooltip-title")),this._removeDescribedBy(s),n.hiding=!0,t.stop(!0),this._hide(t,this.options.hide,function(){i._removeTooltip(X(this))}),s.removeData("ui-tooltip-open"),this._off(s,"mouseleave focusout keyup"),s[0]!==this.element[0]&&this._off(s,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&X.each(this.parents,function(e,t){X(t.element).attr("title",t.title),delete i.parents[e]}),n.closing=!0,this._trigger("close",e,{tooltip:t}),n.hiding||(n.closing=!1))):s.removeData("ui-tooltip-open")},_tooltip:function(e){var t=X("<div>").attr("role","tooltip"),i=X("<div>").appendTo(t),s=t.uniqueId().attr("id");return this._addClass(i,"ui-tooltip-content"),this._addClass(t,"ui-tooltip","ui-widget ui-widget-content"),t.appendTo(this._appendTo(e)),this.tooltips[s]={element:e,tooltip:t}},_find:function(e){return(e=e.data("ui-tooltip-id"))?this.tooltips[e]:null},_removeTooltip:function(e){clearInterval(this.delayedShow),e.remove(),delete this.tooltips[e.attr("id")]},_appendTo:function(e){return(e=e.closest(".ui-front, dialog")).length?e:this.document[0].body},_destroy:function(){var s=this;X.each(this.tooltips,function(e,t){var i=X.Event("blur"),t=t.element;i.target=i.currentTarget=t[0],s.close(i,!0),X("#"+e).remove(),t.data("ui-tooltip-title")&&(t.attr("title")||t.attr("title",t.data("ui-tooltip-title")),t.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),!1!==X.uiBackCompat&&X.widget("ui.tooltip",X.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var e=this._superApply(arguments);return this.options.tooltipClass&&e.tooltip.addClass(this.options.tooltipClass),e}}),X.ui.tooltip;var f=X,g={},Y=g.toString,Z=/^([\-+])=\s*(\d+\.?\d*)/,K=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),e[4]?(parseInt(e[4],16)/255).toFixed(2):1]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),e[4]?(parseInt(e[4]+e[4],16)/255).toFixed(2):1]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],v=f.Color=function(e,t,i,s){return new f.Color.fn.parse(e,t,i,s)},L={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},$={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},Q=v.support={},O=f("<p>")[0],b=f.each;function x(e){return null==e?e+"":"object"==_typeof(e)?g[Y.call(e)]||"object":_typeof(e)}function _(e,t,i){var s=$[t.type]||{};return null==e?i||!t.def?null:t.def:(e=s.floor?~~e:parseFloat(e),isNaN(e)?t.def:s.mod?(e+s.mod)%s.mod:Math.min(s.max,Math.max(0,e)))}function J(s){var n=v(),r=n._rgba=[];return s=s.toLowerCase(),b(K,function(e,t){var i=(i=t.re.exec(s))&&t.parse(i),t=t.space||"rgba";if(i)return i=n[t](i),n[L[t].cache]=i[L[t].cache],r=n._rgba=i._rgba,!1}),r.length?("0,0,0,0"===r.join()&&f.extend(r,P.transparent),n):P[s]}function E(e,t,i){return 6*(i=(i+1)%1)<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}O.style.cssText="background-color:rgba(1,1,1,.5)",Q.rgba=-1<O.style.backgroundColor.indexOf("rgba"),b(L,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),f.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){g["[object "+t+"]"]=t.toLowerCase()}),(v.fn=f.extend(v.prototype,{parse:function(n,e,t,i){if(void 0===n)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=f(n).css(e),e=void 0);var r=this,s=x(n),a=this._rgba=[];return void 0!==e&&(n=[n,e,t,i],s="array"),"string"===s?this.parse(J(n)||P._default):"array"===s?(b(L.rgba.props,function(e,t){a[t.idx]=_(n[t.idx],t)}),this):"object"===s?(b(L,n instanceof v?function(e,t){n[t.cache]&&(r[t.cache]=n[t.cache].slice())}:function(e,i){var s=i.cache;b(i.props,function(e,t){if(!r[s]&&i.to){if("alpha"===e||null==n[e])return;r[s]=i.to(r._rgba)}r[s][t.idx]=_(n[e],t,!0)}),r[s]&&f.inArray(null,r[s].slice(0,3))<0&&(null==r[s][3]&&(r[s][3]=1),i.from&&(r._rgba=i.from(r[s])))}),this):void 0},is:function(e){var n=v(e),r=!0,a=this;return b(L,function(e,t){var i,s=n[t.cache];return s&&(i=a[t.cache]||t.to&&t.to(a._rgba)||[],b(t.props,function(e,t){if(null!=s[t.idx])return r=s[t.idx]===i[t.idx]})),r}),r},_space:function(){var i=[],s=this;return b(L,function(e,t){s[t.cache]&&i.push(e)}),i.pop()},transition:function(e,a){var t=(h=v(e))._space(),i=L[t],o=(e=0===this.alpha()?v("transparent"):this)[i.cache]||i.to(e._rgba),l=o.slice(),h=h[i.cache];return b(i.props,function(e,t){var i=t.idx,s=o[i],n=h[i],r=$[t.type]||{};null!==n&&(null===s?l[i]=n:(r.mod&&(n-s>r.mod/2?s+=r.mod:s-n>r.mod/2&&(s-=r.mod)),l[i]=_((n-s)*a+s,t)))}),this[t](l)},blend:function(e){if(1===this._rgba[3])return this;var t=this._rgba.slice(),i=t.pop(),s=v(e)._rgba;return v(f.map(t,function(e,t){return(1-i)*s[t]+i*e}))},toRgbaString:function(){var e="rgba(",t=f.map(this._rgba,function(e,t){return null!=e?e:2<t?1:0});return 1===t[3]&&(t.pop(),e="rgb("),e+t.join()+")"},toHslaString:function(){var e="hsla(",t=f.map(this.hsla(),function(e,t){return null==e&&(e=2<t?1:0),t&&t<3?Math.round(100*e)+"%":e});return 1===t[3]&&(t.pop(),e="hsl("),e+t.join()+")"},toHexString:function(e){var t=this._rgba.slice(),i=t.pop();return e&&t.push(~~(255*i)),"#"+f.map(t,function(e){return 1===(e=(e||0).toString(16)).length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}})).parse.prototype=v.fn,L.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/255,i=e[1]/255,s=e[2]/255,n=e[3],r=Math.max(t,i,s),a=Math.min(t,i,s),o=r-a,e=.5*(l=r+a),i=a===r?0:t===r?60*(i-s)/o+360:i===r?60*(s-t)/o+120:60*(t-i)/o+240,l=0==o?0:e<=.5?o/l:o/(2-l);return[Math.round(i)%360,l,e,null==n?1:n]},L.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],s=e[2],e=e[3],s=2*s-(i=s<=.5?s*(1+i):s+i-s*i);return[Math.round(255*E(s,i,t+1/3)),Math.round(255*E(s,i,t)),Math.round(255*E(s,i,t-1/3)),e]},b(L,function(o,e){var t=e.props,r=e.cache,a=e.to,l=e.from;v.fn[o]=function(e){if(a&&!this[r]&&(this[r]=a(this._rgba)),void 0===e)return this[r].slice();var i=x(e),s="array"===i||"object"===i?e:arguments,n=this[r].slice();return b(t,function(e,t){null==(e=s["object"===i?e:t.idx])&&(e=n[t.idx]),n[t.idx]=_(e,t)}),l?((e=v(l(n)))[r]=n,e):v(n)},b(t,function(r,a){v.fn[r]||(v.fn[r]=function(e){var t=x(e),i="alpha"===r?this._hsla?"hsla":"rgba":o,s=this[i](),n=s[a.idx];return"undefined"===t?n:("function"===t&&(t=x(e=e.call(this,n))),null==e&&a.empty?this:("string"===t&&(t=Z.exec(e))&&(e=n+parseFloat(t[2])*("+"===t[1]?1:-1)),s[a.idx]=e,this[i](s)))})})}),(v.hook=function(e){e=e.split(" "),b(e,function(e,r){f.cssHooks[r]={set:function(e,t){var i,s,n="";if("transparent"!==t&&("string"!==x(t)||(i=J(t)))){if(t=v(i||t),!Q.rgba&&1!==t._rgba[3]){for(s="backgroundColor"===r?e.parentNode:e;(""===n||"transparent"===n)&&s&&s.style;)try{n=f.css(s,"backgroundColor"),s=s.parentNode}catch(e){}t=t.blend(n&&"transparent"!==n?n:"_default")}t=t.toRgbaString()}try{e.style[r]=t}catch(e){}}},f.fx.step[r]=function(e){e.colorInit||(e.start=v(e.elem,r),e.end=v(e.end),e.colorInit=!0),f.cssHooks[r].set(e.elem,e.start.transition(e.end,e.pos))}})})("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),f.cssHooks.borderColor={expand:function(i){var s={};return b(["Top","Right","Bottom","Left"],function(e,t){s["border"+t+"Color"]=i}),s}};var ee,te,ie,se,ne,re,ae,oe,le,N,P=f.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"},T="ui-effects-",M="ui-effects-style",A="ui-effects-animated";function he(e){var t,i,s=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,n={};if(s&&s.length&&s[0]&&s[s[0]])for(i=s.length;i--;)"string"==typeof s[t=s[i]]&&(n[t.replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()})]=s[t]);else for(t in s)"string"==typeof s[t]&&(n[t]=s[t]);return n}function F(e,t,i,s){return e={effect:e=X.isPlainObject(e)?(t=e).effect:e},"function"==typeof(t=null==t?{}:t)&&(s=t,i=null,t={}),"number"!=typeof t&&!X.fx.speeds[t]||(s=i,i=t,t={}),"function"==typeof i&&(s=i,i=null),t&&X.extend(e,t),i=i||t.duration,e.duration=X.fx.off?0:"number"==typeof i?i:i in X.fx.speeds?X.fx.speeds[i]:X.fx.speeds._default,e.complete=s||t.complete,e}function k(e){return!e||"number"==typeof e||X.fx.speeds[e]||"string"==typeof e&&!X.effects.effect[e]||"function"==typeof e||"object"==_typeof(e)&&!e.effect}function pe(e,t){var i=t.outerWidth(),t=t.outerHeight(),e=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(e)||["",0,i,t,0];return{top:parseFloat(e[1])||0,right:"auto"===e[2]?i:parseFloat(e[2]),bottom:"auto"===e[3]?t:parseFloat(e[3]),left:parseFloat(e[4])||0}}X.effects={effect:{}},se=["add","remove","toggle"],ne={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1},X.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,t){X.fx.step[t]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(f.style(e.elem,t,e.end),e.setAttr=!0)}}),X.fn.addBack||(X.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),X.effects.animateClass=function(n,e,t,i){var r=X.speed(e,t,i);return this.queue(function(){function e(){X.each(se,function(e,t){n[t]&&i[t+"Class"](n[t])})}var i=X(this),t=i.attr("class")||"",s=(s=r.children?i.find("*").addBack():i).map(function(){return{el:X(this),start:he(this)}});e(),s=s.map(function(){return this.end=he(this.el[0]),this.diff=function(e,t){var i,s,n={};for(i in t)s=t[i],e[i]===s||ne[i]||!X.fx.step[i]&&isNaN(parseFloat(s))||(n[i]=s);return n}(this.start,this.end),this}),i.attr("class",t),s=s.map(function(){var e=this,t=X.Deferred(),i=X.extend({},r,{queue:!1,complete:function(){t.resolve(e)}});return this.el.animate(this.diff,i),t.promise()}),X.when.apply(X,s.get()).done(function(){e(),X.each(arguments,function(){var t=this.el;X.each(this.diff,function(e){t.css(e,"")})}),r.complete.call(i[0])})})},X.fn.extend({addClass:(ie=X.fn.addClass,function(e,t,i,s){return t?X.effects.animateClass.call(this,{add:e},t,i,s):ie.apply(this,arguments)}),removeClass:(te=X.fn.removeClass,function(e,t,i,s){return 1<arguments.length?X.effects.animateClass.call(this,{remove:e},t,i,s):te.apply(this,arguments)}),toggleClass:(ee=X.fn.toggleClass,function(e,t,i,s,n){return"boolean"==typeof t||void 0===t?i?X.effects.animateClass.call(this,t?{add:e}:{remove:e},i,s,n):ee.apply(this,arguments):X.effects.animateClass.call(this,{toggle:e},t,i,s)}),switchClass:function(e,t,i,s,n){return X.effects.animateClass.call(this,{add:t,remove:e},i,s,n)}}),X.expr&&X.expr.pseudos&&X.expr.pseudos.animated&&(X.expr.pseudos.animated=(re=X.expr.pseudos.animated,function(e){return!!X(e).data(A)||re(e)})),!1!==X.uiBackCompat&&X.extend(X.effects,{save:function(e,t){for(var i=0,s=t.length;i<s;i++)null!==t[i]&&e.data(T+t[i],e[0].style[t[i]])},restore:function(e,t){for(var i,s=0,n=t.length;s<n;s++)null!==t[s]&&(i=e.data(T+t[s]),e.css(t[s],i))},setMode:function(e,t){return"toggle"===t?e.is(":hidden")?"show":"hide":t},createWrapper:function(i){if(i.parent().is(".ui-effects-wrapper"))return i.parent();var s={width:i.outerWidth(!0),height:i.outerHeight(!0),float:i.css("float")},e=X("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),t={width:i.width(),height:i.height()},n=document.activeElement;try{n.id}catch(e){n=document.body}return i.wrap(e),i[0]!==n&&!X.contains(i[0],n)||X(n).trigger("focus"),e=i.parent(),"static"===i.css("position")?(e.css({position:"relative"}),i.css({position:"relative"})):(X.extend(s,{position:i.css("position"),zIndex:i.css("z-index")}),X.each(["top","left","bottom","right"],function(e,t){s[t]=i.css(t),isNaN(parseInt(s[t],10))&&(s[t]="auto")}),i.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),i.css(t),e.css(s).show()},removeWrapper:function(e){var t=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),e[0]!==t&&!X.contains(e[0],t)||X(t).trigger("focus")),e}}),X.extend(X.effects,{version:"1.13.0",define:function(e,t,i){return i||(i=t,t="effect"),X.effects.effect[e]=i,X.effects.effect[e].mode=t,i},scaledDimensions:function(e,t,i){if(0===t)return{height:0,width:0,outerHeight:0,outerWidth:0};var s="horizontal"!==i?(t||100)/100:1,t="vertical"!==i?(t||100)/100:1;return{height:e.height()*t,width:e.width()*s,outerHeight:e.outerHeight()*t,outerWidth:e.outerWidth()*s}},clipToBox:function(e){return{width:e.clip.right-e.clip.left,height:e.clip.bottom-e.clip.top,left:e.clip.left,top:e.clip.top}},unshift:function(e,t,i){var s=e.queue();1<t&&s.splice.apply(s,[1,0].concat(s.splice(t,i))),e.dequeue()},saveStyle:function(e){e.data(M,e[0].style.cssText)},restoreStyle:function(e){e[0].style.cssText=e.data(M)||"",e.removeData(M)},mode:function(e,t){return e=e.is(":hidden"),"toggle"===t&&(t=e?"show":"hide"),(e?"hide"===t:"show"===t)?"none":t},getBaseline:function(e,t){var i,s;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=e[1]/t.width}return{x:s,y:i}},createPlaceholder:function(e){var t,i=e.css("position"),s=e.position();return e.css({marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()),/^(static|relative)/.test(i)&&(i="absolute",t=X("<"+e[0].nodeName+">").insertAfter(e).css({display:/^(inline|ruby)/.test(e.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight"),float:e.css("float")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).addClass("ui-effects-placeholder"),e.data(T+"placeholder",t)),e.css({position:i,left:s.left,top:s.top}),t},removePlaceholder:function(e){var t=T+"placeholder",i=e.data(t);i&&(i.remove(),e.removeData(t))},cleanUp:function(e){X.effects.restoreStyle(e),X.effects.removePlaceholder(e)},setTransition:function(s,e,n,r){return r=r||{},X.each(e,function(e,t){var i=s.cssUnit(t);0<i[0]&&(r[t]=i[0]*n+i[1])}),r}}),X.fn.extend({effect:function(){function e(e){var t=X(this),i=X.effects.mode(t,o)||r;t.data(A,!0),l.push(i),r&&("show"===i||i===r&&"hide"===i)&&t.show(),r&&"none"===i||X.effects.saveStyle(t),"function"==typeof e&&e()}var s=F.apply(this,arguments),n=X.effects.effect[s.effect],r=n.mode,t=s.queue,i=t||"fx",a=s.complete,o=s.mode,l=[];return X.fx.off||!n?o?this[o](s.duration,a):this.each(function(){a&&a.call(this)}):!1===t?this.each(e).each(h):this.queue(i,e).queue(i,h);function h(e){var t=X(this);function i(){"function"==typeof a&&a.call(t[0]),"function"==typeof e&&e()}s.mode=l.shift(),!1===X.uiBackCompat||r?"none"===s.mode?(t[o](),i()):n.call(t[0],s,function(){t.removeData(A),X.effects.cleanUp(t),"hide"===s.mode&&t.hide(),i()}):(t.is(":hidden")?"hide"===o:"show"===o)?(t[o](),i()):n.call(t[0],s,i)}},show:(le=X.fn.show,function(e){return k(e)?le.apply(this,arguments):((e=F.apply(this,arguments)).mode="show",this.effect.call(this,e))}),hide:(oe=X.fn.hide,function(e){return k(e)?oe.apply(this,arguments):((e=F.apply(this,arguments)).mode="hide",this.effect.call(this,e))}),toggle:(ae=X.fn.toggle,function(e){return k(e)||"boolean"==typeof e?ae.apply(this,arguments):((e=F.apply(this,arguments)).mode="toggle",this.effect.call(this,e))}),cssUnit:function(e){var i=this.css(e),s=[];return X.each(["em","px","%","pt"],function(e,t){0<i.indexOf(t)&&(s=[parseFloat(i),t])}),s},cssClip:function(e){return e?this.css("clip","rect("+e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px)"):pe(this.css("clip"),this)},transfer:function(e,t){var i=X(this),s="fixed"===(o=X(e.to)).css("position"),n=X("body"),r=s?n.scrollTop():0,a=s?n.scrollLeft():0,n={top:(n=o.offset()).top-r,left:n.left-a,height:o.innerHeight(),width:o.innerWidth()},o=i.offset(),l=X("<div class='ui-effects-transfer'></div>");l.appendTo("body").addClass(e.className).css({top:o.top-r,left:o.left-a,height:i.innerHeight(),width:i.innerWidth(),position:s?"fixed":"absolute"}).animate(n,e.duration,e.easing,function(){l.remove(),"function"==typeof t&&t()})}}),X.fx.step.clip=function(e){e.clipInit||(e.start=X(e.elem).cssClip(),"string"==typeof e.end&&(e.end=pe(e.end,e.elem)),e.clipInit=!0),X(e.elem).cssClip({top:e.pos*(e.end.top-e.start.top)+e.start.top,right:e.pos*(e.end.right-e.start.right)+e.start.right,bottom:e.pos*(e.end.bottom-e.start.bottom)+e.start.bottom,left:e.pos*(e.end.left-e.start.left)+e.start.left})},N={},X.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,e){N[e]=function(e){return Math.pow(e,t+2)}}),X.extend(N,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),X.each(N,function(e,t){X.easing["easeIn"+e]=t,X.easing["easeOut"+e]=function(e){return 1-t(1-e)},X.easing["easeInOut"+e]=function(e){return e<.5?t(2*e)/2:1-t(-2*e+2)/2}}),O=X.effects,X.effects.define("blind","hide",function(e,t){var i={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},s=X(this),n=e.direction||"up",r=s.cssClip(),a={clip:X.extend({},r)},o=X.effects.createPlaceholder(s);a.clip[i[n][0]]=a.clip[i[n][1]],"show"===e.mode&&(s.cssClip(a.clip),o&&o.css(X.effects.clipToBox(a)),a.clip=r),o&&o.animate(X.effects.clipToBox(a),e.duration,e.easing),s.animate(a,{queue:!1,duration:e.duration,easing:e.easing,complete:t})}),X.effects.define("bounce",function(e,t){var i,s,n=X(this),r=e.mode,a="hide"===r,o="show"===r,l=e.direction||"up",h=e.distance,p=e.times||5,u=e.duration/(r=2*p+(o||a?1:0)),c=e.easing,d="up"===l||"down"===l?"top":"left",y="up"===l||"left"===l,m=0,e=n.queue().length;for(X.effects.createPlaceholder(n),l=n.css(d),h=h||n["top"==d?"outerHeight":"outerWidth"]()/3,o&&((s={opacity:1})[d]=l,n.css("opacity",0).css(d,y?2*-h:2*h).animate(s,u,c)),a&&(h/=Math.pow(2,p-1)),(s={})[d]=l;m<p;m++)(i={})[d]=(y?"-=":"+=")+h,n.animate(i,u,c).animate(s,u,c),h=a?2*h:h/2;a&&((i={opacity:0})[d]=(y?"-=":"+=")+h,n.animate(i,u,c)),n.queue(t),X.effects.unshift(n,e,1+r)}),X.effects.define("clip","hide",function(e,t){var i={},s=X(this),n=(r="both"===(a=e.direction||"vertical"))||"horizontal"===a,r=r||"vertical"===a,a=s.cssClip();i.clip={top:r?(a.bottom-a.top)/2:a.top,right:n?(a.right-a.left)/2:a.right,bottom:r?(a.bottom-a.top)/2:a.bottom,left:n?(a.right-a.left)/2:a.left},X.effects.createPlaceholder(s),"show"===e.mode&&(s.cssClip(i.clip),i.clip=a),s.animate(i,{queue:!1,duration:e.duration,easing:e.easing,complete:t})}),X.effects.define("drop","hide",function(e,t){var i=X(this),s="show"===e.mode,n=e.direction||"left",r="up"===n||"down"===n?"top":"left",a="up"===n||"left"===n?"-=":"+=",o="+="==a?"-=":"+=",l={opacity:0};X.effects.createPlaceholder(i),n=e.distance||i["top"==r?"outerHeight":"outerWidth"](!0)/2,l[r]=a+n,s&&(i.css(l),l[r]=o+n,l.opacity=1),i.animate(l,{queue:!1,duration:e.duration,easing:e.easing,complete:t})}),X.effects.define("explode","hide",function(e,t){var i,s,n,r,a,o,l=e.pieces?Math.round(Math.sqrt(e.pieces)):3,h=l,p=X(this),u="show"===e.mode,c=p.show().css("visibility","hidden").offset(),d=Math.ceil(p.outerWidth()/h),y=Math.ceil(p.outerHeight()/l),m=[];function f(){m.push(this),m.length===l*h&&(p.css({visibility:"visible"}),X(m).remove(),t())}for(i=0;i<l;i++)for(r=c.top+i*y,o=i-(l-1)/2,s=0;s<h;s++)n=c.left+s*d,a=s-(h-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-s*d,top:-i*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:d,height:y,left:n+(u?a*d:0),top:r+(u?o*y:0),opacity:u?0:1}).animate({left:n+(u?0:a*d),top:r+(u?0:o*y),opacity:u?1:0},e.duration||500,e.easing,f)}),X.effects.define("fade","toggle",function(e,t){var i="show"===e.mode;X(this).css("opacity",i?0:1).animate({opacity:i?1:0},{queue:!1,duration:e.duration,easing:e.easing,complete:t})}),X.effects.define("fold","hide",function(t,e){var i=X(this),s="show"===(y=t.mode),n="hide"===y,r=t.size||15,a=/([0-9]+)%/.exec(r),o=t.horizFirst?["right","bottom"]:["bottom","right"],l=t.duration/2,h=X.effects.createPlaceholder(i),p=i.cssClip(),u={clip:X.extend({},p)},c={clip:X.extend({},p)},d=[p[o[0]],p[o[1]]],y=i.queue().length;a&&(r=parseInt(a[1],10)/100*d[n?0:1]),u.clip[o[0]]=r,c.clip[o[0]]=r,c.clip[o[1]]=0,s&&(i.cssClip(c.clip),h&&h.css(X.effects.clipToBox(c)),c.clip=p),i.queue(function(e){h&&h.animate(X.effects.clipToBox(u),l,t.easing).animate(X.effects.clipToBox(c),l,t.easing),e()}).animate(u,l,t.easing).animate(c,l,t.easing).queue(e),X.effects.unshift(i,y,4)}),X.effects.define("highlight","show",function(e,t){var i=X(this),s={backgroundColor:i.css("backgroundColor")};"hide"===e.mode&&(s.opacity=0),X.effects.saveStyle(i),i.css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(s,{queue:!1,duration:e.duration,easing:e.easing,complete:t})}),X.effects.define("size",function(s,t){var n,i=X(this),e=["fontSize"],r=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],a=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],o=s.mode,l="effect"!==o,h=s.scale||"both",p=s.origin||["middle","center"],u=i.css("position"),c=i.position(),d=X.effects.scaledDimensions(i),y=s.from||d,m=s.to||X.effects.scaledDimensions(i,0);X.effects.createPlaceholder(i),"show"===o&&(o=y,y=m,m=o),n={from:{y:y.height/d.height,x:y.width/d.width},to:{y:m.height/d.height,x:m.width/d.width}},"box"!==h&&"both"!==h||(n.from.y!==n.to.y&&(y=X.effects.setTransition(i,r,n.from.y,y),m=X.effects.setTransition(i,r,n.to.y,m)),n.from.x!==n.to.x&&(y=X.effects.setTransition(i,a,n.from.x,y),m=X.effects.setTransition(i,a,n.to.x,m))),"content"!==h&&"both"!==h||n.from.y!==n.to.y&&(y=X.effects.setTransition(i,e,n.from.y,y),m=X.effects.setTransition(i,e,n.to.y,m)),p&&(p=X.effects.getBaseline(p,d),y.top=(d.outerHeight-y.outerHeight)*p.y+c.top,y.left=(d.outerWidth-y.outerWidth)*p.x+c.left,m.top=(d.outerHeight-m.outerHeight)*p.y+c.top,m.left=(d.outerWidth-m.outerWidth)*p.x+c.left),delete y.outerHeight,delete y.outerWidth,i.css(y),"content"!==h&&"both"!==h||(r=r.concat(["marginTop","marginBottom"]).concat(e),a=a.concat(["marginLeft","marginRight"]),i.find("*[width]").each(function(){var e=X(this),t={height:(i=X.effects.scaledDimensions(e)).height*n.from.y,width:i.width*n.from.x,outerHeight:i.outerHeight*n.from.y,outerWidth:i.outerWidth*n.from.x},i={height:i.height*n.to.y,width:i.width*n.to.x,outerHeight:i.height*n.to.y,outerWidth:i.width*n.to.x};n.from.y!==n.to.y&&(t=X.effects.setTransition(e,r,n.from.y,t),i=X.effects.setTransition(e,r,n.to.y,i)),n.from.x!==n.to.x&&(t=X.effects.setTransition(e,a,n.from.x,t),i=X.effects.setTransition(e,a,n.to.x,i)),l&&X.effects.saveStyle(e),e.css(t),e.animate(i,s.duration,s.easing,function(){l&&X.effects.restoreStyle(e)})})),i.animate(m,{queue:!1,duration:s.duration,easing:s.easing,complete:function(){var e=i.offset();0===m.opacity&&i.css("opacity",y.opacity),l||(i.css("position","static"===u?"relative":u).offset(e),X.effects.saveStyle(i)),t()}})}),X.effects.define("scale",function(e,t){var i=X(this),s=e.mode,s=parseInt(e.percent,10)||(0===parseInt(e.percent,10)||"effect"!==s?0:100),s=X.extend(!0,{from:X.effects.scaledDimensions(i),to:X.effects.scaledDimensions(i,s,e.direction||"both"),origin:e.origin||["middle","center"]},e);e.fade&&(s.from.opacity=1,s.to.opacity=0),X.effects.effect.size.call(this,s,t)}),X.effects.define("puff","hide",function(e,t){e=X.extend(!0,{},e,{fade:!0,percent:parseInt(e.percent,10)||150}),X.effects.effect.scale.call(this,e,t)}),X.effects.define("pulsate","show",function(e,t){var i=X(this),s="show"===(l=e.mode),n=2*(e.times||5)+(s||"hide"===l?1:0),r=e.duration/n,a=0,o=1,l=i.queue().length;for(!s&&i.is(":visible")||(i.css("opacity",0).show(),a=1);o<n;o++)i.animate({opacity:a},r,e.easing),a=1-a;i.animate({opacity:a},r,e.easing),i.queue(t),X.effects.unshift(i,l,1+n)}),X.effects.define("shake",function(e,t){var i=1,s=X(this),n=e.direction||"left",r=e.distance||20,a=e.times||3,o=2*a+1,l=Math.round(e.duration/o),h="up"===n||"down"===n?"top":"left",p="up"===n||"left"===n,u={},c={},d={},n=s.queue().length;for(X.effects.createPlaceholder(s),u[h]=(p?"-=":"+=")+r,c[h]=(p?"+=":"-=")+2*r,d[h]=(p?"-=":"+=")+2*r,s.animate(u,l,e.easing);i<a;i++)s.animate(c,l,e.easing).animate(d,l,e.easing);s.animate(c,l,e.easing).animate(u,l/2,e.easing).queue(t),X.effects.unshift(s,n,1+o)}),X.effects.define("slide","show",function(e,t){var i,s,n=X(this),r={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},a=e.mode,o=e.direction||"left",l="up"===o||"down"===o?"top":"left",h="up"===o||"left"===o,p=e.distance||n["top"==l?"outerHeight":"outerWidth"](!0),u={};X.effects.createPlaceholder(n),i=n.cssClip(),s=n.position()[l],u[l]=(h?-1:1)*p+s,u.clip=n.cssClip(),u.clip[r[o][1]]=u.clip[r[o][0]],"show"===a&&(n.cssClip(u.clip),n.css(l,u[l]),u.clip=i,u[l]=s),n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:t})}),!1!==X.uiBackCompat&&X.effects.define("transfer",function(e,t){X(this).transfer(e,t)})}),!function(e,t){"object"==("undefined"==typeof module?"undefined":_typeof(module))&&"object"==_typeof(module.exports)?module.exports=e.document?t(e,!0):function(e){if(e.document)return t(e);throw new Error("jQuery requires a window with a document")}:t(e)}("undefined"!=typeof window?window:void 0,function(w,I){function v(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item}function m(e){return null!=e&&e===e.window}var t=[],R=Object.getPrototypeOf,o=t.slice,z=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},B=t.push,U=t.indexOf,G={},H=G.toString,j=G.hasOwnProperty,W=j.toString,V=W.call(Object),f={},C=w.document,q={type:!0,src:!0,nonce:!0,noModule:!0};function X(e,t,i){var s,n,r=(i=i||C).createElement("script");if(r.text=e,t)for(s in q)(n=t[s]||t.getAttribute&&t.getAttribute(s))&&r.setAttribute(s,n);i.head.appendChild(r).parentNode.removeChild(r)}function y(e){return null==e?e+"":"object"==_typeof(e)||"function"==typeof e?G[H.call(e)]||"object":_typeof(e)}var S=function e(t,i){return new e.fn.init(t,i)};function Y(e){var t=!!e&&"length"in e&&e.length,i=y(e);return!v(e)&&!m(e)&&("array"===i||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:"3.6.0",constructor:S,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){e=S.merge(this.constructor(),e);return e.prevObject=this,e},each:function(e){return S.each(this,e)},map:function(i){return this.pushStack(S.map(this,function(e,t){return i.call(e,t,e)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,e=+e+(e<0?t:0);return this.pushStack(0<=e&&e<t?[this[e]]:[])},end:function(){return this.prevObject||this.constructor()},push:B,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,i,s,n,r=arguments[0]||{},a=1,o=arguments.length,l=!1;for("boolean"==typeof r&&(l=r,r=arguments[a]||{},a++),"object"==_typeof(r)||v(r)||(r={}),a===o&&(r=this,a--);a<o;a++)if(null!=(e=arguments[a]))for(t in e)i=e[t],"__proto__"!==t&&r!==i&&(l&&i&&(S.isPlainObject(i)||(s=Array.isArray(i)))?(n=r[t],n=s&&!Array.isArray(n)?[]:s||S.isPlainObject(n)?n:{},s=!1,r[t]=S.extend(l,n,i)):void 0!==i&&(r[t]=i));return r},S.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){return!(!e||"[object Object]"!==H.call(e)||(e=R(e))&&("function"!=typeof(e=j.call(e,"constructor")&&e.constructor)||W.call(e)!==V))},isEmptyObject:function(e){for(var t in e)return!1;return!0},globalEval:function(e,t,i){X(e,{nonce:t&&t.nonce},i)},each:function(e,t){var i,s=0;if(Y(e))for(i=e.length;s<i&&!1!==t.call(e[s],s,e[s]);s++);else for(s in e)if(!1===t.call(e[s],s,e[s]))break;return e},makeArray:function(e,t){t=t||[];return null!=e&&(Y(Object(e))?S.merge(t,"string"==typeof e?[e]:e):B.call(t,e)),t},inArray:function(e,t,i){return null==t?-1:U.call(t,e,i)},merge:function(e,t){for(var i=+t.length,s=0,n=e.length;s<i;s++)e[n++]=t[s];return e.length=n,e},grep:function(e,t,i){for(var s=[],n=0,r=e.length,a=!i;n<r;n++)!t(e[n],n)!=a&&s.push(e[n]);return s},map:function(e,t,i){var s,n,r=0,a=[];if(Y(e))for(s=e.length;r<s;r++)null!=(n=t(e[r],r,i))&&a.push(n);else for(r in e)null!=(n=t(e[r],r,i))&&a.push(n);return z(a)},guid:1,support:f}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){G["[object "+t+"]"]=t.toLowerCase()});function s(e,t,i){for(var s=[],n=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(n&&S(e).is(i))break;s.push(e)}return s}function Z(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}var e=function(I){function u(e,t){return e="0x"+e.slice(1)-65536,t||(e<0?String.fromCharCode(65536+e):String.fromCharCode(e>>10|55296,1023&e|56320))}function R(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}function z(){w()}var e,c,O,r,B,d,U,G,b,l,h,w,C,i,S,y,s,n,m,x="sizzle"+ +new Date,p=I.document,_=0,H=0,j=M(),W=M(),V=M(),f=M(),q=function(e,t){return e===t&&(h=!0),0},X={}.hasOwnProperty,t=[],Y=t.pop,Z=t.push,E=t.push,K=t.slice,v=function(e,t){for(var i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1},$="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",a="[\\x20\\t\\r\\n\\f]",o="(?:\\\\[\\da-fA-F]{1,6}"+a+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Q="\\["+a+"*("+o+")(?:"+a+"*([*^$|!~]?=)"+a+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+o+"))|)"+a+"*\\]",J=":("+o+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Q+")*)|.*)\\)|)",ee=new RegExp(a+"+","g"),g=new RegExp("^"+a+"+|((?:^|[^\\\\])(?:\\\\.)*)"+a+"+$","g"),te=new RegExp("^"+a+"*,"+a+"*"),ie=new RegExp("^"+a+"*([>+~]|"+a+")"+a+"*"),se=new RegExp(a+"|>"),ne=new RegExp(J),re=new RegExp("^"+o+"$"),L={ID:new RegExp("^#("+o+")"),CLASS:new RegExp("^\\.("+o+")"),TAG:new RegExp("^("+o+"|[*])"),ATTR:new RegExp("^"+Q),PSEUDO:new RegExp("^"+J),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+a+"*(even|odd|(([+-]|)(\\d*)n|)"+a+"*(?:([+-]|)"+a+"*(\\d+)|))"+a+"*\\)|)","i"),bool:new RegExp("^(?:"+$+")$","i"),needsContext:new RegExp("^"+a+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+a+"*((?:-\\d)?\\d*)"+a+"*\\)|)(?=[^-]|$)","i")},ae=/HTML$/i,oe=/^(?:input|select|textarea|button)$/i,le=/^h\d$/i,N=/^[^{]+\{\s*\[native \w/,he=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,pe=/[+~]/,P=new RegExp("\\\\[\\da-fA-F]{1,6}"+a+"?|\\\\([^\\r\\n\\f])","g"),ue=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ce=ve(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{E.apply(t=K.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){E={apply:t.length?function(e,t){Z.apply(e,K.call(t))}:function(e,t){for(var i=e.length,s=0;e[i++]=t[s++];);e.length=i-1}}}function T(e,t,i,s){var n,r,a,o,l,h,p=t&&t.ownerDocument,u=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==u&&9!==u&&11!==u)return i;if(!s&&(w(t),t=t||C,S)){if(11!==u&&(o=he.exec(e)))if(n=o[1]){if(9===u){if(!(h=t.getElementById(n)))return i;if(h.id===n)return i.push(h),i}else if(p&&(h=p.getElementById(n))&&m(t,h)&&h.id===n)return i.push(h),i}else{if(o[2])return E.apply(i,t.getElementsByTagName(e)),i;if((n=o[3])&&c.getElementsByClassName&&t.getElementsByClassName)return E.apply(i,t.getElementsByClassName(n)),i}if(c.qsa&&!f[e+" "]&&(!y||!y.test(e))&&(1!==u||"object"!==t.nodeName.toLowerCase())){if(h=e,p=t,1===u&&(se.test(e)||ie.test(e))){for((p=pe.test(e)&&fe(t.parentNode)||t)===t&&c.scope||((a=t.getAttribute("id"))?a=a.replace(ue,R):t.setAttribute("id",a=x)),r=(l=d(e)).length;r--;)l[r]=(a?"#"+a:":scope")+" "+D(l[r]);h=l.join(",")}try{return E.apply(i,p.querySelectorAll(h)),i}catch(t){f(e,!0)}finally{a===x&&t.removeAttribute("id")}}}return G(e.replace(g,"$1"),t,i,s)}function M(){var s=[];return function e(t,i){return s.push(t+" ")>O.cacheLength&&delete e[s.shift()],e[t+" "]=i}}function A(e){return e[x]=!0,e}function F(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t)}}function de(e,t){for(var i=e.split("|"),s=i.length;s--;)O.attrHandle[i[s]]=t}function ye(e,t){var i=t&&e,s=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(s)return s;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function me(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ce(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function k(a){return A(function(r){return r=+r,A(function(e,t){for(var i,s=a([],e.length,r),n=s.length;n--;)e[i=s[n]]&&(e[i]=!(t[i]=e[i]))})})}function fe(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in c=T.support={},B=T.isXML=function(e){var t=e&&e.namespaceURI,e=e&&(e.ownerDocument||e).documentElement;return!ae.test(t||e&&e.nodeName||"HTML")},w=T.setDocument=function(e){var e=e?e.ownerDocument||e:p;return e!=C&&9===e.nodeType&&e.documentElement&&(i=(C=e).documentElement,S=!B(C),p!=C&&(e=C.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",z,!1):e.attachEvent&&e.attachEvent("onunload",z)),c.scope=F(function(e){return i.appendChild(e).appendChild(C.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),c.attributes=F(function(e){return e.className="i",!e.getAttribute("className")}),c.getElementsByTagName=F(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),c.getElementsByClassName=N.test(C.getElementsByClassName),c.getById=F(function(e){return i.appendChild(e).id=x,!C.getElementsByName||!C.getElementsByName(x).length}),c.getById?(O.filter.ID=function(e){var t=e.replace(P,u);return function(e){return e.getAttribute("id")===t}},O.find.ID=function(e,t){if(void 0!==t.getElementById&&S)return(t=t.getElementById(e))?[t]:[]}):(O.filter.ID=function(e){var t=e.replace(P,u);return function(e){e=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return e&&e.value===t}},O.find.ID=function(e,t){if(void 0!==t.getElementById&&S){var i,s,n,r=t.getElementById(e);if(r){if((i=r.getAttributeNode("id"))&&i.value===e)return[r];for(n=t.getElementsByName(e),s=0;r=n[s++];)if((i=r.getAttributeNode("id"))&&i.value===e)return[r]}return[]}}),O.find.TAG=c.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):c.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,s=[],n=0,r=t.getElementsByTagName(e);if("*"!==e)return r;for(;i=r[n++];)1===i.nodeType&&s.push(i);return s},O.find.CLASS=c.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&S)return t.getElementsByClassName(e)},s=[],y=[],(c.qsa=N.test(C.querySelectorAll))&&(F(function(e){var t;i.appendChild(e).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&y.push("[*^$]="+a+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||y.push("\\["+a+"*(?:value|"+$+")"),e.querySelectorAll("[id~="+x+"-]").length||y.push("~="),(t=C.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||y.push("\\["+a+"*name"+a+"*="+a+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||y.push(":checked"),e.querySelectorAll("a#"+x+"+*").length||y.push(".#.+[+~]"),e.querySelectorAll("\\\f"),y.push("[\\r\\n\\f]")}),F(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&y.push("name"+a+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&y.push(":enabled",":disabled"),i.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&y.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),y.push(",.*:")})),(c.matchesSelector=N.test(n=i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.oMatchesSelector||i.msMatchesSelector))&&F(function(e){c.disconnectedMatch=n.call(e,"*"),n.call(e,"[s!='']:x"),s.push("!=",J)}),y=y.length&&new RegExp(y.join("|")),s=s.length&&new RegExp(s.join("|")),e=N.test(i.compareDocumentPosition),m=e||N.test(i.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(i.contains?i.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},q=e?function(e,t){return e===t?(h=!0,0):!e.compareDocumentPosition-!t.compareDocumentPosition||(1&(i=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!c.sortDetached&&t.compareDocumentPosition(e)===i?e==C||e.ownerDocument==p&&m(p,e)?-1:t==C||t.ownerDocument==p&&m(p,t)?1:l?v(l,e)-v(l,t):0:4&i?-1:1);var i}:function(e,t){if(e===t)return h=!0,0;var i,s=0,n=e.parentNode,r=t.parentNode,a=[e],o=[t];if(!n||!r)return e==C?-1:t==C?1:n?-1:r?1:l?v(l,e)-v(l,t):0;if(n===r)return ye(e,t);for(i=e;i=i.parentNode;)a.unshift(i);for(i=t;i=i.parentNode;)o.unshift(i);for(;a[s]===o[s];)s++;return s?ye(a[s],o[s]):a[s]==p?-1:o[s]==p?1:0}),C},T.matches=function(e,t){return T(e,null,null,t)},T.matchesSelector=function(e,t){if(w(e),c.matchesSelector&&S&&!f[t+" "]&&(!s||!s.test(t))&&(!y||!y.test(t)))try{var i=n.call(e,t);if(i||c.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){f(t,!0)}return 0<T(t,C,null,[e]).length},T.contains=function(e,t){return(e.ownerDocument||e)!=C&&w(e),m(e,t)},T.attr=function(e,t){(e.ownerDocument||e)!=C&&w(e);var i=O.attrHandle[t.toLowerCase()],i=i&&X.call(O.attrHandle,t.toLowerCase())?i(e,t,!S):void 0;return void 0!==i?i:c.attributes||!S?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},T.escape=function(e){return(e+"").replace(ue,R)},T.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},T.uniqueSort=function(e){var t,i=[],s=0,n=0;if(h=!c.detectDuplicates,l=!c.sortStable&&e.slice(0),e.sort(q),h){for(;t=e[n++];)t===e[n]&&(s=i.push(n));for(;s--;)e.splice(i[s],1)}return l=null,e},r=T.getText=function(e){var t,i="",s=0,n=e.nodeType;if(n){if(1===n||9===n||11===n){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=r(e)}else if(3===n||4===n)return e.nodeValue}else for(;t=e[s++];)i+=r(t);return i},(O=T.selectors={cacheLength:50,createPseudo:A,match:L,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(P,u),e[3]=(e[3]||e[4]||e[5]||"").replace(P,u),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||T.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&T.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return L.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&ne.test(i)&&(t=d(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(P,u).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=j[e+" "];return t||(t=new RegExp("(^|"+a+")"+e+"("+a+"|$)"))&&j(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(t,i,s){return function(e){e=T.attr(e,t);return null==e?"!="===i:!i||(e+="","="===i?e===s:"!="===i?e!==s:"^="===i?s&&0===e.indexOf(s):"*="===i?s&&-1<e.indexOf(s):"$="===i?s&&e.slice(-s.length)===s:"~="===i?-1<(" "+e.replace(ee," ")+" ").indexOf(s):"|="===i&&(e===s||e.slice(0,s.length+1)===s+"-"))}},CHILD:function(y,e,t,m,f){var g="nth"!==y.slice(0,3),v="last"!==y.slice(-4),L="of-type"===e;return 1===m&&0===f?function(e){return!!e.parentNode}:function(e,t,i){var s,n,r,a,o,l,h=g!=v?"nextSibling":"previousSibling",p=e.parentNode,u=L&&e.nodeName.toLowerCase(),c=!i&&!L,d=!1;if(p){if(g){for(;h;){for(a=e;a=a[h];)if(L?a.nodeName.toLowerCase()===u:1===a.nodeType)return!1;l=h="only"===y&&!l&&"nextSibling"}return!0}if(l=[v?p.firstChild:p.lastChild],v&&c){for(d=(o=(s=(n=(r=(a=p)[x]||(a[x]={}))[a.uniqueID]||(r[a.uniqueID]={}))[y]||[])[0]===_&&s[1])&&s[2],a=o&&p.childNodes[o];a=++o&&a&&a[h]||(d=o=0)||l.pop();)if(1===a.nodeType&&++d&&a===e){n[y]=[_,o,d];break}}else if(!1===(d=c?o=(s=(n=(r=(a=e)[x]||(a[x]={}))[a.uniqueID]||(r[a.uniqueID]={}))[y]||[])[0]===_&&s[1]:d))for(;(a=++o&&a&&a[h]||(d=o=0)||l.pop())&&((L?a.nodeName.toLowerCase()!==u:1!==a.nodeType)||!++d||(c&&((n=(r=a[x]||(a[x]={}))[a.uniqueID]||(r[a.uniqueID]={}))[y]=[_,d]),a!==e)););return(d-=f)===m||d%m==0&&0<=d/m}}},PSEUDO:function(e,r){var t,a=O.pseudos[e]||O.setFilters[e.toLowerCase()]||T.error("unsupported pseudo: "+e);return a[x]?a(r):1<a.length?(t=[e,e,"",r],O.setFilters.hasOwnProperty(e.toLowerCase())?A(function(e,t){for(var i,s=a(e,r),n=s.length;n--;)e[i=v(e,s[n])]=!(t[i]=s[n])}):function(e){return a(e,0,t)}):a}},pseudos:{not:A(function(e){var s=[],n=[],o=U(e.replace(g,"$1"));return o[x]?A(function(e,t,i,s){for(var n,r=o(e,null,s,[]),a=e.length;a--;)(n=r[a])&&(e[a]=!(t[a]=n))}):function(e,t,i){return s[0]=e,o(s,null,i,n),s[0]=null,!n.pop()}}),has:A(function(t){return function(e){return 0<T(t,e).length}}),contains:A(function(t){return t=t.replace(P,u),function(e){return-1<(e.textContent||r(e)).indexOf(t)}}),lang:A(function(i){return re.test(i||"")||T.error("unsupported lang: "+i),i=i.replace(P,u).toLowerCase(),function(e){var t;do{if(t=S?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===i||0===t.indexOf(i+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=I.location&&I.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===i},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:me(!1),disabled:me(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!O.pseudos.empty(e)},header:function(e){return le.test(e.nodeName)},input:function(e){return oe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:k(function(){return[0]}),last:k(function(e,t){return[t-1]}),eq:k(function(e,t,i){return[i<0?i+t:i]}),even:k(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:k(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:k(function(e,t,i){for(var s=i<0?i+t:t<i?t:i;0<=--s;)e.push(s);return e}),gt:k(function(e,t,i){for(var s=i<0?i+t:i;++s<t;)e.push(s);return e})}}).pseudos.nth=O.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})O.pseudos[e]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(e);for(e in{submit:!0,reset:!0})O.pseudos[e]=function(i){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===i}}(e);function ge(){}function D(e){for(var t=0,i=e.length,s="";t<i;t++)s+=e[t].value;return s}function ve(a,e,t){var o=e.dir,l=e.next,h=l||o,p=t&&"parentNode"===h,u=H++;return e.first?function(e,t,i){for(;e=e[o];)if(1===e.nodeType||p)return a(e,t,i);return!1}:function(e,t,i){var s,n,r=[_,u];if(i){for(;e=e[o];)if((1===e.nodeType||p)&&a(e,t,i))return!0}else for(;e=e[o];)if(1===e.nodeType||p)if(n=(n=e[x]||(e[x]={}))[e.uniqueID]||(n[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[o]||e;else{if((s=n[h])&&s[0]===_&&s[1]===u)return r[2]=s[2];if((n[h]=r)[2]=a(e,t,i))return!0}return!1}}function Le(n){return 1<n.length?function(e,t,i){for(var s=n.length;s--;)if(!n[s](e,t,i))return!1;return!0}:n[0]}function Oe(e,t,i,s,n){for(var r,a=[],o=0,l=e.length,h=null!=t;o<l;o++)!(r=e[o])||i&&!i(r,s,n)||(a.push(r),h&&t.push(o));return a}function be(e){for(var s,t,i,n=e.length,r=O.relative[e[0].type],a=r||O.relative[" "],o=r?1:0,l=ve(function(e){return e===s},a,!0),h=ve(function(e){return-1<v(s,e)},a,!0),p=[function(e,t,i){e=!r&&(i||t!==b)||((s=t).nodeType?l:h)(e,t,i);return s=null,e}];o<n;o++)if(t=O.relative[e[o].type])p=[ve(Le(p),t)];else{if((t=O.filter[e[o].type].apply(null,e[o].matches))[x]){for(i=++o;i<n&&!O.relative[e[i].type];i++);return function e(d,y,m,f,g,t){return f&&!f[x]&&(f=e(f)),g&&!g[x]&&(g=e(g,t)),A(function(e,t,i,s){var n,r,a,o=[],l=[],h=t.length,p=e||function(e,t,i){for(var s=0,n=t.length;s<n;s++)T(e,t[s],i);return i}(y||"*",i.nodeType?[i]:i,[]),u=!d||!e&&y?p:Oe(p,o,d,i,s),c=m?g||(e?d:h||f)?[]:t:u;if(m&&m(u,c,i,s),f)for(n=Oe(c,l),f(n,[],i,s),r=n.length;r--;)(a=n[r])&&(c[l[r]]=!(u[l[r]]=a));if(e){if(g||d){if(g){for(n=[],r=c.length;r--;)(a=c[r])&&n.push(u[r]=a);g(null,c=[],n,s)}for(r=c.length;r--;)(a=c[r])&&-1<(n=g?v(e,a):o[r])&&(e[n]=!(t[n]=a))}}else c=Oe(c===t?c.splice(h,c.length):c),g?g(null,t,c,s):E.apply(t,c)})}(1<o&&Le(p),1<o&&D(e.slice(0,o-1).concat({value:" "===e[o-2].type?"*":""})).replace(g,"$1"),t,o<i&&be(e.slice(o,i)),i<n&&be(e=e.slice(i)),i<n&&D(e))}p.push(t)}return Le(p)}return ge.prototype=O.filters=O.pseudos,O.setFilters=new ge,d=T.tokenize=function(e,t){var i,s,n,r,a,o,l,h=W[e+" "];if(h)return t?0:h.slice(0);for(a=e,o=[],l=O.preFilter;a;){for(r in i&&!(s=te.exec(a))||(s&&(a=a.slice(s[0].length)||a),o.push(n=[])),i=!1,(s=ie.exec(a))&&(i=s.shift(),n.push({value:i,type:s[0].replace(g," ")}),a=a.slice(i.length)),O.filter)!(s=L[r].exec(a))||l[r]&&!(s=l[r](s))||(i=s.shift(),n.push({value:i,type:r,matches:s}),a=a.slice(i.length));if(!i)break}return t?a.length:a?T.error(e):W(e,o).slice(0)},U=T.compile=function(e,t){var i,f,g,v,L,s,n=[],r=[],a=V[e+" "];if(!a){for(i=(t=t||d(e)).length;i--;)((a=be(t[i]))[x]?n:r).push(a);(a=V(e,(v=0<(g=n).length,L=0<(f=r).length,s=function(e,t,i,s,n){var r,a,o,l=0,h="0",p=e&&[],u=[],c=b,d=e||L&&O.find.TAG("*",n),y=_+=null==c?1:Math.random()||.1,m=d.length;for(n&&(b=t==C||t||n);h!==m&&null!=(r=d[h]);h++){if(L&&r){for(a=0,t||r.ownerDocument==C||(w(r),i=!S);o=f[a++];)if(o(r,t||C,i)){s.push(r);break}n&&(_=y)}v&&((r=!o&&r)&&l--,e&&p.push(r))}if(l+=h,v&&h!==l){for(a=0;o=g[a++];)o(p,u,t,i);if(e){if(0<l)for(;h--;)p[h]||u[h]||(u[h]=Y.call(s));u=Oe(u)}E.apply(s,u),n&&!e&&0<u.length&&1<l+g.length&&T.uniqueSort(s)}return n&&(_=y,b=c),p},v?A(s):s))).selector=e}return a},G=T.select=function(e,t,i,s){var n,r,a,o,l,h="function"==typeof e&&e,p=!s&&d(e=h.selector||e);if(i=i||[],1===p.length){if(2<(r=p[0]=p[0].slice(0)).length&&"ID"===(a=r[0]).type&&9===t.nodeType&&S&&O.relative[r[1].type]){if(!(t=(O.find.ID(a.matches[0].replace(P,u),t)||[])[0]))return i;h&&(t=t.parentNode),e=e.slice(r.shift().value.length)}for(n=L.needsContext.test(e)?0:r.length;n--&&(a=r[n],!O.relative[o=a.type]);)if((l=O.find[o])&&(s=l(a.matches[0].replace(P,u),pe.test(r[0].type)&&fe(t.parentNode)||t))){if(r.splice(n,1),e=s.length&&D(r))break;return E.apply(i,s),i}}return(h||U(e,p))(s,t,!S,i,!t||pe.test(e)&&fe(t.parentNode)||t),i},c.sortStable=x.split("").sort(q).join("")===x,c.detectDuplicates=!!h,w(),c.sortDetached=F(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),F(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||de("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),c.attributes&&F(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||de("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),F(function(e){return null==e.getAttribute("disabled")})||de($,function(e,t,i){if(!i)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),T}(w),K=(S.find=e,S.expr=e.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=e.uniqueSort,S.text=e.getText,S.isXMLDoc=e.isXML,S.contains=e.contains,S.escapeSelector=e.escape,S.expr.match.needsContext);function l(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var $=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Q(e,i,s){return v(i)?S.grep(e,function(e,t){return!!i.call(e,t,e)!==s}):i.nodeType?S.grep(e,function(e){return e===i!==s}):"string"!=typeof i?S.grep(e,function(e){return-1<U.call(i,e)!==s}):S.filter(i,e,s)}S.filter=function(e,t,i){var s=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===s.nodeType?S.find.matchesSelector(s,e)?[s]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,i,s=this.length,n=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<s;t++)if(S.contains(n[t],this))return!0}));for(i=this.pushStack([]),t=0;t<s;t++)S.find(e,n[t],i);return 1<s?S.uniqueSort(i):i},filter:function(e){return this.pushStack(Q(this,e||[],!1))},not:function(e){return this.pushStack(Q(this,e||[],!0))},is:function(e){return!!Q(this,"string"==typeof e&&K.test(e)?S(e):e||[],!1).length}});var J,ee=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,te=((S.fn.init=function(e,t,i){if(!e)return this;if(i=i||J,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==i.ready?i.ready(e):e(S):S.makeArray(e,this);if(!(s="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:ee.exec(e))||!s[1]&&t)return(!t||t.jquery?t||i:this.constructor(t)).find(e);if(s[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(s[1],t&&t.nodeType?t.ownerDocument||t:C,!0)),$.test(s[1])&&S.isPlainObject(t))for(var s in t)v(this[s])?this[s](t[s]):this.attr(s,t[s]);return this}return(i=C.getElementById(s[2]))&&(this[0]=i,this.length=1),this}).prototype=S.fn,J=S(C),/^(?:parents|prev(?:Until|All))/),ie={children:!0,contents:!0,next:!0,prev:!0};function se(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}S.fn.extend({has:function(e){var t=S(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var i,s=0,n=this.length,r=[],a="string"!=typeof e&&S(e);if(!K.test(e))for(;s<n;s++)for(i=this[s];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(a?-1<a.index(i):1===i.nodeType&&S.find.matchesSelector(i,e))){r.push(i);break}return this.pushStack(1<r.length?S.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?U.call(S(e),this[0]):U.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return s(e,"parentNode")},parentsUntil:function(e,t,i){return s(e,"parentNode",i)},next:function(e){return se(e,"nextSibling")},prev:function(e){return se(e,"previousSibling")},nextAll:function(e){return s(e,"nextSibling")},prevAll:function(e){return s(e,"previousSibling")},nextUntil:function(e,t,i){return s(e,"nextSibling",i)},prevUntil:function(e,t,i){return s(e,"previousSibling",i)},siblings:function(e){return Z((e.parentNode||{}).firstChild,e)},children:function(e){return Z(e.firstChild)},contents:function(e){return null!=e.contentDocument&&R(e.contentDocument)?e.contentDocument:(l(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(s,n){S.fn[s]=function(e,t){var i=S.map(this,n,e);return(t="Until"!==s.slice(-5)?e:t)&&"string"==typeof t&&(i=S.filter(t,i)),1<this.length&&(ie[s]||S.uniqueSort(i),te.test(s)&&i.reverse()),this.pushStack(i)}});var x=/[^\x20\t\r\n\f]+/g;function p(e){return e}function ne(e){throw e}function re(e,t,i,s){var n;try{e&&v(n=e.promise)?n.call(e).done(t).fail(i):e&&v(n=e.then)?n.call(e,t,i):t.apply(void 0,[e].slice(s))}catch(e){i.apply(void 0,[e])}}S.Callbacks=function(s){var e,i;s="string"==typeof s?(e=s,i={},S.each(e.match(x)||[],function(e,t){i[t]=!0}),i):S.extend({},s);function n(){for(o=o||s.once,a=r=!0;h.length;p=-1)for(t=h.shift();++p<l.length;)!1===l[p].apply(t[0],t[1])&&s.stopOnFalse&&(p=l.length,t=!1);s.memory||(t=!1),r=!1,o&&(l=t?[]:"")}var r,t,a,o,l=[],h=[],p=-1,u={add:function(){return l&&(t&&!r&&(p=l.length-1,h.push(t)),function i(e){S.each(e,function(e,t){v(t)?s.unique&&u.has(t)||l.push(t):t&&t.length&&"string"!==y(t)&&i(t)})}(arguments),t&&!r&&n()),this},remove:function(){return S.each(arguments,function(e,t){for(var i;-1<(i=S.inArray(t,l,i));)l.splice(i,1),i<=p&&p--}),this},has:function(e){return e?-1<S.inArray(e,l):0<l.length},empty:function(){return l=l&&[],this},disable:function(){return o=h=[],l=t="",this},disabled:function(){return!l},lock:function(){return o=h=[],t||r||(l=t=""),this},locked:function(){return!!o},fireWith:function(e,t){return o||(t=[e,(t=t||[]).slice?t.slice():t],h.push(t),r||n()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!a}};return u},S.extend({Deferred:function(e){var r=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],n="pending",a={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var n=arguments;return S.Deferred(function(s){S.each(r,function(e,t){var i=v(n[t[4]])&&n[t[4]];o[t[1]](function(){var e=i&&i.apply(this,arguments);e&&v(e.promise)?e.promise().progress(s.notify).done(s.resolve).fail(s.reject):s[t[0]+"With"](this,i?[e]:arguments)})}),n=null}).promise()},then:function(t,i,s){var l=0;function h(n,r,a,o){return function(){function e(){var e,t;if(!(n<l)){if((e=a.apply(i,s))===r.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==_typeof(e)||"function"==typeof e)&&e.then,v(t)?o?t.call(e,h(l,r,p,o),h(l,r,ne,o)):(l++,t.call(e,h(l,r,p,o),h(l,r,ne,o),h(l,r,p,r.notifyWith))):(a!==p&&(i=void 0,s=[e]),(o||r.resolveWith)(i,s))}}var i=this,s=arguments,t=o?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),l<=n+1&&(a!==ne&&(i=void 0,s=[e]),r.rejectWith(i,s))}};n?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),w.setTimeout(t))}}return S.Deferred(function(e){r[0][3].add(h(0,e,v(s)?s:p,e.notifyWith)),r[1][3].add(h(0,e,v(t)?t:p)),r[2][3].add(h(0,e,v(i)?i:ne))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},o={};return S.each(r,function(e,t){var i=t[2],s=t[5];a[t[1]]=i.add,s&&i.add(function(){n=s},r[3-e][2].disable,r[3-e][3].disable,r[0][2].lock,r[0][3].lock),i.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=i.fireWith}),a.promise(o),e&&e.call(o,o),o},when:function(e){function t(t){return function(e){n[t]=this,r[t]=1<arguments.length?o.call(arguments):e,--i||a.resolveWith(n,r)}}var i=arguments.length,s=i,n=Array(s),r=o.call(arguments),a=S.Deferred();if(i<=1&&(re(e,a.done(t(s)).resolve,a.reject,!i),"pending"===a.state()||v(r[s]&&r[s].then)))return a.then();for(;s--;)re(r[s],t(s),a.reject);return a.promise()}});var ae=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/,oe=(S.Deferred.exceptionHook=function(e,t){w.console&&w.console.warn&&e&&ae.test(e.name)&&w.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){w.setTimeout(function(){throw e})},S.Deferred());function le(){C.removeEventListener("DOMContentLoaded",le),w.removeEventListener("load",le),S.ready()}S.fn.ready=function(e){return oe.then(e).catch(function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||oe.resolveWith(C,[S])}}),S.ready.then=oe.then,"complete"===C.readyState||"loading"!==C.readyState&&!C.documentElement.doScroll?w.setTimeout(S.ready):(C.addEventListener("DOMContentLoaded",le),w.addEventListener("load",le));function u(e,t,i,s,n,r,a){var o=0,l=e.length,h=null==i;if("object"===y(i))for(o in n=!0,i)u(e,t,o,i[o],!0,r,a);else if(void 0!==s&&(n=!0,v(s)||(a=!0),t=h?a?(t.call(e,s),null):(h=t,function(e,t,i){return h.call(S(e),i)}):t))for(;o<l;o++)t(e[o],i,a?s:s.call(e[o],o,t(e[o],i)));return n?e:h?t.call(e):l?t(e[0],i):r}var he=/^-ms-/,pe=/-([a-z])/g;function ue(e,t){return t.toUpperCase()}function L(e){return e.replace(he,"ms-").replace(pe,ue)}function g(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function ce(){this.expando=S.expando+ce.uid++}ce.uid=1,ce.prototype={cache:function(e){var t=e[this.expando];return t||(t={},g(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var s,n=this.cache(e);if("string"==typeof t)n[L(t)]=i;else for(s in t)n[L(s)]=t[s];return n},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][L(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,s=e[this.expando];if(void 0!==s){if(void 0!==t){i=(t=Array.isArray(t)?t.map(L):(t=L(t))in s?[t]:t.match(x)||[]).length;for(;i--;)delete s[t[i]]}void 0!==t&&!S.isEmptyObject(s)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){e=e[this.expando];return void 0!==e&&!S.isEmptyObject(e)}};var O=new ce,h=new ce,de=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ye=/[A-Z]/g;function me(e,t,i){var s,n;if(void 0===i&&1===e.nodeType)if(s="data-"+t.replace(ye,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(s))){try{i="true"===(n=i)||"false"!==n&&("null"===n?null:n===+n+""?+n:de.test(n)?JSON.parse(n):n)}catch(e){}h.set(e,t,i)}else i=void 0;return i}S.extend({hasData:function(e){return h.hasData(e)||O.hasData(e)},data:function(e,t,i){return h.access(e,t,i)},removeData:function(e,t){h.remove(e,t)},_data:function(e,t,i){return O.access(e,t,i)},_removeData:function(e,t){O.remove(e,t)}}),S.fn.extend({data:function(i,e){var t,s,n,r=this[0],a=r&&r.attributes;if(void 0!==i)return"object"==_typeof(i)?this.each(function(){h.set(this,i)}):u(this,function(e){var t;if(r&&void 0===e)return void 0!==(t=h.get(r,i))||void 0!==(t=me(r,i))?t:void 0;this.each(function(){h.set(this,i,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(n=h.get(r),1===r.nodeType&&!O.get(r,"hasDataAttrs"))){for(t=a.length;t--;)a[t]&&0===(s=a[t].name).indexOf("data-")&&(s=L(s.slice(5)),me(r,s,n[s]));O.set(r,"hasDataAttrs",!0)}return n},removeData:function(e){return this.each(function(){h.remove(this,e)})}}),S.extend({queue:function(e,t,i){var s;if(e)return s=O.get(e,t=(t||"fx")+"queue"),i&&(!s||Array.isArray(i)?s=O.access(e,t,S.makeArray(i)):s.push(i)),s||[]},dequeue:function(e,t){t=t||"fx";var i=S.queue(e,t),s=i.length,n=i.shift(),r=S._queueHooks(e,t);"inprogress"===n&&(n=i.shift(),s--),n&&("fx"===t&&i.unshift("inprogress"),delete r.stop,n.call(e,function(){S.dequeue(e,t)},r)),!s&&r&&r.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return O.get(e,i)||O.access(e,i,{empty:S.Callbacks("once memory").add(function(){O.remove(e,[t+"queue",i])})})}}),S.fn.extend({queue:function(t,i){var e=2;return"string"!=typeof t&&(i=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===i?this:this.each(function(){var e=S.queue(this,t,i);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function i(){--n||r.resolveWith(a,[a])}var s,n=1,r=S.Deferred(),a=this,o=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(s=O.get(a[o],e+"queueHooks"))&&s.empty&&(n++,s.empty.add(i));return i(),r.promise(t)}});function fe(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&_(e)&&"none"===S.css(e,"display")}var e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ge=new RegExp("^(?:([+-])=|)("+e+")([a-z%]*)$","i"),c=["Top","Right","Bottom","Left"],b=C.documentElement,_=function(e){return S.contains(e.ownerDocument,e)},ve={composed:!0};b.getRootNode&&(_=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(ve)===e.ownerDocument});function Le(e,t,i,s){var n,r,a=20,o=s?function(){return s.cur()}:function(){return S.css(e,t,"")},l=o(),h=i&&i[3]||(S.cssNumber[t]?"":"px"),p=e.nodeType&&(S.cssNumber[t]||"px"!==h&&+l)&&ge.exec(S.css(e,t));if(p&&p[3]!==h){for(h=h||p[3],p=+(l/=2)||1;a--;)S.style(e,t,p+h),(1-r)*(1-(r=o()/l||.5))<=0&&(a=0),p/=r;S.style(e,t,(p*=2)+h),i=i||[]}return i&&(p=+p||+l||0,n=i[1]?p+(i[1]+1)*i[2]:+i[2],s&&(s.unit=h,s.start=p,s.end=n)),n}var Oe={};function E(e,t){for(var i,s,n,r,a,o,l=[],h=0,p=e.length;h<p;h++)(s=e[h]).style&&(i=s.style.display,t?("none"===i&&(l[h]=O.get(s,"display")||null,l[h]||(s.style.display="")),""===s.style.display&&fe(s)&&(l[h]=(o=r=n=void 0,r=s.ownerDocument,a=s.nodeName,(o=Oe[a])||(n=r.body.appendChild(r.createElement(a)),o=S.css(n,"display"),n.parentNode.removeChild(n),Oe[a]=o="none"===o?"block":o)))):"none"!==i&&(l[h]="none",O.set(s,"display",i)));for(h=0;h<p;h++)null!=l[h]&&(e[h].style.display=l[h]);return e}S.fn.extend({show:function(){return E(this,!0)},hide:function(){return E(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){fe(this)?S(this).show():S(this).hide()})}});var be=/^(?:checkbox|radio)$/i,we=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ce=/^$|^module$|\/(?:java|ecma)script/i,i=C.createDocumentFragment().appendChild(C.createElement("div")),N=((A=C.createElement("input")).setAttribute("type","radio"),A.setAttribute("checked","checked"),A.setAttribute("name","t"),i.appendChild(A),f.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,i.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!i.cloneNode(!0).lastChild.defaultValue,i.innerHTML="<option></option>",f.option=!!i.lastChild,{thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]});function P(e,t){var i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&l(e,t)?S.merge([e],i):i}function Se(e,t){for(var i=0,s=e.length;i<s;i++)O.set(e[i],"globalEval",!t||O.get(t[i],"globalEval"))}N.tbody=N.tfoot=N.colgroup=N.caption=N.thead,N.th=N.td,f.option||(N.optgroup=N.option=[1,"<select multiple='multiple'>","</select>"]);var xe=/<|&#?\w+;/;function _e(e,t,i,s,n){for(var r,a,o,l,h,p=t.createDocumentFragment(),u=[],c=0,d=e.length;c<d;c++)if((r=e[c])||0===r)if("object"===y(r))S.merge(u,r.nodeType?[r]:r);else if(xe.test(r)){for(a=a||p.appendChild(t.createElement("div")),o=(we.exec(r)||["",""])[1].toLowerCase(),o=N[o]||N._default,a.innerHTML=o[1]+S.htmlPrefilter(r)+o[2],h=o[0];h--;)a=a.lastChild;S.merge(u,a.childNodes),(a=p.firstChild).textContent=""}else u.push(t.createTextNode(r));for(p.textContent="",c=0;r=u[c++];)if(s&&-1<S.inArray(r,s))n&&n.push(r);else if(l=_(r),a=P(p.appendChild(r),"script"),l&&Se(a),i)for(h=0;r=a[h++];)Ce.test(r.type||"")&&i.push(r);return p}var Ee=/^([^.]*)(?:\.(.+)|)/;function a(){return!0}function d(){return!1}function Ne(e,t){return e===function(){try{return C.activeElement}catch(e){}}()==("focus"===t)}function Pe(e,t,i,s,n,r){var a,o;if("object"==_typeof(t)){for(o in"string"!=typeof i&&(s=s||i,i=void 0),t)Pe(e,o,i,s,t[o],r);return e}if(null==s&&null==n?(n=i,s=i=void 0):null==n&&("string"==typeof i?(n=s,s=void 0):(n=s,s=i,i=void 0)),!1===n)n=d;else if(!n)return e;return 1===r&&(a=n,(n=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,n,s,i)})}function Te(e,n,r){r?(O.set(e,n,!1),S.event.add(e,n,{namespace:!1,handler:function(e){var t,i,s=O.get(this,n);if(1&e.isTrigger&&this[n]){if(s.length)(S.event.special[n]||{}).delegateType&&e.stopPropagation();else if(s=o.call(arguments),O.set(this,n,s),t=r(this,n),this[n](),s!==(i=O.get(this,n))||t?O.set(this,n,!1):i={},s!==i)return e.stopImmediatePropagation(),e.preventDefault(),i&&i.value}else s.length&&(O.set(this,n,{value:S.event.trigger(S.extend(s[0],S.Event.prototype),s.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===O.get(e,n)&&S.event.add(e,n,a)}S.event={global:{},add:function(t,e,i,s,n){var r,a,o,l,h,p,u,c,d,y=O.get(t);if(g(t))for(i.handler&&(i=(r=i).handler,n=r.selector),n&&S.find.matchesSelector(b,n),i.guid||(i.guid=S.guid++),(o=y.events)||(o=y.events=Object.create(null)),(a=y.handle)||(a=y.handle=function(e){return void 0!==S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(x)||[""]).length;l--;)u=d=(c=Ee.exec(e[l])||[])[1],c=(c[2]||"").split(".").sort(),u&&(h=S.event.special[u]||{},u=(n?h.delegateType:h.bindType)||u,h=S.event.special[u]||{},d=S.extend({type:u,origType:d,data:s,handler:i,guid:i.guid,selector:n,needsContext:n&&S.expr.match.needsContext.test(n),namespace:c.join(".")},r),(p=o[u])||((p=o[u]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,s,c,a)||t.addEventListener&&t.addEventListener(u,a)),h.add&&(h.add.call(t,d),d.handler.guid||(d.handler.guid=i.guid)),n?p.splice(p.delegateCount++,0,d):p.push(d),S.event.global[u]=!0)},remove:function(e,t,i,s,n){var r,a,o,l,h,p,u,c,d,y,m,f=O.hasData(e)&&O.get(e);if(f&&(l=f.events)){for(h=(t=(t||"").match(x)||[""]).length;h--;)if(d=m=(o=Ee.exec(t[h])||[])[1],y=(o[2]||"").split(".").sort(),d){for(u=S.event.special[d]||{},c=l[d=(s?u.delegateType:u.bindType)||d]||[],o=o[2]&&new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=r=c.length;r--;)p=c[r],!n&&m!==p.origType||i&&i.guid!==p.guid||o&&!o.test(p.namespace)||s&&s!==p.selector&&("**"!==s||!p.selector)||(c.splice(r,1),p.selector&&c.delegateCount--,u.remove&&u.remove.call(e,p));a&&!c.length&&(u.teardown&&!1!==u.teardown.call(e,y,f.handle)||S.removeEvent(e,d,f.handle),delete l[d])}else for(d in l)S.event.remove(e,d+t[h],i,s,!0);S.isEmptyObject(l)&&O.remove(e,"handle events")}},dispatch:function(e){var t,i,s,n,r,a=new Array(arguments.length),o=S.event.fix(e),e=(O.get(this,"events")||Object.create(null))[o.type]||[],l=S.event.special[o.type]||{};for(a[0]=o,t=1;t<arguments.length;t++)a[t]=arguments[t];if(o.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,o)){for(r=S.event.handlers.call(this,o,e),t=0;(s=r[t++])&&!o.isPropagationStopped();)for(o.currentTarget=s.elem,i=0;(n=s.handlers[i++])&&!o.isImmediatePropagationStopped();)o.rnamespace&&!1!==n.namespace&&!o.rnamespace.test(n.namespace)||(o.handleObj=n,o.data=n.data,void 0!==(n=((S.event.special[n.origType]||{}).handle||n.handler).apply(s.elem,a))&&!1===(o.result=n)&&(o.preventDefault(),o.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,o),o.result}},handlers:function(e,t){var i,s,n,r,a,o=[],l=t.delegateCount,h=e.target;if(l&&h.nodeType&&!("click"===e.type&&1<=e.button))for(;h!==this;h=h.parentNode||this)if(1===h.nodeType&&("click"!==e.type||!0!==h.disabled)){for(r=[],a={},i=0;i<l;i++)void 0===a[n=(s=t[i]).selector+" "]&&(a[n]=s.needsContext?-1<S(n,this).index(h):S.find(n,this,null,[h]).length),a[n]&&r.push(s);r.length&&o.push({elem:h,handlers:r})}return h=this,l<t.length&&o.push({elem:h,handlers:t.slice(l)}),o},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:v(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){e=this||e;return be.test(e.type)&&e.click&&l(e,"input")&&Te(e,"click",a),!1},trigger:function(e){e=this||e;return be.test(e.type)&&e.click&&l(e,"input")&&Te(e,"click"),!0},_default:function(e){e=e.target;return be.test(e.type)&&e.click&&l(e,"input")&&O.get(e,"click")||l(e,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?a:d,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=a,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=a,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=a,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(e,t){S.event.special[e]={setup:function(){return Te(this,e,Ne),!1},trigger:function(){return Te(this,e),!0},_default:function(){return!0},delegateType:t}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,n){S.event.special[e]={delegateType:n,bindType:n,handle:function(e){var t,i=e.relatedTarget,s=e.handleObj;return i&&(i===this||S.contains(this,i))||(e.type=s.origType,t=s.handler.apply(this,arguments),e.type=n),t}}}),S.fn.extend({on:function(e,t,i,s){return Pe(this,e,t,i,s)},one:function(e,t,i,s){return Pe(this,e,t,i,s,1)},off:function(e,t,i){var s,n;if(e&&e.preventDefault&&e.handleObj)return s=e.handleObj,S(e.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if("object"!=_typeof(e))return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=d),this.each(function(){S.event.remove(this,e,i,t)});for(n in e)this.off(n,t,e[n]);return this}});var Me=/<script|<style|<link/i,Ae=/checked\s*(?:[^=]|=\s*.checked.)/i,Fe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function ke(e,t){return l(e,"table")&&l(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function De(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ie(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Re(e,t){var i,s,n,r;if(1===t.nodeType){if(O.hasData(e)&&(r=O.get(e).events))for(n in O.remove(t,"handle events"),r)for(i=0,s=r[n].length;i<s;i++)S.event.add(t,n,r[n][i]);h.hasData(e)&&(e=h.access(e),e=S.extend({},e),h.set(t,e))}}function T(i,s,n,r){s=z(s);var e,t,a,o,l,h,p=0,u=i.length,c=u-1,d=s[0],y=v(d);if(y||1<u&&"string"==typeof d&&!f.checkClone&&Ae.test(d))return i.each(function(e){var t=i.eq(e);y&&(s[0]=d.call(this,e,t.html())),T(t,s,n,r)});if(u&&(t=(e=_e(s,i[0].ownerDocument,!1,i,r)).firstChild,1===e.childNodes.length&&(e=t),t||r)){for(o=(a=S.map(P(e,"script"),De)).length;p<u;p++)l=e,p!==c&&(l=S.clone(l,!0,!0),o&&S.merge(a,P(l,"script"))),n.call(i[p],l,p);if(o)for(h=a[a.length-1].ownerDocument,S.map(a,Ie),p=0;p<o;p++)l=a[p],Ce.test(l.type||"")&&!O.access(l,"globalEval")&&S.contains(h,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?S._evalUrl&&!l.noModule&&S._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},h):X(l.textContent.replace(Fe,""),l,h))}return i}function ze(e,t,i){for(var s,n=t?S.filter(t,e):e,r=0;null!=(s=n[r]);r++)i||1!==s.nodeType||S.cleanData(P(s)),s.parentNode&&(i&&_(s)&&Se(P(s,"script")),s.parentNode.removeChild(s));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,i){var s,n,r,a,o,l,h,p=e.cloneNode(!0),u=_(e);if(!(f.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=P(p),s=0,n=(r=P(e)).length;s<n;s++)o=r[s],"input"===(h=(l=a[s]).nodeName.toLowerCase())&&be.test(o.type)?l.checked=o.checked:"input"!==h&&"textarea"!==h||(l.defaultValue=o.defaultValue);if(t)if(i)for(r=r||P(e),a=a||P(p),s=0,n=r.length;s<n;s++)Re(r[s],a[s]);else Re(e,p);return 0<(a=P(p,"script")).length&&Se(a,!u&&P(e,"script")),p},cleanData:function(e){for(var t,i,s,n=S.event.special,r=0;void 0!==(i=e[r]);r++)if(g(i)){if(t=i[O.expando]){if(t.events)for(s in t.events)n[s]?S.event.remove(i,s):S.removeEvent(i,s,t.handle);i[O.expando]=void 0}i[h.expando]&&(i[h.expando]=void 0)}}}),S.fn.extend({detach:function(e){return ze(this,e,!0)},remove:function(e){return ze(this,e)},text:function(e){return u(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return T(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ke(this,e).appendChild(e)})},prepend:function(){return T(this,arguments,function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=ke(this,e)).insertBefore(e,t.firstChild)})},before:function(){return T(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return T(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(P(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return u(this,function(e){var t=this[0]||{},i=0,s=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Me.test(e)&&!N[(we.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;i<s;i++)1===(t=this[i]||{}).nodeType&&(S.cleanData(P(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var i=[];return T(this,arguments,function(e){var t=this.parentNode;S.inArray(this,i)<0&&(S.cleanData(P(this)),t&&t.replaceChild(e,this))},i)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){S.fn[e]=function(e){for(var t,i=[],s=S(e),n=s.length-1,r=0;r<=n;r++)t=r===n?this:this.clone(!0),S(s[r])[a](t),B.apply(i,t.get());return this.pushStack(i)}});function Be(e){var t=e.ownerDocument.defaultView;return(t=t&&t.opener?t:w).getComputedStyle(e)}function Ue(e,t,i){var s,n={};for(s in t)n[s]=e.style[s],e.style[s]=t[s];for(s in i=i.call(e),t)e.style[s]=n[s];return i}var Ge,He,je,We,Ve,qe,Xe,n,Ye=new RegExp("^("+e+")(?!px)[a-z%]+$","i"),Ze=new RegExp(c.join("|"),"i");function Ke(e,t,i){var s,n,r=e.style;return(i=i||Be(e))&&(""!==(n=i.getPropertyValue(t)||i[t])||_(e)||(n=S.style(e,t)),!f.pixelBoxStyles()&&Ye.test(n)&&Ze.test(t)&&(e=r.width,t=r.minWidth,s=r.maxWidth,r.minWidth=r.maxWidth=r.width=n,n=i.width,r.width=e,r.minWidth=t,r.maxWidth=s)),void 0!==n?n+"":n}function $e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}function Qe(){var e;n&&(Xe.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",n.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",b.appendChild(Xe).appendChild(n),e=w.getComputedStyle(n),Ge="1%"!==e.top,qe=12===Je(e.marginLeft),n.style.right="60%",We=36===Je(e.right),He=36===Je(e.width),n.style.position="absolute",je=12===Je(n.offsetWidth/3),b.removeChild(Xe),n=null)}function Je(e){return Math.round(parseFloat(e))}Xe=C.createElement("div"),(n=C.createElement("div")).style&&(n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===n.style.backgroundClip,S.extend(f,{boxSizingReliable:function(){return Qe(),He},pixelBoxStyles:function(){return Qe(),We},pixelPosition:function(){return Qe(),Ge},reliableMarginLeft:function(){return Qe(),qe},scrollboxSize:function(){return Qe(),je},reliableTrDimensions:function(){var e,t,i;return null==Ve&&(e=C.createElement("table"),t=C.createElement("tr"),i=C.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",i.style.height="9px",i.style.display="block",b.appendChild(e).appendChild(t).appendChild(i),i=w.getComputedStyle(t),Ve=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===t.offsetHeight,b.removeChild(e)),Ve}}));var et=["Webkit","Moz","ms"],tt=C.createElement("div").style,it={};function st(e){return S.cssProps[e]||it[e]||(e in tt?e:it[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),i=et.length;i--;)if((e=et[i]+t)in tt)return e}(e)||e)}var nt=/^(none|table(?!-c[ea]).+)/,rt=/^--/,at={position:"absolute",visibility:"hidden",display:"block"},ot={letterSpacing:"0",fontWeight:"400"};function lt(e,t,i){var s=ge.exec(t);return s?Math.max(0,s[2]-(i||0))+(s[3]||"px"):t}function ht(e,t,i,s,n,r){var a="width"===t?1:0,o=0,l=0;if(i===(s?"border":"content"))return 0;for(;a<4;a+=2)"margin"===i&&(l+=S.css(e,i+c[a],!0,n)),s?("content"===i&&(l-=S.css(e,"padding"+c[a],!0,n)),"margin"!==i&&(l-=S.css(e,"border"+c[a]+"Width",!0,n))):(l+=S.css(e,"padding"+c[a],!0,n),"padding"!==i?l+=S.css(e,"border"+c[a]+"Width",!0,n):o+=S.css(e,"border"+c[a]+"Width",!0,n));return!s&&0<=r&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-r-l-o-.5))||0),l}function pt(e,t,i){var s=Be(e),n=(!f.boxSizingReliable()||i)&&"border-box"===S.css(e,"boxSizing",!1,s),r=n,a=Ke(e,t,s),o="offset"+t[0].toUpperCase()+t.slice(1);if(Ye.test(a)){if(!i)return a;a="auto"}return(!f.boxSizingReliable()&&n||!f.reliableTrDimensions()&&l(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===S.css(e,"display",!1,s))&&e.getClientRects().length&&(n="border-box"===S.css(e,"boxSizing",!1,s),(r=o in e)&&(a=e[o])),(a=parseFloat(a)||0)+ht(e,t,i||(n?"border":"content"),r,s,a)+"px"}function r(e,t,i,s,n){return new r.prototype.init(e,t,i,s,n)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t)return""===(t=Ke(e,"opacity"))?"1":t}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,i,s){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var n,r,a,o=L(t),l=rt.test(t),h=e.style;if(l||(t=st(o)),a=S.cssHooks[t]||S.cssHooks[o],void 0===i)return a&&"get"in a&&void 0!==(n=a.get(e,!1,s))?n:h[t];"string"===(r=_typeof(i))&&(n=ge.exec(i))&&n[1]&&(i=Le(e,t,n),r="number"),null!=i&&i==i&&("number"!==r||l||(i+=n&&n[3]||(S.cssNumber[o]?"":"px")),f.clearCloneStyle||""!==i||0!==t.indexOf("background")||(h[t]="inherit"),a&&"set"in a&&void 0===(i=a.set(e,i,s))||(l?h.setProperty(t,i):h[t]=i))}},css:function(e,t,i,s){var n,r=L(t);return rt.test(t)||(t=st(r)),"normal"===(n=void 0===(n=(r=S.cssHooks[t]||S.cssHooks[r])&&"get"in r?r.get(e,!0,i):n)?Ke(e,t,s):n)&&t in ot&&(n=ot[t]),""===i||i?(r=parseFloat(n),!0===i||isFinite(r)?r||0:n):n}}),S.each(["height","width"],function(e,a){S.cssHooks[a]={get:function(e,t,i){if(t)return!nt.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?pt(e,a,i):Ue(e,at,function(){return pt(e,a,i)})},set:function(e,t,i){var s=Be(e),n=!f.scrollboxSize()&&"absolute"===s.position,r=(n||i)&&"border-box"===S.css(e,"boxSizing",!1,s),i=i?ht(e,a,i,r,s):0;return r&&n&&(i-=Math.ceil(e["offset"+a[0].toUpperCase()+a.slice(1)]-parseFloat(s[a])-ht(e,a,"border",!1,s)-.5)),i&&(r=ge.exec(t))&&"px"!==(r[3]||"px")&&(e.style[a]=t,t=S.css(e,a)),lt(0,t,i)}}}),S.cssHooks.marginLeft=$e(f.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ke(e,"marginLeft"))||e.getBoundingClientRect().left-Ue(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(n,r){S.cssHooks[n+r]={expand:function(e){for(var t=0,i={},s="string"==typeof e?e.split(" "):[e];t<4;t++)i[n+c[t]+r]=s[t]||s[t-2]||s[0];return i}},"margin"!==n&&(S.cssHooks[n+r].set=lt)}),S.fn.extend({css:function(e,t){return u(this,function(e,t,i){var s,n,r={},a=0;if(Array.isArray(t)){for(s=Be(e),n=t.length;a<n;a++)r[t[a]]=S.css(e,t[a],!1,s);return r}return void 0!==i?S.style(e,t,i):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=r).prototype={constructor:r,init:function(e,t,i,s,n,r){this.elem=e,this.prop=i,this.easing=n||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=s,this.unit=r||(S.cssNumber[i]?"":"px")},cur:function(){var e=r.propHooks[this.prop];return(e&&e.get?e:r.propHooks._default).get(this)},run:function(e){var t,i=r.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(i&&i.set?i:r.propHooks._default).set(this),this}}).init.prototype=r.prototype,(r.propHooks={_default:{get:function(e){return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(e=S.css(e.elem,e.prop,""))&&"auto"!==e?e:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[st(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=r.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=r.prototype.init,S.fx.step={};var M,ut,A,ct=/^(?:toggle|show|hide)$/,dt=/queueHooks$/;function yt(){ut&&(!1===C.hidden&&w.requestAnimationFrame?w.requestAnimationFrame(yt):w.setTimeout(yt,S.fx.interval),S.fx.tick())}function mt(){return w.setTimeout(function(){M=void 0}),M=Date.now()}function ft(e,t){var i,s=0,n={height:e};for(t=t?1:0;s<4;s+=2-t)n["margin"+(i=c[s])]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function gt(e,t,i){for(var s,n=(F.tweeners[t]||[]).concat(F.tweeners["*"]),r=0,a=n.length;r<a;r++)if(s=n[r].call(i,t,e))return s}function F(n,e,t){var i,r,s,a,o,l,h,p=0,u=F.prefilters.length,c=S.Deferred().always(function(){delete d.elem}),d=function(){if(r)return!1;for(var e=M||mt(),e=Math.max(0,y.startTime+y.duration-e),t=1-(e/y.duration||0),i=0,s=y.tweens.length;i<s;i++)y.tweens[i].run(t);return c.notifyWith(n,[y,t,e]),t<1&&s?e:(s||c.notifyWith(n,[y,1,0]),c.resolveWith(n,[y]),!1)},y=c.promise({elem:n,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:M||mt(),duration:t.duration,tweens:[],createTween:function(e,t){t=S.Tween(n,y.opts,e,t,y.opts.specialEasing[e]||y.opts.easing);return y.tweens.push(t),t},stop:function(e){var t=0,i=e?y.tweens.length:0;if(r)return this;for(r=!0;t<i;t++)y.tweens[t].run(1);return e?(c.notifyWith(n,[y,1,0]),c.resolveWith(n,[y,e])):c.rejectWith(n,[y,e]),this}}),m=y.props,f=m,g=y.opts.specialEasing;for(s in f)if(o=g[a=L(s)],l=f[s],Array.isArray(l)&&(o=l[1],l=f[s]=l[0]),s!==a&&(f[a]=l,delete f[s]),(h=S.cssHooks[a])&&"expand"in h)for(s in l=h.expand(l),delete f[a],l)s in f||(f[s]=l[s],g[s]=o);else g[a]=o;for(;p<u;p++)if(i=F.prefilters[p].call(y,n,m,y.opts))return v(i.stop)&&(S._queueHooks(y.elem,y.opts.queue).stop=i.stop.bind(i)),i;return S.map(m,gt,y),v(y.opts.start)&&y.opts.start.call(n,y),y.progress(y.opts.progress).done(y.opts.done,y.opts.complete).fail(y.opts.fail).always(y.opts.always),S.fx.timer(S.extend(d,{elem:n,anim:y,queue:y.opts.queue})),y}S.Animation=S.extend(F,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return Le(i.elem,e,ge.exec(t),i),i}]},tweener:function(e,t){for(var i,s=0,n=(e=v(e)?(t=e,["*"]):e.match(x)).length;s<n;s++)i=e[s],F.tweeners[i]=F.tweeners[i]||[],F.tweeners[i].unshift(t)},prefilters:[function(e,t,i){var s,n,r,a,o,l,h,p="width"in t||"height"in t,u=this,c={},d=e.style,y=e.nodeType&&fe(e),m=O.get(e,"fxshow");for(s in i.queue||(null==(a=S._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,o=a.empty.fire,a.empty.fire=function(){a.unqueued||o()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()})})),t)if(n=t[s],ct.test(n)){if(delete t[s],r=r||"toggle"===n,n===(y?"hide":"show")){if("show"!==n||!m||void 0===m[s])continue;y=!0}c[s]=m&&m[s]||S.style(e,s)}if((l=!S.isEmptyObject(t))||!S.isEmptyObject(c))for(s in p&&1===e.nodeType&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],null==(h=m&&m.display)&&(h=O.get(e,"display")),"none"===(p=S.css(e,"display"))&&(h?p=h:(E([e],!0),h=e.style.display||h,p=S.css(e,"display"),E([e]))),("inline"===p||"inline-block"===p&&null!=h)&&"none"===S.css(e,"float")&&(l||(u.done(function(){d.display=h}),null==h&&(p=d.display,h="none"===p?"":p)),d.display="inline-block")),i.overflow&&(d.overflow="hidden",u.always(function(){d.overflow=i.overflow[0],d.overflowX=i.overflow[1],d.overflowY=i.overflow[2]})),l=!1,c)l||(m?"hidden"in m&&(y=m.hidden):m=O.access(e,"fxshow",{display:h}),r&&(m.hidden=!y),y&&E([e],!0),u.done(function(){for(s in y||E([e]),O.remove(e,"fxshow"),c)S.style(e,s,c[s])})),l=gt(y?m[s]:0,s,u),s in m||(m[s]=l.start,y&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?F.prefilters.unshift(e):F.prefilters.push(e)}}),S.speed=function(e,t,i){var s=e&&"object"==_typeof(e)?S.extend({},e):{complete:i||!i&&t||v(e)&&e,duration:e,easing:i&&t||t&&!v(t)&&t};return S.fx.off?s.duration=0:"number"!=typeof s.duration&&(s.duration in S.fx.speeds?s.duration=S.fx.speeds[s.duration]:s.duration=S.fx.speeds._default),null!=s.queue&&!0!==s.queue||(s.queue="fx"),s.old=s.complete,s.complete=function(){v(s.old)&&s.old.call(this),s.queue&&S.dequeue(this,s.queue)},s},S.fn.extend({fadeTo:function(e,t,i,s){return this.filter(fe).css("opacity",0).show().end().animate({opacity:t},e,i,s)},animate:function(t,e,i,s){function n(){var e=F(this,S.extend({},t),a);(r||O.get(this,"finish"))&&e.stop(!0)}var r=S.isEmptyObject(t),a=S.speed(e,i,s);return n.finish=n,r||!1===a.queue?this.each(n):this.queue(a.queue,n)},stop:function(n,e,r){function a(e){var t=e.stop;delete e.stop,t(r)}return"string"!=typeof n&&(r=e,e=n,n=void 0),e&&this.queue(n||"fx",[]),this.each(function(){var e=!0,t=null!=n&&n+"queueHooks",i=S.timers,s=O.get(this);if(t)s[t]&&s[t].stop&&a(s[t]);else for(t in s)s[t]&&s[t].stop&&dt.test(t)&&a(s[t]);for(t=i.length;t--;)i[t].elem!==this||null!=n&&i[t].queue!==n||(i[t].anim.stop(r),e=!1,i.splice(t,1));!e&&r||S.dequeue(this,n)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=O.get(this),i=t[a+"queue"],s=t[a+"queueHooks"],n=S.timers,r=i?i.length:0;for(t.finish=!0,S.queue(this,a,[]),s&&s.stop&&s.stop.call(this,!0),e=n.length;e--;)n[e].elem===this&&n[e].queue===a&&(n[e].anim.stop(!0),n.splice(e,1));for(e=0;e<r;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,s){var n=S.fn[s];S.fn[s]=function(e,t,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ft(s,!0),e,t,i)}}),S.each({slideDown:ft("show"),slideUp:ft("hide"),slideToggle:ft("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,s){S.fn[e]=function(e,t,i){return this.animate(s,e,t,i)}}),S.timers=[],S.fx.tick=function(){var e,t=0,i=S.timers;for(M=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||S.fx.stop(),M=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){ut||(ut=!0,yt())},S.fx.stop=function(){ut=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(s,e){return s=S.fx&&S.fx.speeds[s]||s,this.queue(e=e||"fx",function(e,t){var i=w.setTimeout(e,s);t.stop=function(){w.clearTimeout(i)}})},A=C.createElement("input"),i=C.createElement("select").appendChild(C.createElement("option")),A.type="checkbox",f.checkOn=""!==A.value,f.optSelected=i.selected,(A=C.createElement("input")).value="t",A.type="radio",f.radioValue="t"===A.value;var vt,Lt=S.expr.attrHandle,Ot=(S.fn.extend({attr:function(e,t){return u(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,i){var s,n,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===e.getAttribute?S.prop(e,t,i):(1===r&&S.isXMLDoc(e)||(n=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?vt:void 0)),void 0!==i?null===i?void S.removeAttr(e,t):n&&"set"in n&&void 0!==(s=n.set(e,i,t))?s:(e.setAttribute(t,i+""),i):!(n&&"get"in n&&null!==(s=n.get(e,t)))&&null==(s=S.find.attr(e,t))?void 0:s)},attrHooks:{type:{set:function(e,t){var i;if(!f.radioValue&&"radio"===t&&l(e,"input"))return i=e.value,e.setAttribute("type",t),i&&(e.value=i),t}}},removeAttr:function(e,t){var i,s=0,n=t&&t.match(x);if(n&&1===e.nodeType)for(;i=n[s++];)e.removeAttribute(i)}}),vt={set:function(e,t,i){return!1===t?S.removeAttr(e,i):e.setAttribute(i,i),i}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var a=Lt[t]||S.find.attr;Lt[t]=function(e,t,i){var s,n,r=t.toLowerCase();return i||(n=Lt[r],Lt[r]=s,s=null!=a(e,t,i)?r:null,Lt[r]=n),s}}),/^(?:input|select|textarea|button)$/i),bt=/^(?:a|area)$/i;function k(e){return(e.match(x)||[]).join(" ")}function D(e){return e.getAttribute&&e.getAttribute("class")||""}function wt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(x)||[]}S.fn.extend({prop:function(e,t){return u(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,i){var s,n,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&S.isXMLDoc(e)||(t=S.propFix[t]||t,n=S.propHooks[t]),void 0!==i?n&&"set"in n&&void 0!==(s=n.set(e,i,t))?s:e[t]=i:n&&"get"in n&&null!==(s=n.get(e,t))?s:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):Ot.test(e.nodeName)||bt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),f.optSelected||(S.propHooks.selected={get:function(e){e=e.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(e){e=e.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,i,s,n,r,a,o=0;if(v(t))return this.each(function(e){S(this).addClass(t.call(this,e,D(this)))});if((e=wt(t)).length)for(;i=this[o++];)if(a=D(i),s=1===i.nodeType&&" "+k(a)+" "){for(r=0;n=e[r++];)s.indexOf(" "+n+" ")<0&&(s+=n+" ");a!==(a=k(s))&&i.setAttribute("class",a)}return this},removeClass:function(t){var e,i,s,n,r,a,o=0;if(v(t))return this.each(function(e){S(this).removeClass(t.call(this,e,D(this)))});if(!arguments.length)return this.attr("class","");if((e=wt(t)).length)for(;i=this[o++];)if(a=D(i),s=1===i.nodeType&&" "+k(a)+" "){for(r=0;n=e[r++];)for(;-1<s.indexOf(" "+n+" ");)s=s.replace(" "+n+" "," ");a!==(a=k(s))&&i.setAttribute("class",a)}return this},toggleClass:function(n,t){var r=_typeof(n),a="string"===r||Array.isArray(n);return"boolean"==typeof t&&a?t?this.addClass(n):this.removeClass(n):v(n)?this.each(function(e){S(this).toggleClass(n.call(this,e,D(this),t),t)}):this.each(function(){var e,t,i,s;if(a)for(t=0,i=S(this),s=wt(n);e=s[t++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else void 0!==n&&"boolean"!==r||((e=D(this))&&O.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",!e&&!1!==n&&O.get(this,"__className__")||""))})},hasClass:function(e){for(var t,i=0,s=" "+e+" ";t=this[i++];)if(1===t.nodeType&&-1<(" "+k(D(t))+" ").indexOf(s))return!0;return!1}});function Ct(e){e.stopPropagation()}var St=/\r/g,xt=(S.fn.extend({val:function(t){var i,e,s,n=this[0];return arguments.length?(s=v(t),this.each(function(e){1===this.nodeType&&(null==(e=s?t.call(this,e,S(this).val()):t)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=S.map(e,function(e){return null==e?"":e+""})),(i=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,e,"value")||(this.value=e))})):n?(i=S.valHooks[n.type]||S.valHooks[n.nodeName.toLowerCase()])&&"get"in i&&void 0!==(e=i.get(n,"value"))?e:"string"==typeof(e=n.value)?e.replace(St,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:k(S.text(e))}},select:{get:function(e){for(var t,i=e.options,s=e.selectedIndex,n="select-one"===e.type,r=n?null:[],a=n?s+1:i.length,o=s<0?a:n?s:0;o<a;o++)if(((t=i[o]).selected||o===s)&&!t.disabled&&(!t.parentNode.disabled||!l(t.parentNode,"optgroup"))){if(t=S(t).val(),n)return t;r.push(t)}return r},set:function(e,t){for(var i,s,n=e.options,r=S.makeArray(t),a=n.length;a--;)((s=n[a]).selected=-1<S.inArray(S.valHooks.option.get(s),r))&&(i=!0);return i||(e.selectedIndex=-1),r}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},f.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),f.focusin="onfocusin"in w,/^(?:focusinfocus|focusoutblur)$/),_t=(S.extend(S.event,{trigger:function(e,t,i,s){var n,r,a,o,l,h,p,u=[i||C],c=j.call(e,"type")?e.type:e,d=j.call(e,"namespace")?e.namespace.split("."):[],y=p=r=i=i||C;if(3!==i.nodeType&&8!==i.nodeType&&!xt.test(c+S.event.triggered)&&(-1<c.indexOf(".")&&(c=(d=c.split(".")).shift(),d.sort()),o=c.indexOf(":")<0&&"on"+c,(e=e[S.expando]?e:new S.Event(c,"object"==_typeof(e)&&e)).isTrigger=s?2:3,e.namespace=d.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:S.makeArray(t,[e]),h=S.event.special[c]||{},s||!h.trigger||!1!==h.trigger.apply(i,t))){if(!s&&!h.noBubble&&!m(i)){for(a=h.delegateType||c,xt.test(a+c)||(y=y.parentNode);y;y=y.parentNode)u.push(y),r=y;r===(i.ownerDocument||C)&&u.push(r.defaultView||r.parentWindow||w)}for(n=0;(y=u[n++])&&!e.isPropagationStopped();)p=y,e.type=1<n?a:h.bindType||c,(l=(O.get(y,"events")||Object.create(null))[e.type]&&O.get(y,"handle"))&&l.apply(y,t),(l=o&&y[o])&&l.apply&&g(y)&&(e.result=l.apply(y,t),!1===e.result&&e.preventDefault());return e.type=c,s||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(u.pop(),t)||!g(i)||o&&v(i[c])&&!m(i)&&((r=i[o])&&(i[o]=null),S.event.triggered=c,e.isPropagationStopped()&&p.addEventListener(c,Ct),i[c](),e.isPropagationStopped()&&p.removeEventListener(c,Ct),S.event.triggered=void 0,r&&(i[o]=r)),e.result}},simulate:function(e,t,i){i=S.extend(new S.Event,i,{type:e,isSimulated:!0});S.event.trigger(i,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return S.event.trigger(e,t,i,!0)}}),f.focusin||S.each({focus:"focusin",blur:"focusout"},function(i,s){function n(e){S.event.simulate(s,e.target,S.event.fix(e))}S.event.special[s]={setup:function(){var e=this.ownerDocument||this.document||this,t=O.access(e,s);t||e.addEventListener(i,n,!0),O.access(e,s,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=O.access(e,s)-1;t?O.access(e,s,t):(e.removeEventListener(i,n,!0),O.remove(e,s))}}}),w.location),Et={guid:Date.now()},Nt=/\?/,Pt=(S.parseXML=function(e){var t,i;if(!e||"string"!=typeof e)return null;try{t=(new w.DOMParser).parseFromString(e,"text/xml")}catch(e){}return i=t&&t.getElementsByTagName("parsererror")[0],t&&!i||S.error("Invalid XML: "+(i?S.map(i.childNodes,function(e){return e.textContent}).join("\n"):e)),t},/\[\]$/),Tt=/\r?\n/g,Mt=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;S.param=function(e,t){function i(e,t){t=v(t)?t():t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==t?"":t)}var s,n=[];if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(s in e)!function i(s,e,n,r){if(Array.isArray(e))S.each(e,function(e,t){n||Pt.test(s)?r(s,t):i(s+"["+("object"==_typeof(t)&&null!=t?e:"")+"]",t,n,r)});else if(n||"object"!==y(e))r(s,e);else for(var t in e)i(s+"["+t+"]",e[t],n,r)}(s,e[s],t,i);return n.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&At.test(this.nodeName)&&!Mt.test(e)&&(this.checked||!be.test(e))}).map(function(e,t){var i=S(this).val();return null==i?null:Array.isArray(i)?S.map(i,function(e){return{name:t.name,value:e.replace(Tt,"\r\n")}}):{name:t.name,value:i.replace(Tt,"\r\n")}}).get()}});var Ft=/%20/g,kt=/#.*$/,Dt=/([?&])_=[^&]*/,It=/^(.*?):[ \t]*([^\r\n]*)$/gm,Rt=/^(?:GET|HEAD)$/,zt=/^\/\//,Bt={},Ut={},Gt="*/".concat("*"),Ht=C.createElement("a");function jt(r){return function(e,t){"string"!=typeof e&&(t=e,e="*");var i,s=0,n=e.toLowerCase().match(x)||[];if(v(t))for(;i=n[s++];)"+"===i[0]?(i=i.slice(1)||"*",(r[i]=r[i]||[]).unshift(t)):(r[i]=r[i]||[]).push(t)}}function Wt(t,s,n,r){var a={},o=t===Ut;function l(e){var i;return a[e]=!0,S.each(t[e]||[],function(e,t){t=t(s,n,r);return"string"!=typeof t||o||a[t]?o?!(i=t):void 0:(s.dataTypes.unshift(t),l(t),!1)}),i}return l(s.dataTypes[0])||!a["*"]&&l("*")}function Vt(e,t){var i,s,n=S.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((n[i]?e:s=s||{})[i]=t[i]);return s&&S.extend(!0,e,s),e}Ht.href=_t.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_t.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(_t.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Gt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Vt(Vt(e,S.ajaxSettings),t):Vt(S.ajaxSettings,e)},ajaxPrefilter:jt(Bt),ajaxTransport:jt(Ut),ajax:function(e,t){"object"==_typeof(e)&&(t=e,e=void 0);var l,h,p,i,u,c,d,s,n,y=S.ajaxSetup({},t=t||{}),m=y.context||y,f=y.context&&(m.nodeType||m.jquery)?S(m):S.event,g=S.Deferred(),v=S.Callbacks("once memory"),L=y.statusCode||{},r={},a={},o="canceled",O={readyState:0,getResponseHeader:function(e){var t;if(c){if(!i)for(i={};t=It.exec(p);)i[t[1].toLowerCase()+" "]=(i[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=i[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?p:null},setRequestHeader:function(e,t){return null==c&&(e=a[e.toLowerCase()]=a[e.toLowerCase()]||e,r[e]=t),this},overrideMimeType:function(e){return null==c&&(y.mimeType=e),this},statusCode:function(e){if(e)if(c)O.always(e[O.status]);else for(var t in e)L[t]=[L[t],e[t]];return this},abort:function(e){e=e||o;return l&&l.abort(e),b(0,e),this}};if(g.promise(O),y.url=((e||y.url||_t.href)+"").replace(zt,_t.protocol+"//"),y.type=t.method||t.type||y.method||y.type,y.dataTypes=(y.dataType||"*").toLowerCase().match(x)||[""],null==y.crossDomain){n=C.createElement("a");try{n.href=y.url,n.href=n.href,y.crossDomain=Ht.protocol+"//"+Ht.host!=n.protocol+"//"+n.host}catch(e){y.crossDomain=!0}}if(y.data&&y.processData&&"string"!=typeof y.data&&(y.data=S.param(y.data,y.traditional)),Wt(Bt,y,t,O),c)return O;for(s in(d=S.event&&y.global)&&0==S.active++&&S.event.trigger("ajaxStart"),y.type=y.type.toUpperCase(),y.hasContent=!Rt.test(y.type),h=y.url.replace(kt,""),y.hasContent?y.data&&y.processData&&0===(y.contentType||"").indexOf("application/x-www-form-urlencoded")&&(y.data=y.data.replace(Ft,"+")):(n=y.url.slice(h.length),y.data&&(y.processData||"string"==typeof y.data)&&(h+=(Nt.test(h)?"&":"?")+y.data,delete y.data),!1===y.cache&&(h=h.replace(Dt,"$1"),n=(Nt.test(h)?"&":"?")+"_="+Et.guid+++n),y.url=h+n),y.ifModified&&(S.lastModified[h]&&O.setRequestHeader("If-Modified-Since",S.lastModified[h]),S.etag[h]&&O.setRequestHeader("If-None-Match",S.etag[h])),(y.data&&y.hasContent&&!1!==y.contentType||t.contentType)&&O.setRequestHeader("Content-Type",y.contentType),O.setRequestHeader("Accept",y.dataTypes[0]&&y.accepts[y.dataTypes[0]]?y.accepts[y.dataTypes[0]]+("*"!==y.dataTypes[0]?", "+Gt+"; q=0.01":""):y.accepts["*"]),y.headers)O.setRequestHeader(s,y.headers[s]);if(y.beforeSend&&(!1===y.beforeSend.call(m,O,y)||c))return O.abort();if(o="abort",v.add(y.complete),O.done(y.success),O.fail(y.error),l=Wt(Ut,y,t,O)){if(O.readyState=1,d&&f.trigger("ajaxSend",[O,y]),c)return O;y.async&&0<y.timeout&&(u=w.setTimeout(function(){O.abort("timeout")},y.timeout));try{c=!1,l.send(r,b)}catch(e){if(c)throw e;b(-1,e)}}else b(-1,"No Transport");function b(e,t,i,s){var n,r,a,o=t;c||(c=!0,u&&w.clearTimeout(u),l=void 0,p=s||"",O.readyState=0<e?4:0,s=200<=e&&e<300||304===e,i&&(a=function(e,t,i){for(var s,n,r,a,o=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===s&&(s=e.mimeType||t.getResponseHeader("Content-Type"));if(s)for(n in o)if(o[n]&&o[n].test(s)){l.unshift(n);break}if(l[0]in i)r=l[0];else{for(n in i){if(!l[0]||e.converters[n+" "+l[0]]){r=n;break}a=a||n}r=r||a}if(r)return r!==l[0]&&l.unshift(r),i[r]}(y,O,i)),!s&&-1<S.inArray("script",y.dataTypes)&&S.inArray("json",y.dataTypes)<0&&(y.converters["text script"]=function(){}),a=function(e,t,i,s){var n,r,a,o,l,h={},p=e.dataTypes.slice();if(p[1])for(a in e.converters)h[a.toLowerCase()]=e.converters[a];for(r=p.shift();r;)if(e.responseFields[r]&&(i[e.responseFields[r]]=t),!l&&s&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=p.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(a=h[l+" "+r]||h["* "+r]))for(n in h)if((o=n.split(" "))[1]===r&&(a=h[l+" "+o[0]]||h["* "+o[0]])){!0===a?a=h[n]:!0!==h[n]&&(r=o[0],p.unshift(o[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}(y,a,O,s),s?(y.ifModified&&((i=O.getResponseHeader("Last-Modified"))&&(S.lastModified[h]=i),(i=O.getResponseHeader("etag"))&&(S.etag[h]=i)),204===e||"HEAD"===y.type?o="nocontent":304===e?o="notmodified":(o=a.state,n=a.data,s=!(r=a.error))):(r=o,!e&&o||(o="error",e<0&&(e=0))),O.status=e,O.statusText=(t||o)+"",s?g.resolveWith(m,[n,o,O]):g.rejectWith(m,[O,o,r]),O.statusCode(L),L=void 0,d&&f.trigger(s?"ajaxSuccess":"ajaxError",[O,y,s?n:r]),v.fireWith(m,[O,o]),d&&(f.trigger("ajaxComplete",[O,y]),--S.active||S.event.trigger("ajaxStop")))}return O},getJSON:function(e,t,i){return S.get(e,t,i,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,n){S[n]=function(e,t,i,s){return v(t)&&(s=s||i,i=t,t=void 0),S.ajax(S.extend({url:e,type:n,dataType:s,data:t,success:i},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){for(var t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),S._evalUrl=function(e,t,i){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,i)}})},S.fn.extend({wrapAll:function(e){return this[0]&&(v(e)&&(e=e.call(this[0])),e=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(i){return v(i)?this.each(function(e){S(this).wrapInner(i.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(i):e.append(i)})},wrap:function(t){var i=v(t);return this.each(function(e){S(this).wrapAll(i?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new w.XMLHttpRequest}catch(e){}};var qt={0:200,1223:204},Xt=S.ajaxSettings.xhr();f.cors=!!Xt&&"withCredentials"in Xt,f.ajax=Xt=!!Xt,S.ajaxTransport(function(n){var r,a;if(f.cors||Xt&&!n.crossDomain)return{send:function(e,t){var i,s=n.xhr();if(s.open(n.type,n.url,n.async,n.username,n.password),n.xhrFields)for(i in n.xhrFields)s[i]=n.xhrFields[i];for(i in n.mimeType&&s.overrideMimeType&&s.overrideMimeType(n.mimeType),n.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)s.setRequestHeader(i,e[i]);r=function(e){return function(){r&&(r=a=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?t(0,"error"):t(s.status,s.statusText):t(qt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=r(),a=s.onerror=s.ontimeout=r("error"),void 0!==s.onabort?s.onabort=a:s.onreadystatechange=function(){4===s.readyState&&w.setTimeout(function(){r&&a()})},r=r("abort");try{s.send(n.hasContent&&n.data||null)}catch(e){if(r)throw e}},abort:function(){r&&r()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(i){var s,n;if(i.crossDomain||i.scriptAttrs)return{send:function(e,t){s=S("<script>").attr(i.scriptAttrs||{}).prop({charset:i.scriptCharset,src:i.url}).on("load error",n=function(e){s.remove(),n=null,e&&t("error"===e.type?404:200,e.type)}),C.head.appendChild(s[0])},abort:function(){n&&n()}}});var Yt=[],Zt=/(=)\?(?=&|$)|\?\?/,Kt=(S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Yt.pop()||S.expando+"_"+Et.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,i){var s,n,r,a=!1!==e.jsonp&&(Zt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Zt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return s=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Zt,"$1"+s):!1!==e.jsonp&&(e.url+=(Nt.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return r||S.error(s+" was not called"),r[0]},e.dataTypes[0]="json",n=w[s],w[s]=function(){r=arguments},i.always(function(){void 0===n?S(w).removeProp(s):w[s]=n,e[s]&&(e.jsonpCallback=t.jsonpCallback,Yt.push(s)),r&&v(n)&&n(r[0]),r=n=void 0}),"script"}),f.createHTMLDocument=((e=C.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===e.childNodes.length),S.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(f.createHTMLDocument?((s=(t=C.implementation.createHTMLDocument("")).createElement("base")).href=C.location.href,t.head.appendChild(s)):t=C),s=!i&&[],(i=$.exec(e))?[t.createElement(i[1])]:(i=_e([e],t,s),s&&s.length&&S(s).remove(),S.merge([],i.childNodes)));var s},S.fn.load=function(e,t,i){var s,n,r,a=this,o=e.indexOf(" ");return-1<o&&(s=k(e.slice(o)),e=e.slice(0,o)),v(t)?(i=t,t=void 0):t&&"object"==_typeof(t)&&(n="POST"),0<a.length&&S.ajax({url:e,type:n||"GET",dataType:"html",data:t}).done(function(e){r=arguments,a.html(s?S("<div>").append(S.parseHTML(e)).find(s):e)}).always(i&&function(e,t){a.each(function(){i.apply(this,r||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,i){var s,n,r,a,o=S.css(e,"position"),l=S(e),h={};"static"===o&&(e.style.position="relative"),r=l.offset(),s=S.css(e,"top"),a=S.css(e,"left"),o=("absolute"===o||"fixed"===o)&&-1<(s+a).indexOf("auto")?(n=(o=l.position()).top,o.left):(n=parseFloat(s)||0,parseFloat(a)||0),null!=(t=v(t)?t.call(e,i,S.extend({},r)):t).top&&(h.top=t.top-r.top+n),null!=t.left&&(h.left=t.left-r.left+o),"using"in t?t.using.call(e,h):l.css(h)}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),i=i.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,s=this[0],n={top:0,left:0};if("fixed"===S.css(s,"position"))t=s.getBoundingClientRect();else{for(t=this.offset(),i=s.ownerDocument,e=s.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===S.css(e,"position");)e=e.parentNode;e&&e!==s&&1===e.nodeType&&((n=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),n.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-n.top-S.css(s,"marginTop",!0),left:t.left-n.left-S.css(s,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===S.css(e,"position");)e=e.offsetParent;return e||b})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var r="pageYOffset"===n;S.fn[t]=function(e){return u(this,function(e,t,i){var s;if(m(e)?s=e:9===e.nodeType&&(s=e.defaultView),void 0===i)return s?s[n]:e[t];s?s.scrollTo(r?s.pageXOffset:i,r?i:s.pageYOffset):e[t]=i},t,e,arguments.length)}}),S.each(["top","left"],function(e,i){S.cssHooks[i]=$e(f.pixelPosition,function(e,t){if(t)return t=Ke(e,i),Ye.test(t)?S(e).position()[i]+"px":t})}),S.each({Height:"height",Width:"width"},function(a,o){S.each({padding:"inner"+a,content:o,"":"outer"+a},function(s,r){S.fn[r]=function(e,t){var i=arguments.length&&(s||"boolean"!=typeof e),n=s||(!0===e||!0===t?"margin":"border");return u(this,function(e,t,i){var s;return m(e)?0===r.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+a],s["scroll"+a],e.body["offset"+a],s["offset"+a],s["client"+a])):void 0===i?S.css(e,t,n):S.style(e,t,i,n)},o,i?e:void 0,i)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,s){return this.on(t,e,i,s)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,i){S.fn[i]=function(e,t){return 0<arguments.length?this.on(i,null,e,t):this.trigger(i)}}),/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g),$t=(S.proxy=function(e,t){var i,s;if("string"==typeof t&&(s=e[t],t=e,e=s),v(e))return i=o.call(arguments,2),(s=function(){return e.apply(t||this,i.concat(o.call(arguments)))}).guid=e.guid=e.guid||S.guid++,s},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=l,S.isFunction=v,S.isWindow=m,S.camelCase=L,S.type=y,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Kt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return S}),w.jQuery),Qt=w.$;return S.noConflict=function(e){return w.$===S&&(w.$=Qt),e&&w.jQuery===S&&(w.jQuery=$t),S},void 0===I&&(w.jQuery=w.$=S),S}),!function(c){c.paginate=function(e,t){var s,n,r,a,o={perPage:3,autoScroll:!0,scope:"",paginatePosition:["bottom"],containerTag:"nav",paginationTag:"ul",itemTag:"li",linkTag:"a",useHashLocation:!0,onPageClick:function(){}},l=this,h=c(".paginate").length,p=(l.settings={},c(e)),u=(l.init=function(){l.settings=c.extend({},o,t),s=1,n=p.children(l.settings.scope),a=Math.ceil(n.length/l.settings.perPage);var e=u(),e=(-1<c.inArray("top",l.settings.paginatePosition)&&p.before(e),-1<c.inArray("bottom",l.settings.paginatePosition)&&p.after(e),p.addClass("paginate"),p.addClass("paginate-"+h),location.hash.match(/\#paginate\-(\d)/i));e&&l.settings.useHashLocation?l.switchPage(e[1]):l.switchPage(1)},l.switchPage=function(e){if((e="prev"==(e="next"==e?s+1:e)?s-1:e)<1||a<e)return!1;if(a<e)return c(".paginate-pagination-"+h).find(".page-next").addClass("deactive"),!1;for(c(".paginate-pagination-"+h).find(".page-next").removeClass("deactive"),c(".paginate-pagination-"+h).find(".active").removeClass("active"),c(".paginate-pagination-"+h).find(".page-"+e).addClass("active"),r=(e-1)*l.settings.perPage,c(n).hide(),i=0;i<l.settings.perPage;i++)c(n[i+r]).length&&c(n[i+r]).fadeTo(100,1);return 1==e?c(".paginate-pagination-"+h).find(".page-prev").addClass("deactive"):c(".paginate-pagination-"+h).find(".page-prev").removeClass("deactive"),e==a?c(".paginate-pagination-"+h).find(".page-next").addClass("deactive"):c(".paginate-pagination-"+h).find(".page-next").removeClass("deactive"),s=e},l.kill=function(){c(n).show(),c(".paginate-pagination-"+h).remove(),p.removeClass("paginate"),p.removeData("paginate")},function(){var e="<"+l.settings.containerTag+' class="paginate-pagination paginate-pagination-'+h+'" data-parent="'+h+'">',e=(e=(e=(e+="<"+l.settings.paginationTag+">")+("<"+l.settings.itemTag+">"))+("<"+l.settings.linkTag+' href="#" data-page="prev" class="page page-prev">&laquo;</'+l.settings.linkTag+">"))+("</"+l.settings.itemTag+">");for(i=1;i<=a;i++)e=(e=(e+="<"+l.settings.itemTag+">")+"<"+l.settings.linkTag+' href="#paginate-'+i+'" data-page="'+i+'" class="page page-'+i+'">'+i+"</"+l.settings.linkTag+">")+"</"+l.settings.itemTag+">";return e=(e=(e=(e=(e+="<"+l.settings.itemTag+">")+("<"+l.settings.linkTag+' href="#" data-page="next" class="page page-next">&raquo;</'+l.settings.linkTag+">"))+("</"+l.settings.itemTag+">"))+("</"+l.settings.paginationTag+">"))+("</"+l.settings.containerTag+">"),c(document).on("click",".paginate-pagination-"+h+" .page",function(e){e.preventDefault();var e=c(this).data("page"),t=c(this).parents(".paginate-pagination").data("parent");c(".paginate-"+t).data("paginate").settings.onPageClick(),(e=c(".paginate-"+t).data("paginate").switchPage(e))&&(l.settings.useHashLocation&&(location.hash="#paginate-"+e),l.settings.autoScroll&&c("html, body").animate({scrollTop:c(".paginate-"+t).offset().top},"slow"))}),e});l.init()},c.fn.paginate=function(t){return this.each(function(){var e;void 0===c(this).data("paginate")&&(e=new c.paginate(this,t),c(this).data("paginate",e))})}}(jQuery);var OpenLayers={VERSION_NUMBER:"Release 2.13.1",singleFile:!0,_getScriptLocation:function(){for(var e,t=/(^|(.*?\/))(OpenLayers[^\/]*?\.js)(\?|$)/,i=document.getElementsByTagName("script"),s="",n=0,r=i.length;n<r;n++)if((e=i[n].getAttribute("src"))&&(e=e.match(t))){s=e[1];break}return function(){return s}}(),ImgPath:"",Class:function(){var e=arguments.length,t=arguments[0],i=arguments[e-1],s="function"==typeof i.initialize?i.initialize:function(){t.prototype.initialize.apply(this,arguments)};return 1<e?(e=[s,t].concat(Array.prototype.slice.call(arguments).slice(1,e-1),i),OpenLayers.inherit.apply(null,e)):s.prototype=i,s},inherit:function(e,t){(s=function(){}).prototype=t.prototype,e.prototype=new s;for(var i,s=2,n=arguments.length;s<n;s++)"function"==typeof(i=arguments[s])&&(i=i.prototype),OpenLayers.Util.extend(e.prototype,i)}};OpenLayers.Util=OpenLayers.Util||{},OpenLayers.Util.extend=function(e,t){if(e=e||{},t){for(var i in t){var s=t[i];void 0!==s&&(e[i]=s)}"function"==typeof window.Event&&t instanceof window.Event||!t.hasOwnProperty||!t.hasOwnProperty("toString")||(e.toString=t.toString)}return e},OpenLayers.String={startsWith:function(e,t){return 0==e.indexOf(t)},contains:function(e,t){return-1!=e.indexOf(t)},trim:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(e){for(var t=(e=e.split("-"))[0],i=1,s=e.length;i<s;i++)var n=e[i],t=t+(n.charAt(0).toUpperCase()+n.substring(1));return t},format:function(e,r,a){return r=r||window,e.replace(OpenLayers.String.tokenRegEx,function(e,t){for(var i,s=t.split(/\.+/),n=0;n<s.length&&void 0!==(i=0==n?r:i);n++)i=i[s[n]];return void 0===(i="function"==typeof i?a?i.apply(null,a):i():i)?"undefined":i})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(e){return OpenLayers.String.numberRegEx.test(e)},numericIf:function(e,t){var i=e;return!0===t&&null!=e&&e.replace&&(e=e.replace(/^\s*|\s*$/g,"")),OpenLayers.String.isNumeric(e)?parseFloat(e):i}},OpenLayers.Number={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(e,t){var i=0;return i=0<t?parseFloat(e.toPrecision(t)):i},format:function(e,t,i,s){i=void 0!==i?i:OpenLayers.Number.thousandsSeparator,s=void 0!==s?s:OpenLayers.Number.decimalSeparator;var n=(e=null!=(t=void 0!==t?t:0)?parseFloat(e.toFixed(t)):e).toString().split(".");if(1==n.length&&null==t&&(t=0),e=n[0],i)for(var r=/(-?[0-9]+)([0-9]{3})/;r.test(e);)e=e.replace(r,"$1"+i+"$2");return t=0==t?e:(i=1<n.length?n[1]:"0",null!=t&&(i+=Array(t-i.length+1).join("0")),e+s+i)},zeroPad:function(e,t,i){for(e=e.toString(i||10);e.length<t;)e="0"+e;return e}},OpenLayers.Function={bind:function(t,i){var s=Array.prototype.slice.apply(arguments,[2]);return function(){var e=s.concat(Array.prototype.slice.apply(arguments,[0]));return t.apply(i,e)}},bindAsEventListener:function(t,i){return function(e){return t.call(i,e||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}},OpenLayers.Array={filter:function(e,t,i){var s=[];if(Array.prototype.filter)s=e.filter(t,i);else{var n=e.length;if("function"!=typeof t)throw new TypeError;for(var r,a=0;a<n;a++)a in e&&(r=e[a],t.call(i,r,a,e)&&s.push(r))}return s}},OpenLayers.Bounds=OpenLayers.Class({left:null,bottom:null,right:null,top:null,centerLonLat:null,initialize:function(e,t,i,s){OpenLayers.Util.isArray(e)&&(s=e[3],i=e[2],t=e[1],e=e[0]),null!=e&&(this.left=OpenLayers.Util.toFloat(e)),null!=t&&(this.bottom=OpenLayers.Util.toFloat(t)),null!=i&&(this.right=OpenLayers.Util.toFloat(i)),null!=s&&(this.top=OpenLayers.Util.toFloat(s))},clone:function(){return new OpenLayers.Bounds(this.left,this.bottom,this.right,this.top)},equals:function(e){var t=!1;return t=null!=e?this.left==e.left&&this.right==e.right&&this.top==e.top&&this.bottom==e.bottom:t},toString:function(){return[this.left,this.bottom,this.right,this.top].join()},toArray:function(e){return!0===e?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]},toBBOX:function(e,t){null==e&&(e=6);var e=Math.pow(10,e),i=Math.round(this.left*e)/e,s=Math.round(this.bottom*e)/e,n=Math.round(this.right*e)/e,e=Math.round(this.top*e)/e;return!0===t?s+","+i+","+e+","+n:i+","+s+","+n+","+e},toGeometry:function(){return new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing([new OpenLayers.Geometry.Point(this.left,this.bottom),new OpenLayers.Geometry.Point(this.right,this.bottom),new OpenLayers.Geometry.Point(this.right,this.top),new OpenLayers.Geometry.Point(this.left,this.top)])])},getWidth:function(){return this.right-this.left},getHeight:function(){return this.top-this.bottom},getSize:function(){return new OpenLayers.Size(this.getWidth(),this.getHeight())},getCenterPixel:function(){return new OpenLayers.Pixel((this.left+this.right)/2,(this.bottom+this.top)/2)},getCenterLonLat:function(){return this.centerLonLat||(this.centerLonLat=new OpenLayers.LonLat((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat},scale:function(e,t){var i,t="OpenLayers.LonLat"==(t=null==t?this.getCenterLonLat():t).CLASS_NAME?(i=t.lon,t.lat):(i=t.x,t.y);return new OpenLayers.Bounds((this.left-i)*e+i,(this.bottom-t)*e+t,(this.right-i)*e+i,(this.top-t)*e+t)},add:function(e,t){if(null==e||null==t)throw new TypeError("Bounds.add cannot receive null values");return new OpenLayers.Bounds(this.left+e,this.bottom+t,this.right+e,this.top+t)},extend:function(e){if(e)switch(e.CLASS_NAME){case"OpenLayers.LonLat":this.extendXY(e.lon,e.lat);break;case"OpenLayers.Geometry.Point":this.extendXY(e.x,e.y);break;case"OpenLayers.Bounds":((this.centerLonLat=null)==this.left||e.left<this.left)&&(this.left=e.left),(null==this.bottom||e.bottom<this.bottom)&&(this.bottom=e.bottom),(null==this.right||e.right>this.right)&&(this.right=e.right),(null==this.top||e.top>this.top)&&(this.top=e.top)}},extendXY:function(e,t){((this.centerLonLat=null)==this.left||e<this.left)&&(this.left=e),(null==this.bottom||t<this.bottom)&&(this.bottom=t),(null==this.right||e>this.right)&&(this.right=e),(null==this.top||t>this.top)&&(this.top=t)},containsLonLat:function(e,t){var i=this.contains(e.lon,e.lat,(t=(t="boolean"==typeof t?{inclusive:t}:t)||{}).inclusive),s=t.worldBounds;return s&&!i&&(i=s.getWidth(),s=Math.round((e.lon-(s.left+s.right)/2)/i),i=this.containsLonLat({lon:e.lon-s*i,lat:e.lat},{inclusive:t.inclusive})),i},containsPixel:function(e,t){return this.contains(e.x,e.y,t)},contains:function(e,t,i){if(null==i&&(i=!0),null==e||null==t)return!1;e=OpenLayers.Util.toFloat(e),t=OpenLayers.Util.toFloat(t);return i?e>=this.left&&e<=this.right&&t>=this.bottom&&t<=this.top:e>this.left&&e<this.right&&t>this.bottom&&t<this.top},intersectsBounds:function(e,t){(t=(t="boolean"==typeof t?{inclusive:t}:t)||{}).worldBounds?(i=this.wrapDateLine(t.worldBounds),e=e.wrapDateLine(t.worldBounds)):i=this,null==t.inclusive&&(t.inclusive=!0);var i,s,n,r=!1,a=i.left==e.right||i.right==e.left||i.top==e.bottom||i.bottom==e.top;return!t.inclusive&&a||(r=e.top>=i.bottom&&e.top<=i.top||i.top>e.bottom&&i.top<e.top,a=e.left>=i.left&&e.left<=i.right||i.left>=e.left&&i.left<=e.right,s=e.right>=i.left&&e.right<=i.right||i.right>=e.left&&i.right<=e.right,r=(e.bottom>=i.bottom&&e.bottom<=i.top||i.bottom>=e.bottom&&i.bottom<=e.top||r)&&(a||s)),t.worldBounds&&!r&&(a=(n=t.worldBounds).getWidth(),s=!n.containsBounds(i),n=!n.containsBounds(e),s&&!n?(e=e.add(-a,0),r=i.intersectsBounds(e,{inclusive:t.inclusive})):n&&!s&&(i=i.add(-a,0),r=e.intersectsBounds(i,{inclusive:t.inclusive}))),r},containsBounds:function(e,t,i){null==t&&(t=!1);var s=this.contains(e.left,e.bottom,i=null==i?!0:i),n=this.contains(e.right,e.bottom,i),r=this.contains(e.left,e.top,i);return e=this.contains(e.right,e.top,i),t?s||n||r||e:s&&n&&r&&e},determineQuadrant:function(e){var t=this.getCenterLonLat();return(e.lat<t.lat?"b":"t")+(e.lon<t.lon?"l":"r")},transform:function(e,t){this.centerLonLat=null;var i=OpenLayers.Projection.transform({x:this.left,y:this.bottom},e,t),s=OpenLayers.Projection.transform({x:this.right,y:this.bottom},e,t),n=OpenLayers.Projection.transform({x:this.left,y:this.top},e,t),e=OpenLayers.Projection.transform({x:this.right,y:this.top},e,t);return this.left=Math.min(i.x,n.x),this.bottom=Math.min(i.y,s.y),this.right=Math.max(s.x,e.x),this.top=Math.max(n.y,e.y),this},wrapDateLine:function(e,t){var i=(t=t||{}).leftTolerance||0,s=t.rightTolerance||0,n=this.clone();if(e){for(var r=e.getWidth();n.left<e.left&&n.right-s<=e.left;)n=n.add(r,0);for(;n.left+i>=e.right&&n.right>e.right;)n=n.add(-r,0);(i=n.left+i)<e.right&&i>e.left&&n.right-s>e.right&&(n=n.add(-r,0))}return n},CLASS_NAME:"OpenLayers.Bounds"}),OpenLayers.Bounds.fromString=function(e,t){e=e.split(",");return OpenLayers.Bounds.fromArray(e,t)},OpenLayers.Bounds.fromArray=function(e,t){return!0===t?new OpenLayers.Bounds(e[1],e[0],e[3],e[2]):new OpenLayers.Bounds(e[0],e[1],e[2],e[3])},OpenLayers.Bounds.fromSize=function(e){return new OpenLayers.Bounds(0,e.h,e.w,0)},OpenLayers.Bounds.oppositeQuadrant=function(e){return("t"==e.charAt(0)?"b":"t")+("l"==e.charAt(1)?"r":"l")},OpenLayers.Element={visible:function(e){return"none"!=OpenLayers.Util.getElement(e).style.display},toggle:function(){for(var e=0,t=arguments.length;e<t;e++){var i=OpenLayers.Util.getElement(arguments[e]),s=OpenLayers.Element.visible(i)?"none":"";i.style.display=s}},remove:function(e){(e=OpenLayers.Util.getElement(e)).parentNode.removeChild(e)},getHeight:function(e){return(e=OpenLayers.Util.getElement(e)).offsetHeight},hasClass:function(e,t){e=e.className;return!!e&&RegExp("(^|\\s)"+t+"(\\s|$)").test(e)},addClass:function(e,t){return OpenLayers.Element.hasClass(e,t)||(e.className+=(e.className?" ":"")+t),e},removeClass:function(e,t){var i=e.className;return i&&(e.className=OpenLayers.String.trim(i.replace(RegExp("(^|\\s+)"+t+"(\\s+|$)")," "))),e},toggleClass:function(e,t){return OpenLayers.Element.hasClass(e,t)?OpenLayers.Element.removeClass(e,t):OpenLayers.Element.addClass(e,t),e},getStyle:function(e,t){var i=null;return(e=OpenLayers.Util.getElement(e))&&e.style&&((i=e.style[OpenLayers.String.camelize(t)])||(document.defaultView&&document.defaultView.getComputedStyle?i=(i=document.defaultView.getComputedStyle(e,null))?i.getPropertyValue(t):null:e.currentStyle&&(i=e.currentStyle[OpenLayers.String.camelize(t)])),window.opera&&-1!=OpenLayers.Util.indexOf(["left","top","right","bottom"],t)&&"static"==OpenLayers.Element.getStyle(e,"position")&&(i="auto")),"auto"==i?null:i}},OpenLayers.LonLat=OpenLayers.Class({lon:0,lat:0,initialize:function(e,t){OpenLayers.Util.isArray(e)&&(t=e[1],e=e[0]),this.lon=OpenLayers.Util.toFloat(e),this.lat=OpenLayers.Util.toFloat(t)},toString:function(){return"lon="+this.lon+",lat="+this.lat},toShortString:function(){return this.lon+", "+this.lat},clone:function(){return new OpenLayers.LonLat(this.lon,this.lat)},add:function(e,t){if(null==e||null==t)throw new TypeError("LonLat.add cannot receive null values");return new OpenLayers.LonLat(this.lon+OpenLayers.Util.toFloat(e),this.lat+OpenLayers.Util.toFloat(t))},equals:function(e){var t=!1;return t=null!=e?this.lon==e.lon&&this.lat==e.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(e.lon)&&isNaN(e.lat):t},transform:function(e,t){e=OpenLayers.Projection.transform({x:this.lon,y:this.lat},e,t);return this.lon=e.x,this.lat=e.y,this},wrapDateLine:function(e){var t=this.clone();if(e){for(;t.lon<e.left;)t.lon+=e.getWidth();for(;t.lon>e.right;)t.lon-=e.getWidth()}return t},CLASS_NAME:"OpenLayers.LonLat"}),OpenLayers.LonLat.fromString=function(e){return e=e.split(","),new OpenLayers.LonLat(e[0],e[1])},OpenLayers.LonLat.fromArray=function(e){var t=OpenLayers.Util.isArray(e);return new OpenLayers.LonLat(t&&e[0],t&&e[1])},OpenLayers.Pixel=OpenLayers.Class({x:0,y:0,initialize:function(e,t){this.x=parseFloat(e),this.y=parseFloat(t)},toString:function(){return"x="+this.x+",y="+this.y},clone:function(){return new OpenLayers.Pixel(this.x,this.y)},equals:function(e){var t=!1;return t=null!=e?this.x==e.x&&this.y==e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y):t},distanceTo:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},add:function(e,t){if(null==e||null==t)throw new TypeError("Pixel.add cannot receive null values");return new OpenLayers.Pixel(this.x+e,this.y+t)},offset:function(e){var t=this.clone();return t=e?this.add(e.x,e.y):t},CLASS_NAME:"OpenLayers.Pixel"}),OpenLayers.Size=OpenLayers.Class({w:0,h:0,initialize:function(e,t){this.w=parseFloat(e),this.h=parseFloat(t)},toString:function(){return"w="+this.w+",h="+this.h},clone:function(){return new OpenLayers.Size(this.w,this.h)},equals:function(e){var t=!1;return t=null!=e?this.w==e.w&&this.h==e.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(e.w)&&isNaN(e.h):t},CLASS_NAME:"OpenLayers.Size"}),OpenLayers.Console={log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){},userError:function(e){alert(e)},assert:function(){},dir:function(){},dirxml:function(){},trace:function(){},group:function(){},groupEnd:function(){},time:function(){},timeEnd:function(){},profile:function(){},profileEnd:function(){},count:function(){},CLASS_NAME:"OpenLayers.Console"},!function(){for(var e=document.getElementsByTagName("script"),t=0,i=e.length;t<i;++t)if(-1!=e[t].src.indexOf("firebug.js")&&console){OpenLayers.Util.extend(OpenLayers.Console,console);break}}(),OpenLayers.Lang={code:null,defaultCode:"en",getCode:function(){return OpenLayers.Lang.code||OpenLayers.Lang.setCode(),OpenLayers.Lang.code},setCode:function(e){var t,i;(e=(e=e||("msie"==OpenLayers.BROWSER_NAME?navigator.userLanguage:navigator.language)).split("-"))[0]=e[0].toLowerCase(),"object"==_typeof(OpenLayers.Lang[e[0]])&&(t=e[0]),e[1]&&(i=e[0]+"-"+e[1].toUpperCase(),"object"==_typeof(OpenLayers.Lang[i])&&(t=i)),t||(OpenLayers.Console.warn("Failed to find OpenLayers.Lang."+e.join("-")+" dictionary, falling back to default language"),t=OpenLayers.Lang.defaultCode),OpenLayers.Lang.code=t},translate:function(e,t){var i=OpenLayers.Lang[OpenLayers.Lang.getCode()];return(i=i&&i[e])||(i=e),i=t?OpenLayers.String.format(i,t):i}},OpenLayers.i18n=OpenLayers.Lang.translate,OpenLayers.Util=OpenLayers.Util||{},OpenLayers.Util.getElement=function(){for(var e=[],t=0,i=arguments.length;t<i;t++){var s=arguments[t];if("string"==typeof s&&(s=document.getElementById(s)),1==arguments.length)return s;e.push(s)}return e},OpenLayers.Util.isElement=function(e){return!(!e||1!==e.nodeType)},OpenLayers.Util.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},OpenLayers.Util.removeItem=function(e,t){for(var i=e.length-1;0<=i;i--)e[i]==t&&e.splice(i,1);return e},OpenLayers.Util.indexOf=function(e,t){if("function"==typeof e.indexOf)return e.indexOf(t);for(var i=0,s=e.length;i<s;i++)if(e[i]==t)return i;return-1},OpenLayers.Util.dotless=/\./g,OpenLayers.Util.modifyDOMElement=function(e,t,i,s,n,r,a,o){t&&(e.id=t.replace(OpenLayers.Util.dotless,"_")),i&&(e.style.left=i.x+"px",e.style.top=i.y+"px"),s&&(e.style.width=s.w+"px",e.style.height=s.h+"px"),n&&(e.style.position=n),r&&(e.style.border=r),a&&(e.style.overflow=a),0<=parseFloat(o)&&parseFloat(o)<1?(e.style.filter="alpha(opacity="+100*o+")",e.style.opacity=o):1==parseFloat(o)&&(e.style.filter="",e.style.opacity="")},OpenLayers.Util.createDiv=function(e,t,i,s,n,r,a,o){var l=document.createElement("div");return s&&(l.style.backgroundImage="url("+s+")"),e=e||OpenLayers.Util.createUniqueID("OpenLayersDiv"),OpenLayers.Util.modifyDOMElement(l,e,t,i,n=n||"absolute",r,a,o),l},OpenLayers.Util.createImage=function(e,t,i,s,n,r,a,o){var l=document.createElement("img");return e=e||OpenLayers.Util.createUniqueID("OpenLayersDiv"),OpenLayers.Util.modifyDOMElement(l,e,t,i,n=n||"relative",r,null,a),o&&(l.style.display="none",OpenLayers.Event.observe(l,"load",t=function(){l.style.display="",OpenLayers.Event.stopObservingElement(l)}),OpenLayers.Event.observe(l,"error",t)),l.style.alt=e,l.galleryImg="no",s&&(l.src=s),l},OpenLayers.IMAGE_RELOAD_ATTEMPTS=0,OpenLayers.Util.alphaHackNeeded=null,OpenLayers.Util.alphaHack=function(){if(null==OpenLayers.Util.alphaHackNeeded){var e=navigator.appVersion.split("MSIE"),e=parseFloat(e[1]),t=!1;try{t=!!document.body.filters}catch(e){}OpenLayers.Util.alphaHackNeeded=t&&5.5<=e&&e<7}return OpenLayers.Util.alphaHackNeeded},OpenLayers.Util.modifyAlphaImageDiv=function(e,t,i,s,n,r,a,o,l){OpenLayers.Util.modifyDOMElement(e,t,i,s,r,null,null,l),t=e.childNodes[0],n&&(t.src=n),OpenLayers.Util.modifyDOMElement(t,e.id+"_innerImage",null,s,"relative",a),OpenLayers.Util.alphaHack()&&("none"!=e.style.display&&(e.style.display="inline-block"),e.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+t.src+"', sizingMethod='"+(o=null==o?"scale":o)+"')",0<=parseFloat(e.style.opacity)&&parseFloat(e.style.opacity)<1&&(e.style.filter+=" alpha(opacity="+100*e.style.opacity+")"),t.style.filter="alpha(opacity=0)")},OpenLayers.Util.createAlphaImageDiv=function(e,t,i,s,n,r,a,o,l){var h=OpenLayers.Util.createDiv();return(l=OpenLayers.Util.createImage(null,null,null,null,null,null,null,l)).className="olAlphaImg",h.appendChild(l),OpenLayers.Util.modifyAlphaImageDiv(h,e,t,i,s,n,r,a,o),h},OpenLayers.Util.upperCaseObject=function(e){var t,i={};for(t in e)i[t.toUpperCase()]=e[t];return i},OpenLayers.Util.applyDefaults=function(e,t){e=e||{};var i,s="function"==typeof window.Event&&t instanceof window.Event;for(i in t)(void 0===e[i]||!s&&t.hasOwnProperty&&t.hasOwnProperty(i)&&!e.hasOwnProperty(i))&&(e[i]=t[i]);return!s&&t&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&!e.hasOwnProperty("toString")&&(e.toString=t.toString),e},OpenLayers.Util.getParameterString=function(e){var t,i=[];for(t in e){var s=e[t];if(null!=s&&"function"!=typeof s){if("object"==_typeof(s)&&s.constructor==Array){for(var n,r=[],a=0,o=s.length;a<o;a++)n=s[a],r.push(encodeURIComponent(null==n?"":n));s=r.join(",")}else s=encodeURIComponent(s);i.push(encodeURIComponent(t)+"="+s)}}return i.join("&")},OpenLayers.Util.urlAppend=function(e,t){var i=e;return t&&(i+=" "===(e=(e+" ").split(/[?&]/)).pop()?t:e.length?"&"+t:"?"+t),i},OpenLayers.Util.getImagesLocation=function(){return OpenLayers.ImgPath||OpenLayers._getScriptLocation()+"img/"},OpenLayers.Util.getImageLocation=function(e){return OpenLayers.Util.getImagesLocation()+e},OpenLayers.Util.Try=function(){for(var e=null,t=0,i=arguments.length;t<i;t++){var s=arguments[t];try{e=s();break}catch(e){}}return e},OpenLayers.Util.getXmlNodeValue=function(e){var t=null;return OpenLayers.Util.Try(function(){t=(t=(t=e.text)||e.textContent)||e.firstChild.nodeValue},function(){t=e.textContent}),t},OpenLayers.Util.mouseLeft=function(e,t){for(var i=e.relatedTarget||e.toElement;i!=t&&null!=i;)i=i.parentNode;return i!=t},OpenLayers.Util.DEFAULT_PRECISION=14,OpenLayers.Util.toFloat=function(e,t){return null==t&&(t=OpenLayers.Util.DEFAULT_PRECISION),"number"!=typeof e&&(e=parseFloat(e)),0===t?e:parseFloat(e.toPrecision(t))},OpenLayers.Util.rad=function(e){return e*Math.PI/180},OpenLayers.Util.deg=function(e){return 180*e/Math.PI},OpenLayers.Util.VincentyConstants={a:6378137,b:6356752.3142,f:1/298.257223563},OpenLayers.Util.distVincenty=function(e,t){for(var i=(n=OpenLayers.Util.VincentyConstants).a,s=n.b,n=n.f,r=OpenLayers.Util.rad(t.lon-e.lon),a=Math.atan((1-n)*Math.tan(OpenLayers.Util.rad(e.lat))),o=Math.atan((1-n)*Math.tan(OpenLayers.Util.rad(t.lat))),l=Math.sin(a),a=Math.cos(a),h=Math.sin(o),o=Math.cos(o),p=r,u=2*Math.PI,c=20;1e-12<Math.abs(p-u)&&0<--c;){var d=Math.sin(p),y=Math.cos(p),m=Math.sqrt(o*d*o*d+(a*h-l*o*y)*(a*h-l*o*y));if(0==m)return 0;var y=l*h+a*o*y,f=Math.atan2(m,y),g=Math.asin(a*o*d/m),v=Math.cos(g)*Math.cos(g),d=y-2*l*h/v,L=n/16*v*(4+n*(4-3*v)),u=p,p=r+(1-L)*n*Math.sin(g)*(f+L*m*(d+L*y*(2*d*d-1)))}return 0==c?NaN:(s*(1+(i=v*(i*i-s*s)/(s*s))/16384*(4096+i*(i*(320-175*i)-768)))*(f-(n=i/1024*(256+i*(i*(74-47*i)-128)))*m*(d+n/4*(y*(2*d*d-1)-n/6*d*(4*m*m-3)*(4*d*d-3))))).toFixed(3)/1e3},OpenLayers.Util.destinationVincenty=function(e,t,i){for(var s=OpenLayers.Util,n=(o=s.VincentyConstants).a,r=o.b,a=o.f,o=e.lon,l=(e=e.lat,s.rad(t)),h=(t=Math.sin(l),l=Math.cos(l),e=(1-a)*Math.tan(s.rad(e)),1/Math.sqrt(1+e*e)),p=e*h,u=Math.atan2(e,l),c=1-(e=h*t)*e,d=1+(n=c*(n*n-r*r)/(r*r))/16384*(4096+n*(n*(320-175*n)-768)),y=n/1024*(256+n*(n*(74-47*n)-128)),n=i/(r*d),m=2*Math.PI;1e-12<Math.abs(n-m);)var f=Math.cos(2*u+n),g=Math.sin(n),v=Math.cos(n),m=n,n=i/(r*d)+y*g*(f+y/4*(v*(2*f*f-1)-y/6*f*(4*g*g-3)*(4*f*f-3)));return i=p*g-h*v*l,r=Math.atan2(p*v+h*g*l,(1-a)*Math.sqrt(e*e+i*i)),f=(t=Math.atan2(g*t,h*v-p*g*l))-(1-(l=a/16*c*(4+a*(4-3*c))))*a*e*(n+l*g*(f+l*v*(2*f*f-1))),Math.atan2(e,-i),new OpenLayers.LonLat(o+s.deg(f),s.deg(r))},OpenLayers.Util.getParameters=function(e,t){t=t||{},e=null==e?window.location.href:e;var i="";OpenLayers.String.contains(e,"?")&&(s=e.indexOf("?")+1,i=OpenLayers.String.contains(e,"#")?e.indexOf("#"):e.length,i=e.substring(s,i));for(var s={},n=0,r=(i=i.split(/[&;]/)).length;n<r;++n){var a=i[n].split("=");if(a[0]){var o=a[0];try{o=decodeURIComponent(o)}catch(e){o=unescape(o)}a=(a[1]||"").replace(/\+/g," ");try{a=decodeURIComponent(a)}catch(e){a=unescape(a)}1==(a=!1!==t.splitArgs?a.split(","):a).length&&(a=a[0]),s[o]=a}}return s},OpenLayers.Util.lastSeqID=0,OpenLayers.Util.createUniqueID=function(e){return e=null==e?"id_":e.replace(OpenLayers.Util.dotless,"_"),OpenLayers.Util.lastSeqID+=1,e+OpenLayers.Util.lastSeqID},OpenLayers.INCHES_PER_UNIT={inches:1,ft:12,mi:63360,m:39.37,km:39370,dd:4374754,yd:36},OpenLayers.INCHES_PER_UNIT.in=OpenLayers.INCHES_PER_UNIT.inches,OpenLayers.INCHES_PER_UNIT.degrees=OpenLayers.INCHES_PER_UNIT.dd,OpenLayers.INCHES_PER_UNIT.nmi=1852*OpenLayers.INCHES_PER_UNIT.m,OpenLayers.METERS_PER_INCH=.0254000508001016,OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT,{Inch:OpenLayers.INCHES_PER_UNIT.inches,Meter:1/OpenLayers.METERS_PER_INCH,Foot:.3048006096012192/OpenLayers.METERS_PER_INCH,IFoot:.3048/OpenLayers.METERS_PER_INCH,ClarkeFoot:.3047972651151/OpenLayers.METERS_PER_INCH,SearsFoot:.30479947153867626/OpenLayers.METERS_PER_INCH,GoldCoastFoot:.3047997101815088/OpenLayers.METERS_PER_INCH,IInch:.0254/OpenLayers.METERS_PER_INCH,MicroInch:254e-7/OpenLayers.METERS_PER_INCH,Mil:2.54e-8/OpenLayers.METERS_PER_INCH,Centimeter:.01/OpenLayers.METERS_PER_INCH,Kilometer:1e3/OpenLayers.METERS_PER_INCH,Yard:.9144018288036576/OpenLayers.METERS_PER_INCH,SearsYard:.914398414616029/OpenLayers.METERS_PER_INCH,IndianYard:.9143985307444408/OpenLayers.METERS_PER_INCH,IndianYd37:.91439523/OpenLayers.METERS_PER_INCH,IndianYd62:.9143988/OpenLayers.METERS_PER_INCH,IndianYd75:.9143985/OpenLayers.METERS_PER_INCH,IndianFoot:.30479951/OpenLayers.METERS_PER_INCH,IndianFt37:.30479841/OpenLayers.METERS_PER_INCH,IndianFt62:.3047996/OpenLayers.METERS_PER_INCH,IndianFt75:.3047995/OpenLayers.METERS_PER_INCH,Mile:1609.3472186944373/OpenLayers.METERS_PER_INCH,IYard:.9144/OpenLayers.METERS_PER_INCH,IMile:1609.344/OpenLayers.METERS_PER_INCH,NautM:1852/OpenLayers.METERS_PER_INCH,"Lat-66":110943.31648893273/OpenLayers.METERS_PER_INCH,"Lat-83":110946.25736872235/OpenLayers.METERS_PER_INCH,Decimeter:.1/OpenLayers.METERS_PER_INCH,Millimeter:.001/OpenLayers.METERS_PER_INCH,Dekameter:10/OpenLayers.METERS_PER_INCH,Decameter:10/OpenLayers.METERS_PER_INCH,Hectometer:100/OpenLayers.METERS_PER_INCH,GermanMeter:1.0000135965/OpenLayers.METERS_PER_INCH,CaGrid:.999738/OpenLayers.METERS_PER_INCH,ClarkeChain:20.1166194976/OpenLayers.METERS_PER_INCH,GunterChain:20.11684023368047/OpenLayers.METERS_PER_INCH,BenoitChain:20.116782494375872/OpenLayers.METERS_PER_INCH,SearsChain:20.11676512155/OpenLayers.METERS_PER_INCH,ClarkeLink:.201166194976/OpenLayers.METERS_PER_INCH,GunterLink:.2011684023368047/OpenLayers.METERS_PER_INCH,BenoitLink:.20116782494375873/OpenLayers.METERS_PER_INCH,SearsLink:.2011676512155/OpenLayers.METERS_PER_INCH,Rod:5.02921005842012/OpenLayers.METERS_PER_INCH,IntnlChain:20.1168/OpenLayers.METERS_PER_INCH,IntnlLink:.201168/OpenLayers.METERS_PER_INCH,Perch:5.02921005842012/OpenLayers.METERS_PER_INCH,Pole:5.02921005842012/OpenLayers.METERS_PER_INCH,Furlong:201.1684023368046/OpenLayers.METERS_PER_INCH,Rood:3.778266898/OpenLayers.METERS_PER_INCH,CapeFoot:.3047972615/OpenLayers.METERS_PER_INCH,Brealey:375/OpenLayers.METERS_PER_INCH,ModAmFt:.304812252984506/OpenLayers.METERS_PER_INCH,Fathom:1.8288/OpenLayers.METERS_PER_INCH,"NautM-UK":1853.184/OpenLayers.METERS_PER_INCH,"50kilometers":5e4/OpenLayers.METERS_PER_INCH,"150kilometers":15e4/OpenLayers.METERS_PER_INCH}),OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT,{mm:OpenLayers.INCHES_PER_UNIT.Meter/1e3,cm:OpenLayers.INCHES_PER_UNIT.Meter/100,dm:100*OpenLayers.INCHES_PER_UNIT.Meter,km:1e3*OpenLayers.INCHES_PER_UNIT.Meter,kmi:OpenLayers.INCHES_PER_UNIT.nmi,fath:OpenLayers.INCHES_PER_UNIT.Fathom,ch:OpenLayers.INCHES_PER_UNIT.IntnlChain,link:OpenLayers.INCHES_PER_UNIT.IntnlLink,"us-in":OpenLayers.INCHES_PER_UNIT.inches,"us-ft":OpenLayers.INCHES_PER_UNIT.Foot,"us-yd":OpenLayers.INCHES_PER_UNIT.Yard,"us-ch":OpenLayers.INCHES_PER_UNIT.GunterChain,"us-mi":OpenLayers.INCHES_PER_UNIT.Mile,"ind-yd":OpenLayers.INCHES_PER_UNIT.IndianYd37,"ind-ft":OpenLayers.INCHES_PER_UNIT.IndianFt37,"ind-ch":20.11669506/OpenLayers.METERS_PER_INCH}),OpenLayers.DOTS_PER_INCH=72,OpenLayers.Util.normalizeScale=function(e){return 1<e?1/e:e},OpenLayers.Util.getResolutionFromScale=function(e,t){var i;return e&&(null==t&&(t="degrees"),i=1/(OpenLayers.Util.normalizeScale(e)*OpenLayers.INCHES_PER_UNIT[t]*OpenLayers.DOTS_PER_INCH)),i},OpenLayers.Util.getScaleFromResolution=function(e,t){return e*OpenLayers.INCHES_PER_UNIT[t=null==t?"degrees":t]*OpenLayers.DOTS_PER_INCH},OpenLayers.Util.pagePosition=function(e){var t=[0,0],i=OpenLayers.Util.getViewportElement();if(!e||e==window||e==i)return t;var s=OpenLayers.IS_GECKO&&document.getBoxObjectFor&&"absolute"==OpenLayers.Element.getStyle(e,"position")&&(""==e.style.top||""==e.style.left),n=null;if(e.getBoundingClientRect)e=e.getBoundingClientRect(),n=window.pageYOffset||i.scrollTop,t[0]=e.left+(window.pageXOffset||i.scrollLeft),t[1]=e.top+n;else if(document.getBoxObjectFor&&!s)e=document.getBoxObjectFor(e),i=document.getBoxObjectFor(i),t[0]=e.screenX-i.screenX,t[1]=e.screenY-i.screenY;else{if(t[0]=e.offsetLeft,t[1]=e.offsetTop,(n=e.offsetParent)!=e)for(;n;)t[0]+=n.offsetLeft,t[1]+=n.offsetTop,n=n.offsetParent;for(("opera"==(i=OpenLayers.BROWSER_NAME)||"safari"==i&&"absolute"==OpenLayers.Element.getStyle(e,"position"))&&(t[1]-=document.body.offsetTop),n=e.offsetParent;n&&n!=document.body;)t[0]-=n.scrollLeft,"opera"==i&&"TR"==n.tagName||(t[1]-=n.scrollTop),n=n.offsetParent}return t},OpenLayers.Util.getViewportElement=function(){var e=arguments.callee.viewportElement;return null==e&&(e="msie"==OpenLayers.BROWSER_NAME&&"CSS1Compat"!=document.compatMode?document.body:document.documentElement,arguments.callee.viewportElement=e),e},OpenLayers.Util.isEquivalentUrl=function(e,t,i){for(var s in OpenLayers.Util.applyDefaults(i=i||{},{ignoreCase:!0,ignorePort80:!0,ignoreHash:!0,splitArgs:!1}),e=OpenLayers.Util.createUrlObject(e,i),t=OpenLayers.Util.createUrlObject(t,i),e)if("args"!==s&&e[s]!=t[s])return!1;for(s in e.args){if(e.args[s]!=t.args[s])return!1;delete t.args[s]}for(s in t.args)return!1;return!0},OpenLayers.Util.createUrlObject=function(e,t){t=t||{},/^\w+:\/\//.test(e)||(s=(i=window.location).port?":"+i.port:"",s=i.protocol+"//"+i.host.split(":").shift()+s,e=0===e.indexOf("/")?s+e:((i=i.pathname.split("/")).pop(),s+i.join("/")+"/"+e)),t.ignoreCase&&(e=e.toLowerCase()),(i=document.createElement("a")).href=e,(s={}).host=i.host.split(":").shift(),s.protocol=i.protocol,s.port=t.ignorePort80?"80"==i.port||"0"==i.port?"":i.port:""==i.port||"0"==i.port?"80":i.port,s.hash=t.ignoreHash||"#"===i.hash?"":i.hash;var i,s,n=i.search;return n||(n=-1!=(n=e.indexOf("?"))?e.substr(n):""),s.args=OpenLayers.Util.getParameters(n,{splitArgs:t.splitArgs}),s.pathname="/"==i.pathname.charAt(0)?i.pathname:"/"+i.pathname,s},OpenLayers.Util.removeTail=function(e){var t=null,t=e.indexOf("?"),i=e.indexOf("#");return-1==t?-1!=i?e.substr(0,i):e:-1!=i?e.substr(0,Math.min(t,i)):e.substr(0,t)},OpenLayers.IS_GECKO=function(){var e=navigator.userAgent.toLowerCase();return-1==e.indexOf("webkit")&&-1!=e.indexOf("gecko")}(),OpenLayers.CANVAS_SUPPORTED=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}(),OpenLayers.BROWSER_NAME=function(){var e="",t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("opera")?e="opera":-1!=t.indexOf("msie")?e="msie":-1!=t.indexOf("safari")?e="safari":-1!=t.indexOf("mozilla")&&(e=-1!=t.indexOf("firefox")?"firefox":"mozilla"),e}(),OpenLayers.Util.getBrowserName=function(){return OpenLayers.BROWSER_NAME},OpenLayers.Util.getRenderedDimensions=function(e,t,i){var s,n,r=document.createElement("div");r.style.visibility="hidden";for(var a=i&&i.containerElement?i.containerElement:document.body,o=!1,l=null,h=a;h&&"body"!=h.tagName.toLowerCase();){var p=OpenLayers.Element.getStyle(h,"position");if("absolute"==p){o=!0;break}if(p&&"static"!=p)break;h=h.parentNode}if(!o||0!==a.clientHeight&&0!==a.clientWidth||((l=document.createElement("div")).style.visibility="hidden",l.style.position="absolute",l.style.overflow="visible",l.style.width=document.body.clientWidth+"px",l.style.height=document.body.clientHeight+"px",l.appendChild(r)),r.style.position="absolute",t&&(t.w?(s=t.w,r.style.width=s+"px"):t.h&&(n=t.h,r.style.height=n+"px")),i&&i.displayClass&&(r.className=i.displayClass),(t=document.createElement("div")).innerHTML=e,t.style.overflow="visible",t.childNodes)for(e=0,i=t.childNodes.length;e<i;e++)t.childNodes[e].style&&(t.childNodes[e].style.overflow="visible");return r.appendChild(t),l?a.appendChild(l):a.appendChild(r),s||(s=parseInt(t.scrollWidth),r.style.width=s+"px"),n=n||parseInt(t.scrollHeight),r.removeChild(t),l?(l.removeChild(r),a.removeChild(l)):a.removeChild(r),new OpenLayers.Size(s,n)},OpenLayers.Util.getScrollbarWidth=function(){var e,t,i=OpenLayers.Util._scrollbarWidth;return null==i&&(e=t=null,t=i=0,(t=document.createElement("div")).style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.width="100px",t.style.height="50px",t.style.overflow="hidden",(e=document.createElement("div")).style.width="100%",e.style.height="200px",t.appendChild(e),document.body.appendChild(t),i=e.offsetWidth,t.style.overflow="scroll",t=e.offsetWidth,document.body.removeChild(document.body.lastChild),OpenLayers.Util._scrollbarWidth=i-t,i=OpenLayers.Util._scrollbarWidth),i},OpenLayers.Util.getFormattedLonLat=function(e,t,i){i=i||"dms",e=(e+540)%360-180;var s=Math.abs(e),n=Math.floor(s),r=s=(s-n)/(1/60),s=Math.floor(s);return 60<=(r=(r=Math.round((r-s)/(1/60)*10))/10)&&(r-=60,60<=(s+=1)&&(s-=60,n+=1)),n<10&&(n="0"+n),n+="°",0<=i.indexOf("dm")&&(n+=(s=s<10?"0"+s:s)+"'",0<=i.indexOf("dms")&&(n+=(r=r<10?"0"+r:r)+'"')),"lon"==t?n+(e<0?OpenLayers.i18n("W"):OpenLayers.i18n("E")):n+(e<0?OpenLayers.i18n("S"):OpenLayers.i18n("N"))},OpenLayers.Format=OpenLayers.Class({options:null,externalProjection:null,internalProjection:null,data:null,keepData:!1,initialize:function(e){OpenLayers.Util.extend(this,e),this.options=e},destroy:function(){},read:function(e){throw Error("Read not implemented.")},write:function(e){throw Error("Write not implemented.")},CLASS_NAME:"OpenLayers.Format"}),OpenLayers.Format.CSWGetRecords=function(e){e=OpenLayers.Util.applyDefaults(e,OpenLayers.Format.CSWGetRecords.DEFAULTS);var t=OpenLayers.Format.CSWGetRecords["v"+e.version.replace(/\./g,"_")];if(t)return new t(e);throw"Unsupported CSWGetRecords version: "+e.version},OpenLayers.Format.CSWGetRecords.DEFAULTS={version:"2.0.2"},OpenLayers.Control=OpenLayers.Class({id:null,map:null,div:null,type:null,allowSelection:!1,displayClass:"",title:"",autoActivate:!1,active:null,handlerOptions:null,handler:null,eventListeners:null,events:null,initialize:function(e){this.displayClass=this.CLASS_NAME.replace("OpenLayers.","ol").replace(/\./g,""),OpenLayers.Util.extend(this,e),this.events=new OpenLayers.Events(this),this.eventListeners instanceof Object&&this.events.on(this.eventListeners),null==this.id&&(this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_"))},destroy:function(){if(this.events&&(this.eventListeners&&this.events.un(this.eventListeners),this.events.destroy(),this.events=null),this.eventListeners=null,this.handler&&(this.handler.destroy(),this.handler=null),this.handlers){for(var e in this.handlers)this.handlers.hasOwnProperty(e)&&"function"==typeof this.handlers[e].destroy&&this.handlers[e].destroy();this.handlers=null}this.map&&(this.map.removeControl(this),this.map=null),this.div=null},setMap:function(e){this.map=e,this.handler&&this.handler.setMap(e)},draw:function(e){return null==this.div&&(this.div=OpenLayers.Util.createDiv(this.id),this.div.className=this.displayClass,this.allowSelection||(this.div.className+=" olControlNoSelect",this.div.setAttribute("unselectable","on",0),this.div.onselectstart=OpenLayers.Function.False),""!=this.title&&(this.div.title=this.title)),null!=e&&(this.position=e.clone()),this.moveTo(this.position),this.div},moveTo:function(e){null!=e&&null!=this.div&&(this.div.style.left=e.x+"px",this.div.style.top=e.y+"px")},activate:function(){return!this.active&&(this.handler&&this.handler.activate(),this.active=!0,this.map&&OpenLayers.Element.addClass(this.map.viewPortDiv,this.displayClass.replace(/ /g,"")+"Active"),this.events.triggerEvent("activate"),!0)},deactivate:function(){return!!this.active&&(this.handler&&this.handler.deactivate(),this.active=!1,this.map&&OpenLayers.Element.removeClass(this.map.viewPortDiv,this.displayClass.replace(/ /g,"")+"Active"),this.events.triggerEvent("deactivate"),!0)},CLASS_NAME:"OpenLayers.Control"}),OpenLayers.Control.TYPE_BUTTON=1,OpenLayers.Control.TYPE_TOGGLE=2,OpenLayers.Control.TYPE_TOOL=3,OpenLayers.Event={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(e){return e.target||e.srcElement},isSingleTouch:function(e){return e.touches&&1==e.touches.length},isMultiTouch:function(e){return e.touches&&1<e.touches.length},isLeftClick:function(e){return e.which&&1==e.which||e.button&&1==e.button},isRightClick:function(e){return e.which&&3==e.which||e.button&&2==e.button},stop:function(e,t){t||OpenLayers.Event.preventDefault(e),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},findElement:function(e,t){for(var i=OpenLayers.Event.element(e);i.parentNode&&(!i.tagName||i.tagName.toUpperCase()!=t.toUpperCase());)i=i.parentNode;return i},observe:function(e,t,i,s){var n;e=OpenLayers.Util.getElement(e),s=s||!1,"keypress"==t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||e.attachEvent)&&(t="keydown"),this.observers||(this.observers={}),e._eventCacheID||(n="eventCacheID_",e.id&&(n=e.id+"_"+n),e._eventCacheID=OpenLayers.Util.createUniqueID(n)),n=e._eventCacheID,this.observers[n]||(this.observers[n]=[]),this.observers[n].push({element:e,name:t,observer:i,useCapture:s}),e.addEventListener?e.addEventListener(t,i,s):e.attachEvent&&e.attachEvent("on"+t,i)},stopObservingElement:function(e){e=OpenLayers.Util.getElement(e)._eventCacheID,this._removeElementObservers(OpenLayers.Event.observers[e])},_removeElementObservers:function(e){if(e)for(var t=e.length-1;0<=t;t--){var i=e[t];OpenLayers.Event.stopObserving.apply(this,[i.element,i.name,i.observer,i.useCapture])}},stopObserving:function(e,t,i,s){s=s||!1;var n=(e=OpenLayers.Util.getElement(e))._eventCacheID,r=("keypress"==t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||e.detachEvent)&&(t="keydown"),!1),a=OpenLayers.Event.observers[n];if(a)for(var o=0;!r&&o<a.length;){var l=a[o];if(l.name==t&&l.observer==i&&l.useCapture==s){a.splice(o,1),0==a.length&&delete OpenLayers.Event.observers[n],r=!0;break}o++}return r&&(e.removeEventListener?e.removeEventListener(t,i,s):e&&e.detachEvent&&e.detachEvent("on"+t,i)),r},unloadCache:function(){if(OpenLayers.Event&&OpenLayers.Event.observers){for(var e in OpenLayers.Event.observers)OpenLayers.Event._removeElementObservers.apply(this,[OpenLayers.Event.observers[e]]);OpenLayers.Event.observers=!1}},CLASS_NAME:"OpenLayers.Event"},OpenLayers.Event.observe(window,"unload",OpenLayers.Event.unloadCache,!1),OpenLayers.Events=OpenLayers.Class({BROWSER_EVENTS:"mouseover mouseout mousedown mouseup mousemove click dblclick rightclick dblrightclick resize focus blur touchstart touchmove touchend keydown".split(" "),listeners:null,object:null,element:null,eventHandler:null,fallThrough:null,includeXY:!1,extensions:null,extensionCount:null,clearMouseListener:null,initialize:function(e,t,i,s,n){OpenLayers.Util.extend(this,n),this.object=e,this.fallThrough=s,this.listeners={},this.extensions={},this.extensionCount={},this._msTouches=[],null!=t&&this.attachToElement(t)},destroy:function(){for(var e in this.extensions)"boolean"!=typeof this.extensions[e]&&this.extensions[e].destroy();this.extensions=null,this.element&&(OpenLayers.Event.stopObservingElement(this.element),this.element.hasScrollEvent&&OpenLayers.Event.stopObserving(window,"scroll",this.clearMouseListener)),this.eventHandler=this.fallThrough=this.object=this.listeners=this.element=null},addEventType:function(e){},attachToElement:function(e){this.element?OpenLayers.Event.stopObservingElement(this.element):(this.eventHandler=OpenLayers.Function.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=OpenLayers.Function.bind(this.clearMouseCache,this)),this.element=e;for(var t,i=!!window.navigator.msMaxTouchPoints,s=0,n=this.BROWSER_EVENTS.length;s<n;s++)t=this.BROWSER_EVENTS[s],OpenLayers.Event.observe(e,t,this.eventHandler),i&&0===t.indexOf("touch")&&this.addMsTouchListener(e,t,this.eventHandler);OpenLayers.Event.observe(e,"dragstart",OpenLayers.Event.stop)},on:function(e){for(var t in e)"scope"!=t&&e.hasOwnProperty(t)&&this.register(t,e.scope,e[t])},register:function(e,t,i,s){var n;e in OpenLayers.Events&&!this.extensions[e]&&(this.extensions[e]=new OpenLayers.Events[e](this)),null!=i&&(null==t&&(t=this.object),(n=this.listeners[e])||(this.listeners[e]=n=[],this.extensionCount[e]=0),t={obj:t,func:i},s?(n.splice(this.extensionCount[e],0,t),"object"===_typeof(s)&&s.extension&&this.extensionCount[e]++):n.push(t))},registerPriority:function(e,t,i){this.register(e,t,i,!0)},un:function(e){for(var t in e)"scope"!=t&&e.hasOwnProperty(t)&&this.unregister(t,e.scope,e[t])},unregister:function(e,t,i){if(null==t&&(t=this.object),null!=(e=this.listeners[e]))for(var s=0,n=e.length;s<n;s++)if(e[s].obj==t&&e[s].func==i){e.splice(s,1);break}},remove:function(e){null!=this.listeners[e]&&(this.listeners[e]=[])},triggerEvent:function(e,t){if((i=this.listeners[e])&&0!=i.length){(t=null==t?{}:t).object=this.object,t.element=this.element,t.type||(t.type=e);for(var i,s,n=0,r=(i=i.slice()).length;n<r&&(null==(s=(s=i[n]).func.apply(s.obj,[t]))||0!=s);n++);return this.fallThrough||OpenLayers.Event.stop(t,!0),s}},handleBrowserEvent:function(e){var t=e.type,i=this.listeners[t];if(i&&0!=i.length){if((i=e.touches)&&i[0]){for(var s,n=0,r=0,a=i.length,o=0;o<a;++o)n+=(s=this.getTouchClientXY(i[o])).clientX,r+=s.clientY;e.clientX=n/a,e.clientY=r/a}this.includeXY&&(e.xy=this.getMousePosition(e)),this.triggerEvent(t,e)}},getTouchClientXY:function(e){var t=(i=window.olMockWin||window).pageXOffset,i=i.pageYOffset,s=e.clientX,n=e.clientY;return 0===e.pageY&&Math.floor(n)>Math.floor(e.pageY)||0===e.pageX&&Math.floor(s)>Math.floor(e.pageX)?(s-=t,n-=i):(n<e.pageY-i||s<e.pageX-t)&&(s=e.pageX-t,n=e.pageY-i),{clientX:e.olClientX=s,clientY:e.olClientY=n}},clearMouseCache:function(){this.element.scrolls=null,this.element.lefttop=null,this.element.offsets=null},getMousePosition:function(e){var t;return this.includeXY?this.element.hasScrollEvent||(OpenLayers.Event.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),this.element.scrolls||(t=OpenLayers.Util.getViewportElement(),this.element.scrolls=[window.pageXOffset||t.scrollLeft,window.pageYOffset||t.scrollTop]),this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=OpenLayers.Util.pagePosition(this.element)),new OpenLayers.Pixel(e.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],e.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])},addMsTouchListener:function(e,t,i){function s(e){i(OpenLayers.Util.applyDefaults({stopPropagation:function(){for(var e=n.length-1;0<=e;--e)n[e].stopPropagation()},preventDefault:function(){for(var e=n.length-1;0<=e;--e)n[e].preventDefault()},type:t},e))}var n=this._msTouches;switch(t){case"touchstart":return this.addMsTouchListenerStart(e,t,s);case"touchend":return this.addMsTouchListenerEnd(e,t,s);case"touchmove":return this.addMsTouchListenerMove(e,t,s);default:throw"Unknown touch event type"}},addMsTouchListenerStart:function(e,t,n){var r=this._msTouches;OpenLayers.Event.observe(e,"MSPointerDown",function(e){for(var t=!1,i=0,s=r.length;i<s;++i)if(r[i].pointerId==e.pointerId){t=!0;break}t||r.push(e),e.touches=r.slice(),n(e)}),OpenLayers.Event.observe(e,"MSPointerUp",function(e){for(var t=0,i=r.length;t<i;++t)if(r[t].pointerId==e.pointerId){r.splice(t,1);break}})},addMsTouchListenerMove:function(e,t,s){var n=this._msTouches;OpenLayers.Event.observe(e,"MSPointerMove",function(e){if(!(e.pointerType==e.MSPOINTER_TYPE_MOUSE&&0==e.buttons||1==n.length&&n[0].pageX==e.pageX&&n[0].pageY==e.pageY)){for(var t=0,i=n.length;t<i;++t)if(n[t].pointerId==e.pointerId){n[t]=e;break}e.touches=n.slice(),s(e)}})},addMsTouchListenerEnd:function(e,t,s){var n=this._msTouches;OpenLayers.Event.observe(e,"MSPointerUp",function(e){for(var t=0,i=n.length;t<i;++t)if(n[t].pointerId==e.pointerId){n.splice(t,1);break}e.touches=n.slice(),s(e)})},CLASS_NAME:"OpenLayers.Events"}),OpenLayers.Events.buttonclick=OpenLayers.Class({target:null,events:"mousedown mouseup click dblclick touchstart touchmove touchend keydown".split(" "),startRegEx:/^mousedown|touchstart$/,cancelRegEx:/^touchmove$/,completeRegEx:/^mouseup|touchend$/,initialize:function(e){for(this.target=e,e=this.events.length-1;0<=e;--e)this.target.register(this.events[e],this,this.buttonClick,{extension:!0})},destroy:function(){for(var e=this.events.length-1;0<=e;--e)this.target.unregister(this.events[e],this,this.buttonClick);delete this.target},getPressedButton:function(e){var t,i=3;do{if(OpenLayers.Element.hasClass(e,"olButton")){t=e;break}}while(e=e.parentNode,0<--i&&e);return t},ignore:function(e){var t=3,i=!1;do{if("a"===e.nodeName.toLowerCase()){i=!0;break}}while(e=e.parentNode,0<--t&&e);return i},buttonClick:function(e){var t,i,s=!0,n=OpenLayers.Event.element(e);if(n&&(OpenLayers.Event.isLeftClick(e)||!~e.type.indexOf("mouse")))if(n=this.getPressedButton(n)){if("keydown"===e.type)switch(e.keyCode){case OpenLayers.Event.KEY_RETURN:case OpenLayers.Event.KEY_SPACE:this.target.triggerEvent("buttonclick",{buttonElement:n}),OpenLayers.Event.stop(e),s=!1}else this.startEvt&&(this.completeRegEx.test(e.type)&&(s=OpenLayers.Util.pagePosition(n),t=OpenLayers.Util.getViewportElement(),i=window.pageYOffset||t.scrollTop,s[0]-=window.pageXOffset||t.scrollLeft,s[1]-=i,this.target.triggerEvent("buttonclick",{buttonElement:n,buttonXY:{x:this.startEvt.clientX-s[0],y:this.startEvt.clientY-s[1]}})),this.cancelRegEx.test(e.type)&&delete this.startEvt,OpenLayers.Event.stop(e),s=!1);this.startRegEx.test(e.type)&&(this.startEvt=e,OpenLayers.Event.stop(e),s=!1)}else s=!this.ignore(OpenLayers.Event.element(e)),delete this.startEvt;return s}}),OpenLayers.Util=OpenLayers.Util||{},OpenLayers.Util.vendorPrefix=function(){function t(e,t){if(void 0===o[t]){var i,s=0,n=a.length,r=void 0!==e.cssText;for(o[t]=null;s<n;s++)if(void 0!==e[i=(i=a[s])?(i=r?i:i.toLowerCase())+t.charAt(0).toUpperCase()+t.slice(1):t]){o[t]=i;break}}return o[t]}function i(e){return t(s,e)}var a=["","O","ms","Moz","Webkit"],s=document.createElement("div").style,n={},o={};return{css:function(e){var t;return void 0===n[e]&&(t=i(t=e.replace(/(-[\s\S])/g,function(e){return e.charAt(1).toUpperCase()})),n[e]=(t=t)?t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-"):null),n[e]},js:t,style:i,cssCache:n,jsCache:o}}(),OpenLayers.Animation=function(i){var s,e=OpenLayers.Util.vendorPrefix.js(i,"requestAnimationFrame"),r=(s=i[e]||function(e,t){i.setTimeout(e,16)},function(e,t){s.apply(i,[e,t])}),a=0,o={};return{isNative:!!e,requestFrame:r,start:function(e,t,i){t=0<t?t:Number.POSITIVE_INFINITY;var s=++a,n=+new Date;return o[s]=function(){o[s]&&+new Date-n<=t?(e(),o[s]&&r(o[s],i)):delete o[s]},r(o[s],i),s},stop:function(e){delete o[e]}}}(window),OpenLayers.Tween=OpenLayers.Class({easing:null,begin:null,finish:null,duration:null,callbacks:null,time:null,minFrameRate:null,startTime:null,animationId:null,playing:!1,initialize:function(e){this.easing=e||OpenLayers.Easing.Expo.easeOut},start:function(e,t,i,s){this.playing=!0,this.begin=e,this.finish=t,this.duration=i,this.callbacks=s.callbacks,this.minFrameRate=s.minFrameRate||30,this.time=0,this.startTime=(new Date).getTime(),OpenLayers.Animation.stop(this.animationId),this.animationId=null,this.callbacks&&this.callbacks.start&&this.callbacks.start.call(this,this.begin),this.animationId=OpenLayers.Animation.start(OpenLayers.Function.bind(this.play,this))},stop:function(){this.playing&&(this.callbacks&&this.callbacks.done&&this.callbacks.done.call(this,this.finish),OpenLayers.Animation.stop(this.animationId),this.animationId=null,this.playing=!1)},play:function(){var e,t={};for(e in this.begin){var i=this.begin[e],s=this.finish[e];if(null==i||null==s||isNaN(i)||isNaN(s))throw new TypeError("invalid value for Tween");t[e]=this.easing.apply(this,[this.time,i,s-i,this.duration])}this.time++,this.callbacks&&this.callbacks.eachStep&&((new Date).getTime()-this.startTime)/this.time<=1e3/this.minFrameRate&&this.callbacks.eachStep.call(this,t),this.time>this.duration&&this.stop()},CLASS_NAME:"OpenLayers.Tween"}),OpenLayers.Easing={CLASS_NAME:"OpenLayers.Easing"},OpenLayers.Easing.Linear={easeIn:function(e,t,i,s){return i*e/s+t},easeOut:function(e,t,i,s){return i*e/s+t},easeInOut:function(e,t,i,s){return i*e/s+t},CLASS_NAME:"OpenLayers.Easing.Linear"},OpenLayers.Easing.Expo={easeIn:function(e,t,i,s){return 0==e?t:i*Math.pow(2,10*(e/s-1))+t},easeOut:function(e,t,i,s){return e==s?t+i:i*(1-Math.pow(2,-10*e/s))+t},easeInOut:function(e,t,i,s){return 0==e?t:e==s?t+i:(e/=s/2)<1?i/2*Math.pow(2,10*(e-1))+t:i/2*(2-Math.pow(2,-10*--e))+t},CLASS_NAME:"OpenLayers.Easing.Expo"},OpenLayers.Easing.Quad={easeIn:function(e,t,i,s){return i*(e/=s)*e+t},easeOut:function(e,t,i,s){return-i*(e/=s)*(e-2)+t},easeInOut:function(e,t,i,s){return(e/=s/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t},CLASS_NAME:"OpenLayers.Easing.Quad"},OpenLayers.Projection=OpenLayers.Class({proj:null,projCode:null,titleRegEx:/\+title=[^\+]*/,initialize:function(e,t){OpenLayers.Util.extend(this,t),this.projCode=e,"object"==("undefined"==typeof Proj4js?"undefined":_typeof(Proj4js))&&(this.proj=new Proj4js.Proj(e))},getCode:function(){return this.proj?this.proj.srsCode:this.projCode},getUnits:function(){return this.proj?this.proj.units:null},toString:function(){return this.getCode()},equals:function(e){var t=!1;return e&&(e instanceof OpenLayers.Projection||(e=new OpenLayers.Projection(e)),"object"==("undefined"==typeof Proj4js?"undefined":_typeof(Proj4js))&&this.proj.defData&&e.proj.defData?t=this.proj.defData.replace(this.titleRegEx,"")==e.proj.defData.replace(this.titleRegEx,""):e.getCode&&(t=(t=this.getCode())==(e=e.getCode())||!!OpenLayers.Projection.transforms[t]&&OpenLayers.Projection.transforms[t][e]===OpenLayers.Projection.nullTransform)),t},destroy:function(){delete this.proj,delete this.projCode},CLASS_NAME:"OpenLayers.Projection"}),OpenLayers.Projection.transforms={},OpenLayers.Projection.defaults={"EPSG:4326":{units:"degrees",maxExtent:[-180,-90,180,90],yx:!0},"CRS:84":{units:"degrees",maxExtent:[-180,-90,180,90]},"EPSG:900913":{units:"m",maxExtent:[-20037508.34,-20037508.34,20037508.34,20037508.34]}},OpenLayers.Projection.addTransform=function(e,t,i){var s;i===OpenLayers.Projection.nullTransform&&(s=OpenLayers.Projection.defaults[e])&&!OpenLayers.Projection.defaults[t]&&(OpenLayers.Projection.defaults[t]=s),OpenLayers.Projection.transforms[e]||(OpenLayers.Projection.transforms[e]={}),OpenLayers.Projection.transforms[e][t]=i},OpenLayers.Projection.transform=function(e,t,i){var s;return t&&i&&(t instanceof OpenLayers.Projection||(t=new OpenLayers.Projection(t)),i instanceof OpenLayers.Projection||(i=new OpenLayers.Projection(i)),t.proj&&i.proj?e=Proj4js.transform(t.proj,i.proj,e):(t=t.getCode(),i=i.getCode(),(s=OpenLayers.Projection.transforms)[t]&&s[t][i]&&s[t][i](e))),e},OpenLayers.Projection.nullTransform=function(e){return e},!function(){function h(e){return e.x=180*e.x/i,e.y=180/Math.PI*(2*Math.atan(Math.exp(e.y/i*Math.PI))-Math.PI/2),e}function p(e){e.x=e.x*i/180;var t=Math.log(Math.tan((90+e.y)*Math.PI/360))/Math.PI*i;return e.y=Math.max(-20037508.34,Math.min(t,20037508.34)),e}function e(e,t){for(var i,s,n,r=OpenLayers.Projection.addTransform,a=OpenLayers.Projection.nullTransform,o=0,l=t.length;o<l;++o)for(r(e,i=t[o],p),r(i,e,h),n=o+1;n<l;++n)r(i,s=t[n],a),r(s,i,a)}for(var i=20037508.34,t=["EPSG:900913","EPSG:3857","EPSG:102113","EPSG:102100"],s=["CRS:84","urn:ogc:def:crs:EPSG:6.6:4326","EPSG:4326"],n=t.length-1;0<=n;--n)e(t[n],s);for(n=s.length-1;0<=n;--n)e(s[n],t)}(),OpenLayers.Map=OpenLayers.Class({Z_INDEX_BASE:{BaseLayer:100,Overlay:325,Feature:725,Popup:750,Control:1e3},id:null,fractionalZoom:!1,events:null,allOverlays:!1,div:null,dragging:!1,size:null,viewPortDiv:null,layerContainerOrigin:null,layerContainerDiv:null,layers:null,controls:null,popups:null,baseLayer:null,center:null,resolution:null,zoom:0,panRatio:1.5,options:null,tileSize:null,projection:"EPSG:4326",units:null,resolutions:null,maxResolution:null,minResolution:null,maxScale:null,minScale:null,maxExtent:null,minExtent:null,restrictedExtent:null,numZoomLevels:16,theme:null,displayProjection:null,fallThrough:!1,autoUpdateSize:!0,eventListeners:null,panTween:null,panMethod:OpenLayers.Easing.Expo.easeOut,panDuration:50,zoomTween:null,zoomMethod:OpenLayers.Easing.Quad.easeOut,zoomDuration:20,paddingForPopups:null,layerContainerOriginPx:null,minPx:null,maxPx:null,initialize:function(e,t){1===arguments.length&&"object"===_typeof(e)&&(e=(t=e)&&t.div),this.tileSize=new OpenLayers.Size(OpenLayers.Map.TILE_WIDTH,OpenLayers.Map.TILE_HEIGHT),this.paddingForPopups=new OpenLayers.Bounds(15,15,15,15),this.theme=OpenLayers._getScriptLocation()+"theme/default/style.css",this.options=OpenLayers.Util.extend({},t),OpenLayers.Util.extend(this,t),OpenLayers.Util.applyDefaults(this,OpenLayers.Projection.defaults[this.projection instanceof OpenLayers.Projection?this.projection.projCode:this.projection]),!this.maxExtent||this.maxExtent instanceof OpenLayers.Bounds||(this.maxExtent=new OpenLayers.Bounds(this.maxExtent)),!this.minExtent||this.minExtent instanceof OpenLayers.Bounds||(this.minExtent=new OpenLayers.Bounds(this.minExtent)),!this.restrictedExtent||this.restrictedExtent instanceof OpenLayers.Bounds||(this.restrictedExtent=new OpenLayers.Bounds(this.restrictedExtent)),!this.center||this.center instanceof OpenLayers.LonLat||(this.center=new OpenLayers.LonLat(this.center)),this.layers=[],this.id=OpenLayers.Util.createUniqueID("OpenLayers.Map_"),this.div=OpenLayers.Util.getElement(e),this.div||(this.div=document.createElement("div"),this.div.style.height="1px",this.div.style.width="1px"),OpenLayers.Element.addClass(this.div,"olMap");var i=this.id+"_OpenLayers_ViewPort";if(this.viewPortDiv=OpenLayers.Util.createDiv(i,null,null,null,"relative",null,"hidden"),this.viewPortDiv.style.width="100%",this.viewPortDiv.style.height="100%",this.viewPortDiv.className="olMapViewport",this.div.appendChild(this.viewPortDiv),this.events=new OpenLayers.Events(this,this.viewPortDiv,null,this.fallThrough,{includeXY:!0}),OpenLayers.TileManager&&null!==this.tileManager&&(this.tileManager instanceof OpenLayers.TileManager||(this.tileManager=new OpenLayers.TileManager(this.tileManager)),this.tileManager.addMap(this)),i=this.id+"_OpenLayers_Container",this.layerContainerDiv=OpenLayers.Util.createDiv(i),this.layerContainerDiv.style.zIndex=this.Z_INDEX_BASE.Popup-1,this.layerContainerOriginPx={x:0,y:0},this.applyTransform(),this.viewPortDiv.appendChild(this.layerContainerDiv),this.updateSize(),this.eventListeners instanceof Object&&this.events.on(this.eventListeners),!0===this.autoUpdateSize&&(this.updateSizeDestroy=OpenLayers.Function.bind(this.updateSize,this),OpenLayers.Event.observe(window,"resize",this.updateSizeDestroy)),this.theme){for(var i=!0,s=document.getElementsByTagName("link"),n=0,r=s.length;n<r;++n)if(OpenLayers.Util.isEquivalentUrl(s.item(n).href,this.theme)){i=!1;break}i&&((i=document.createElement("link")).setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",this.theme),document.getElementsByTagName("head")[0].appendChild(i))}for(null==this.controls&&(this.controls=[],null!=OpenLayers.Control&&(OpenLayers.Control.Navigation?this.controls.push(new OpenLayers.Control.Navigation):OpenLayers.Control.TouchNavigation&&this.controls.push(new OpenLayers.Control.TouchNavigation),OpenLayers.Control.Zoom?this.controls.push(new OpenLayers.Control.Zoom):OpenLayers.Control.PanZoom&&this.controls.push(new OpenLayers.Control.PanZoom),OpenLayers.Control.ArgParser&&this.controls.push(new OpenLayers.Control.ArgParser),OpenLayers.Control.Attribution&&this.controls.push(new OpenLayers.Control.Attribution))),n=0,r=this.controls.length;n<r;n++)this.addControlToMap(this.controls[n]);this.popups=[],this.unloadDestroy=OpenLayers.Function.bind(this.destroy,this),OpenLayers.Event.observe(window,"unload",this.unloadDestroy),t&&t.layers&&(delete this.center,delete this.zoom,this.addLayers(t.layers),t.center&&!this.getCenter()&&this.setCenter(t.center,t.zoom)),this.panMethod&&(this.panTween=new OpenLayers.Tween(this.panMethod)),this.zoomMethod&&this.applyTransform.transform&&(this.zoomTween=new OpenLayers.Tween(this.zoomMethod))},getViewport:function(){return this.viewPortDiv},render:function(e){this.div=OpenLayers.Util.getElement(e),OpenLayers.Element.addClass(this.div,"olMap"),this.viewPortDiv.parentNode.removeChild(this.viewPortDiv),this.div.appendChild(this.viewPortDiv),this.updateSize()},unloadDestroy:null,updateSizeDestroy:null,destroy:function(){if(!this.unloadDestroy)return!1;if(this.panTween&&(this.panTween.stop(),this.panTween=null),this.zoomTween&&(this.zoomTween.stop(),this.zoomTween=null),OpenLayers.Event.stopObserving(window,"unload",this.unloadDestroy),this.unloadDestroy=null,this.updateSizeDestroy&&OpenLayers.Event.stopObserving(window,"resize",this.updateSizeDestroy),(this.paddingForPopups=null)!=this.controls){for(var e=this.controls.length-1;0<=e;--e)this.controls[e].destroy();this.controls=null}if(null!=this.layers){for(e=this.layers.length-1;0<=e;--e)this.layers[e].destroy(!1);this.layers=null}this.viewPortDiv&&this.viewPortDiv.parentNode&&this.viewPortDiv.parentNode.removeChild(this.viewPortDiv),this.viewPortDiv=null,this.tileManager&&(this.tileManager.removeMap(this),this.tileManager=null),this.eventListeners&&(this.events.un(this.eventListeners),this.eventListeners=null),this.events.destroy(),this.options=this.events=null},setOptions:function(e){var t=this.minPx&&e.restrictedExtent!=this.restrictedExtent;OpenLayers.Util.extend(this,e),t&&this.moveTo(this.getCachedCenter(),this.zoom,{forceZoomChange:!0})},getTileSize:function(){return this.tileSize},getBy:function(e,t,i){var s="function"==typeof i.test;return OpenLayers.Array.filter(this[e],function(e){return e[t]==i||s&&i.test(e[t])})},getLayersBy:function(e,t){return this.getBy("layers",e,t)},getLayersByName:function(e){return this.getLayersBy("name",e)},getLayersByClass:function(e){return this.getLayersBy("CLASS_NAME",e)},getControlsBy:function(e,t){return this.getBy("controls",e,t)},getControlsByClass:function(e){return this.getControlsBy("CLASS_NAME",e)},getLayer:function(e){for(var t=null,i=0,s=this.layers.length;i<s;i++){var n=this.layers[i];if(n.id==e){t=n;break}}return t},setLayerZIndex:function(e,t){e.setZIndex(this.Z_INDEX_BASE[e.isBaseLayer?"BaseLayer":"Overlay"]+5*t)},resetLayersZIndex:function(){for(var e=0,t=this.layers.length;e<t;e++)this.setLayerZIndex(this.layers[e],e)},addLayer:function(e){for(var t=0,i=this.layers.length;t<i;t++)if(this.layers[t]==e)return!1;return!1!==this.events.triggerEvent("preaddlayer",{layer:e})&&(this.allOverlays&&(e.isBaseLayer=!1),e.div.className="olLayerDiv",e.div.style.overflow="",this.setLayerZIndex(e,this.layers.length),(e.isFixed?this.viewPortDiv:this.layerContainerDiv).appendChild(e.div),this.layers.push(e),e.setMap(this),e.isBaseLayer||this.allOverlays&&!this.baseLayer?null==this.baseLayer?this.setBaseLayer(e):e.setVisibility(!1):e.redraw(),this.events.triggerEvent("addlayer",{layer:e}),e.events.triggerEvent("added",{map:this,layer:e}),e.afterAdd(),!0)},addLayers:function(e){for(var t=0,i=e.length;t<i;t++)this.addLayer(e[t])},removeLayer:function(e,t){if(!1!==this.events.triggerEvent("preremovelayer",{layer:e})){if(null==t&&(t=!0),(e.isFixed?this.viewPortDiv:this.layerContainerDiv).removeChild(e.div),OpenLayers.Util.removeItem(this.layers,e),e.removeMap(this),e.map=null,this.baseLayer==e&&(this.baseLayer=null,t))for(var i=0,s=this.layers.length;i<s;i++){var n=this.layers[i];if(n.isBaseLayer||this.allOverlays){this.setBaseLayer(n);break}}this.resetLayersZIndex(),this.events.triggerEvent("removelayer",{layer:e}),e.events.triggerEvent("removed",{map:this,layer:e})}},getNumLayers:function(){return this.layers.length},getLayerIndex:function(e){return OpenLayers.Util.indexOf(this.layers,e)},setLayerIndex:function(e,t){var i=this.getLayerIndex(e);if(t<0?t=0:t>this.layers.length&&(t=this.layers.length),i!=t){this.layers.splice(i,1),this.layers.splice(t,0,e);for(var i=0,s=this.layers.length;i<s;i++)this.setLayerZIndex(this.layers[i],i);this.events.triggerEvent("changelayer",{layer:e,property:"order"}),this.allOverlays&&(0===t?this.setBaseLayer(e):this.baseLayer!==this.layers[0]&&this.setBaseLayer(this.layers[0]))}},raiseLayer:function(e,t){t=this.getLayerIndex(e)+t;this.setLayerIndex(e,t)},setBaseLayer:function(e){var t,i;e!=this.baseLayer&&-1!=OpenLayers.Util.indexOf(this.layers,e)&&(t=this.getCachedCenter(),i=OpenLayers.Util.getResolutionFromScale(this.getScale(),e.units),null==this.baseLayer||this.allOverlays||this.baseLayer.setVisibility(!1),this.baseLayer=e,this.allOverlays&&!this.baseLayer.visibility||(this.baseLayer.setVisibility(!0),!1===this.baseLayer.inRange&&this.baseLayer.redraw()),null!=t&&(e=this.getZoomForResolution(i||this.resolution,!0),this.setCenter(t,e,!1,!0)),this.events.triggerEvent("changebaselayer",{layer:this.baseLayer}))},addControl:function(e,t){this.controls.push(e),this.addControlToMap(e,t)},addControls:function(e,t){for(var i=1===arguments.length?[]:t,s=0,n=e.length;s<n;s++)this.addControl(e[s],i[s]||null)},addControlToMap:function(e,t){e.outsideViewport=null!=e.div,this.displayProjection&&!e.displayProjection&&(e.displayProjection=this.displayProjection),e.setMap(this);t=e.draw(t);t&&!e.outsideViewport&&(t.style.zIndex=this.Z_INDEX_BASE.Control+this.controls.length,this.viewPortDiv.appendChild(t)),e.autoActivate&&e.activate()},getControl:function(e){for(var t=null,i=0,s=this.controls.length;i<s;i++){var n=this.controls[i];if(n.id==e){t=n;break}}return t},removeControl:function(e){e&&e==this.getControl(e.id)&&(e.div&&e.div.parentNode==this.viewPortDiv&&this.viewPortDiv.removeChild(e.div),OpenLayers.Util.removeItem(this.controls,e))},addPopup:function(e,t){if(t)for(var i=this.popups.length-1;0<=i;--i)this.removePopup(this.popups[i]);(e.map=this).popups.push(e),(i=e.draw())&&(i.style.zIndex=this.Z_INDEX_BASE.Popup+this.popups.length,this.layerContainerDiv.appendChild(i))},removePopup:function(e){if(OpenLayers.Util.removeItem(this.popups,e),e.div)try{this.layerContainerDiv.removeChild(e.div)}catch(e){}e.map=null},getSize:function(){var e=null;return e=null!=this.size?this.size.clone():e},updateSize:function(){var e=this.getCurrentSize();if(e&&!isNaN(e.h)&&!isNaN(e.w)){this.events.clearMouseCache();var t=this.getSize();if(null==t&&(this.size=t=e),!e.equals(t)){for(this.size=e,e=0,t=this.layers.length;e<t;e++)this.layers[e].onMapResize();e=this.getCachedCenter(),null!=this.baseLayer&&null!=e&&(t=this.getZoom(),this.zoom=null,this.setCenter(e,t))}}this.events.triggerEvent("updatesize")},getCurrentSize:function(){var e=new OpenLayers.Size(this.div.clientWidth,this.div.clientHeight);return(0==e.w&&0==e.h||isNaN(e.w)&&isNaN(e.h))&&(e.w=this.div.offsetWidth,e.h=this.div.offsetHeight),(0==e.w&&0==e.h||isNaN(e.w)&&isNaN(e.h))&&(e.w=parseInt(this.div.style.width),e.h=parseInt(this.div.style.height)),e},calculateBounds:function(e,t){var i=null;return null==e&&(e=this.getCachedCenter()),null==t&&(t=this.getResolution()),null!=e&&null!=t&&(i=this.size.w*t/2,t=this.size.h*t/2,i=new OpenLayers.Bounds(e.lon-i,e.lat-t,e.lon+i,e.lat+t)),i},getCenter:function(){var e=null,t=this.getCachedCenter();return e=t?t.clone():e},getCachedCenter:function(){return!this.center&&this.size&&(this.center=this.getLonLatFromViewPortPx({x:this.size.w/2,y:this.size.h/2})),this.center},getZoom:function(){return this.zoom},pan:function(e,t,i){var s;(i=OpenLayers.Util.applyDefaults(i,{animate:!0,dragging:!1})).dragging?0==e&&0==t||this.moveByPx(e,t):(e=(s=this.getViewPortPxFromLonLat(this.getCachedCenter())).add(e,t),!this.dragging&&e.equals(s)||(s=this.getLonLatFromViewPortPx(e),i.animate?this.panTo(s):(this.moveTo(s),this.dragging&&(this.dragging=!1,this.events.triggerEvent("moveend")))))},panTo:function(t){var e,i,s,n;this.panTween&&this.getExtent().scale(this.panRatio).containsLonLat(t)?(e=this.getCachedCenter(),t.equals(e)||(e=this.getPixelFromLonLat(e),i=this.getPixelFromLonLat(t),n=s=0,this.panTween.start({x:0,y:0},{x:i.x-e.x,y:i.y-e.y},this.panDuration,{callbacks:{eachStep:OpenLayers.Function.bind(function(e){this.moveByPx(e.x-s,e.y-n),s=Math.round(e.x),n=Math.round(e.y)},this),done:OpenLayers.Function.bind(function(e){this.moveTo(t),this.dragging=!1,this.events.triggerEvent("moveend")},this)}}))):this.setCenter(t)},setCenter:function(e,t,i,s){this.panTween&&this.panTween.stop(),this.zoomTween&&this.zoomTween.stop(),this.moveTo(e,t,{dragging:i,forceZoomChange:s})},moveByPx:function(e,t){var i=this.size.w/2,s=this.size.h/2,n=i+e,r=s+t,a=this.baseLayer.wrapDateLine,o=0,l=0;if(this.restrictedExtent&&(o=i,l=s,a=!1),e=a||n<=this.maxPx.x-o&&n>=this.minPx.x+o?Math.round(e):0,t=r<=this.maxPx.y-l&&r>=this.minPx.y+l?Math.round(t):0,e||t){for(this.dragging||(this.dragging=!0,this.events.triggerEvent("movestart")),this.center=null,e&&(this.layerContainerOriginPx.x-=e,this.minPx.x-=e,this.maxPx.x-=e),t&&(this.layerContainerOriginPx.y-=t,this.minPx.y-=t,this.maxPx.y-=t),this.applyTransform(),s=0,n=this.layers.length;s<n;++s)(i=this.layers[s]).visibility&&(i===this.baseLayer||i.inRange)&&(i.moveByPx(e,t),i.events.triggerEvent("move"));this.events.triggerEvent("move")}},adjustZoom:function(e){if(this.baseLayer&&this.baseLayer.wrapDateLine){var t=this.baseLayer.resolutions,i=this.getMaxExtent().getWidth()/this.size.w;if(this.getResolutionForZoom(e)>i)if(this.fractionalZoom)e=this.getZoomForResolution(i);else for(var s=0|e,n=t.length;s<n;++s)if(t[s]<=i){e=s;break}}return e},getMinZoom:function(){return this.adjustZoom(0)},moveTo:function(e,t,i){null==e||e instanceof OpenLayers.LonLat||(e=new OpenLayers.LonLat(e)),i=i||{},null!=t&&(t=parseFloat(t),this.fractionalZoom||(t=Math.round(t)));var s,n,r,a,o,l=t,l=((t=this.adjustZoom(t))!==l&&(e=this.getCenter()),i.dragging||this.dragging),h=i.forceZoomChange;if(this.getCachedCenter()||this.isValidLonLat(e)||(e=this.maxExtent.getCenterLonLat(),this.center=e.clone()),null!=this.restrictedExtent&&(null==e&&(e=this.center),null==t&&(t=this.getZoom()),s=this.getResolutionForZoom(t),s=this.calculateBounds(e,s),this.restrictedExtent.containsBounds(s)||(n=this.restrictedExtent.getCenterLonLat(),s.getWidth()>this.restrictedExtent.getWidth()?e=new OpenLayers.LonLat(n.lon,e.lat):s.left<this.restrictedExtent.left?e=e.add(this.restrictedExtent.left-s.left,0):s.right>this.restrictedExtent.right&&(e=e.add(this.restrictedExtent.right-s.right,0)),s.getHeight()>this.restrictedExtent.getHeight()?e=new OpenLayers.LonLat(e.lon,n.lat):s.bottom<this.restrictedExtent.bottom?e=e.add(0,this.restrictedExtent.bottom-s.bottom):s.top>this.restrictedExtent.top&&(e=e.add(0,this.restrictedExtent.top-s.top)))),h=h||this.isValidZoomLevel(t)&&t!=this.getZoom(),s=this.isValidLonLat(e)&&!e.equals(this.center),h||s||l){for(l||this.events.triggerEvent("movestart",{zoomChanged:h}),s&&(!h&&this.center&&this.centerLayerContainer(e),this.center=e.clone()),e=h?this.getResolutionForZoom(t):this.getResolution(),!h&&null!=this.layerContainerOrigin||(this.layerContainerOrigin=this.getCachedCenter(),this.layerContainerOriginPx.x=0,this.layerContainerOriginPx.y=0,this.applyTransform(),r=(s=this.getMaxExtent({restricted:!0})).getCenterLonLat(),n=this.center.lon-r.lon,r=r.lat-this.center.lat,a=Math.round(s.getWidth()/e),o=Math.round(s.getHeight()/e),this.minPx={x:(this.size.w-a)/2-n/e,y:(this.size.h-o)/2-r/e},this.maxPx={x:this.minPx.x+Math.round(s.getWidth()/e),y:this.minPx.y+Math.round(s.getHeight()/e)}),h&&(this.zoom=t,this.resolution=e),e=this.getExtent(),this.baseLayer.visibility&&(this.baseLayer.moveTo(e,h,i.dragging),i.dragging||this.baseLayer.events.triggerEvent("moveend",{zoomChanged:h})),e=this.baseLayer.getExtent(),t=this.layers.length-1;0<=t;--t)(s=this.layers[t])===this.baseLayer||s.isBaseLayer||(n=s.calculateInRange(),s.inRange!=n&&((s.inRange=n)||s.display(!1),this.events.triggerEvent("changelayer",{layer:s,property:"visibility"})),n&&s.visibility&&(s.moveTo(e,h,i.dragging),i.dragging||s.events.triggerEvent("moveend",{zoomChanged:h})));if(this.events.triggerEvent("move"),l||this.events.triggerEvent("moveend"),h){for(t=0,i=this.popups.length;t<i;t++)this.popups[t].updatePosition();this.events.triggerEvent("zoomend")}}},centerLayerContainer:function(e){var t,i,s=this.getViewPortPxFromLonLat(this.layerContainerOrigin),n=this.getViewPortPxFromLonLat(e);null!=s&&null!=n&&(t=this.layerContainerOriginPx.x,e=this.layerContainerOriginPx.y,i=Math.round(s.x-n.x),s=Math.round(s.y-n.y),this.applyTransform(this.layerContainerOriginPx.x=i,this.layerContainerOriginPx.y=s),e-=s,this.minPx.x-=t-=i,this.maxPx.x-=t,this.minPx.y-=e,this.maxPx.y-=e)},isValidZoomLevel:function(e){return null!=e&&0<=e&&e<this.getNumZoomLevels()},isValidLonLat:function(e){var t=!1;return t=null!=e?(t=this.getMaxExtent()).containsLonLat(e,{worldBounds:this.baseLayer.wrapDateLine&&t}):t},getProjection:function(){var e=this.getProjectionObject();return e?e.getCode():null},getProjectionObject:function(){var e=null;return e=null!=this.baseLayer?this.baseLayer.projection:e},getMaxResolution:function(){var e=null;return e=null!=this.baseLayer?this.baseLayer.maxResolution:e},getMaxExtent:function(e){var t=null;return e&&e.restricted&&this.restrictedExtent?t=this.restrictedExtent:null!=this.baseLayer&&(t=this.baseLayer.maxExtent),t},getNumZoomLevels:function(){var e=null;return e=null!=this.baseLayer?this.baseLayer.numZoomLevels:e},getExtent:function(){var e=null;return e=null!=this.baseLayer?this.baseLayer.getExtent():e},getResolution:function(){var e=null;return null!=this.baseLayer?e=this.baseLayer.getResolution():!0===this.allOverlays&&0<this.layers.length&&(e=this.layers[0].getResolution()),e},getUnits:function(){var e=null;return e=null!=this.baseLayer?this.baseLayer.units:e},getScale:function(){var e=null;return null!=this.baseLayer&&(e=this.getResolution(),e=OpenLayers.Util.getScaleFromResolution(e,this.baseLayer.units)),e},getZoomForExtent:function(e,t){var i=null;return i=null!=this.baseLayer?this.baseLayer.getZoomForExtent(e,t):i},getResolutionForZoom:function(e){var t=null;return t=this.baseLayer?this.baseLayer.getResolutionForZoom(e):t},getZoomForResolution:function(e,t){var i=null;return i=null!=this.baseLayer?this.baseLayer.getZoomForResolution(e,t):i},zoomTo:function(e,i){var t,s,n,r=this;r.isValidZoomLevel(e)&&(r.baseLayer.wrapDateLine&&(e=r.adjustZoom(e)),r.zoomTween?(s={scale:1},n={scale:(n=r.getResolution())/r.getResolutionForZoom(e)},r.zoomTween.playing&&r.zoomTween.duration<3*r.zoomDuration?r.zoomTween.finish={scale:r.zoomTween.finish.scale*n.scale}:(i||(t=r.getSize(),i={x:t.w/2,y:t.h/2}),r.zoomTween.start(s,n,r.zoomDuration,{minFrameRate:50,callbacks:{eachStep:function(e){var t=r.layerContainerOriginPx;e=e.scale,r.applyTransform(t.x+((e-1)*(t.x-i.x)|0),t.y+((e-1)*(t.y-i.y)|0),e)},done:function(e){r.applyTransform(),e=r.getResolution()/e.scale;var t=r.getZoomForResolution(e,!0);r.moveTo(r.getZoomTargetCenter(i,e),t,!0)}}}))):(s=i?r.getZoomTargetCenter(i,r.getResolutionForZoom(e)):null,r.setCenter(s,e)))},zoomIn:function(){this.zoomTo(this.getZoom()+1)},zoomOut:function(){this.zoomTo(this.getZoom()-1)},zoomToExtent:function(e,t){var i=(e=e instanceof OpenLayers.Bounds?e:new OpenLayers.Bounds(e)).getCenterLonLat();if(this.baseLayer.wrapDateLine){for(i=this.getMaxExtent(),e=e.clone();e.right<e.left;)e.right+=i.getWidth();i=e.getCenterLonLat().wrapDateLine(i)}this.setCenter(i,this.getZoomForExtent(e,t))},zoomToMaxExtent:function(e){e=this.getMaxExtent({restricted:!e||e.restricted}),this.zoomToExtent(e)},zoomToScale:function(e,t){var e=OpenLayers.Util.getResolutionFromScale(e,this.baseLayer.units),i=this.size.w*e/2,e=this.size.h*e/2,s=this.getCachedCenter(),i=new OpenLayers.Bounds(s.lon-i,s.lat-e,s.lon+i,s.lat+e);this.zoomToExtent(i,t)},getLonLatFromViewPortPx:function(e){var t=null;return t=null!=this.baseLayer?this.baseLayer.getLonLatFromViewPortPx(e):t},getViewPortPxFromLonLat:function(e){var t=null;return t=null!=this.baseLayer?this.baseLayer.getViewPortPxFromLonLat(e):t},getZoomTargetCenter:function(e,t){var i=null,s=(n=this.getSize()).w/2-e.x,n=e.y-n.h/2,e=this.getLonLatFromPixel(e);return i=e?new OpenLayers.LonLat(e.lon+s*t,e.lat+n*t):i},getLonLatFromPixel:function(e){return this.getLonLatFromViewPortPx(e)},getPixelFromLonLat:function(e){return(e=this.getViewPortPxFromLonLat(e)).x=Math.round(e.x),e.y=Math.round(e.y),e},getGeodesicPixelSize:function(e){var t=e?this.getLonLatFromPixel(e):this.getCachedCenter()||new OpenLayers.LonLat(0,0),i=this.getResolution(),s=(e=t.add(-i/2,0),t.add(i/2,0)),n=t.add(0,-i/2),t=t.add(0,i/2),i=new OpenLayers.Projection("EPSG:4326"),r=this.getProjectionObject()||i;return r.equals(i)||(e.transform(r,i),s.transform(r,i),n.transform(r,i),t.transform(r,i)),new OpenLayers.Size(OpenLayers.Util.distVincenty(e,s),OpenLayers.Util.distVincenty(n,t))},getViewPortPxFromLayerPx:function(e){var t=null;return t=null!=e?e.add(this.layerContainerOriginPx.x,this.layerContainerOriginPx.y):t},getLayerPxFromViewPortPx:function(e){var t=null;return t=null!=e&&(t=e.add(-this.layerContainerOriginPx.x,-this.layerContainerOriginPx.y),isNaN(t.x)||isNaN(t.y))?null:t},getLonLatFromLayerPx:function(e){return e=this.getViewPortPxFromLayerPx(e),this.getLonLatFromViewPortPx(e)},getLayerPxFromLonLat:function(e){return e=this.getPixelFromLonLat(e),this.getLayerPxFromViewPortPx(e)},applyTransform:function(e,t,i){var s,n=this.layerContainerOriginPx,r=1!==(i=i||1),a=(e=e||n.x,t=t||n.y,this.layerContainerDiv.style),o=this.applyTransform.transform,l=this.applyTransform.template;void 0===o&&(o=OpenLayers.Util.vendorPrefix.style("transform"),this.applyTransform.transform=o)&&((s=OpenLayers.Element.getStyle(this.viewPortDiv,OpenLayers.Util.vendorPrefix.css("transform")))&&"none"===s||(a[o]=[(l=["translate3d(",",0) ","scale3d(",",1)"])[0],"0,0",l[1]].join("")),l&&~a[o].indexOf(l[0])||(l=["translate(",") ","scale(",")"]),this.applyTransform.template=l),null===o||"translate3d("!==l[0]&&!0!=r?(a.left=e+"px",a.top=t+"px",null!==o&&(a[o]="")):(!0==r&&"translate("===l[0]&&(e-=n.x,t-=n.y,a.left=n.x+"px",a.top=n.y+"px"),a[o]=[l[0],e,"px,",t,"px",l[1],l[2],i,",",i,l[3]].join(""))},CLASS_NAME:"OpenLayers.Map"}),OpenLayers.Map.TILE_WIDTH=256,OpenLayers.Map.TILE_HEIGHT=256,OpenLayers.Handler=OpenLayers.Class({id:null,control:null,map:null,keyMask:null,active:!1,evt:null,touch:!1,initialize:function(e,t,i){OpenLayers.Util.extend(this,i),this.control=e,this.callbacks=t,(e=this.map||e.map)&&this.setMap(e),this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},setMap:function(e){this.map=e},checkModifiers:function(e){return null==this.keyMask||((e.shiftKey?OpenLayers.Handler.MOD_SHIFT:0)|(e.ctrlKey?OpenLayers.Handler.MOD_CTRL:0)|(e.altKey?OpenLayers.Handler.MOD_ALT:0)|(e.metaKey?OpenLayers.Handler.MOD_META:0))==this.keyMask},activate:function(){if(this.active)return!1;for(var e=OpenLayers.Events.prototype.BROWSER_EVENTS,t=0,i=e.length;t<i;t++)this[e[t]]&&this.register(e[t],this[e[t]]);return this.active=!0},deactivate:function(){if(!this.active)return!1;for(var e=OpenLayers.Events.prototype.BROWSER_EVENTS,t=0,i=e.length;t<i;t++)this[e[t]]&&this.unregister(e[t],this[e[t]]);return!(this.active=this.touch=!1)},startTouch:function(){if(!this.touch){this.touch=!0;for(var e="mousedown mouseup mousemove click dblclick mouseout".split(" "),t=0,i=e.length;t<i;t++)this[e[t]]&&this.unregister(e[t],this[e[t]])}},callback:function(e,t){e&&this.callbacks[e]&&this.callbacks[e].apply(this.control,t)},register:function(e,t){this.map.events.registerPriority(e,this,t),this.map.events.registerPriority(e,this,this.setEvent)},unregister:function(e,t){this.map.events.unregister(e,this,t),this.map.events.unregister(e,this,this.setEvent)},setEvent:function(e){return this.evt=e,!0},destroy:function(){this.deactivate(),this.control=this.map=null},CLASS_NAME:"OpenLayers.Handler"}),OpenLayers.Handler.MOD_NONE=0,OpenLayers.Handler.MOD_SHIFT=1,OpenLayers.Handler.MOD_CTRL=2,OpenLayers.Handler.MOD_ALT=4,OpenLayers.Handler.MOD_META=8,OpenLayers.Handler.Click=OpenLayers.Class(OpenLayers.Handler,{delay:300,single:!0,double:!1,pixelTolerance:0,dblclickTolerance:13,stopSingle:!1,stopDouble:!1,timerId:null,down:null,last:null,first:null,rightclickTimerId:null,touchstart:function(e){return this.startTouch(),this.down=this.getEventInfo(e),this.last=this.getEventInfo(e),!0},touchmove:function(e){return this.last=this.getEventInfo(e),!0},touchend:function(e){return this.down&&(e.xy=this.last.xy,e.lastTouches=this.last.touches,this.handleSingle(e),this.down=null),!0},mousedown:function(e){return this.down=this.getEventInfo(e),this.last=this.getEventInfo(e),!0},mouseup:function(e){var t=!0;return t=this.checkModifiers(e)&&this.control.handleRightClicks&&OpenLayers.Event.isRightClick(e)?this.rightclick(e):t},rightclick:function(e){if(this.passesTolerance(e)){if(null!=this.rightclickTimerId)return this.clearTimer(),this.callback("dblrightclick",[e]),!this.stopDouble;e=this.double?OpenLayers.Util.extend({},e):this.callback("rightclick",[e]),e=OpenLayers.Function.bind(this.delayedRightCall,this,e),this.rightclickTimerId=window.setTimeout(e,this.delay)}return!this.stopSingle},delayedRightCall:function(e){this.rightclickTimerId=null,e&&this.callback("rightclick",[e])},click:function(e){return this.last||(this.last=this.getEventInfo(e)),this.handleSingle(e),!this.stopSingle},dblclick:function(e){return this.handleDouble(e),!this.stopDouble},handleDouble:function(e){this.passesDblclickTolerance(e)&&(this.double&&this.callback("dblclick",[e]),this.clearTimer())},handleSingle:function(e){this.passesTolerance(e)&&(null!=this.timerId?(this.last.touches&&1===this.last.touches.length&&(this.double&&OpenLayers.Event.preventDefault(e),this.handleDouble(e)),this.last.touches&&2===this.last.touches.length||this.clearTimer()):(this.first=this.getEventInfo(e),e=this.single?OpenLayers.Util.extend({},e):null,this.queuePotentialClick(e)))},queuePotentialClick:function(e){this.timerId=window.setTimeout(OpenLayers.Function.bind(this.delayedCall,this,e),this.delay)},passesTolerance:function(e){var t=!0;if(null!=this.pixelTolerance&&this.down&&this.down.xy&&(t=this.pixelTolerance>=this.down.xy.distanceTo(e.xy))&&this.touch&&this.down.touches.length===this.last.touches.length){e=0;for(var i=this.down.touches.length;e<i;++e)if(this.getTouchDistance(this.down.touches[e],this.last.touches[e])>this.pixelTolerance){t=!1;break}}return t},getTouchDistance:function(e,t){return Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2))},passesDblclickTolerance:function(e){return e=!0,e=this.down&&this.first?this.down.xy.distanceTo(this.first.xy)<=this.dblclickTolerance:e},clearTimer:function(){null!=this.timerId&&(window.clearTimeout(this.timerId),this.timerId=null),null!=this.rightclickTimerId&&(window.clearTimeout(this.rightclickTimerId),this.rightclickTimerId=null)},delayedCall:function(e){this.timerId=null,e&&this.callback("click",[e])},getEventInfo:function(e){if(e.touches)for(var t,i=e.touches.length,s=Array(i),n=0;n<i;n++)t=e.touches[n],s[n]={clientX:t.olClientX,clientY:t.olClientY};return{xy:e.xy,touches:s}},deactivate:function(){var e=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.clearTimer(),e=!(this.last=this.first=this.down=null)),e},CLASS_NAME:"OpenLayers.Handler.Click"}),OpenLayers.Handler.Drag=OpenLayers.Class(OpenLayers.Handler,{started:!1,stopDown:!0,dragging:!1,last:null,start:null,lastMoveEvt:null,oldOnselectstart:null,interval:0,timeoutId:null,documentDrag:!1,documentEvents:null,initialize:function(e,t,i){var s;OpenLayers.Handler.prototype.initialize.apply(this,arguments),!0===this.documentDrag&&((s=this)._docMove=function(e){s.mousemove({xy:{x:e.clientX,y:e.clientY},element:document})},this._docUp=function(e){s.mouseup({xy:{x:e.clientX,y:e.clientY}})})},dragstart:function(e){var t=!0;return this.dragging=!1,this.checkModifiers(e)&&(OpenLayers.Event.isLeftClick(e)||OpenLayers.Event.isSingleTouch(e))?(this.started=!0,this.last=this.start=e.xy,OpenLayers.Element.addClass(this.map.viewPortDiv,"olDragDown"),this.down(e),this.callback("down",[e.xy]),OpenLayers.Event.preventDefault(e),this.oldOnselectstart||(this.oldOnselectstart=document.onselectstart||OpenLayers.Function.True),document.onselectstart=OpenLayers.Function.False,t=!this.stopDown):(this.started=!1,this.last=this.start=null),t},dragmove:function(e){return this.lastMoveEvt=e,!this.started||this.timeoutId||e.xy.x==this.last.x&&e.xy.y==this.last.y||(!0===this.documentDrag&&this.documentEvents&&(e.element===document?(this.adjustXY(e),this.setEvent(e)):this.removeDocumentEvents()),0<this.interval&&(this.timeoutId=setTimeout(OpenLayers.Function.bind(this.removeTimeout,this),this.interval)),this.dragging=!0,this.move(e),this.callback("move",[e.xy]),this.oldOnselectstart||(this.oldOnselectstart=document.onselectstart,document.onselectstart=OpenLayers.Function.False),this.last=e.xy),!0},dragend:function(e){var t;return this.started&&(!0===this.documentDrag&&this.documentEvents&&(this.adjustXY(e),this.removeDocumentEvents()),t=this.start!=this.last,this.dragging=this.started=!1,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown"),this.up(e),this.callback("up",[e.xy]),t&&this.callback("done",[e.xy]),document.onselectstart=this.oldOnselectstart),!0},down:function(e){},move:function(e){},up:function(e){},out:function(e){},mousedown:function(e){return this.dragstart(e)},touchstart:function(e){return this.startTouch(),this.dragstart(e)},mousemove:function(e){return this.dragmove(e)},touchmove:function(e){return this.dragmove(e)},removeTimeout:function(){this.timeoutId=null,this.dragging&&this.mousemove(this.lastMoveEvt)},mouseup:function(e){return this.dragend(e)},touchend:function(e){return e.xy=this.last,this.dragend(e)},mouseout:function(e){var t;return this.started&&OpenLayers.Util.mouseLeft(e,this.map.viewPortDiv)&&(!0===this.documentDrag?this.addDocumentEvents():(t=this.start!=this.last,this.dragging=this.started=!1,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown"),this.out(e),this.callback("out",[]),t&&this.callback("done",[e.xy]),document.onselectstart&&(document.onselectstart=this.oldOnselectstart))),!0},click:function(e){return this.start==this.last},activate:function(){var e=!1;return e=OpenLayers.Handler.prototype.activate.apply(this,arguments)?!(this.dragging=!1):e},deactivate:function(){var e=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.dragging=this.started=!1,e=!(this.last=this.start=null),OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown")),e},adjustXY:function(e){var t=OpenLayers.Util.pagePosition(this.map.viewPortDiv);e.xy.x-=t[0],e.xy.y-=t[1]},addDocumentEvents:function(){OpenLayers.Element.addClass(document.body,"olDragDown"),this.documentEvents=!0,OpenLayers.Event.observe(document,"mousemove",this._docMove),OpenLayers.Event.observe(document,"mouseup",this._docUp)},removeDocumentEvents:function(){OpenLayers.Element.removeClass(document.body,"olDragDown"),this.documentEvents=!1,OpenLayers.Event.stopObserving(document,"mousemove",this._docMove),OpenLayers.Event.stopObserving(document,"mouseup",this._docUp)},CLASS_NAME:"OpenLayers.Handler.Drag"}),OpenLayers.Control.OverviewMap=OpenLayers.Class(OpenLayers.Control,{element:null,ovmap:null,size:{w:180,h:90},layers:null,minRectSize:15,minRectDisplayClass:"RectReplacement",minRatio:8,maxRatio:32,mapOptions:null,autoPan:!1,handlers:null,resolutionFactor:1,maximized:!1,maximizeTitle:"",minimizeTitle:"",initialize:function(e){this.layers=[],this.handlers={},OpenLayers.Control.prototype.initialize.apply(this,[e])},destroy:function(){this.mapDiv&&(this.handlers.click&&this.handlers.click.destroy(),this.handlers.drag&&this.handlers.drag.destroy(),this.ovmap&&this.ovmap.viewPortDiv.removeChild(this.extentRectangle),this.extentRectangle=null,this.rectEvents&&(this.rectEvents.destroy(),this.rectEvents=null),this.ovmap&&(this.ovmap.destroy(),this.ovmap=null),this.element.removeChild(this.mapDiv),this.mapDiv=null,this.div.removeChild(this.element),this.element=null,this.maximizeDiv&&(this.div.removeChild(this.maximizeDiv),this.maximizeDiv=null),this.minimizeDiv&&(this.div.removeChild(this.minimizeDiv),this.minimizeDiv=null),this.map.events.un({buttonclick:this.onButtonClick,moveend:this.update,changebaselayer:this.baseLayerDraw,scope:this}),OpenLayers.Control.prototype.destroy.apply(this,arguments))},draw:function(){if(OpenLayers.Control.prototype.draw.apply(this,arguments),0===this.layers.length){if(!this.map.baseLayer)return this.map.events.register("changebaselayer",this,this.baseLayerDraw),this.div;this.layers=[this.map.baseLayer.clone()]}var e;return this.element=document.createElement("div"),this.element.className=this.displayClass+"Element",this.element.style.display="none",this.mapDiv=document.createElement("div"),this.mapDiv.style.width=this.size.w+"px",this.mapDiv.style.height=this.size.h+"px",this.mapDiv.style.position="relative",this.mapDiv.style.overflow="hidden",this.mapDiv.id=OpenLayers.Util.createUniqueID("overviewMap"),this.extentRectangle=document.createElement("div"),this.extentRectangle.style.position="absolute",this.extentRectangle.style.zIndex=1e3,this.extentRectangle.className=this.displayClass+"ExtentRectangle",this.element.appendChild(this.mapDiv),this.div.appendChild(this.element),this.outsideViewport?this.element.style.display="":(this.div.className+=" "+this.displayClass+"Container",e=OpenLayers.Util.getImageLocation("layer-switcher-maximize.png"),this.maximizeDiv=OpenLayers.Util.createAlphaImageDiv(this.displayClass+"MaximizeButton",null,null,e,"absolute"),this.maximizeDiv.style.display="none",this.maximizeDiv.className=this.displayClass+"MaximizeButton olButton",this.maximizeTitle&&(this.maximizeDiv.title=this.maximizeTitle),this.div.appendChild(this.maximizeDiv),e=OpenLayers.Util.getImageLocation("layer-switcher-minimize.png"),this.minimizeDiv=OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_minimizeDiv",null,null,e,"absolute"),this.minimizeDiv.style.display="none",this.minimizeDiv.className=this.displayClass+"MinimizeButton olButton",this.minimizeTitle&&(this.minimizeDiv.title=this.minimizeTitle),this.div.appendChild(this.minimizeDiv),this.minimizeControl()),this.map.getExtent()&&this.update(),this.map.events.on({buttonclick:this.onButtonClick,moveend:this.update,scope:this}),this.maximized&&this.maximizeControl(),this.div},baseLayerDraw:function(){this.draw(),this.map.events.unregister("changebaselayer",this,this.baseLayerDraw)},rectDrag:function(e){var t,i,s,n=this.handlers.drag.last.x-e.x,r=this.handlers.drag.last.y-e.y;0==n&&0==r||(t=this.rectPxBounds.top,i=this.rectPxBounds.left,e=Math.abs(this.rectPxBounds.getHeight()),s=this.rectPxBounds.getWidth(),r=Math.max(0,t-r),r=Math.min(r,this.ovmap.size.h-this.hComp-e),n=Math.max(0,i-n),n=Math.min(n,this.ovmap.size.w-this.wComp-s),this.setRectPxBounds(new OpenLayers.Bounds(n,r+e,n+s,r)))},mapDivClick:function(e){var t=this.rectPxBounds.getCenterPixel(),i=e.xy.x-t.x,s=e.xy.y-t.y,n=this.rectPxBounds.top,r=this.rectPxBounds.left;e=Math.abs(this.rectPxBounds.getHeight()),t=this.rectPxBounds.getWidth(),s=Math.max(0,n+s),s=Math.min(s,this.ovmap.size.h-e),i=Math.max(0,r+i),i=Math.min(i,this.ovmap.size.w-t),this.setRectPxBounds(new OpenLayers.Bounds(i,s+e,i+t,s)),this.updateMapToRect()},onButtonClick:function(e){e.buttonElement===this.minimizeDiv?this.minimizeControl():e.buttonElement===this.maximizeDiv&&this.maximizeControl()},maximizeControl:function(e){this.element.style.display="",this.showToggle(!1),null!=e&&OpenLayers.Event.stop(e)},minimizeControl:function(e){this.element.style.display="none",this.showToggle(!0),null!=e&&OpenLayers.Event.stop(e)},showToggle:function(e){this.maximizeDiv&&(this.maximizeDiv.style.display=e?"":"none"),this.minimizeDiv&&(this.minimizeDiv.style.display=e?"none":"")},update:function(){null==this.ovmap&&this.createMap(),!this.autoPan&&this.isSuitableOverview()||this.updateOverview(),this.updateRectToMap()},isSuitableOverview:function(){var e=this.map.getExtent(),t=this.map.getMaxExtent(),e=new OpenLayers.Bounds(Math.max(e.left,t.left),Math.max(e.bottom,t.bottom),Math.min(e.right,t.right),Math.min(e.top,t.top));return this.ovmap.getProjection()!=this.map.getProjection()&&(e=e.transform(this.map.getProjectionObject(),this.ovmap.getProjectionObject())),(t=this.ovmap.getResolution()/this.map.getResolution())>this.minRatio&&t<=this.maxRatio&&this.ovmap.getExtent().containsBounds(e)},updateOverview:function(){var e=this.map.getResolution(),t=this.ovmap.getResolution(),i=t/e;i>this.maxRatio?t=this.minRatio*e:i<=this.minRatio&&(t=this.maxRatio*e),this.ovmap.getProjection()!=this.map.getProjection()?(e=this.map.center.clone()).transform(this.map.getProjectionObject(),this.ovmap.getProjectionObject()):e=this.map.center,this.ovmap.setCenter(e,this.ovmap.getZoomForResolution(t*this.resolutionFactor)),this.updateRectToMap()},createMap:function(){var e,t=OpenLayers.Util.extend({controls:[],maxResolution:"auto",fallThrough:!1},this.mapOptions);this.ovmap=new OpenLayers.Map(this.mapDiv,t),this.ovmap.viewPortDiv.appendChild(this.extentRectangle),OpenLayers.Event.stopObserving(window,"unload",this.ovmap.unloadDestroy),this.ovmap.addLayers(this.layers),this.ovmap.zoomToMaxExtent(),this.wComp=(this.wComp=parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-left-width"))+parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-right-width")))?this.wComp:2,this.hComp=(this.hComp=parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-top-width"))+parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-bottom-width")))?this.hComp:2,this.handlers.drag=new OpenLayers.Handler.Drag(this,{move:this.rectDrag,done:this.updateMapToRect},{map:this.ovmap}),this.handlers.click=new OpenLayers.Handler.Click(this,{click:this.mapDivClick},{single:!0,double:!1,stopSingle:!0,stopDouble:!0,pixelTolerance:1,map:this.ovmap}),this.handlers.click.activate(),this.rectEvents=new OpenLayers.Events(this,this.extentRectangle,null,!0),this.rectEvents.register("mouseover",this,function(e){this.handlers.drag.active||this.map.dragging||this.handlers.drag.activate()}),this.rectEvents.register("mouseout",this,function(e){this.handlers.drag.dragging||this.handlers.drag.deactivate()}),this.ovmap.getProjection()!=this.map.getProjection()&&(t=this.map.getProjectionObject().getUnits()||this.map.units||this.map.baseLayer.units,e=this.ovmap.getProjectionObject().getUnits()||this.ovmap.units||this.ovmap.baseLayer.units,this.resolutionFactor=t&&e?OpenLayers.INCHES_PER_UNIT[t]/OpenLayers.INCHES_PER_UNIT[e]:1)},updateRectToMap:function(){var e=this.ovmap.getProjection()!=this.map.getProjection()?this.map.getExtent().transform(this.map.getProjectionObject(),this.ovmap.getProjectionObject()):this.map.getExtent();(e=this.getRectBoundsFromMapBounds(e))&&this.setRectPxBounds(e)},updateMapToRect:function(){var e=this.getMapBoundsFromRectBounds(this.rectPxBounds);this.ovmap.getProjection()!=this.map.getProjection()&&(e=e.transform(this.ovmap.getProjectionObject(),this.map.getProjectionObject())),this.map.panTo(e.getCenterLonLat())},setRectPxBounds:function(e){var t=Math.max(e.top,0),i=Math.max(e.left,0),s=Math.min(e.top+Math.abs(e.getHeight()),this.ovmap.size.h-this.hComp),n=(e=Math.min(e.left+e.getWidth(),this.ovmap.size.w-this.wComp),Math.max(e-i,0)),r=Math.max(s-t,0);n<this.minRectSize||r<this.minRectSize?(this.extentRectangle.className=this.displayClass+this.minRectDisplayClass,n=i+n/2-this.minRectSize/2,this.extentRectangle.style.top=Math.round(t+r/2-this.minRectSize/2)+"px",this.extentRectangle.style.left=Math.round(n)+"px",this.extentRectangle.style.height=this.minRectSize+"px",this.extentRectangle.style.width=this.minRectSize+"px"):(this.extentRectangle.className=this.displayClass+"ExtentRectangle",this.extentRectangle.style.top=Math.round(t)+"px",this.extentRectangle.style.left=Math.round(i)+"px",this.extentRectangle.style.height=Math.round(r)+"px",this.extentRectangle.style.width=Math.round(n)+"px"),this.rectPxBounds=new OpenLayers.Bounds(Math.round(i),Math.round(s),Math.round(e),Math.round(t))},getRectBoundsFromMapBounds:function(e){var t=this.getOverviewPxFromLonLat({lon:e.left,lat:e.bottom}),i=(e=this.getOverviewPxFromLonLat({lon:e.right,lat:e.top}),null);return i=t&&e?new OpenLayers.Bounds(t.x,t.y,e.x,e.y):i},getMapBoundsFromRectBounds:function(e){var t=this.getLonLatFromOverviewPx({x:e.left,y:e.bottom});return e=this.getLonLatFromOverviewPx({x:e.right,y:e.top}),new OpenLayers.Bounds(t.lon,t.lat,e.lon,e.lat)},getLonLatFromOverviewPx:function(e){var t=this.ovmap.size,i=this.ovmap.getResolution(),s=this.ovmap.getExtent().getCenterLonLat();return{lon:s.lon+(e.x-t.w/2)*i,lat:s.lat-(e.y-t.h/2)*i}},getOverviewPxFromLonLat:function(e){var t=this.ovmap.getResolution(),i=this.ovmap.getExtent();if(i)return{x:Math.round(1/t*(e.lon-i.left)),y:Math.round(1/t*(i.top-e.lat))}},CLASS_NAME:"OpenLayers.Control.OverviewMap"}),OpenLayers.Layer=OpenLayers.Class({id:null,name:null,div:null,opacity:1,alwaysInRange:null,RESOLUTION_PROPERTIES:"scales resolutions maxScale minScale maxResolution minResolution numZoomLevels maxZoomLevel".split(" "),events:null,map:null,isBaseLayer:!1,alpha:!1,displayInLayerSwitcher:!0,visibility:!0,attribution:null,inRange:!1,imageSize:null,options:null,eventListeners:null,gutter:0,projection:null,units:null,scales:null,resolutions:null,maxExtent:null,minExtent:null,maxResolution:null,minResolution:null,numZoomLevels:null,minScale:null,maxScale:null,displayOutsideMaxExtent:!1,wrapDateLine:!1,metadata:null,initialize:function(e,t){this.metadata={},t=OpenLayers.Util.extend({},t),null!=this.alwaysInRange&&(t.alwaysInRange=this.alwaysInRange),this.addOptions(t),this.name=e,null==this.id&&(this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_"),this.div=OpenLayers.Util.createDiv(this.id),this.div.style.width="100%",this.div.style.height="100%",this.div.dir="ltr",this.events=new OpenLayers.Events(this,this.div),this.eventListeners instanceof Object)&&this.events.on(this.eventListeners)},destroy:function(e){null==e&&(e=!0),null!=this.map&&this.map.removeLayer(this,e),this.options=this.div=this.name=this.map=this.projection=null,this.events&&(this.eventListeners&&this.events.un(this.eventListeners),this.events.destroy()),this.events=this.eventListeners=null},clone:function(e){return null==e&&(e=new OpenLayers.Layer(this.name,this.getOptions())),OpenLayers.Util.applyDefaults(e,this),e.map=null,e},getOptions:function(){var e,t={};for(e in this.options)t[e]=this[e];return t},setName:function(e){e!=this.name&&(this.name=e,null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"name"}))},addOptions:function(e,t){if(null==this.options&&(this.options={}),e&&("string"==typeof e.projection&&(e.projection=new OpenLayers.Projection(e.projection)),e.projection&&OpenLayers.Util.applyDefaults(e,OpenLayers.Projection.defaults[e.projection.getCode()]),!e.maxExtent||e.maxExtent instanceof OpenLayers.Bounds||(e.maxExtent=new OpenLayers.Bounds(e.maxExtent)),!e.minExtent||e.minExtent instanceof OpenLayers.Bounds||(e.minExtent=new OpenLayers.Bounds(e.minExtent))),OpenLayers.Util.extend(this.options,e),OpenLayers.Util.extend(this,e),this.projection&&this.projection.getUnits()&&(this.units=this.projection.getUnits()),this.map){var i,s=this.map.getResolution(),n=this.RESOLUTION_PROPERTIES.concat(["projection","units","minExtent","maxExtent"]);for(i in e)if(e.hasOwnProperty(i)&&0<=OpenLayers.Util.indexOf(n,i)){this.initResolutions(),t&&this.map.baseLayer===this&&(this.map.setCenter(this.map.getCenter(),this.map.getZoomForResolution(s),!1,!0),this.map.events.triggerEvent("changebaselayer",{layer:this}));break}}},onMapResize:function(){},redraw:function(){var e,t=!1;return this.map&&(this.inRange=this.calculateInRange(),(e=this.getExtent())&&this.inRange&&this.visibility&&(this.moveTo(e,!0,!1),this.events.triggerEvent("moveend",{zoomChanged:!0}),t=!0)),t},moveTo:function(e,t,i){e=this.visibility,this.isBaseLayer||(e=e&&this.inRange),this.display(e)},moveByPx:function(e,t){},setMap:function(e){null==this.map&&(this.map=e,this.maxExtent=this.maxExtent||this.map.maxExtent,this.minExtent=this.minExtent||this.map.minExtent,this.projection=this.projection||this.map.projection,"string"==typeof this.projection&&(this.projection=new OpenLayers.Projection(this.projection)),this.units=this.projection.getUnits()||this.units||this.map.units,this.initResolutions(),this.isBaseLayer||(this.inRange=this.calculateInRange(),this.div.style.display=this.visibility&&this.inRange?"":"none"),this.setTileSize())},afterAdd:function(){},removeMap:function(e){},getImageSize:function(e){return this.imageSize||this.tileSize},setTileSize:function(e){this.tileSize=e=e||this.tileSize||this.map.getTileSize(),this.gutter&&(this.imageSize=new OpenLayers.Size(e.w+2*this.gutter,e.h+2*this.gutter))},getVisibility:function(){return this.visibility},setVisibility:function(e){e!=this.visibility&&(this.visibility=e,this.display(e),this.redraw(),null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"visibility"}),this.events.triggerEvent("visibilitychanged"))},display:function(e){e!=("none"!=this.div.style.display)&&(this.div.style.display=e&&this.calculateInRange()?"block":"none")},calculateInRange:function(){var e=!1;return this.alwaysInRange?e=!0:this.map&&(e=(e=this.map.getResolution())>=this.minResolution&&e<=this.maxResolution),e},setIsBaseLayer:function(e){e!=this.isBaseLayer&&(this.isBaseLayer=e,null!=this.map&&this.map.events.triggerEvent("changebaselayer",{layer:this}))},initResolutions:function(){for(var e,t,i,s={},n=!0,r=0,a=this.RESOLUTION_PROPERTIES.length;r<a;r++)s[e=this.RESOLUTION_PROPERTIES[r]]=this.options[e],n&&this.options[e]&&(n=!1);if(null==this.options.alwaysInRange&&(this.alwaysInRange=n),null==s.resolutions&&(s.resolutions=this.resolutionsFromScales(s.scales)),null==s.resolutions&&(s.resolutions=this.calculateResolutions(s)),null==s.resolutions){for(r=0,a=this.RESOLUTION_PROPERTIES.length;r<a;r++)s[e=this.RESOLUTION_PROPERTIES[r]]=(null!=this.options[e]?this.options:this.map)[e];null==s.resolutions&&(s.resolutions=this.resolutionsFromScales(s.scales)),null==s.resolutions&&(s.resolutions=this.calculateResolutions(s))}if(this.options.maxResolution&&"auto"!==this.options.maxResolution&&(t=this.options.maxResolution),this.options.minScale&&(t=OpenLayers.Util.getResolutionFromScale(this.options.minScale,this.units)),this.options.minResolution&&"auto"!==this.options.minResolution&&(i=this.options.minResolution),this.options.maxScale&&(i=OpenLayers.Util.getResolutionFromScale(this.options.maxScale,this.units)),s.resolutions&&(s.resolutions.sort(function(e,t){return t-e}),t=t||s.resolutions[0],i=i||s.resolutions[s.resolutions.length-1]),this.resolutions=s.resolutions){for(a=this.resolutions.length,this.scales=Array(a),r=0;r<a;r++)this.scales[r]=OpenLayers.Util.getScaleFromResolution(this.resolutions[r],this.units);this.numZoomLevels=a}(this.minResolution=i)&&(this.maxScale=OpenLayers.Util.getScaleFromResolution(i,this.units)),(this.maxResolution=t)&&(this.minScale=OpenLayers.Util.getScaleFromResolution(t,this.units))},resolutionsFromScales:function(e){if(null!=e){for(var t=e.length,i=Array(t),s=0;s<t;s++)i[s]=OpenLayers.Util.getResolutionFromScale(e[s],this.units);return i}},calculateResolutions:function(e){var t,i=e.maxResolution;if(null!=e.minScale?i=OpenLayers.Util.getResolutionFromScale(e.minScale,this.units):"auto"==i&&null!=this.maxExtent&&(n=this.map.getSize(),t=this.maxExtent.getWidth()/n.w,n=this.maxExtent.getHeight()/n.h,i=Math.max(t,n)),t=e.minResolution,null!=e.maxScale?t=OpenLayers.Util.getResolutionFromScale(e.maxScale,this.units):"auto"==e.minResolution&&null!=this.minExtent&&(n=this.map.getSize(),t=this.minExtent.getWidth()/n.w,n=this.minExtent.getHeight()/n.h,t=Math.max(t,n)),"number"!=typeof i&&"number"!=typeof t&&null!=this.maxExtent&&(i=this.map.getTileSize(),i=Math.max(this.maxExtent.getWidth()/i.w,this.maxExtent.getHeight()/i.h)),n=e.maxZoomLevel,e=e.numZoomLevels,"number"==typeof t&&"number"==typeof i&&void 0===e?e=Math.floor(Math.log(i/t)/Math.log(2))+1:void 0===e&&null!=n&&(e=n+1),!("number"!=typeof e||e<=0||"number"!=typeof i&&"number"!=typeof t)){var s,n=Array(e),r=2;if("number"==typeof t&&"number"==typeof i&&(r=Math.pow(i/t,1/(e-1))),"number"==typeof i)for(s=0;s<e;s++)n[s]=i/Math.pow(r,s);else for(s=0;s<e;s++)n[e-1-s]=t*Math.pow(r,s);return n}},getResolution:function(){var e=this.map.getZoom();return this.getResolutionForZoom(e)},getExtent:function(){return this.map.calculateBounds()},getZoomForExtent:function(e,t){var i=this.map.getSize(),i=Math.max(e.getWidth()/i.w,e.getHeight()/i.h);return this.getZoomForResolution(i,t)},getDataExtent:function(){},getResolutionForZoom:function(e){var t,i;return e=Math.max(0,Math.min(e,this.resolutions.length-1)),e=this.map.fractionalZoom?(t=Math.floor(e),i=Math.ceil(e),this.resolutions[t]-(e-t)*(this.resolutions[t]-this.resolutions[i])):this.resolutions[Math.round(e)]},getZoomForResolution:function(e,t){if(this.map.fractionalZoom){for(var i,s=0,n=this.resolutions[s],r=this.resolutions[this.resolutions.length-1],a=0,o=this.resolutions.length;a<o;++a)if(e<=(i=this.resolutions[a])&&(n=i,s=a),i<=e){r=i;break}a=0<(a=n-r)?s+(n-e)/a:s}else{for(n=Number.POSITIVE_INFINITY,a=0,o=this.resolutions.length;a<o;a++)if(t){if(n<(s=Math.abs(this.resolutions[a]-e)))break;n=s}else if(this.resolutions[a]<e)break;a=Math.max(0,a-1)}return a},getLonLatFromViewPortPx:function(e){var t,i=null,s=this.map;return null!=e&&s.minPx&&(i=s.getResolution(),t=s.getMaxExtent({restricted:!0}),i=new OpenLayers.LonLat((e.x-s.minPx.x)*i+t.left,(s.minPx.y-e.y)*i+t.top),this.wrapDateLine&&(i=i.wrapDateLine(this.maxExtent))),i},getViewPortPxFromLonLat:function(e,t){var i=null;return null!=e&&(t=t||this.map.getResolution(),i=this.map.calculateBounds(null,t),i=new OpenLayers.Pixel(1/t*(e.lon-i.left),1/t*(i.top-e.lat))),i},setOpacity:function(e){if(e!=this.opacity){this.opacity=e;for(var t=this.div.childNodes,i=0,s=t.length;i<s;++i){var n=t[i].firstChild||t[i],r=t[i].lastChild;r&&"iframe"===r.nodeName.toLowerCase()&&(n=r.parentNode),OpenLayers.Util.modifyDOMElement(n,null,null,null,null,null,null,e)}null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"opacity"})}},getZIndex:function(){return this.div.style.zIndex},setZIndex:function(e){this.div.style.zIndex=e},adjustBounds:function(e){var t;return this.gutter&&(t=this.gutter*this.map.getResolution(),e=new OpenLayers.Bounds(e.left-t,e.bottom-t,e.right+t,e.top+t)),this.wrapDateLine&&(t={rightTolerance:this.getResolution(),leftTolerance:this.getResolution()},e=e.wrapDateLine(this.maxExtent,t)),e},CLASS_NAME:"OpenLayers.Layer"}),OpenLayers.Layer.SphericalMercator={getExtent:function(){return this.sphericalMercator?this.map.calculateBounds():OpenLayers.Layer.FixedZoomLevels.prototype.getExtent.apply(this)},getLonLatFromViewPortPx:function(e){return OpenLayers.Layer.prototype.getLonLatFromViewPortPx.apply(this,arguments)},getViewPortPxFromLonLat:function(e){return OpenLayers.Layer.prototype.getViewPortPxFromLonLat.apply(this,arguments)},initMercatorParameters:function(){this.RESOLUTIONS=[];for(var e=0;e<=this.MAX_ZOOM_LEVEL;++e)this.RESOLUTIONS[e]=156543.03390625/Math.pow(2,e);this.units="m",this.projection=this.projection||"EPSG:900913"},forwardMercator:function(){var i=new OpenLayers.Projection("EPSG:4326"),s=new OpenLayers.Projection("EPSG:900913");return function(e,t){e=OpenLayers.Projection.transform({x:e,y:t},i,s);return new OpenLayers.LonLat(e.x,e.y)}}(),inverseMercator:function(){var i=new OpenLayers.Projection("EPSG:4326"),s=new OpenLayers.Projection("EPSG:900913");return function(e,t){e=OpenLayers.Projection.transform({x:e,y:t},s,i);return new OpenLayers.LonLat(e.x,e.y)}}()},OpenLayers.Layer.EventPane=OpenLayers.Class(OpenLayers.Layer,{smoothDragPan:!0,isBaseLayer:!0,isFixed:!0,pane:null,mapObject:null,initialize:function(e,t){OpenLayers.Layer.prototype.initialize.apply(this,arguments),null==this.pane&&(this.pane=OpenLayers.Util.createDiv(this.div.id+"_EventPane"))},destroy:function(){this.pane=this.mapObject=null,OpenLayers.Layer.prototype.destroy.apply(this,arguments)},setMap:function(e){OpenLayers.Layer.prototype.setMap.apply(this,arguments),this.pane.style.zIndex=parseInt(this.div.style.zIndex)+1,this.pane.style.display=this.div.style.display,this.pane.style.width="100%",this.pane.style.height="100%","msie"==OpenLayers.BROWSER_NAME&&(this.pane.style.background="url("+OpenLayers.Util.getImageLocation("blank.gif")+")"),(this.isFixed?this.map.viewPortDiv:this.map.layerContainerDiv).appendChild(this.pane),this.loadMapObject(),null==this.mapObject&&this.loadWarningMessage()},removeMap:function(e){this.pane&&this.pane.parentNode&&this.pane.parentNode.removeChild(this.pane),OpenLayers.Layer.prototype.removeMap.apply(this,arguments)},loadWarningMessage:function(){this.div.style.backgroundColor="darkblue";var e=this.map.getSize(),t=Math.min(e.w,300),i=Math.min(e.h,200),t=new OpenLayers.Size(t,i),e=new OpenLayers.Pixel(e.w/2,e.h/2).add(-t.w/2,-t.h/2);(e=OpenLayers.Util.createDiv(this.name+"_warning",e,t,null,null,null,"auto")).style.padding="7px",e.style.backgroundColor="yellow",e.innerHTML=this.getWarningHTML(),this.div.appendChild(e)},getWarningHTML:function(){return""},display:function(e){OpenLayers.Layer.prototype.display.apply(this,arguments),this.pane.style.display=this.div.style.display},setZIndex:function(e){OpenLayers.Layer.prototype.setZIndex.apply(this,arguments),this.pane.style.zIndex=parseInt(this.div.style.zIndex)+1},moveByPx:function(e,t){OpenLayers.Layer.prototype.moveByPx.apply(this,arguments),this.dragPanMapObject?this.dragPanMapObject(e,-t):this.moveTo(this.map.getCachedCenter())},moveTo:function(e,t,i){var s,n,r,a;OpenLayers.Layer.prototype.moveTo.apply(this,arguments),null!=this.mapObject&&(s=this.map.getCenter(),n=this.map.getZoom(),null!=s&&(r=this.getMapObjectCenter(),r=this.getOLLonLatFromMapObjectLonLat(r),a=this.getMapObjectZoom(),a=this.getOLZoomFromMapObjectZoom(a),s.equals(r)&&n==a||(!t&&r&&this.dragPanMapObject&&this.smoothDragPan?(n=this.map.getViewPortPxFromLonLat(r),s=this.map.getViewPortPxFromLonLat(s),this.dragPanMapObject(s.x-n.x,n.y-s.y)):(s=this.getMapObjectLonLatFromOLLonLat(s),n=this.getMapObjectZoomFromOLZoom(n),this.setMapObjectCenter(s,n,i)))))},getLonLatFromViewPortPx:function(e){var t=null;return null!=this.mapObject&&null!=this.getMapObjectCenter()&&(e=this.getMapObjectPixelFromOLPixel(e),e=this.getMapObjectLonLatFromMapObjectPixel(e),t=this.getOLLonLatFromMapObjectLonLat(e)),t},getViewPortPxFromLonLat:function(e){var t=null;return null!=this.mapObject&&null!=this.getMapObjectCenter()&&(e=this.getMapObjectLonLatFromOLLonLat(e),e=this.getMapObjectPixelFromMapObjectLonLat(e),t=this.getOLPixelFromMapObjectPixel(e)),t},getOLLonLatFromMapObjectLonLat:function(e){var t=null;return null!=e&&(t=this.getLongitudeFromMapObjectLonLat(e),e=this.getLatitudeFromMapObjectLonLat(e),t=new OpenLayers.LonLat(t,e)),t},getMapObjectLonLatFromOLLonLat:function(e){var t=null;return t=null!=e?this.getMapObjectLonLatFromLonLat(e.lon,e.lat):t},getOLPixelFromMapObjectPixel:function(e){var t=null;return null!=e&&(t=this.getXFromMapObjectPixel(e),e=this.getYFromMapObjectPixel(e),t=new OpenLayers.Pixel(t,e)),t},getMapObjectPixelFromOLPixel:function(e){var t=null;return t=null!=e?this.getMapObjectPixelFromXY(e.x,e.y):t},CLASS_NAME:"OpenLayers.Layer.EventPane"}),OpenLayers.Layer.FixedZoomLevels=OpenLayers.Class({initialize:function(){},initResolutions:function(){for(var e=["minZoomLevel","maxZoomLevel","numZoomLevels"],t=0,i=e.length;t<i;t++){var s=e[t];this[s]=(null!=this.options[s]?this.options:this.map)[s]}if((null==this.minZoomLevel||this.minZoomLevel<this.MIN_ZOOM_LEVEL)&&(this.minZoomLevel=this.MIN_ZOOM_LEVEL),e=this.MAX_ZOOM_LEVEL-this.minZoomLevel+1,t=null==this.options.numZoomLevels&&null!=this.options.maxZoomLevel||null==this.numZoomLevels&&null!=this.maxZoomLevel?this.maxZoomLevel-this.minZoomLevel+1:this.numZoomLevels,this.numZoomLevels=null!=t?Math.min(t,e):e,this.maxZoomLevel=this.minZoomLevel+this.numZoomLevels-1,null!=this.RESOLUTIONS){for(e=0,this.resolutions=[],t=this.minZoomLevel;t<=this.maxZoomLevel;t++)this.resolutions[e++]=this.RESOLUTIONS[t];this.maxResolution=this.resolutions[0],this.minResolution=this.resolutions[this.resolutions.length-1]}},getResolution:function(){if(null!=this.resolutions)return OpenLayers.Layer.prototype.getResolution.apply(this,arguments);var e=null,t=this.map.getSize(),i=this.getExtent();return e=null!=t&&null!=i?Math.max(i.getWidth()/t.w,i.getHeight()/t.h):e},getExtent:function(){var e=this.map.getSize(),t=this.getLonLatFromViewPortPx({x:0,y:0}),e=this.getLonLatFromViewPortPx({x:e.w,y:e.h});return null!=t&&null!=e?new OpenLayers.Bounds(t.lon,e.lat,e.lon,t.lat):null},getZoomForResolution:function(e){if(null!=this.resolutions)return OpenLayers.Layer.prototype.getZoomForResolution.apply(this,arguments);var t=OpenLayers.Layer.prototype.getExtent.apply(this,[]);return this.getZoomForExtent(t)},getOLZoomFromMapObjectZoom:function(e){var t=null;return null!=e&&(t=e-this.minZoomLevel,this.map.baseLayer!==this&&(t=this.map.baseLayer.getZoomForResolution(this.getResolutionForZoom(t)))),t},getMapObjectZoomFromOLZoom:function(e){var t=null;return null!=e&&(t=e+this.minZoomLevel,this.map.baseLayer!==this&&(t=this.getZoomForResolution(this.map.baseLayer.getResolutionForZoom(t)))),t},CLASS_NAME:"OpenLayers.Layer.FixedZoomLevels"}),OpenLayers.Layer.Google=OpenLayers.Class(OpenLayers.Layer.EventPane,OpenLayers.Layer.FixedZoomLevels,{MIN_ZOOM_LEVEL:0,MAX_ZOOM_LEVEL:21,RESOLUTIONS:[1.40625,.703125,.3515625,.17578125,.087890625,.0439453125,.02197265625,.010986328125,.0054931640625,.00274658203125,.001373291015625,.0006866455078125,.00034332275390625,.000171661376953125,858306884765625e-19,4291534423828125e-20,2145767211914062e-20,1072883605957031e-20,536441802978515e-20,268220901489257e-20,1341104507446289e-21,6.705522537231445e-7],type:null,wrapDateLine:!0,sphericalMercator:!1,version:null,initialize:function(e,t){(t=t||{}).version||(t.version="function"==typeof GMap2?"2":"3");var i=OpenLayers.Layer.Google["v"+t.version.replace(/\./g,"_")];if(!i)throw"Unsupported Google Maps API version: "+t.version;OpenLayers.Util.applyDefaults(t,i),OpenLayers.Util.applyDefaults(t,i.DEFAULTS),t.maxExtent&&(t.maxExtent=t.maxExtent.clone()),OpenLayers.Layer.EventPane.prototype.initialize.apply(this,[e,t]),OpenLayers.Layer.FixedZoomLevels.prototype.initialize.apply(this,[e,t]),this.sphericalMercator&&(OpenLayers.Util.extend(this,OpenLayers.Layer.SphericalMercator),this.initMercatorParameters())},clone:function(){return new OpenLayers.Layer.Google(this.name,this.getOptions())},setVisibility:function(e){var t=null==this.opacity?1:this.opacity;OpenLayers.Layer.EventPane.prototype.setVisibility.apply(this,arguments),this.setOpacity(t)},display:function(e){this._dragging||this.setGMapVisibility(e),OpenLayers.Layer.EventPane.prototype.display.apply(this,arguments)},moveTo:function(e,t,i){this._dragging=i,OpenLayers.Layer.EventPane.prototype.moveTo.apply(this,arguments),delete this._dragging},setOpacity:function(e){var t;e!==this.opacity&&(null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"opacity"}),this.opacity=e),this.getVisibility()&&(t=this.getMapContainer(),OpenLayers.Util.modifyDOMElement(t,null,null,null,null,null,null,e))},destroy:function(){var e;this.map&&(this.setGMapVisibility(!1),(e=OpenLayers.Layer.Google.cache[this.map.id])&&e.count<=1&&this.removeGMapElements()),OpenLayers.Layer.EventPane.prototype.destroy.apply(this,arguments)},removeGMapElements:function(){var e,t=OpenLayers.Layer.Google.cache[this.map.id];t&&((e=this.mapObject&&this.getMapContainer())&&e.parentNode&&e.parentNode.removeChild(e),(e=t.termsOfUse)&&e.parentNode&&e.parentNode.removeChild(e),(t=t.poweredBy)&&t.parentNode&&t.parentNode.removeChild(t),this.mapObject&&window.google&&google.maps&&google.maps.event&&google.maps.event.clearListeners&&google.maps.event.clearListeners(this.mapObject,"tilesloaded"))},removeMap:function(e){this.visibility&&this.mapObject&&this.setGMapVisibility(!1);var t=OpenLayers.Layer.Google.cache[e.id];t&&(t.count<=1?(this.removeGMapElements(),delete OpenLayers.Layer.Google.cache[e.id]):--t.count),delete this.termsOfUse,delete this.poweredBy,delete this.mapObject,delete this.dragObject,OpenLayers.Layer.EventPane.prototype.removeMap.apply(this,arguments)},getOLBoundsFromMapObjectBounds:function(e){var t=null;return null!=e&&(t=e.getSouthWest(),e=e.getNorthEast(),e=this.sphericalMercator?(t=this.forwardMercator(t.lng(),t.lat()),this.forwardMercator(e.lng(),e.lat())):(t=new OpenLayers.LonLat(t.lng(),t.lat()),new OpenLayers.LonLat(e.lng(),e.lat())),t=new OpenLayers.Bounds(t.lon,t.lat,e.lon,e.lat)),t},getWarningHTML:function(){return OpenLayers.i18n("googleWarning")},getMapObjectCenter:function(){return this.mapObject.getCenter()},getMapObjectZoom:function(){return this.mapObject.getZoom()},getLongitudeFromMapObjectLonLat:function(e){return this.sphericalMercator?this.forwardMercator(e.lng(),e.lat()).lon:e.lng()},getLatitudeFromMapObjectLonLat:function(e){return this.sphericalMercator?this.forwardMercator(e.lng(),e.lat()).lat:e.lat()},getXFromMapObjectPixel:function(e){return e.x},getYFromMapObjectPixel:function(e){return e.y},CLASS_NAME:"OpenLayers.Layer.Google"}),OpenLayers.Layer.Google.cache={},OpenLayers.Layer.Google.v2={termsOfUse:null,poweredBy:null,dragObject:null,loadMapObject:function(){var e,t,i;if(this.type||(this.type=G_NORMAL_MAP),s=OpenLayers.Layer.Google.cache[this.map.id])e=s.mapObject,t=s.termsOfUse,i=s.poweredBy,++s.count;else{var s=this.map.viewPortDiv,n=document.createElement("div");n.id=this.map.id+"_GMap2Container",n.style.position="absolute",n.style.width="100%",n.style.height="100%",s.appendChild(n);try{e=new GMap2(n),t=n.lastChild,s.appendChild(t),t.style.zIndex="1100",t.style.right="",t.style.bottom="",t.className="olLayerGoogleCopyright",i=n.lastChild,s.appendChild(i),i.style.zIndex="1100",i.style.right="",i.style.bottom="",i.className="olLayerGooglePoweredBy gmnoprint"}catch(e){throw e}OpenLayers.Layer.Google.cache[this.map.id]={mapObject:e,termsOfUse:t,poweredBy:i,count:1}}this.mapObject=e,this.termsOfUse=t,this.poweredBy=i,-1===OpenLayers.Util.indexOf(this.mapObject.getMapTypes(),this.type)&&this.mapObject.addMapType(this.type),"function"==typeof e.getDragObject?this.dragObject=e.getDragObject():this.dragPanMapObject=null,!1===this.isBaseLayer&&this.setGMapVisibility("none"!==this.div.style.display)},onMapResize:function(){var e,t;this.visibility&&this.mapObject.isLoaded()?this.mapObject.checkResize():(this._resized||(e=this,t=GEvent.addListener(this.mapObject,"load",function(){GEvent.removeListener(t),delete e._resized,e.mapObject.checkResize(),e.moveTo(e.map.getCenter(),e.map.getZoom())})),this._resized=!0)},setGMapVisibility:function(e){var t,i=OpenLayers.Layer.Google.cache[this.map.id];i&&(t=this.mapObject.getContainer(),!0===e?(this.mapObject.setMapType(this.type),t.style.display="",this.termsOfUse.style.left="",this.termsOfUse.style.display="",this.poweredBy.style.display="",i.displayed=this.id):(i.displayed===this.id&&delete i.displayed,i.displayed||(t.style.display="none",this.termsOfUse.style.display="none",this.termsOfUse.style.left="-9999px",this.poweredBy.style.display="none")))},getMapContainer:function(){return this.mapObject.getContainer()},getMapObjectBoundsFromOLBounds:function(e){var t=null;return null!=e&&(t=this.sphericalMercator?this.inverseMercator(e.bottom,e.left):new OpenLayers.LonLat(e.bottom,e.left),e=this.sphericalMercator?this.inverseMercator(e.top,e.right):new OpenLayers.LonLat(e.top,e.right),t=new GLatLngBounds(new GLatLng(t.lat,t.lon),new GLatLng(e.lat,e.lon))),t},setMapObjectCenter:function(e,t){this.mapObject.setCenter(e,t)},dragPanMapObject:function(e,t){this.dragObject.moveBy(new GSize(-e,t))},getMapObjectLonLatFromMapObjectPixel:function(e){return this.mapObject.fromContainerPixelToLatLng(e)},getMapObjectPixelFromMapObjectLonLat:function(e){return this.mapObject.fromLatLngToContainerPixel(e)},getMapObjectZoomFromMapObjectBounds:function(e){return this.mapObject.getBoundsZoomLevel(e)},getMapObjectLonLatFromLonLat:function(e,t){var i=this.sphericalMercator?(i=this.inverseMercator(e,t),new GLatLng(i.lat,i.lon)):new GLatLng(t,e);return i},getMapObjectPixelFromXY:function(e,t){return new GPoint(e,t)}},OpenLayers.Format.XML=OpenLayers.Class(OpenLayers.Format,{namespaces:null,namespaceAlias:null,defaultPrefix:null,readers:{},writers:{},xmldom:null,initialize:function(e){for(var t in window.ActiveXObject&&(this.xmldom=new ActiveXObject("Microsoft.XMLDOM")),OpenLayers.Format.prototype.initialize.apply(this,[e]),this.namespaces=OpenLayers.Util.extend({},this.namespaces),this.namespaceAlias={},this.namespaces)this.namespaceAlias[this.namespaces[t]]=t},destroy:function(){this.xmldom=null,OpenLayers.Format.prototype.destroy.apply(this,arguments)},setNamespace:function(e,t){this.namespaces[e]=t,this.namespaceAlias[t]=e},read:function(t){var e=t.indexOf("<");return 0<e&&(t=t.substring(e)),e=OpenLayers.Util.Try(OpenLayers.Function.bind(function(){var e=window.ActiveXObject&&!this.xmldom?new ActiveXObject("Microsoft.XMLDOM"):this.xmldom;return e.loadXML(t),e},this),function(){return(new DOMParser).parseFromString(t,"text/xml")},function(){var e=new XMLHttpRequest;return e.open("GET","data:text/xml;charset=utf-8,"+encodeURIComponent(t),!1),e.overrideMimeType&&e.overrideMimeType("text/xml"),e.send(null),e.responseXML}),this.keepData&&(this.data=e),e},write:function(e){var t,i;return e=this.xmldom?e.xml:(t=new XMLSerializer,1==e.nodeType?((i=document.implementation.createDocument("","",null)).importNode&&(e=i.importNode(e,!0)),i.appendChild(e),t.serializeToString(i)):t.serializeToString(e))},createElementNS:function(e,t){return this.xmldom?"string"==typeof e?this.xmldom.createNode(1,t,e):this.xmldom.createNode(1,t,""):document.createElementNS(e,t)},createDocumentFragment:function(){return(this.xmldom||document).createDocumentFragment()},createTextNode:function(e){return"string"!=typeof e&&(e=String(e)),(this.xmldom||document).createTextNode(e)},getElementsByTagNameNS:function(e,t,i){var s=[];if(e.getElementsByTagNameNS)s=e.getElementsByTagNameNS(t,i);else for(var n,r,a=0,o=(e=e.getElementsByTagName("*")).length;a<o;++a)r=(n=e[a]).prefix?n.prefix+":"+i:i,"*"!=i&&r!=n.nodeName||"*"!=t&&t!=n.namespaceURI||s.push(n);return s},getAttributeNodeNS:function(e,t,i){var s=null;if(e.getAttributeNodeNS)s=e.getAttributeNodeNS(t,i);else for(var n,r=0,a=(e=e.attributes).length;r<a;++r)if((n=e[r]).namespaceURI==t&&(n.prefix?n.prefix+":"+i:i)==n.nodeName){s=n;break}return s},getAttributeNS:function(e,t,i){var s="";return e.getAttributeNS?s=e.getAttributeNS(t,i)||"":(e=this.getAttributeNodeNS(e,t,i))&&(s=e.nodeValue),s},getChildValue:function(e,t){var i=t||"";if(e)for(var s=e.firstChild;s;s=s.nextSibling)switch(s.nodeType){case 3:case 4:i+=s.nodeValue}return i},isSimpleContent:function(e){var t=!0;for(e=e.firstChild;e;e=e.nextSibling)if(1===e.nodeType){t=!1;break}return t},contentType:function(e){var t=!1,i=!1,s=OpenLayers.Format.XML.CONTENT_TYPE.EMPTY;for(e=e.firstChild;e;e=e.nextSibling){switch(e.nodeType){case 1:i=!0;break;case 8:break;default:t=!0}if(i&&t)break}if(i&&t)s=OpenLayers.Format.XML.CONTENT_TYPE.MIXED;else{if(i)return OpenLayers.Format.XML.CONTENT_TYPE.COMPLEX;if(t)return OpenLayers.Format.XML.CONTENT_TYPE.SIMPLE}return s},hasAttributeNS:function(e,t,i){return e.hasAttributeNS?e.hasAttributeNS(t,i):!!this.getAttributeNodeNS(e,t,i)},setAttributeNS:function(e,t,i,s){if(e.setAttributeNS)e.setAttributeNS(t,i,s);else{if(!this.xmldom)throw"setAttributeNS not implemented";t?((t=e.ownerDocument.createNode(2,i,t)).nodeValue=s,e.setAttributeNode(t)):e.setAttribute(i,s)}},createElementNSPlus:function(e,t){var i=(t=t||{}).uri||this.namespaces[t.prefix],e=(i||(i=e.indexOf(":"),i=this.namespaces[e.substring(0,i)]),i=i||this.namespaces[this.defaultPrefix],i=this.createElementNS(i,e),t.attributes&&this.setAttributes(i,t.attributes),t.value);return null!=e&&i.appendChild(this.createTextNode(e)),i},setAttributes:function(e,t){var i,s,n;for(n in t)null!=t[n]&&t[n].toString&&(i=t[n].toString(),s=this.namespaces[n.substring(0,n.indexOf(":"))]||null,this.setAttributeNS(e,s,n,i))},readNode:function(e,t){t=t||{};var i=this.readers[e.namespaceURI?this.namespaceAlias[e.namespaceURI]:this.defaultPrefix];return(i=i&&(i[e.localName||e.nodeName.split(":").pop()]||i["*"]))&&i.apply(this,[e,t]),t},readChildNodes:function(e,t){t=t||{};for(var i,s=e.childNodes,n=0,r=s.length;n<r;++n)1==(i=s[n]).nodeType&&this.readNode(i,t);return t},writeNode:function(e,t,i){var s,n=e.indexOf(":");return 0<n?(s=e.substring(0,n),e=e.substring(n+1)):s=i?this.namespaceAlias[i.namespaceURI]:this.defaultPrefix,t=this.writers[s][e].apply(this,[t]),i&&i.appendChild(t),t},getChildEl:function(e,t,i){return e&&this.getThisOrNextEl(e.firstChild,t,i)},getNextEl:function(e,t,i){return e&&this.getThisOrNextEl(e.nextSibling,t,i)},getThisOrNextEl:function(e,t,i){e:for(;e;e=e.nextSibling)switch(e.nodeType){case 1:if(!(t&&t!==(e.localName||e.nodeName.split(":").pop())||i&&i!==e.namespaceURI))break e;e=null;break e;case 3:if(/^\s*$/.test(e.nodeValue))break;case 4:case 6:case 12:case 10:case 11:e=null;break e}return e||null},lookupNamespaceURI:function(e,t){var i=null;if(e)if(e.lookupNamespaceURI)i=e.lookupNamespaceURI(t);else e:switch(e.nodeType){case 1:if(null!==e.namespaceURI&&e.prefix===t){i=e.namespaceURI;break}if(i=e.attributes.length)for(var s,n=0;n<i;++n){if("xmlns"===(s=e.attributes[n]).prefix&&s.name==="xmlns:"+t){i=s.value||null;break e}if("xmlns"===s.name&&null===t){i=s.value||null;break e}}i=this.lookupNamespaceURI(e.parentNode,t);break;case 2:i=this.lookupNamespaceURI(e.ownerElement,t);break;case 9:i=this.lookupNamespaceURI(e.documentElement,t);break;case 6:case 12:case 10:case 11:break;default:i=this.lookupNamespaceURI(e.parentNode,t)}return i},getXMLDoc:function(){return OpenLayers.Format.XML.document||this.xmldom||(document.implementation&&document.implementation.createDocument?OpenLayers.Format.XML.document=document.implementation.createDocument("","",null):!this.xmldom&&window.ActiveXObject&&(this.xmldom=new ActiveXObject("Microsoft.XMLDOM"))),OpenLayers.Format.XML.document||this.xmldom},CLASS_NAME:"OpenLayers.Format.XML"}),OpenLayers.Format.XML.CONTENT_TYPE={EMPTY:0,SIMPLE:1,COMPLEX:2,MIXED:3},OpenLayers.Format.XML.lookupNamespaceURI=OpenLayers.Function.bind(OpenLayers.Format.XML.prototype.lookupNamespaceURI,OpenLayers.Format.XML.prototype),OpenLayers.Format.XML.document=null,OpenLayers.Format.WFST=function(e){e=OpenLayers.Util.applyDefaults(e,OpenLayers.Format.WFST.DEFAULTS);var t=OpenLayers.Format.WFST["v"+e.version.replace(/\./g,"_")];if(t)return new t(e);throw"Unsupported WFST version: "+e.version},OpenLayers.Format.WFST.DEFAULTS={version:"1.0.0"},OpenLayers.Feature=OpenLayers.Class({layer:null,id:null,lonlat:null,data:null,marker:null,popupClass:null,popup:null,initialize:function(e,t,i){this.layer=e,this.lonlat=t,this.data=null!=i?i:{},this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){null!=this.layer&&null!=this.layer.map&&null!=this.popup&&this.layer.map.removePopup(this.popup),null!=this.layer&&null!=this.marker&&this.layer.removeMarker(this.marker),(this.data=this.lonlat=this.id=this.layer=null)!=this.marker&&(this.destroyMarker(this.marker),this.marker=null),null!=this.popup&&(this.destroyPopup(this.popup),this.popup=null)},onScreen:function(){var e=!1;return e=null!=this.layer&&null!=this.layer.map?this.layer.map.getExtent().containsLonLat(this.lonlat):e},createMarker:function(){return null!=this.lonlat&&(this.marker=new OpenLayers.Marker(this.lonlat,this.data.icon)),this.marker},destroyMarker:function(){this.marker.destroy()},createPopup:function(e){return null!=this.lonlat&&(this.popup||(this.popup=new(this.popupClass||OpenLayers.Popup.Anchored)(this.id+"_popup",this.lonlat,this.data.popupSize,this.data.popupContentHTML,this.marker?this.marker.icon:null,e)),null!=this.data.overflow&&(this.popup.contentDiv.style.overflow=this.data.overflow),this.popup.feature=this),this.popup},destroyPopup:function(){this.popup&&(this.popup.feature=null,this.popup.destroy(),this.popup=null)},CLASS_NAME:"OpenLayers.Feature"}),OpenLayers.State={UNKNOWN:"Unknown",INSERT:"Insert",UPDATE:"Update",DELETE:"Delete"},OpenLayers.Feature.Vector=OpenLayers.Class(OpenLayers.Feature,{fid:null,geometry:null,attributes:null,bounds:null,state:null,style:null,url:null,renderIntent:"default",modified:null,initialize:function(e,t,i){OpenLayers.Feature.prototype.initialize.apply(this,[null,null,t]),this.lonlat=null,this.geometry=e||null,this.state=null,this.attributes={},t&&(this.attributes=OpenLayers.Util.extend(this.attributes,t)),this.style=i||null},destroy:function(){this.layer&&(this.layer.removeFeatures(this),this.layer=null),this.modified=this.geometry=null,OpenLayers.Feature.prototype.destroy.apply(this,arguments)},clone:function(){return new OpenLayers.Feature.Vector(this.geometry?this.geometry.clone():null,this.attributes,this.style)},onScreen:function(e){var t=!1;return this.layer&&this.layer.map&&(t=this.layer.map.getExtent(),t=e?(e=this.geometry.getBounds(),t.intersectsBounds(e)):t.toGeometry().intersects(this.geometry)),t},getVisibility:function(){return!(this.style&&"none"==this.style.display||!this.layer||this.layer&&this.layer.styleMap&&"none"==this.layer.styleMap.createSymbolizer(this,this.renderIntent).display||this.layer&&!this.layer.getVisibility())},createMarker:function(){return null},destroyMarker:function(){},createPopup:function(){return null},atPoint:function(e,t,i){var s=!1;return s=this.geometry?this.geometry.atPoint(e,t,i):s},destroyPopup:function(){},move:function(e){var t,i;if(this.layer&&this.geometry.move)return e="OpenLayers.LonLat"==e.CLASS_NAME?this.layer.getViewPortPxFromLonLat(e):e,t=this.layer.getViewPortPxFromLonLat(this.geometry.getBounds().getCenterLonLat()),i=this.layer.map.getResolution(),this.geometry.move(i*(e.x-t.x),i*(t.y-e.y)),this.layer.drawFeature(this),t},toState:function(e){if(e==OpenLayers.State.UPDATE)switch(this.state){case OpenLayers.State.UNKNOWN:case OpenLayers.State.DELETE:this.state=e}else if(e==OpenLayers.State.INSERT)this.state!==OpenLayers.State.UNKNOWN&&(this.state=e);else if(e==OpenLayers.State.DELETE)switch(this.state){case OpenLayers.State.UNKNOWN:case OpenLayers.State.UPDATE:this.state=e}else e==OpenLayers.State.UNKNOWN&&(this.state=e)},CLASS_NAME:"OpenLayers.Feature.Vector"}),OpenLayers.Feature.Vector.style={default:{fillColor:"#ee9900",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:.2,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},delete:{display:"none"}},OpenLayers.Style=OpenLayers.Class({id:null,name:null,title:null,description:null,layerName:null,isDefault:!1,rules:null,context:null,defaultStyle:null,defaultsPerSymbolizer:!1,propertyStyles:null,initialize:function(e,t){OpenLayers.Util.extend(this,t),this.rules=[],t&&t.rules&&this.addRules(t.rules),this.setDefaultStyle(e||OpenLayers.Feature.Vector.style.default),this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){for(var e=0,t=this.rules.length;e<t;e++)this.rules[e].destroy(),this.rules[e]=null;this.defaultStyle=this.rules=null},createSymbolizer:function(e){for(var t,i=this.defaultsPerSymbolizer?{}:this.createLiterals(OpenLayers.Util.extend({},this.defaultStyle),e),s=this.rules,n=[],r=!1,a=0,o=s.length;a<o;a++)(t=s[a]).evaluate(e)&&(t instanceof OpenLayers.Rule&&t.elseFilter?n.push(t):(r=!0,this.applySymbolizer(t,i,e)));if(0==r&&0<n.length)for(r=!0,a=0,o=n.length;a<o;a++)this.applySymbolizer(n[a],i,e);return 0<s.length&&0==r&&(i.display="none"),null!=i.label&&"string"!=typeof i.label&&(i.label=String(i.label)),i},applySymbolizer:function(e,t,i){var s=i.geometry?this.getSymbolizerPrefix(i.geometry):OpenLayers.Style.SYMBOLIZER_PREFIXES[0];return e=e.symbolizer[s]||e.symbolizer,!0===this.defaultsPerSymbolizer&&(s=this.defaultStyle,OpenLayers.Util.applyDefaults(e,{pointRadius:s.pointRadius}),!0!==e.stroke&&!0!==e.graphic||OpenLayers.Util.applyDefaults(e,{strokeWidth:s.strokeWidth,strokeColor:s.strokeColor,strokeOpacity:s.strokeOpacity,strokeDashstyle:s.strokeDashstyle,strokeLinecap:s.strokeLinecap}),!0!==e.fill&&!0!==e.graphic||OpenLayers.Util.applyDefaults(e,{fillColor:s.fillColor,fillOpacity:s.fillOpacity}),!0===e.graphic&&OpenLayers.Util.applyDefaults(e,{pointRadius:this.defaultStyle.pointRadius,externalGraphic:this.defaultStyle.externalGraphic,graphicName:this.defaultStyle.graphicName,graphicOpacity:this.defaultStyle.graphicOpacity,graphicWidth:this.defaultStyle.graphicWidth,graphicHeight:this.defaultStyle.graphicHeight,graphicXOffset:this.defaultStyle.graphicXOffset,graphicYOffset:this.defaultStyle.graphicYOffset})),this.createLiterals(OpenLayers.Util.extend(t,e),i)},createLiterals:function(e,t){var i,s=OpenLayers.Util.extend({},t.attributes||t.data);for(i in OpenLayers.Util.extend(s,this.context),this.propertyStyles)e[i]=OpenLayers.Style.createLiteral(e[i],s,t,i);return e},findPropertyStyles:function(){var e={};this.addPropertyStyles(e,this.defaultStyle);for(var t,i=this.rules,s=0,n=i.length;s<n;s++)for(var r in t=i[s].symbolizer){if(r=t[r],"object"!=_typeof(r)){this.addPropertyStyles(e,t);break}this.addPropertyStyles(e,r)}return e},addPropertyStyles:function(e,t){var i,s;for(s in t)"string"==typeof(i=t[s])&&i.match(/\$\{\w+\}/)&&(e[s]=!0);return e},addRules:function(e){Array.prototype.push.apply(this.rules,e),this.propertyStyles=this.findPropertyStyles()},setDefaultStyle:function(e){this.defaultStyle=e,this.propertyStyles=this.findPropertyStyles()},getSymbolizerPrefix:function(e){for(var t=OpenLayers.Style.SYMBOLIZER_PREFIXES,i=0,s=t.length;i<s;i++)if(-1!=e.CLASS_NAME.indexOf(t[i]))return t[i]},clone:function(){var e=OpenLayers.Util.extend({},this);if(this.rules){e.rules=[];for(var t=0,i=this.rules.length;t<i;++t)e.rules.push(this.rules[t].clone())}return e.context=this.context&&OpenLayers.Util.extend({},this.context),t=OpenLayers.Util.extend({},this.defaultStyle),new OpenLayers.Style(t,e)},CLASS_NAME:"OpenLayers.Style"}),OpenLayers.Style.createLiteral=function(e,t,i,s){return"string"==typeof e&&-1!=e.indexOf("${")&&(e=OpenLayers.String.format(e,t,[i,s]),e=isNaN(e)||!e?e:parseFloat(e)),e},OpenLayers.Style.SYMBOLIZER_PREFIXES=["Point","Line","Polygon","Text","Raster"],OpenLayers.Filter=OpenLayers.Class({initialize:function(e){OpenLayers.Util.extend(this,e)},destroy:function(){},evaluate:function(e){return!0},clone:function(){return null},toString:function(){return OpenLayers.Format&&OpenLayers.Format.CQL?OpenLayers.Format.CQL.prototype.write(this):Object.prototype.toString.call(this)},CLASS_NAME:"OpenLayers.Filter"}),OpenLayers.Filter.Spatial=OpenLayers.Class(OpenLayers.Filter,{type:null,property:null,value:null,distance:null,distanceUnits:null,evaluate:function(e){var t,i=!1;switch(this.type){case OpenLayers.Filter.Spatial.BBOX:case OpenLayers.Filter.Spatial.INTERSECTS:e.geometry&&(t=this.value,"OpenLayers.Bounds"==this.value.CLASS_NAME&&(t=this.value.toGeometry()),e.geometry.intersects(t)&&(i=!0));break;default:throw Error("evaluate is not implemented for this filter type.")}return i},clone:function(){var e=OpenLayers.Util.applyDefaults({value:this.value&&this.value.clone&&this.value.clone()},this);return new OpenLayers.Filter.Spatial(e)},CLASS_NAME:"OpenLayers.Filter.Spatial"}),OpenLayers.Filter.Spatial.BBOX="BBOX",OpenLayers.Filter.Spatial.INTERSECTS="INTERSECTS",OpenLayers.Filter.Spatial.DWITHIN="DWITHIN",OpenLayers.Filter.Spatial.WITHIN="WITHIN",OpenLayers.Filter.Spatial.CONTAINS="CONTAINS",OpenLayers.Filter.FeatureId=OpenLayers.Class(OpenLayers.Filter,{fids:null,type:"FID",initialize:function(e){this.fids=[],OpenLayers.Filter.prototype.initialize.apply(this,[e])},evaluate:function(e){for(var t=0,i=this.fids.length;t<i;t++)if((e.fid||e.id)==this.fids[t])return!0;return!1},clone:function(){var e=new OpenLayers.Filter.FeatureId;return OpenLayers.Util.extend(e,this),e.fids=this.fids.slice(),e},CLASS_NAME:"OpenLayers.Filter.FeatureId"}),OpenLayers.Format.WFST.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",wfs:"http://www.opengis.net/wfs",gml:"http://www.opengis.net/gml",ogc:"http://www.opengis.net/ogc",ows:"http://www.opengis.net/ows"},defaultPrefix:"wfs",version:null,schemaLocations:null,srsName:null,extractAttributes:!0,xy:!0,stateName:null,initialize:function(e){this.stateName={},this.stateName[OpenLayers.State.INSERT]="wfs:Insert",this.stateName[OpenLayers.State.UPDATE]="wfs:Update",this.stateName[OpenLayers.State.DELETE]="wfs:Delete",OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},getSrsName:function(e,t){return t&&t.srsName||(e&&e.layer?e.layer.projection.getCode():this.srsName)},read:function(e,t){OpenLayers.Util.applyDefaults(t=t||{},{output:"features"});var i={};return(e=(e="string"==typeof e?OpenLayers.Format.XML.prototype.read.apply(this,[e]):e)&&9==e.nodeType?e.documentElement:e)&&this.readNode(e,i,!0),i=i.features&&"features"===t.output?i.features:i},readers:{wfs:{FeatureCollection:function(e,t){t.features=[],this.readChildNodes(e,t)}}},write:function(e,t){e=this.writeNode("wfs:Transaction",{features:e,options:t}),t=this.schemaLocationAttr();return t&&this.setAttributeNS(e,this.namespaces.xsi,"xsi:schemaLocation",t),OpenLayers.Format.XML.prototype.write.apply(this,[e])},writers:{wfs:{GetFeature:function(e){var t=this.createElementNSPlus("wfs:GetFeature",{attributes:{service:"WFS",version:this.version,handle:e&&e.handle,outputFormat:e&&e.outputFormat,maxFeatures:e&&e.maxFeatures,"xsi:schemaLocation":this.schemaLocationAttr(e)}});if("string"==typeof this.featureType)this.writeNode("Query",e,t);else for(var i=0,s=this.featureType.length;i<s;i++)e.featureType=this.featureType[i],this.writeNode("Query",e,t);return t},Transaction:function(e){var t,i,s,n=(e=e||{}).options||{},r=this.createElementNSPlus("wfs:Transaction",{attributes:{service:"WFS",version:this.version,handle:n.handle}}),a=e.features;if(a){for(!0===n.multi&&OpenLayers.Util.extend(this.geometryTypes,{"OpenLayers.Geometry.Point":"MultiPoint","OpenLayers.Geometry.LineString":!0===this.multiCurve?"MultiCurve":"MultiLineString","OpenLayers.Geometry.Polygon":!0===this.multiSurface?"MultiSurface":"MultiPolygon"}),e=0,t=a.length;e<t;++e)s=a[e],(i=this.stateName[s.state])&&this.writeNode(i,{feature:s,options:n},r);!0===n.multi&&this.setGeometryTypes()}if(n.nativeElements)for(e=0,t=n.nativeElements.length;e<t;++e)this.writeNode("wfs:Native",n.nativeElements[e],r);return r},Native:function(e){return this.createElementNSPlus("wfs:Native",{attributes:{vendorId:e.vendorId,safeToIgnore:e.safeToIgnore},value:e.value})},Insert:function(e){var t=e.feature;return e=e.options,e=this.createElementNSPlus("wfs:Insert",{attributes:{handle:e&&e.handle}}),this.srsName=this.getSrsName(t),this.writeNode("feature:_typeName",t,e),e},Update:function(e){var t,i=e.feature,s=(e=e.options,e=this.createElementNSPlus("wfs:Update",{attributes:{handle:e&&e.handle,typeName:(this.featureNS?this.featurePrefix+":":"")+this.featureType}}),this.featureNS&&e.setAttribute("xmlns:"+this.featurePrefix,this.featureNS),i.modified);for(t in null===this.geometryName||s&&void 0===s.geometry||(this.srsName=this.getSrsName(i),this.writeNode("Property",{name:this.geometryName,value:i.geometry},e)),i.attributes)void 0===i.attributes[t]||s&&s.attributes&&(!s.attributes||void 0===s.attributes[t])||this.writeNode("Property",{name:t,value:i.attributes[t]},e);return this.writeNode("ogc:Filter",new OpenLayers.Filter.FeatureId({fids:[i.fid]}),e),e},Property:function(e){var t=this.createElementNSPlus("wfs:Property");return this.writeNode("Name",e.name,t),null!==e.value&&this.writeNode("Value",e.value,t),t},Name:function(e){return this.createElementNSPlus("wfs:Name",{value:e})},Value:function(e){var t;return e instanceof OpenLayers.Geometry?(t=this.createElementNSPlus("wfs:Value"),e=this.writeNode("feature:_geometry",e).firstChild,t.appendChild(e)):t=this.createElementNSPlus("wfs:Value",{value:e}),t},Delete:function(e){var t=e.feature;return e=e.options,e=this.createElementNSPlus("wfs:Delete",{attributes:{handle:e&&e.handle,typeName:(this.featureNS?this.featurePrefix+":":"")+this.featureType}}),this.featureNS&&e.setAttribute("xmlns:"+this.featurePrefix,this.featureNS),this.writeNode("ogc:Filter",new OpenLayers.Filter.FeatureId({fids:[t.fid]}),e),e}}},schemaLocationAttr:function(e){e=OpenLayers.Util.extend({featurePrefix:this.featurePrefix,schema:this.schema},e);var t,i,s=OpenLayers.Util.extend({},this.schemaLocations);for(i in e.schema&&(s[e.featurePrefix]=e.schema),e=[],s)(t=this.namespaces[i])&&e.push(t+" "+s[i]);return e.join(" ")||void 0},setFilterProperty:function(e){if(e.filters)for(var t=0,i=e.filters.length;t<i;++t)OpenLayers.Format.WFST.v1.prototype.setFilterProperty.call(this,e.filters[t]);else e instanceof OpenLayers.Filter.Spatial&&!e.property&&(e.property=this.geometryName)},CLASS_NAME:"OpenLayers.Format.WFST.v1"}),OpenLayers.Format.OGCExceptionReport=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ogc:"http://www.opengis.net/ogc"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},defaultPrefix:"ogc",read:function(e){var t={exceptionReport:null};return(e="string"==typeof e?OpenLayers.Format.XML.prototype.read.apply(this,[e]):e).documentElement&&(this.readChildNodes(e,t),null===t.exceptionReport&&(t=(new OpenLayers.Format.OWSCommon).read(e))),t},readers:{ogc:{ServiceExceptionReport:function(e,t){t.exceptionReport={exceptions:[]},this.readChildNodes(e,t.exceptionReport)},ServiceException:function(e,t){e={code:e.getAttribute("code"),locator:e.getAttribute("locator"),text:this.getChildValue(e)};t.exceptions.push(e)}}},CLASS_NAME:"OpenLayers.Format.OGCExceptionReport"}),OpenLayers.Format.XML.VersionedOGC=OpenLayers.Class(OpenLayers.Format.XML,{defaultVersion:null,version:null,profile:null,allowFallback:!1,name:null,stringifyOutput:!1,parser:null,initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e]),e=this.CLASS_NAME,this.name=e.substring(e.lastIndexOf(".")+1)},getVersion:function(e,t){var i;return e?(i=this.version)||(i=(i=e.getAttribute("version"))||this.defaultVersion):i=t&&t.version||this.version||this.defaultVersion,i},getParser:function(e){e=e||this.defaultVersion;var t=this.profile?"_"+this.profile:"";if(!this.parser||this.parser.VERSION!=e){var i=OpenLayers.Format[this.name]["v"+e.replace(/\./g,"_")+t];if(!i&&(""!==t&&this.allowFallback&&(t="",i=OpenLayers.Format[this.name]["v"+e.replace(/\./g,"_")]),!i))throw"Can't find a "+this.name+" parser for version "+e+t;this.parser=new i(this.options)}return this.parser},write:function(e,t){var i=this.getVersion(null,t);return this.parser=this.getParser(i),i=this.parser.write(e,t),!1===this.stringifyOutput?i:OpenLayers.Format.XML.prototype.write.apply(this,[i])},read:function(e,t){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));var i=this.getVersion(e.documentElement),t=(this.parser=this.getParser(i),this.parser.read(e,t)),s=this.parser.errorProperty||null;return null!==s&&void 0===t[s]&&(s=new OpenLayers.Format.OGCExceptionReport,t.error=s.read(e)),t.version=i,t},CLASS_NAME:"OpenLayers.Format.XML.VersionedOGC"}),OpenLayers.Filter.Logical=OpenLayers.Class(OpenLayers.Filter,{filters:null,type:null,initialize:function(e){this.filters=[],OpenLayers.Filter.prototype.initialize.apply(this,[e])},destroy:function(){this.filters=null,OpenLayers.Filter.prototype.destroy.apply(this)},evaluate:function(e){var t,i;switch(this.type){case OpenLayers.Filter.Logical.AND:for(t=0,i=this.filters.length;t<i;t++)if(0==this.filters[t].evaluate(e))return!1;return!0;case OpenLayers.Filter.Logical.OR:for(t=0,i=this.filters.length;t<i;t++)if(1==this.filters[t].evaluate(e))return!0;return!1;case OpenLayers.Filter.Logical.NOT:return!this.filters[0].evaluate(e)}},clone:function(){for(var e=[],t=0,i=this.filters.length;t<i;++t)e.push(this.filters[t].clone());return new OpenLayers.Filter.Logical({type:this.type,filters:e})},CLASS_NAME:"OpenLayers.Filter.Logical"}),OpenLayers.Filter.Logical.AND="&&",OpenLayers.Filter.Logical.OR="||",OpenLayers.Filter.Logical.NOT="!",OpenLayers.Filter.Comparison=OpenLayers.Class(OpenLayers.Filter,{type:null,property:null,value:null,matchCase:!0,lowerBoundary:null,upperBoundary:null,initialize:function(e){OpenLayers.Filter.prototype.initialize.apply(this,[e]),this.type===OpenLayers.Filter.Comparison.LIKE&&void 0===e.matchCase&&(this.matchCase=null)},evaluate:function(e){var t=!1;switch(e=(e=e instanceof OpenLayers.Feature.Vector?e.attributes:e)[this.property],this.type){case OpenLayers.Filter.Comparison.EQUAL_TO:t=this.value,t=this.matchCase||"string"!=typeof e||"string"!=typeof t?e==t:e.toUpperCase()==t.toUpperCase();break;case OpenLayers.Filter.Comparison.NOT_EQUAL_TO:t=this.value,t=this.matchCase||"string"!=typeof e||"string"!=typeof t?e!=t:e.toUpperCase()!=t.toUpperCase();break;case OpenLayers.Filter.Comparison.LESS_THAN:t=e<this.value;break;case OpenLayers.Filter.Comparison.GREATER_THAN:t=e>this.value;break;case OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO:t=e<=this.value;break;case OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO:t=e>=this.value;break;case OpenLayers.Filter.Comparison.BETWEEN:t=e>=this.lowerBoundary&&e<=this.upperBoundary;break;case OpenLayers.Filter.Comparison.LIKE:t=RegExp(this.value,"gi").test(e);break;case OpenLayers.Filter.Comparison.IS_NULL:t=null===e}return t},value2regex:function(e,t,i){if("."==e)throw Error("'.' is an unsupported wildCard character for OpenLayers.Filter.Comparison");return e=e||"*",t=t||".",this.value=this.value.replace(RegExp("\\"+(i||"!")+"(.|$)","g"),"\\$1"),this.value=this.value.replace(RegExp("\\"+t,"g"),"."),this.value=this.value.replace(RegExp("\\"+e,"g"),".*"),this.value=this.value.replace(RegExp("\\\\.\\*","g"),"\\"+e),this.value=this.value.replace(RegExp("\\\\\\.","g"),"\\"+t)},regex2value:function(){var e=this.value;return(e=(e=(e=(e=e.replace(/!/g,"!!")).replace(/(\\)?\\\./g,function(e,t){return t?e:"!."})).replace(/(\\)?\\\*/g,function(e,t){return t?e:"!*"})).replace(/\\\\/g,"\\")).replace(/\.\*/g,"*")},clone:function(){return OpenLayers.Util.extend(new OpenLayers.Filter.Comparison,this)},CLASS_NAME:"OpenLayers.Filter.Comparison"}),OpenLayers.Filter.Comparison.EQUAL_TO="==",OpenLayers.Filter.Comparison.NOT_EQUAL_TO="!=",OpenLayers.Filter.Comparison.LESS_THAN="<",OpenLayers.Filter.Comparison.GREATER_THAN=">",OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO="<=",OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO=">=",OpenLayers.Filter.Comparison.BETWEEN="..",OpenLayers.Filter.Comparison.LIKE="~",OpenLayers.Filter.Comparison.IS_NULL="NULL",OpenLayers.Format.Filter=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.0.0",CLASS_NAME:"OpenLayers.Format.Filter"}),OpenLayers.Filter.Function=OpenLayers.Class(OpenLayers.Filter,{name:null,params:null,CLASS_NAME:"OpenLayers.Filter.Function"}),OpenLayers.Date={dateRegEx:/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/,toISOString:"toISOString"in Date.prototype?function(e){return e.toISOString()}:function(e){return isNaN(e.getTime())?"Invalid Date":e.getUTCFullYear()+"-"+OpenLayers.Number.zeroPad(e.getUTCMonth()+1,2)+"-"+OpenLayers.Number.zeroPad(e.getUTCDate(),2)+"T"+OpenLayers.Number.zeroPad(e.getUTCHours(),2)+":"+OpenLayers.Number.zeroPad(e.getUTCMinutes(),2)+":"+OpenLayers.Number.zeroPad(e.getUTCSeconds(),2)+"."+OpenLayers.Number.zeroPad(e.getUTCMilliseconds(),3)+"Z"},parse:function(e){var t,i,s,n,r,a;return(e=e.match(this.dateRegEx))&&(e[1]||e[7])?(t=parseInt(e[1],10)||0,i=parseInt(e[2],10)-1||0,s=parseInt(e[3],10)||1,t=new Date(Date.UTC(t,i,s)),(i=e[7])&&(s=parseInt(e[4],10),n=parseInt(e[5],10),r=0|(a=parseFloat(e[6])),a=Math.round(1e3*(a-r)),t.setUTCHours(s,n,r,a),"Z"!==i&&(e=-1e3*(3600*(i=parseInt(i,10))+60*(e=parseInt(e[8],10)||0)),t=new Date(t.getTime()+e)))):t=new Date("invalid"),t}},OpenLayers.Format.Filter.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ogc:"http://www.opengis.net/ogc",gml:"http://www.opengis.net/gml",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},defaultPrefix:"ogc",schemaLocation:null,initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},read:function(e){var t={};return this.readers.ogc.Filter.apply(this,[e,t]),t.filter},readers:{ogc:{_expression:function(e){for(var t="",i=e.firstChild;i;i=i.nextSibling)switch(i.nodeType){case 1:(e=this.readNode(i)).property?t+="${"+e.property+"}":void 0!==e.value&&(t+=e.value);break;case 3:case 4:t+=i.nodeValue}return t},Filter:function(e,t){var i={fids:[],filters:[]};this.readChildNodes(e,i),0<i.fids.length?t.filter=new OpenLayers.Filter.FeatureId({fids:i.fids}):0<i.filters.length&&(t.filter=i.filters[0])},FeatureId:function(e,t){e=e.getAttribute("fid");e&&t.fids.push(e)},And:function(e,t){var i=new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.AND});this.readChildNodes(e,i),t.filters.push(i)},Or:function(e,t){var i=new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.OR});this.readChildNodes(e,i),t.filters.push(i)},Not:function(e,t){var i=new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.NOT});this.readChildNodes(e,i),t.filters.push(i)},PropertyIsLessThan:function(e,t){var i=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.LESS_THAN});this.readChildNodes(e,i),t.filters.push(i)},PropertyIsGreaterThan:function(e,t){var i=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.GREATER_THAN});this.readChildNodes(e,i),t.filters.push(i)},PropertyIsLessThanOrEqualTo:function(e,t){var i=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO});this.readChildNodes(e,i),t.filters.push(i)},PropertyIsGreaterThanOrEqualTo:function(e,t){var i=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO});this.readChildNodes(e,i),t.filters.push(i)},PropertyIsBetween:function(e,t){var i=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.BETWEEN});this.readChildNodes(e,i),t.filters.push(i)},Literal:function(e,t){t.value=OpenLayers.String.numericIf(this.getChildValue(e),!0)},PropertyName:function(e,t){t.property=this.getChildValue(e)},LowerBoundary:function(e,t){t.lowerBoundary=OpenLayers.String.numericIf(this.readers.ogc._expression.call(this,e),!0)},UpperBoundary:function(e,t){t.upperBoundary=OpenLayers.String.numericIf(this.readers.ogc._expression.call(this,e),!0)},Intersects:function(e,t){this.readSpatial(e,t,OpenLayers.Filter.Spatial.INTERSECTS)},Within:function(e,t){this.readSpatial(e,t,OpenLayers.Filter.Spatial.WITHIN)},Contains:function(e,t){this.readSpatial(e,t,OpenLayers.Filter.Spatial.CONTAINS)},DWithin:function(e,t){this.readSpatial(e,t,OpenLayers.Filter.Spatial.DWITHIN)},Distance:function(e,t){t.distance=parseInt(this.getChildValue(e)),t.distanceUnits=e.getAttribute("units")},Function:function(e,t){},PropertyIsNull:function(e,t){var i=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.IS_NULL});this.readChildNodes(e,i),t.filters.push(i)}}},readSpatial:function(e,t,i){i=new OpenLayers.Filter.Spatial({type:i}),this.readChildNodes(e,i),i.value=i.components[0],delete i.components,t.filters.push(i)},encodeLiteral:function(e){return e=e instanceof Date?OpenLayers.Date.toISOString(e):e},writeOgcExpression:function(e,t){return e instanceof OpenLayers.Filter.Function?this.writeNode("Function",e,t):this.writeNode("Literal",e,t),t},write:function(e){return this.writers.ogc.Filter.apply(this,[e])},writers:{ogc:{Filter:function(e){var t=this.createElementNSPlus("ogc:Filter");return this.writeNode(this.getFilterType(e),e,t),t},_featureIds:function(e){for(var t=this.createDocumentFragment(),i=0,s=e.fids.length;i<s;++i)this.writeNode("ogc:FeatureId",e.fids[i],t);return t},FeatureId:function(e){return this.createElementNSPlus("ogc:FeatureId",{attributes:{fid:e}})},And:function(e){for(var t,i=this.createElementNSPlus("ogc:And"),s=0,n=e.filters.length;s<n;++s)t=e.filters[s],this.writeNode(this.getFilterType(t),t,i);return i},Or:function(e){for(var t,i=this.createElementNSPlus("ogc:Or"),s=0,n=e.filters.length;s<n;++s)t=e.filters[s],this.writeNode(this.getFilterType(t),t,i);return i},Not:function(e){var t=this.createElementNSPlus("ogc:Not");return e=e.filters[0],this.writeNode(this.getFilterType(e),e,t),t},PropertyIsLessThan:function(e){var t=this.createElementNSPlus("ogc:PropertyIsLessThan");return this.writeNode("PropertyName",e,t),this.writeOgcExpression(e.value,t),t},PropertyIsGreaterThan:function(e){var t=this.createElementNSPlus("ogc:PropertyIsGreaterThan");return this.writeNode("PropertyName",e,t),this.writeOgcExpression(e.value,t),t},PropertyIsLessThanOrEqualTo:function(e){var t=this.createElementNSPlus("ogc:PropertyIsLessThanOrEqualTo");return this.writeNode("PropertyName",e,t),this.writeOgcExpression(e.value,t),t},PropertyIsGreaterThanOrEqualTo:function(e){var t=this.createElementNSPlus("ogc:PropertyIsGreaterThanOrEqualTo");return this.writeNode("PropertyName",e,t),this.writeOgcExpression(e.value,t),t},PropertyIsBetween:function(e){var t=this.createElementNSPlus("ogc:PropertyIsBetween");return this.writeNode("PropertyName",e,t),this.writeNode("LowerBoundary",e,t),this.writeNode("UpperBoundary",e,t),t},PropertyName:function(e){return this.createElementNSPlus("ogc:PropertyName",{value:e.property})},Literal:function(e){return this.createElementNSPlus("ogc:Literal",{value:(this.encodeLiteral||OpenLayers.Format.Filter.v1.prototype.encodeLiteral)(e)})},LowerBoundary:function(e){var t=this.createElementNSPlus("ogc:LowerBoundary");return this.writeOgcExpression(e.lowerBoundary,t),t},UpperBoundary:function(e){var t=this.createElementNSPlus("ogc:UpperBoundary");return this.writeNode("Literal",e.upperBoundary,t),t},INTERSECTS:function(e){return this.writeSpatial(e,"Intersects")},WITHIN:function(e){return this.writeSpatial(e,"Within")},CONTAINS:function(e){return this.writeSpatial(e,"Contains")},DWITHIN:function(e){var t=this.writeSpatial(e,"DWithin");return this.writeNode("Distance",e,t),t},Distance:function(e){return this.createElementNSPlus("ogc:Distance",{attributes:{units:e.distanceUnits},value:e.distance})},Function:function(e){for(var t=this.createElementNSPlus("ogc:Function",{attributes:{name:e.name}}),i=0,s=(e=e.params).length;i<s;i++)this.writeOgcExpression(e[i],t);return t},PropertyIsNull:function(e){var t=this.createElementNSPlus("ogc:PropertyIsNull");return this.writeNode("PropertyName",e,t),t}}},getFilterType:function(e){var t=this.filterMap[e.type];if(t)return t;throw"Filter writing not supported for rule type: "+e.type},filterMap:{"&&":"And","||":"Or","!":"Not","==":"PropertyIsEqualTo","!=":"PropertyIsNotEqualTo","<":"PropertyIsLessThan",">":"PropertyIsGreaterThan","<=":"PropertyIsLessThanOrEqualTo",">=":"PropertyIsGreaterThanOrEqualTo","..":"PropertyIsBetween","~":"PropertyIsLike",NULL:"PropertyIsNull",BBOX:"BBOX",DWITHIN:"DWITHIN",WITHIN:"WITHIN",CONTAINS:"CONTAINS",INTERSECTS:"INTERSECTS",FID:"_featureIds"},CLASS_NAME:"OpenLayers.Format.Filter.v1"}),OpenLayers.Geometry=OpenLayers.Class({id:null,parent:null,bounds:null,initialize:function(){this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){this.bounds=this.id=null},clone:function(){return new OpenLayers.Geometry},setBounds:function(e){e&&(this.bounds=e.clone())},clearBounds:function(){this.bounds=null,this.parent&&this.parent.clearBounds()},extendBounds:function(e){this.getBounds()?this.bounds.extend(e):this.setBounds(e)},getBounds:function(){return null==this.bounds&&this.calculateBounds(),this.bounds},calculateBounds:function(){},distanceTo:function(e,t){},getVertices:function(e){},atPoint:function(e,t,i){var s=!1;return s=null!=this.getBounds()&&null!=e?new OpenLayers.Bounds(this.bounds.left-(t=null!=t?t:0),this.bounds.bottom-(i=null!=i?i:0),this.bounds.right+t,this.bounds.top+i).containsLonLat(e):s},getLength:function(){return 0},getArea:function(){return 0},getCentroid:function(){return null},toString:function(){return OpenLayers.Format&&OpenLayers.Format.WKT?OpenLayers.Format.WKT.prototype.write(new OpenLayers.Feature.Vector(this)):Object.prototype.toString.call(this)},CLASS_NAME:"OpenLayers.Geometry"}),OpenLayers.Geometry.fromWKT=function(e){if(OpenLayers.Format&&OpenLayers.Format.WKT)if((i=OpenLayers.Geometry.fromWKT.format)||(i=new OpenLayers.Format.WKT,OpenLayers.Geometry.fromWKT.format=i),(e=i.read(e))instanceof OpenLayers.Feature.Vector)t=e.geometry;else if(OpenLayers.Util.isArray(e)){for(var t=e.length,i=Array(t),s=0;s<t;++s)i[s]=e[s].geometry;t=new OpenLayers.Geometry.Collection(i)}return t},OpenLayers.Geometry.segmentsIntersect=function(e,t,i){var s=i&&i.point,n=(i=i&&i.tolerance,!1),r=e.x1-t.x1,a=e.y1-t.y1,o=e.x2-e.x1,l=e.y2-e.y1,h=t.y2-t.y1,p=t.x2-t.x1,u=h*o-p*l,h=p*a-h*r,a=o*a-l*r;if(0==u?0==h&&0==a&&(n=!0):(r=h/u,u=a/u,0<=r&&r<=1&&0<=u&&u<=1&&(n=!s||(o=e.x1+r*o,u=e.y1+r*l,new OpenLayers.Geometry.Point(o,u)))),i)if(n){if(s)e:for(e=[e,t],t=0;t<2;++t)for(r=e[t],l=1;l<3;++l)if(o=r["x"+l],u=r["y"+l],(s=Math.sqrt(Math.pow(o-n.x,2)+Math.pow(u-n.y,2)))<i){n.x=o,n.y=u;break e}}else e:for(e=[e,t],t=0;t<2;++t)for(o=e[t],u=e[(t+1)%2],l=1;l<3;++l)if(r={x:o["x"+l],y:o["y"+l]},(a=OpenLayers.Geometry.distanceToSegment(r,u)).distance<i){n=!s||new OpenLayers.Geometry.Point(r.x,r.y);break e}return n},OpenLayers.Geometry.distanceToSegment=function(e,t){e=OpenLayers.Geometry.distanceSquaredToSegment(e,t);return e.distance=Math.sqrt(e.distance),e},OpenLayers.Geometry.distanceSquaredToSegment=function(e,t){var i=e.x,e=e.y,s=t.x1,n=t.y1,r=t.x2,t=t.y2,a=r-s,o=t-n,l=(a*(i-s)+o*(e-n))/(Math.pow(a,2)+Math.pow(o,2));return l<=0||(1<=l?(s=r,n=t):(s+=l*a,n+=l*o)),{distance:Math.pow(s-i,2)+Math.pow(n-e,2),x:s,y:n,along:l}},OpenLayers.Geometry.Point=OpenLayers.Class(OpenLayers.Geometry,{x:null,y:null,initialize:function(e,t){OpenLayers.Geometry.prototype.initialize.apply(this,arguments),this.x=parseFloat(e),this.y=parseFloat(t)},clone:function(e){return null==e&&(e=new OpenLayers.Geometry.Point(this.x,this.y)),OpenLayers.Util.applyDefaults(e,this),e},calculateBounds:function(){this.bounds=new OpenLayers.Bounds(this.x,this.y,this.x,this.y)},distanceTo:function(e,t){var i,s,n,r,a,o=!(t&&!1===t.edge)&&t&&t.details;return e instanceof OpenLayers.Geometry.Point?(s=this.x,n=this.y,r=e.x,a=e.y,i=Math.sqrt(Math.pow(s-r,2)+Math.pow(n-a,2)),i=o?{x0:s,y0:n,x1:r,y1:a,distance:i}:i):(i=e.distanceTo(this,t),o&&(i={x0:i.x1,y0:i.y1,x1:i.x0,y1:i.y0,distance:i.distance})),i},equals:function(e){var t=!1;return t=null!=e?this.x==e.x&&this.y==e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y):t},toShortString:function(){return this.x+", "+this.y},move:function(e,t){this.x+=e,this.y+=t,this.clearBounds()},rotate:function(e,t){e*=Math.PI/180;var i=this.distanceTo(t),e=e+Math.atan2(this.y-t.y,this.x-t.x);this.x=t.x+i*Math.cos(e),this.y=t.y+i*Math.sin(e),this.clearBounds()},getCentroid:function(){return new OpenLayers.Geometry.Point(this.x,this.y)},resize:function(e,t,i){return this.x=t.x+e*(null==i?1:i)*(this.x-t.x),this.y=t.y+e*(this.y-t.y),this.clearBounds(),this},intersects:function(e){return"OpenLayers.Geometry.Point"==e.CLASS_NAME?this.equals(e):e.intersects(this)},transform:function(e,t){return e&&t&&(OpenLayers.Projection.transform(this,e,t),this.bounds=null),this},getVertices:function(e){return[this]},CLASS_NAME:"OpenLayers.Geometry.Point"}),OpenLayers.Geometry.Collection=OpenLayers.Class(OpenLayers.Geometry,{components:null,componentTypes:null,initialize:function(e){OpenLayers.Geometry.prototype.initialize.apply(this,arguments),this.components=[],null!=e&&this.addComponents(e)},destroy:function(){this.components.length=0,this.components=null,OpenLayers.Geometry.prototype.destroy.apply(this,arguments)},clone:function clone(){for(var a=eval("new "+this.CLASS_NAME+"()"),b=0,c=this.components.length;b<c;b++)a.addComponent(this.components[b].clone());return OpenLayers.Util.applyDefaults(a,this),a},getComponentsString:function(){for(var e=[],t=0,i=this.components.length;t<i;t++)e.push(this.components[t].toShortString());return e.join(",")},calculateBounds:function(){this.bounds=null;var e=new OpenLayers.Bounds,t=this.components;if(t)for(var i=0,s=t.length;i<s;i++)e.extend(t[i].getBounds());null!=e.left&&null!=e.bottom&&null!=e.right&&null!=e.top&&this.setBounds(e)},addComponents:function(e){for(var t=0,i=(e=OpenLayers.Util.isArray(e)?e:[e]).length;t<i;t++)this.addComponent(e[t])},addComponent:function(e,t){var i=!1;return e&&(null==this.componentTypes||-1<OpenLayers.Util.indexOf(this.componentTypes,e.CLASS_NAME))&&(null!=t&&t<this.components.length?(i=this.components.slice(0,t),t=this.components.slice(t,this.components.length),i.push(e),this.components=i.concat(t)):this.components.push(e),(e.parent=this).clearBounds(),i=!0),i},removeComponents:function(e){for(var t=!1,i=(e=OpenLayers.Util.isArray(e)?e:[e]).length-1;0<=i;--i)t=this.removeComponent(e[i])||t;return t},removeComponent:function(e){return OpenLayers.Util.removeItem(this.components,e),this.clearBounds(),!0},getLength:function(){for(var e=0,t=0,i=this.components.length;t<i;t++)e+=this.components[t].getLength();return e},getArea:function(){for(var e=0,t=0,i=this.components.length;t<i;t++)e+=this.components[t].getArea();return e},getGeodesicArea:function(e){for(var t=0,i=0,s=this.components.length;i<s;i++)t+=this.components[i].getGeodesicArea(e);return t},getCentroid:function(e){if(!e)return this.components.length&&this.components[0].getCentroid();if(!(e=this.components.length))return!1;for(var t=[],i=[],s=0,n=Number.MAX_VALUE,r=0;r<e;++r){var a,o=(a=this.components[r]).getArea();a=a.getCentroid(!0),isNaN(o)||isNaN(a.x)||isNaN(a.y)||(t.push(o),s+=o,n=o<n&&0<o?o:n,i.push(a))}if(e=t.length,0===s){for(r=0;r<e;++r)t[r]=1;s=t.length}else{for(r=0;r<e;++r)t[r]/=n;s/=n}for(var l=n=0,r=0;r<e;++r)a=i[r],o=t[r],n+=a.x*o,l+=a.y*o;return new OpenLayers.Geometry.Point(n/s,l/s)},getGeodesicLength:function(e){for(var t=0,i=0,s=this.components.length;i<s;i++)t+=this.components[i].getGeodesicLength(e);return t},move:function(e,t){for(var i=0,s=this.components.length;i<s;i++)this.components[i].move(e,t)},rotate:function(e,t){for(var i=0,s=this.components.length;i<s;++i)this.components[i].rotate(e,t)},resize:function(e,t,i){for(var s=0;s<this.components.length;++s)this.components[s].resize(e,t,i);return this},distanceTo:function(e,t){for(var i,s,n,r=!(t&&!1===t.edge)&&t&&t.details,a=Number.POSITIVE_INFINITY,o=0,l=this.components.length;o<l&&(i=this.components[o].distanceTo(e,t),!((n=r?i.distance:i)<a&&(s=i,0==(a=n))));++o);return s},equals:function(e){var t=!0;if(e&&e.CLASS_NAME&&this.CLASS_NAME==e.CLASS_NAME)if(OpenLayers.Util.isArray(e.components)&&e.components.length==this.components.length){for(var i=0,s=this.components.length;i<s;++i)if(!this.components[i].equals(e.components[i])){t=!1;break}}else t=!1;else t=!1;return t},transform:function(e,t){if(e&&t){for(var i=0,s=this.components.length;i<s;i++)this.components[i].transform(e,t);this.bounds=null}return this},intersects:function(e){for(var t=!1,i=0,s=this.components.length;i<s&&!(t=e.intersects(this.components[i]));++i);return t},getVertices:function(e){for(var t=[],i=0,s=this.components.length;i<s;++i)Array.prototype.push.apply(t,this.components[i].getVertices(e));return t},CLASS_NAME:"OpenLayers.Geometry.Collection"}),OpenLayers.Geometry.MultiPoint=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.Point"],addPoint:function(e,t){this.addComponent(e,t)},removePoint:function(e){this.removeComponent(e)},CLASS_NAME:"OpenLayers.Geometry.MultiPoint"}),OpenLayers.Geometry.Curve=OpenLayers.Class(OpenLayers.Geometry.MultiPoint,{componentTypes:["OpenLayers.Geometry.Point"],getLength:function(){var e=0;if(this.components&&1<this.components.length)for(var t=1,i=this.components.length;t<i;t++)e+=this.components[t-1].distanceTo(this.components[t]);return e},getGeodesicLength:function(e){var t,i=this;if(!e||(t=new OpenLayers.Projection("EPSG:4326")).equals(e)||(i=this.clone().transform(e,t)),e=0,i.components&&1<i.components.length)for(var s,n=1,r=i.components.length;n<r;n++)t=i.components[n-1],s=i.components[n],e+=OpenLayers.Util.distVincenty({lon:t.x,lat:t.y},{lon:s.x,lat:s.y});return 1e3*e},CLASS_NAME:"OpenLayers.Geometry.Curve"}),OpenLayers.Geometry.LineString=OpenLayers.Class(OpenLayers.Geometry.Curve,{removeComponent:function(e){var t=this.components&&2<this.components.length;return t&&OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this,arguments),t},intersects:function(e){var t=!1;if("OpenLayers.Geometry.LineString"==(l=e.CLASS_NAME)||"OpenLayers.Geometry.LinearRing"==l||"OpenLayers.Geometry.Point"==l){var i=this.getSortedSegments();e="OpenLayers.Geometry.Point"==l?[{x1:e.x,y1:e.y,x2:e.x,y2:e.y}]:e.getSortedSegments();var s,n,r,a=0,o=i.length;e:for(;a<o;++a)for(var l,h=(l=i[a]).x1,p=l.x2,u=l.y1,c=l.y2,d=0,y=e.length;d<y&&!((s=e[d]).x1>p);++d)if(!(s.x2<h||(n=s.y1,r=s.y2,Math.min(n,r)>Math.max(u,c)||Math.max(n,r)<Math.min(u,c)||!OpenLayers.Geometry.segmentsIntersect(l,s)))){t=!0;break e}}else t=e.intersects(this);return t},getSortedSegments:function(){for(var e,t,i=this.components.length-1,s=Array(i),n=0;n<i;++n)e=this.components[n],t=this.components[n+1],s[n]=e.x<t.x?{x1:e.x,y1:e.y,x2:t.x,y2:t.y}:{x1:t.x,y1:t.y,x2:e.x,y2:e.y};return s.sort(function(e,t){return e.x1-t.x1})},splitWithSegment:function(e,t){for(var i,s,n,r,a=!(t&&!1===t.edge),o=t&&t.tolerance,l=[],h=this.getVertices(),p=[],u=[],c=!1,d={point:!0,tolerance:o},t=null,y=0,m=h.length-2;y<=m;++y)o=h[y],p.push(o.clone()),i=h[y+1],s={x1:o.x,y1:o.y,x2:i.x,y2:i.y},(s=OpenLayers.Geometry.segmentsIntersect(e,s,d))instanceof OpenLayers.Geometry.Point&&(!!(s.x===e.x1&&s.y===e.y1||s.x===e.x2&&s.y===e.y2||s.equals(o)||s.equals(i))||a)&&(s.equals(u[u.length-1])||u.push(s.clone()),0===y&&s.equals(o)||s.equals(i)||(c=!0,s.equals(o)||p.push(s),l.push(new OpenLayers.Geometry.LineString(p)),p=[s.clone()]));return c&&(p.push(i.clone()),l.push(new OpenLayers.Geometry.LineString(p))),0<u.length&&(n=e.x1<e.x2?1:-1,r=e.y1<e.y2?1:-1,t={lines:l,points:u.sort(function(e,t){return n*e.x-n*t.x||r*e.y-r*t.y})}),t},split:function(e,t){var i,s,n,r=null,a=t&&t.mutual;if(e instanceof OpenLayers.Geometry.LineString){for(var o,l,h,p,u,c=this.getVertices(),d=[],y=[],m=0,f=c.length-2;m<=f;++m){o=c[m],l=c[m+1],h={x1:o.x,y1:o.y,x2:l.x,y2:l.y},n=n||[e],a&&d.push(o.clone());for(var g=0;g<n.length;++g)if((p=n[g].splitWithSegment(h,t))&&(0<(u=p.lines).length&&(u.unshift(g,1),Array.prototype.splice.apply(n,u),g+=u.length-2),a))for(var v=0,L=p.points.length;v<L;++v)(u=p.points[v]).equals(o)||(d.push(u),y.push(new OpenLayers.Geometry.LineString(d)),d=u.equals(l)?[]:[u.clone()])}a&&0<y.length&&0<d.length&&(d.push(l.clone()),y.push(new OpenLayers.Geometry.LineString(d)))}else r=e.splitWith(this,t);return n&&1<n.length?s=!0:n=[],y&&1<y.length?i=!0:y=[],r=s||i?a?[y,n]:n:r},splitWith:function(e,t){return e.split(this,t)},getVertices:function(e){return!0===e?[this.components[0],this.components[this.components.length-1]]:!1===e?this.components.slice(1,this.components.length-1):this.components.slice()},distanceTo:function(e,t){var i,s=!(t&&!1===t.edge)&&t&&t.details,n={},r=Number.POSITIVE_INFINITY;if(e instanceof OpenLayers.Geometry.Point){for(var a=this.getSortedSegments(),o=e.x,l=e.y,h=0,p=a.length;h<p;++h)if(y=a[h],(i=OpenLayers.Geometry.distanceToSegment(e,y)).distance<r){if(0===(r=(n=i).distance))break}else if(y.x2>o&&(l>y.y1&&l<y.y2||l<y.y1&&l>y.y2))break;n=s?{distance:n.distance,x0:n.x,y0:n.y,x1:o,y1:l}:n.distance}else if(e instanceof OpenLayers.Geometry.LineString){var u,a=this.getSortedSegments(),c=(o=e.getSortedSegments()).length,d={point:!0},h=0,p=a.length;e:for(;h<p;++h)for(var y=(l=a[h]).x1,m=l.y1,f=0;f<c;++f){if(i=o[f],u=OpenLayers.Geometry.segmentsIntersect(l,i,d)){n={distance:r=0,x0:u.x,y0:u.y,x1:u.x,y1:u.y};break e}(i=OpenLayers.Geometry.distanceToSegment({x:y,y:m},i)).distance<r&&(n={distance:r=i.distance,x0:y,y0:m,x1:i.x,y1:i.y})}s||(n=n.distance),0!==r&&l&&(i=e.distanceTo(new OpenLayers.Geometry.Point(l.x2,l.y2),t),(h=s?i.distance:i)<r&&(n=s?{distance:r,x0:i.x1,y0:i.y1,x1:i.x0,y1:i.y0}:h))}else n=e.distanceTo(this,t),s&&(n={distance:n.distance,x0:n.x1,y0:n.y1,x1:n.x0,y1:n.y0});return n},simplify:function(e){if(this&&null!==this){var t=this.getVertices();if(t.length<3)return this;var i=function e(t,i,s,n){for(var r=0,a=0,o=i;o<s;o++){var l=t[i],h=t[s],p=t[o];r<(l=Math.abs(.5*(l.x*h.y+h.x*p.y+p.x*l.y-h.x*l.y-p.x*h.y-l.x*p.y))/Math.sqrt(Math.pow(l.x-h.x,2)+Math.pow(l.y-h.y,2))*2)&&(r=l,a=o)}n<r&&a!=i&&(u.push(a),e(t,i,a,n),e(t,a,s,n))},s=t.length-1,u=[];for(u.push(0),u.push(s);t[0].equals(t[s]);)u.push(--s);for(i(t,0,s,e),e=[],u.sort(function(e,t){return e-t}),s=0;s<u.length;s++)e.push(t[u[s]]);return new OpenLayers.Geometry.LineString(e)}return this},CLASS_NAME:"OpenLayers.Geometry.LineString"}),OpenLayers.Geometry.MultiLineString=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.LineString"],split:function(e,t){for(var i,s,n,r=null,a=t&&t.mutual,o=[],l=[e],h=0,p=this.components.length;h<p;++h){s=this.components[h],c=!1;for(var u=0;u<l.length;++u)if(i=s.split(l[u],t)){if(a){for(var c,d=0,y=(c=i[0]).length;d<y;++d)0===d&&o.length?o[o.length-1].addComponent(c[d]):o.push(new OpenLayers.Geometry.MultiLineString([c[d]]));c=!0,i=i[1]}if(i.length){i.unshift(u,1),Array.prototype.splice.apply(l,i);break}}c||(o.length?o[o.length-1].addComponent(s.clone()):o=[new OpenLayers.Geometry.MultiLineString(s.clone())])}return o&&1<o.length?c=!0:o=[],l&&1<l.length?n=!0:l=[],r=c||n?a?[o,l]:l:r},splitWith:function(e,t){var i,s,n=null,r=t&&t.mutual;if(e instanceof OpenLayers.Geometry.LineString)for(var a=[],o=[e],l=0,h=this.components.length;l<h;++l){c=!1;for(var p=this.components[l],u=0;u<o.length;++u)if(i=o[u].split(p,t)){r&&((c=i[0]).length&&(c.unshift(u,1),Array.prototype.splice.apply(o,c),u+=c.length-2),0===(i=i[1]).length&&(i=[p.clone()]));for(var c=0,d=i.length;c<d;++c)0===c&&a.length?a[a.length-1].addComponent(i[c]):a.push(new OpenLayers.Geometry.MultiLineString([i[c]]));c=!0}c||(a.length?a[a.length-1].addComponent(p.clone()):a=[new OpenLayers.Geometry.MultiLineString([p.clone()])])}else n=e.split(this);return o&&1<o.length?s=!0:o=[],a&&1<a.length?c=!0:a=[],n=s||c?r?[o,a]:a:n},CLASS_NAME:"OpenLayers.Geometry.MultiLineString"}),OpenLayers.Geometry.LinearRing=OpenLayers.Class(OpenLayers.Geometry.LineString,{componentTypes:["OpenLayers.Geometry.Point"],addComponent:function(e,t){var i=!1,s=this.components.pop();return null==t&&e.equals(s)||(i=OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,arguments)),OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,[this.components[0]]),i},removeComponent:function(e){var t=this.components&&3<this.components.length;return t&&(this.components.pop(),OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this,arguments),OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,[this.components[0]])),t},move:function(e,t){for(var i=0,s=this.components.length;i<s-1;i++)this.components[i].move(e,t)},rotate:function(e,t){for(var i=0,s=this.components.length;i<s-1;++i)this.components[i].rotate(e,t)},resize:function(e,t,i){for(var s=0,n=this.components.length;s<n-1;++s)this.components[s].resize(e,t,i);return this},transform:function(e,t){if(e&&t){for(var i=0,s=this.components.length;i<s-1;i++)this.components[i].transform(e,t);this.bounds=null}return this},getCentroid:function(){if(this.components){var e=this.components.length;if(0<e&&e<=2)return this.components[0].clone();if(2<e){var t=0,i=0,s=this.components[0].x,n=this.components[0].y,r=-1*this.getArea();if(0!=r){for(var a=0;a<e-1;a++)var o=this.components[a],l=this.components[a+1],t=t+(o.x+l.x-2*s)*((o.x-s)*(l.y-n)-(l.x-s)*(o.y-n)),i=i+(o.y+l.y-2*n)*((o.x-s)*(l.y-n)-(l.x-s)*(o.y-n));t=s+t/(6*r),e=n+i/(6*r)}else{for(a=0;a<e-1;a++)t+=this.components[a].x,i+=this.components[a].y;t/=e-1,e=i/(e-1)}return new OpenLayers.Geometry.Point(t,e)}return null}},getArea:function(){var e=0;if(this.components&&2<this.components.length){for(var t=e=0,i=this.components.length;t<i-1;t++)var s=this.components[t],n=this.components[t+1],e=e+(s.x+n.x)*(n.y-s.y);e=-e/2}return e},getGeodesicArea:function(e){var t,i=this;if(!e||(t=new OpenLayers.Projection("EPSG:4326")).equals(e)||(i=this.clone().transform(e,t)),e=0,2<(t=i.components&&i.components.length)){for(var s,n,r=0;r<t-1;r++)s=i.components[r],n=i.components[r+1],e+=OpenLayers.Util.rad(n.x-s.x)*(2+Math.sin(OpenLayers.Util.rad(s.y))+Math.sin(OpenLayers.Util.rad(n.y)));e=40680631590769*e/2}return e},containsPoint:function(e){var t=OpenLayers.Number.limitSigDigs,i=t(e.x,14);e=t(e.y,14);for(var s,n,r,a,o,l=this.components.length-1,h=0,p=0;p<l;++p)if(r=t((s=this.components[p]).x,14),s=t(s.y,14),a=t((n=this.components[p+1]).x,14),s==(n=t(n.y,14))){if(e==s&&(r<=a&&r<=i&&i<=a||a<=r&&i<=r&&a<=i)){h=-1;break}}else{if((o=t((a-r)/(n-s)*(e-n)+a,14))==i&&(s<n&&s<=e&&e<=n||n<s&&e<=s&&n<=e)){h=-1;break}o<=i||r!=a&&(o<Math.min(r,a)||o>Math.max(r,a))||(s<n&&s<=e&&e<n||n<s&&e<s&&n<=e)&&++h}return-1==h?1:!!(1&h)},intersects:function(e){var t=!1;if("OpenLayers.Geometry.Point"==e.CLASS_NAME)t=this.containsPoint(e);else if("OpenLayers.Geometry.LineString"==e.CLASS_NAME)t=e.intersects(this);else if("OpenLayers.Geometry.LinearRing"==e.CLASS_NAME)t=OpenLayers.Geometry.LineString.prototype.intersects.apply(this,[e]);else for(var i=0,s=e.components.length;i<s&&!(t=e.components[i].intersects(this));++i);return t},getVertices:function(e){return!0===e?[]:this.components.slice(0,this.components.length-1)},CLASS_NAME:"OpenLayers.Geometry.LinearRing"}),OpenLayers.Geometry.Polygon=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.LinearRing"],getArea:function(){var e=0;if(this.components&&0<this.components.length)for(var e=e+Math.abs(this.components[0].getArea()),t=1,i=this.components.length;t<i;t++)e-=Math.abs(this.components[t].getArea());return e},getGeodesicArea:function(e){var t=0;if(this.components&&0<this.components.length)for(var t=t+Math.abs(this.components[0].getGeodesicArea(e)),i=1,s=this.components.length;i<s;i++)t-=Math.abs(this.components[i].getGeodesicArea(e));return t},containsPoint:function(e){var t=this.components.length,i=!1;if(0<t&&(1!==(i=this.components[0].containsPoint(e))&&i&&1<t))for(var s,n=1;n<t;++n)if(s=this.components[n].containsPoint(e)){i=1===s&&1;break}return i},intersects:function(e){var t=!1;if("OpenLayers.Geometry.Point"==e.CLASS_NAME)t=this.containsPoint(e);else if("OpenLayers.Geometry.LineString"==e.CLASS_NAME||"OpenLayers.Geometry.LinearRing"==e.CLASS_NAME){for(s=0,n=this.components.length;s<n&&!(t=e.intersects(this.components[s]));++s);if(!t)for(s=0,n=e.components.length;s<n&&!(t=this.containsPoint(e.components[s]));++s);}else for(s=0,n=e.components.length;s<n&&!(t=this.intersects(e.components[s]));++s);if(!t&&"OpenLayers.Geometry.Polygon"==e.CLASS_NAME)for(var i=this.components[0],s=0,n=i.components.length;s<n&&!(t=e.containsPoint(i.components[s]));++s);return t},distanceTo:function(e,t){return t&&!1===t.edge&&this.intersects(e)?0:OpenLayers.Geometry.Collection.prototype.distanceTo.apply(this,[e,t])},CLASS_NAME:"OpenLayers.Geometry.Polygon"}),OpenLayers.Geometry.Polygon.createRegularPolygon=function(e,t,i,s){var n=Math.PI*(1/i-.5);s&&(n+=s/180*Math.PI);for(var r,a=[],o=0;o<i;++o)r=n+2*o*Math.PI/i,s=e.x+t*Math.cos(r),r=e.y+t*Math.sin(r),a.push(new OpenLayers.Geometry.Point(s,r));return e=new OpenLayers.Geometry.LinearRing(a),new OpenLayers.Geometry.Polygon([e])},OpenLayers.Geometry.MultiPolygon=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.Polygon"],CLASS_NAME:"OpenLayers.Geometry.MultiPolygon"}),OpenLayers.Format.GML=OpenLayers.Class(OpenLayers.Format.XML,{featureNS:"http://mapserver.gis.umn.edu/mapserver",featurePrefix:"feature",featureName:"featureMember",layerName:"features",geometryName:"geometry",collectionName:"FeatureCollection",gmlns:"http://www.opengis.net/gml",extractAttributes:!0,xy:!0,initialize:function(e){this.regExes={trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e=this.getElementsByTagNameNS(e.documentElement,this.gmlns,this.featureName);for(var t=[],i=0;i<e.length;i++){var s=this.parseFeature(e[i]);s&&t.push(s)}return t},parseFeature:function(e){for(var t,i,s,n,r,a,o="MultiPolygon Polygon MultiLineString LineString MultiPoint Point Envelope".split(" "),l=0;l<o.length;++l)if(t=o[l],0<(i=this.getElementsByTagNameNS(e,this.gmlns,t)).length){if(!(s=this.parseGeometry[t.toLowerCase()]))throw new TypeError("Unsupported geometry type: "+t);s=s.apply(this,[i[0]]),this.internalProjection&&this.externalProjection&&s.transform(this.externalProjection,this.internalProjection);break}for(t=this.getElementsByTagNameNS(e,this.gmlns,"Box"),l=0;l<t.length;++l)o=t[l],i=this.parseGeometry.box.apply(this,[o]),"boundedBy"===((o=o.parentNode).localName||o.nodeName.split(":").pop())?n=i:s=i.toGeometry();for(this.extractAttributes&&(r=this.parseAttributes(e)),(r=new OpenLayers.Feature.Vector(s,r)).bounds=n,r.gml={featureType:e.firstChild.nodeName.split(":")[1],featureNS:e.firstChild.namespaceURI,featureNSPrefix:e.firstChild.prefix},e=e.firstChild;e&&(1!=e.nodeType||!(a=e.getAttribute("fid")||e.getAttribute("id")));)e=e.nextSibling;return r.fid=a,r},parseGeometry:{point:function(e){var t=[],i=this.getElementsByTagNameNS(e,this.gmlns,"pos");return 0==(t=0<i.length?(t=(t=i[0].firstChild.nodeValue).replace(this.regExes.trimSpace,"")).split(this.regExes.splitSpace):t).length&&(0<(i=this.getElementsByTagNameNS(e,this.gmlns,"coordinates")).length&&(t=(t=(t=i[0].firstChild.nodeValue).replace(this.regExes.removeSpace,"")).split(","))),0==t.length&&(0<(i=this.getElementsByTagNameNS(e,this.gmlns,"coord")).length&&(e=this.getElementsByTagNameNS(i[0],this.gmlns,"X"),i=this.getElementsByTagNameNS(i[0],this.gmlns,"Y"),0<e.length&&0<i.length&&(t=[e[0].firstChild.nodeValue,i[0].firstChild.nodeValue]))),2==t.length&&(t[2]=null),this.xy?new OpenLayers.Geometry.Point(t[0],t[1],t[2]):new OpenLayers.Geometry.Point(t[1],t[0],t[2])},multipoint:function(e){var t=[];if(0<(e=this.getElementsByTagNameNS(e,this.gmlns,"Point")).length)for(var i,s=0;s<e.length;++s)(i=this.parseGeometry.point.apply(this,[e[s]]))&&t.push(i);return new OpenLayers.Geometry.MultiPoint(t)},linestring:function(e,t){a=[];var i=[];if(0<(l=this.getElementsByTagNameNS(e,this.gmlns,"posList")).length)for(var s,n,r,a=(a=(a=this.getChildValue(l[0])).replace(this.regExes.trimSpace,"")).split(this.regExes.splitSpace),o=parseInt(l[0].getAttribute("dimension")),l=0;l<a.length/o;++l)n=a[s=l*o],r=a[s+1],s=2==o?null:a[s+2],this.xy?i.push(new OpenLayers.Geometry.Point(n,r,s)):i.push(new OpenLayers.Geometry.Point(r,n,s));if(0==a.length&&0<(l=this.getElementsByTagNameNS(e,this.gmlns,"coordinates")).length)for(o=(a=(a=(a=this.getChildValue(l[0])).replace(this.regExes.trimSpace,"")).replace(this.regExes.trimComma,",")).split(this.regExes.splitSpace),l=0;l<o.length;++l)2==(a=o[l].split(",")).length&&(a[2]=null),this.xy?i.push(new OpenLayers.Geometry.Point(a[0],a[1],a[2])):i.push(new OpenLayers.Geometry.Point(a[1],a[0],a[2]));return a=null,a=0!=i.length?new(t?OpenLayers.Geometry.LinearRing:OpenLayers.Geometry.LineString)(i):a},multilinestring:function(e){var t=[];if(0<(e=this.getElementsByTagNameNS(e,this.gmlns,"LineString")).length)for(var i,s=0;s<e.length;++s)(i=this.parseGeometry.linestring.apply(this,[e[s]]))&&t.push(i);return new OpenLayers.Geometry.MultiLineString(t)},polygon:function(e){var t=[];if(0<(e=this.getElementsByTagNameNS(e,this.gmlns,"LinearRing")).length)for(var i,s=0;s<e.length;++s)(i=this.parseGeometry.linestring.apply(this,[e[s],!0]))&&t.push(i);return new OpenLayers.Geometry.Polygon(t)},multipolygon:function(e){var t=[];if(0<(e=this.getElementsByTagNameNS(e,this.gmlns,"Polygon")).length)for(var i,s=0;s<e.length;++s)(i=this.parseGeometry.polygon.apply(this,[e[s]]))&&t.push(i);return new OpenLayers.Geometry.MultiPolygon(t)},envelope:function(e){var t,i,s,n,r=[],a=this.getElementsByTagNameNS(e,this.gmlns,"lowerCorner");return 0<a.length&&(t=[],2==(t=0<a.length?(t=(t=a[0].firstChild.nodeValue).replace(this.regExes.trimSpace,"")).split(this.regExes.splitSpace):t).length&&(t[2]=null),s=this.xy?new OpenLayers.Geometry.Point(t[0],t[1],t[2]):new OpenLayers.Geometry.Point(t[1],t[0],t[2])),0<(e=this.getElementsByTagNameNS(e,this.gmlns,"upperCorner")).length&&(t=[],2==(t=0<e.length?(t=(t=e[0].firstChild.nodeValue).replace(this.regExes.trimSpace,"")).split(this.regExes.splitSpace):t).length&&(t[2]=null),n=this.xy?new OpenLayers.Geometry.Point(t[0],t[1],t[2]):new OpenLayers.Geometry.Point(t[1],t[0],t[2])),s&&n&&(r.push(new OpenLayers.Geometry.Point(s.x,s.y)),r.push(new OpenLayers.Geometry.Point(n.x,s.y)),r.push(new OpenLayers.Geometry.Point(n.x,n.y)),r.push(new OpenLayers.Geometry.Point(s.x,n.y)),r.push(new OpenLayers.Geometry.Point(s.x,s.y)),r=new OpenLayers.Geometry.LinearRing(r),i=new OpenLayers.Geometry.Polygon([r])),i},box:function(e){var t=this.getElementsByTagNameNS(e,this.gmlns,"coordinates"),i=e=null;if(0<t.length&&(2==(t=(t=t[0].firstChild.nodeValue).split(" ")).length&&(e=t[0].split(","),i=t[1].split(","))),null!==e&&null!==i)return new OpenLayers.Bounds(parseFloat(e[0]),parseFloat(e[1]),parseFloat(i[0]),parseFloat(i[1]))}},parseAttributes:function(e){var t,i,s,n={};for(e=e.firstChild;e;){if(1==e.nodeType){for(e=e.childNodes,t=0;t<e.length;++t)1==(i=e[t]).nodeType&&(1==(s=i.childNodes).length?3!=(s=s[0]).nodeType&&4!=s.nodeType||(i=i.prefix?i.nodeName.split(":")[1]:i.nodeName,s=s.nodeValue.replace(this.regExes.trimSpace,""),n[i]=s):n[i.nodeName.split(":").pop()]=null);break}e=e.nextSibling}return n},write:function(e){OpenLayers.Util.isArray(e)||(e=[e]);for(var t=this.createElementNS("http://www.opengis.net/wfs","wfs:"+this.collectionName),i=0;i<e.length;i++)t.appendChild(this.createFeatureXML(e[i]));return OpenLayers.Format.XML.prototype.write.apply(this,[t])},createFeatureXML:function(e){var t,i=this.buildGeometryNode(e.geometry),i=((n=this.createElementNS(this.featureNS,this.featurePrefix+":"+this.geometryName)).appendChild(i),this.createElementNS(this.gmlns,"gml:"+this.featureName)),s=this.createElementNS(this.featureNS,this.featurePrefix+":"+this.layerName);for(t in s.setAttribute("fid",e.fid||e.id),s.appendChild(n),e.attributes){var n=this.createTextNode(e.attributes[t]),r=t.substring(t.lastIndexOf(":")+1);(r=this.createElementNS(this.featureNS,this.featurePrefix+":"+r)).appendChild(n),s.appendChild(r)}return i.appendChild(s),i},buildGeometryNode:function(e){this.externalProjection&&this.internalProjection&&(e=e.clone()).transform(this.internalProjection,this.externalProjection);var t=(t=e.CLASS_NAME).substring(t.lastIndexOf(".")+1);return this.buildGeometry[t.toLowerCase()].apply(this,[e])},buildGeometry:{point:function(e){var t=this.createElementNS(this.gmlns,"gml:Point");return t.appendChild(this.buildCoordinatesNode(e)),t},multipoint:function(e){var t=this.createElementNS(this.gmlns,"gml:MultiPoint");e=e.components;for(var i,s,n=0;n<e.length;n++)i=this.createElementNS(this.gmlns,"gml:pointMember"),s=this.buildGeometry.point.apply(this,[e[n]]),i.appendChild(s),t.appendChild(i);return t},linestring:function(e){var t=this.createElementNS(this.gmlns,"gml:LineString");return t.appendChild(this.buildCoordinatesNode(e)),t},multilinestring:function(e){var t=this.createElementNS(this.gmlns,"gml:MultiLineString");e=e.components;for(var i,s,n=0;n<e.length;++n)i=this.createElementNS(this.gmlns,"gml:lineStringMember"),s=this.buildGeometry.linestring.apply(this,[e[n]]),i.appendChild(s),t.appendChild(i);return t},linearring:function(e){var t=this.createElementNS(this.gmlns,"gml:LinearRing");return t.appendChild(this.buildCoordinatesNode(e)),t},polygon:function(e){var t=this.createElementNS(this.gmlns,"gml:Polygon");e=e.components;for(var i,s,n=0;n<e.length;++n)i=this.createElementNS(this.gmlns,"gml:"+(i=0==n?"outerBoundaryIs":"innerBoundaryIs")),s=this.buildGeometry.linearring.apply(this,[e[n]]),i.appendChild(s),t.appendChild(i);return t},multipolygon:function(e){var t=this.createElementNS(this.gmlns,"gml:MultiPolygon");e=e.components;for(var i,s,n=0;n<e.length;++n)i=this.createElementNS(this.gmlns,"gml:polygonMember"),s=this.buildGeometry.polygon.apply(this,[e[n]]),i.appendChild(s),t.appendChild(i);return t},bounds:function(e){var t=this.createElementNS(this.gmlns,"gml:Box");return t.appendChild(this.buildCoordinatesNode(e)),t}},buildCoordinatesNode:function(e){var t=this.createElementNS(this.gmlns,"gml:coordinates"),i=(t.setAttribute("decimal","."),t.setAttribute("cs",","),t.setAttribute("ts"," "),[]);if(e instanceof OpenLayers.Bounds)i.push(e.left+","+e.bottom),i.push(e.right+","+e.top);else{e=e.components||[e];for(var s=0;s<e.length;s++)i.push(e[s].x+","+e[s].y)}return i=this.createTextNode(i.join(" ")),t.appendChild(i),t},CLASS_NAME:"OpenLayers.Format.GML"}),OpenLayers.Format.GML||(OpenLayers.Format.GML={}),OpenLayers.Format.GML.Base=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{gml:"http://www.opengis.net/gml",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",wfs:"http://www.opengis.net/wfs"},defaultPrefix:"gml",schemaLocation:null,featureType:null,featureNS:null,geometryName:"geometry",extractAttributes:!0,srsName:null,xy:!0,geometryTypes:null,singleFeatureType:null,regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g,featureMember:/^(.*:)?featureMembers?$/},initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e]),this.setGeometryTypes(),e&&e.featureNS&&this.setNamespace("feature",e.featureNS),this.singleFeatureType=!e||"string"==typeof e.featureType},read:function(e){(e="string"==typeof e?OpenLayers.Format.XML.prototype.read.apply(this,[e]):e)&&9==e.nodeType&&(e=e.documentElement);var t=[];if(this.readNode(e,{features:t},!0),0==t.length){var i=this.getElementsByTagNameNS(e,this.namespaces.gml,"featureMember");if(i.length){e=0;for(var s=i.length;e<s;++e)this.readNode(i[e],{features:t},!0)}else(i=this.getElementsByTagNameNS(e,this.namespaces.gml,"featureMembers")).length&&this.readNode(i[0],{features:t},!0)}return t},readNode:function(e,t,i){return!0===i&&!0===this.autoConfig&&(this.featureType=null,delete this.namespaceAlias[this.featureNS],delete this.namespaces.feature,this.featureNS=null),this.featureNS||e.prefix in this.namespaces||e.parentNode.namespaceURI!=this.namespaces.gml||!this.regExes.featureMember.test(e.parentNode.nodeName)||(this.featureType=e.nodeName.split(":").pop(),this.setNamespace("feature",e.namespaceURI),this.featureNS=e.namespaceURI,this.autoConfig=!0),OpenLayers.Format.XML.prototype.readNode.apply(this,[e,t])},readers:{gml:{_inherit:function(e,t,i){},featureMember:function(e,t){this.readChildNodes(e,t)},featureMembers:function(e,t){this.readChildNodes(e,t)},name:function(e,t){t.name=this.getChildValue(e)},boundedBy:function(e,t){var i={};this.readChildNodes(e,i),i.components&&0<i.components.length&&(t.bounds=i.components[0])},Point:function(e,t){var i={points:[]};this.readChildNodes(e,i),t.components||(t.components=[]),t.components.push(i.points[0])},coordinates:function(e,t){for(var i,s=this.getChildValue(e).replace(this.regExes.trimSpace,""),n=(s=(s=s.replace(this.regExes.trimComma,",")).split(this.regExes.splitSpace)).length,r=Array(n),a=0;a<n;++a)i=s[a].split(","),r[a]=this.xy?new OpenLayers.Geometry.Point(i[0],i[1],i[2]):new OpenLayers.Geometry.Point(i[1],i[0],i[2]);t.points=r},coord:function(e,t){var i={};this.readChildNodes(e,i),t.points||(t.points=[]),t.points.push(new OpenLayers.Geometry.Point(i.x,i.y,i.z))},X:function(e,t){t.x=this.getChildValue(e)},Y:function(e,t){t.y=this.getChildValue(e)},Z:function(e,t){t.z=this.getChildValue(e)},MultiPoint:function(e,t){var i={components:[]};this.readers.gml._inherit.apply(this,[e,i,t]),this.readChildNodes(e,i),t.components=[new OpenLayers.Geometry.MultiPoint(i.components)]},pointMember:function(e,t){this.readChildNodes(e,t)},LineString:function(e,t){var i={};this.readers.gml._inherit.apply(this,[e,i,t]),this.readChildNodes(e,i),t.components||(t.components=[]),t.components.push(new OpenLayers.Geometry.LineString(i.points))},MultiLineString:function(e,t){var i={components:[]};this.readers.gml._inherit.apply(this,[e,i,t]),this.readChildNodes(e,i),t.components=[new OpenLayers.Geometry.MultiLineString(i.components)]},lineStringMember:function(e,t){this.readChildNodes(e,t)},Polygon:function(e,t){var i={outer:null,inner:[]};this.readers.gml._inherit.apply(this,[e,i,t]),this.readChildNodes(e,i),i.inner.unshift(i.outer),t.components||(t.components=[]),t.components.push(new OpenLayers.Geometry.Polygon(i.inner))},LinearRing:function(e,t){var i={};this.readers.gml._inherit.apply(this,[e,i]),this.readChildNodes(e,i),t.components=[new OpenLayers.Geometry.LinearRing(i.points)]},MultiPolygon:function(e,t){var i={components:[]};this.readers.gml._inherit.apply(this,[e,i,t]),this.readChildNodes(e,i),t.components=[new OpenLayers.Geometry.MultiPolygon(i.components)]},polygonMember:function(e,t){this.readChildNodes(e,t)},GeometryCollection:function(e,t){var i={components:[]};this.readers.gml._inherit.apply(this,[e,i,t]),this.readChildNodes(e,i),t.components=[new OpenLayers.Geometry.Collection(i.components)]},geometryMember:function(e,t){this.readChildNodes(e,t)}},feature:{"*":function(e,t){var i,s=e.localName||e.nodeName.split(":").pop();t.features?(this.singleFeatureType||-1===OpenLayers.Util.indexOf(this.featureType,s))&&s!==this.featureType||(i="_typeName"):0==e.childNodes.length||1==e.childNodes.length&&3==e.firstChild.nodeType?this.extractAttributes&&(i="_attribute"):i="_geometry",i&&this.readers.feature[i].apply(this,[e,t])},_typeName:function(e,t){var i={components:[],attributes:{}},s=(this.readChildNodes(e,i),i.name&&(i.attributes.name=i.name),new OpenLayers.Feature.Vector(i.components[0],i.attributes)),e=(this.singleFeatureType||(s.type=e.nodeName.split(":").pop(),s.namespace=e.namespaceURI),e.getAttribute("fid")||this.getAttributeNS(e,this.namespaces.gml,"id"));e&&(s.fid=e),this.internalProjection&&this.externalProjection&&s.geometry&&s.geometry.transform(this.externalProjection,this.internalProjection),i.bounds&&(s.bounds=i.bounds),t.features.push(s)},_geometry:function(e,t){this.geometryName||(this.geometryName=e.nodeName.split(":").pop()),this.readChildNodes(e,t)},_attribute:function(e,t){var i=e.localName||e.nodeName.split(":").pop(),e=this.getChildValue(e);t.attributes[i]=e}},wfs:{FeatureCollection:function(e,t){this.readChildNodes(e,t)}}},write:function(e){var t=OpenLayers.Util.isArray(e)?"featureMembers":"featureMember";return e=this.writeNode("gml:"+t,e),this.setAttributeNS(e,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[e])},writers:{gml:{featureMember:function(e){var t=this.createElementNSPlus("gml:featureMember");return this.writeNode("feature:_typeName",e,t),t},MultiPoint:function(e){for(var t=this.createElementNSPlus("gml:MultiPoint"),i=0,s=(e=e.components||[e]).length;i<s;++i)this.writeNode("pointMember",e[i],t);return t},pointMember:function(e){var t=this.createElementNSPlus("gml:pointMember");return this.writeNode("Point",e,t),t},MultiLineString:function(e){for(var t=this.createElementNSPlus("gml:MultiLineString"),i=0,s=(e=e.components||[e]).length;i<s;++i)this.writeNode("lineStringMember",e[i],t);return t},lineStringMember:function(e){var t=this.createElementNSPlus("gml:lineStringMember");return this.writeNode("LineString",e,t),t},MultiPolygon:function(e){for(var t=this.createElementNSPlus("gml:MultiPolygon"),i=0,s=(e=e.components||[e]).length;i<s;++i)this.writeNode("polygonMember",e[i],t);return t},polygonMember:function(e){var t=this.createElementNSPlus("gml:polygonMember");return this.writeNode("Polygon",e,t),t},GeometryCollection:function(e){for(var t=this.createElementNSPlus("gml:GeometryCollection"),i=0,s=e.components.length;i<s;++i)this.writeNode("geometryMember",e.components[i],t);return t},geometryMember:function(e){var t=this.createElementNSPlus("gml:geometryMember");return e=this.writeNode("feature:_geometry",e),t.appendChild(e.firstChild),t}},feature:{_typeName:function(e){var t,i=this.createElementNSPlus("feature:"+this.featureType,{attributes:{fid:e.fid}});for(t in e.geometry&&this.writeNode("feature:_geometry",e.geometry,i),e.attributes){var s=e.attributes[t];null!=s&&this.writeNode("feature:_attribute",{name:t,value:s},i)}return i},_geometry:function(e){this.externalProjection&&this.internalProjection&&(e=e.clone().transform(this.internalProjection,this.externalProjection));var t=this.createElementNSPlus("feature:"+this.geometryName);return e=this.writeNode("gml:"+this.geometryTypes[e.CLASS_NAME],e,t),this.srsName&&e.setAttribute("srsName",this.srsName),t},_attribute:function(e){return this.createElementNSPlus("feature:"+e.name,{value:e.value})}},wfs:{FeatureCollection:function(e){for(var t=this.createElementNSPlus("wfs:FeatureCollection"),i=0,s=e.length;i<s;++i)this.writeNode("gml:featureMember",e[i],t);return t}}},setGeometryTypes:function(){this.geometryTypes={"OpenLayers.Geometry.Point":"Point","OpenLayers.Geometry.MultiPoint":"MultiPoint","OpenLayers.Geometry.LineString":"LineString","OpenLayers.Geometry.MultiLineString":"MultiLineString","OpenLayers.Geometry.Polygon":"Polygon","OpenLayers.Geometry.MultiPolygon":"MultiPolygon","OpenLayers.Geometry.Collection":"GeometryCollection"}},CLASS_NAME:"OpenLayers.Format.GML.Base"}),OpenLayers.Format.GML.v3=OpenLayers.Class(OpenLayers.Format.GML.Base,{schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",curve:!1,multiCurve:!0,surface:!1,multiSurface:!0,initialize:function(e){OpenLayers.Format.GML.Base.prototype.initialize.apply(this,[e])},readers:{gml:OpenLayers.Util.applyDefaults({_inherit:function(e,t,i){(e=parseInt(e.getAttribute("srsDimension"),10)||i&&i.srsDimension)&&(t.srsDimension=e)},featureMembers:function(e,t){this.readChildNodes(e,t)},Curve:function(e,t){var i={points:[]};this.readers.gml._inherit.apply(this,[e,i,t]),this.readChildNodes(e,i),t.components||(t.components=[]),t.components.push(new OpenLayers.Geometry.LineString(i.points))},segments:function(e,t){this.readChildNodes(e,t)},LineStringSegment:function(e,t){var i={};this.readChildNodes(e,i),i.points&&Array.prototype.push.apply(t.points,i.points)},pos:function(e,t){e=this.getChildValue(e).replace(this.regExes.trimSpace,"").split(this.regExes.splitSpace),e=this.xy?new OpenLayers.Geometry.Point(e[0],e[1],e[2]):new OpenLayers.Geometry.Point(e[1],e[0],e[2]);t.points=[e]},posList:function(e,t){for(var i,s,n,r=this.getChildValue(e).replace(this.regExes.trimSpace,"").split(this.regExes.splitSpace),a=t.srsDimension||parseInt(e.getAttribute("srsDimension")||e.getAttribute("dimension"),10)||2,o=Array(r.length/a),l=0,h=r.length;l<h;l+=a)i=r[l],s=r[l+1],n=2==a?void 0:r[l+2],o[l/a]=this.xy?new OpenLayers.Geometry.Point(i,s,n):new OpenLayers.Geometry.Point(s,i,n);t.points=o},Surface:function(e,t){this.readChildNodes(e,t)},patches:function(e,t){this.readChildNodes(e,t)},PolygonPatch:function(e,t){this.readers.gml.Polygon.apply(this,[e,t])},exterior:function(e,t){var i={};this.readChildNodes(e,i),t.outer=i.components[0]},interior:function(e,t){var i={};this.readChildNodes(e,i),t.inner.push(i.components[0])},MultiCurve:function(e,t){var i={components:[]};this.readers.gml._inherit.apply(this,[e,i,t]),this.readChildNodes(e,i),0<i.components.length&&(t.components=[new OpenLayers.Geometry.MultiLineString(i.components)])},curveMember:function(e,t){this.readChildNodes(e,t)},MultiSurface:function(e,t){var i={components:[]};this.readers.gml._inherit.apply(this,[e,i,t]),this.readChildNodes(e,i),0<i.components.length&&(t.components=[new OpenLayers.Geometry.MultiPolygon(i.components)])},surfaceMember:function(e,t){this.readChildNodes(e,t)},surfaceMembers:function(e,t){this.readChildNodes(e,t)},pointMembers:function(e,t){this.readChildNodes(e,t)},lineStringMembers:function(e,t){this.readChildNodes(e,t)},polygonMembers:function(e,t){this.readChildNodes(e,t)},geometryMembers:function(e,t){this.readChildNodes(e,t)},Envelope:function(e,t){var i={points:Array(2)},e=(this.readChildNodes(e,i),t.components||(t.components=[]),i.points[0]),i=i.points[1];t.components.push(new OpenLayers.Bounds(e.x,e.y,i.x,i.y))},lowerCorner:function(e,t){var i={};this.readers.gml.pos.apply(this,[e,i]),t.points[0]=i.points[0]},upperCorner:function(e,t){var i={};this.readers.gml.pos.apply(this,[e,i]),t.points[1]=i.points[0]}},OpenLayers.Format.GML.Base.prototype.readers.gml),feature:OpenLayers.Format.GML.Base.prototype.readers.feature,wfs:OpenLayers.Format.GML.Base.prototype.readers.wfs},write:function(e){var t=OpenLayers.Util.isArray(e)?"featureMembers":"featureMember";return e=this.writeNode("gml:"+t,e),this.setAttributeNS(e,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[e])},writers:{gml:OpenLayers.Util.applyDefaults({featureMembers:function(e){for(var t=this.createElementNSPlus("gml:featureMembers"),i=0,s=e.length;i<s;++i)this.writeNode("feature:_typeName",e[i],t);return t},Point:function(e){var t=this.createElementNSPlus("gml:Point");return this.writeNode("pos",e,t),t},pos:function(e){return this.createElementNSPlus("gml:pos",{value:this.xy?e.x+" "+e.y:e.y+" "+e.x})},LineString:function(e){var t=this.createElementNSPlus("gml:LineString");return this.writeNode("posList",e.components,t),t},Curve:function(e){var t=this.createElementNSPlus("gml:Curve");return this.writeNode("segments",e,t),t},segments:function(e){var t=this.createElementNSPlus("gml:segments");return this.writeNode("LineStringSegment",e,t),t},LineStringSegment:function(e){var t=this.createElementNSPlus("gml:LineStringSegment");return this.writeNode("posList",e.components,t),t},posList:function(e){for(var t,i=e.length,s=Array(i),n=0;n<i;++n)t=e[n],s[n]=this.xy?t.x+" "+t.y:t.y+" "+t.x;return this.createElementNSPlus("gml:posList",{value:s.join(" ")})},Surface:function(e){var t=this.createElementNSPlus("gml:Surface");return this.writeNode("patches",e,t),t},patches:function(e){var t=this.createElementNSPlus("gml:patches");return this.writeNode("PolygonPatch",e,t),t},PolygonPatch:function(e){var t=this.createElementNSPlus("gml:PolygonPatch",{attributes:{interpolation:"planar"}});this.writeNode("exterior",e.components[0],t);for(var i=1,s=e.components.length;i<s;++i)this.writeNode("interior",e.components[i],t);return t},Polygon:function(e){var t=this.createElementNSPlus("gml:Polygon");this.writeNode("exterior",e.components[0],t);for(var i=1,s=e.components.length;i<s;++i)this.writeNode("interior",e.components[i],t);return t},exterior:function(e){var t=this.createElementNSPlus("gml:exterior");return this.writeNode("LinearRing",e,t),t},interior:function(e){var t=this.createElementNSPlus("gml:interior");return this.writeNode("LinearRing",e,t),t},LinearRing:function(e){var t=this.createElementNSPlus("gml:LinearRing");return this.writeNode("posList",e.components,t),t},MultiCurve:function(e){for(var t=this.createElementNSPlus("gml:MultiCurve"),i=0,s=(e=e.components||[e]).length;i<s;++i)this.writeNode("curveMember",e[i],t);return t},curveMember:function(e){var t=this.createElementNSPlus("gml:curveMember");return this.curve?this.writeNode("Curve",e,t):this.writeNode("LineString",e,t),t},MultiSurface:function(e){for(var t=this.createElementNSPlus("gml:MultiSurface"),i=0,s=(e=e.components||[e]).length;i<s;++i)this.writeNode("surfaceMember",e[i],t);return t},surfaceMember:function(e){var t=this.createElementNSPlus("gml:surfaceMember");return this.surface?this.writeNode("Surface",e,t):this.writeNode("Polygon",e,t),t},Envelope:function(e){var t=this.createElementNSPlus("gml:Envelope");return this.writeNode("lowerCorner",e,t),this.writeNode("upperCorner",e,t),this.srsName&&t.setAttribute("srsName",this.srsName),t},lowerCorner:function(e){return this.createElementNSPlus("gml:lowerCorner",{value:this.xy?e.left+" "+e.bottom:e.bottom+" "+e.left})},upperCorner:function(e){return this.createElementNSPlus("gml:upperCorner",{value:this.xy?e.right+" "+e.top:e.top+" "+e.right})}},OpenLayers.Format.GML.Base.prototype.writers.gml),feature:OpenLayers.Format.GML.Base.prototype.writers.feature,wfs:OpenLayers.Format.GML.Base.prototype.writers.wfs},setGeometryTypes:function(){this.geometryTypes={"OpenLayers.Geometry.Point":"Point","OpenLayers.Geometry.MultiPoint":"MultiPoint","OpenLayers.Geometry.LineString":!0===this.curve?"Curve":"LineString","OpenLayers.Geometry.MultiLineString":!1===this.multiCurve?"MultiLineString":"MultiCurve","OpenLayers.Geometry.Polygon":!0===this.surface?"Surface":"Polygon","OpenLayers.Geometry.MultiPolygon":!1===this.multiSurface?"MultiPolygon":"MultiSurface","OpenLayers.Geometry.Collection":"GeometryCollection"}},CLASS_NAME:"OpenLayers.Format.GML.v3"}),OpenLayers.Format.Filter.v1_1_0=OpenLayers.Class(OpenLayers.Format.GML.v3,OpenLayers.Format.Filter.v1,{VERSION:"1.1.0",schemaLocation:"http://www.opengis.net/ogc/filter/1.1.0/filter.xsd",initialize:function(e){OpenLayers.Format.GML.v3.prototype.initialize.apply(this,[e])},readers:{ogc:OpenLayers.Util.applyDefaults({PropertyIsEqualTo:function(e,t){var i=e.getAttribute("matchCase"),i=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.EQUAL_TO,matchCase:!("false"===i||"0"===i)});this.readChildNodes(e,i),t.filters.push(i)},PropertyIsNotEqualTo:function(e,t){var i=e.getAttribute("matchCase"),i=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.NOT_EQUAL_TO,matchCase:!("false"===i||"0"===i)});this.readChildNodes(e,i),t.filters.push(i)},PropertyIsLike:function(e,t){var i=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.LIKE}),s=(this.readChildNodes(e,i),e.getAttribute("wildCard")),n=e.getAttribute("singleChar"),e=e.getAttribute("escapeChar");i.value2regex(s,n,e),t.filters.push(i)}},OpenLayers.Format.Filter.v1.prototype.readers.ogc),gml:OpenLayers.Format.GML.v3.prototype.readers.gml,feature:OpenLayers.Format.GML.v3.prototype.readers.feature},writers:{ogc:OpenLayers.Util.applyDefaults({PropertyIsEqualTo:function(e){var t=this.createElementNSPlus("ogc:PropertyIsEqualTo",{attributes:{matchCase:e.matchCase}});return this.writeNode("PropertyName",e,t),this.writeOgcExpression(e.value,t),t},PropertyIsNotEqualTo:function(e){var t=this.createElementNSPlus("ogc:PropertyIsNotEqualTo",{attributes:{matchCase:e.matchCase}});return this.writeNode("PropertyName",e,t),this.writeOgcExpression(e.value,t),t},PropertyIsLike:function(e){var t=this.createElementNSPlus("ogc:PropertyIsLike",{attributes:{matchCase:e.matchCase,wildCard:"*",singleChar:".",escapeChar:"!"}});return this.writeNode("PropertyName",e,t),this.writeNode("Literal",e.regex2value(),t),t},BBOX:function(e){var t=this.createElementNSPlus("ogc:BBOX"),i=(e.property&&this.writeNode("PropertyName",e,t),this.writeNode("gml:Envelope",e.value));return e.projection&&i.setAttribute("srsName",e.projection),t.appendChild(i),t},SortBy:function(e){for(var t=this.createElementNSPlus("ogc:SortBy"),i=0,s=e.length;i<s;i++)this.writeNode("ogc:SortProperty",e[i],t);return t},SortProperty:function(e){var t=this.createElementNSPlus("ogc:SortProperty");return this.writeNode("ogc:PropertyName",e,t),this.writeNode("ogc:SortOrder","DESC"==e.order?"DESC":"ASC",t),t},SortOrder:function(e){return this.createElementNSPlus("ogc:SortOrder",{value:e})}},OpenLayers.Format.Filter.v1.prototype.writers.ogc),gml:OpenLayers.Format.GML.v3.prototype.writers.gml,feature:OpenLayers.Format.GML.v3.prototype.writers.feature},writeSpatial:function(e,t){var i,t=this.createElementNSPlus("ogc:"+t);return this.writeNode("PropertyName",e,t),e.value instanceof OpenLayers.Filter.Function?this.writeNode("Function",e.value,t):(i=e.value instanceof OpenLayers.Geometry?this.writeNode("feature:_geometry",e.value).firstChild:this.writeNode("gml:Envelope",e.value),e.projection&&i.setAttribute("srsName",e.projection),t.appendChild(i)),t},CLASS_NAME:"OpenLayers.Format.Filter.v1_1_0"}),OpenLayers.Format.OWSCommon=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.0.0",getVersion:function(e,t){var i=this.version;return i=i?i:(i=(e=e.getAttribute("xmlns:ows"))&&"1.1"===e.substring(e.lastIndexOf("/")+1)?"1.1.0":i)||this.defaultVersion},CLASS_NAME:"OpenLayers.Format.OWSCommon"}),OpenLayers.Format.OWSCommon.v1=OpenLayers.Class(OpenLayers.Format.XML,{regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},read:function(e,t){OpenLayers.Util.applyDefaults(t,this.options);t={};return this.readChildNodes(e,t),t},readers:{ows:{Exception:function(e,t){var i={code:e.getAttribute("exceptionCode"),locator:e.getAttribute("locator"),texts:[]};t.exceptions.push(i),this.readChildNodes(e,i)},ExceptionText:function(e,t){e=this.getChildValue(e);t.texts.push(e)},ServiceIdentification:function(e,t){t.serviceIdentification={},this.readChildNodes(e,t.serviceIdentification)},Title:function(e,t){t.title=this.getChildValue(e)},Abstract:function(e,t){t.abstract=this.getChildValue(e)},Keywords:function(e,t){t.keywords={},this.readChildNodes(e,t.keywords)},Keyword:function(e,t){t[this.getChildValue(e)]=!0},ServiceType:function(e,t){t.serviceType={codeSpace:e.getAttribute("codeSpace"),value:this.getChildValue(e)}},ServiceTypeVersion:function(e,t){t.serviceTypeVersion=this.getChildValue(e)},Fees:function(e,t){t.fees=this.getChildValue(e)},AccessConstraints:function(e,t){t.accessConstraints=this.getChildValue(e)},ServiceProvider:function(e,t){t.serviceProvider={},this.readChildNodes(e,t.serviceProvider)},ProviderName:function(e,t){t.providerName=this.getChildValue(e)},ProviderSite:function(e,t){t.providerSite=this.getAttributeNS(e,this.namespaces.xlink,"href")},ServiceContact:function(e,t){t.serviceContact={},this.readChildNodes(e,t.serviceContact)},IndividualName:function(e,t){t.individualName=this.getChildValue(e)},PositionName:function(e,t){t.positionName=this.getChildValue(e)},ContactInfo:function(e,t){t.contactInfo={},this.readChildNodes(e,t.contactInfo)},Phone:function(e,t){t.phone={},this.readChildNodes(e,t.phone)},Voice:function(e,t){t.voice=this.getChildValue(e)},Address:function(e,t){t.address={},this.readChildNodes(e,t.address)},DeliveryPoint:function(e,t){t.deliveryPoint=this.getChildValue(e)},City:function(e,t){t.city=this.getChildValue(e)},AdministrativeArea:function(e,t){t.administrativeArea=this.getChildValue(e)},PostalCode:function(e,t){t.postalCode=this.getChildValue(e)},Country:function(e,t){t.country=this.getChildValue(e)},ElectronicMailAddress:function(e,t){t.electronicMailAddress=this.getChildValue(e)},Role:function(e,t){t.role=this.getChildValue(e)},OperationsMetadata:function(e,t){t.operationsMetadata={},this.readChildNodes(e,t.operationsMetadata)},Operation:function(e,t){var i=e.getAttribute("name");t[i]={},this.readChildNodes(e,t[i])},DCP:function(e,t){t.dcp={},this.readChildNodes(e,t.dcp)},HTTP:function(e,t){t.http={},this.readChildNodes(e,t.http)},Get:function(e,t){t.get||(t.get=[]);var i={url:this.getAttributeNS(e,this.namespaces.xlink,"href")};this.readChildNodes(e,i),t.get.push(i)},Post:function(e,t){t.post||(t.post=[]);var i={url:this.getAttributeNS(e,this.namespaces.xlink,"href")};this.readChildNodes(e,i),t.post.push(i)},Parameter:function(e,t){t.parameters||(t.parameters={});var i=e.getAttribute("name");t.parameters[i]={},this.readChildNodes(e,t.parameters[i])},Constraint:function(e,t){t.constraints||(t.constraints={});var i=e.getAttribute("name");t.constraints[i]={},this.readChildNodes(e,t.constraints[i])},Value:function(e,t){t[this.getChildValue(e)]=!0},OutputFormat:function(e,t){t.formats.push({value:this.getChildValue(e)}),this.readChildNodes(e,t)},WGS84BoundingBox:function(e,t){var i={};i.crs=e.getAttribute("crs"),t.BoundingBox?t.BoundingBox.push(i):(t.projection=i.crs,i=t),this.readChildNodes(e,i)},BoundingBox:function(e,t){this.readers.ows.WGS84BoundingBox.apply(this,[e,t])},LowerCorner:function(e,t){e=(e=(e=this.getChildValue(e).replace(this.regExes.trimSpace,"")).replace(this.regExes.trimComma,",")).split(this.regExes.splitSpace);t.left=e[0],t.bottom=e[1]},UpperCorner:function(e,t){e=(e=(e=this.getChildValue(e).replace(this.regExes.trimSpace,"")).replace(this.regExes.trimComma,",")).split(this.regExes.splitSpace);t.right=e[0],t.top=e[1],t.bounds=new OpenLayers.Bounds(t.left,t.bottom,t.right,t.top),delete t.left,delete t.bottom,delete t.right,delete t.top},Language:function(e,t){t.language=this.getChildValue(e)}}},writers:{ows:{BoundingBox:function(e,t){t=this.createElementNSPlus(t||"ows:BoundingBox",{attributes:{crs:e.projection}});return this.writeNode("ows:LowerCorner",e,t),this.writeNode("ows:UpperCorner",e,t),t},LowerCorner:function(e){return this.createElementNSPlus("ows:LowerCorner",{value:e.bounds.left+" "+e.bounds.bottom})},UpperCorner:function(e){return this.createElementNSPlus("ows:UpperCorner",{value:e.bounds.right+" "+e.bounds.top})},Identifier:function(e){return this.createElementNSPlus("ows:Identifier",{value:e})},Title:function(e){return this.createElementNSPlus("ows:Title",{value:e})},Abstract:function(e){return this.createElementNSPlus("ows:Abstract",{value:e})},OutputFormat:function(e){return this.createElementNSPlus("ows:OutputFormat",{value:e})}}},CLASS_NAME:"OpenLayers.Format.OWSCommon.v1"}),OpenLayers.Format.OWSCommon.v1_0_0=OpenLayers.Class(OpenLayers.Format.OWSCommon.v1,{namespaces:{ows:"http://www.opengis.net/ows",xlink:"http://www.w3.org/1999/xlink"},readers:{ows:OpenLayers.Util.applyDefaults({ExceptionReport:function(e,t){t.success=!1,t.exceptionReport={version:e.getAttribute("version"),language:e.getAttribute("language"),exceptions:[]},this.readChildNodes(e,t.exceptionReport)}},OpenLayers.Format.OWSCommon.v1.prototype.readers.ows)},writers:{ows:OpenLayers.Format.OWSCommon.v1.prototype.writers.ows},CLASS_NAME:"OpenLayers.Format.OWSCommon.v1_0_0"}),OpenLayers.Format.WFST.v1_1_0=OpenLayers.Class(OpenLayers.Format.Filter.v1_1_0,OpenLayers.Format.WFST.v1,{version:"1.1.0",schemaLocations:{wfs:"http://schemas.opengis.net/wfs/1.1.0/wfs.xsd"},initialize:function(e){OpenLayers.Format.Filter.v1_1_0.prototype.initialize.apply(this,[e]),OpenLayers.Format.WFST.v1.prototype.initialize.apply(this,[e])},readNode:function(e,t,i){return OpenLayers.Format.GML.v3.prototype.readNode.apply(this,arguments)},readers:{wfs:OpenLayers.Util.applyDefaults({FeatureCollection:function(e,t){t.numberOfFeatures=parseInt(e.getAttribute("numberOfFeatures")),OpenLayers.Format.WFST.v1.prototype.readers.wfs.FeatureCollection.apply(this,arguments)},TransactionResponse:function(e,t){t.insertIds=[],t.success=!1,this.readChildNodes(e,t)},TransactionSummary:function(e,t){t.success=!0},InsertResults:function(e,t){this.readChildNodes(e,t)},Feature:function(e,t){var i={fids:[]};this.readChildNodes(e,i),t.insertIds.push(i.fids[0])}},OpenLayers.Format.WFST.v1.prototype.readers.wfs),gml:OpenLayers.Format.GML.v3.prototype.readers.gml,feature:OpenLayers.Format.GML.v3.prototype.readers.feature,ogc:OpenLayers.Format.Filter.v1_1_0.prototype.readers.ogc,ows:OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows},writers:{wfs:OpenLayers.Util.applyDefaults({GetFeature:function(e){var t=OpenLayers.Format.WFST.v1.prototype.writers.wfs.GetFeature.apply(this,arguments);return e&&this.setAttributes(t,{resultType:e.resultType,startIndex:e.startIndex,count:e.count}),t},Query:function(e){var t=(e=OpenLayers.Util.extend({featureNS:this.featureNS,featurePrefix:this.featurePrefix,featureType:this.featureType,srsName:this.srsName},e)).featurePrefix,i=this.createElementNSPlus("wfs:Query",{attributes:{typeName:(t?t+":":"")+e.featureType,srsName:e.srsName}});if(e.featureNS&&i.setAttribute("xmlns:"+t,e.featureNS),e.propertyNames)for(var t=0,s=e.propertyNames.length;t<s;t++)this.writeNode("wfs:PropertyName",{property:e.propertyNames[t]},i);return e.filter&&(OpenLayers.Format.WFST.v1_1_0.prototype.setFilterProperty.call(this,e.filter),this.writeNode("ogc:Filter",e.filter,i)),i},PropertyName:function(e){return this.createElementNSPlus("wfs:PropertyName",{value:e.property})}},OpenLayers.Format.WFST.v1.prototype.writers.wfs),gml:OpenLayers.Format.GML.v3.prototype.writers.gml,feature:OpenLayers.Format.GML.v3.prototype.writers.feature,ogc:OpenLayers.Format.Filter.v1_1_0.prototype.writers.ogc},CLASS_NAME:"OpenLayers.Format.WFST.v1_1_0"}),OpenLayers.Protocol=OpenLayers.Class({format:null,options:null,autoDestroy:!0,defaultFilter:null,initialize:function(e){OpenLayers.Util.extend(this,e=e||{}),this.options=e},mergeWithDefaultFilter:function(e){return e&&this.defaultFilter?new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.AND,filters:[this.defaultFilter,e]}):e||this.defaultFilter||void 0},destroy:function(){this.format=this.options=null},read:function(e){(e=e||{}).filter=this.mergeWithDefaultFilter(e.filter)},create:function(){},update:function(){},delete:function(){},commit:function(){},abort:function(e){},createCallback:function(e,t,i){return OpenLayers.Function.bind(function(){e.apply(this,[t,i])},this)},CLASS_NAME:"OpenLayers.Protocol"}),OpenLayers.Protocol.Response=OpenLayers.Class({code:null,requestType:null,last:!0,features:null,data:null,reqFeatures:null,priv:null,error:null,initialize:function(e){OpenLayers.Util.extend(this,e)},success:function(){return 0<this.code},CLASS_NAME:"OpenLayers.Protocol.Response"}),OpenLayers.Protocol.Response.SUCCESS=1,OpenLayers.Protocol.Response.FAILURE=0,OpenLayers.Format.JSON=OpenLayers.Class(OpenLayers.Format,{indent:"    ",space:" ",newline:"\n",level:0,pretty:!1,nativeJSON:!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify),read:function read(a,b){var c,d,c;if(this.nativeJSON)c=JSON.parse(a,b);else try{/^[\],:{}\s]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))&&(c=eval("("+a+")"),"function"==typeof b)&&(d=function e(t,i){if(i&&"object"===_typeof(i))for(var s in i)i.hasOwnProperty(s)&&(i[s]=e(s,i[s]));return b(t,i)},c=d("",c))}catch(e){}return this.keepData&&(this.data=c),c},write:function(e,t){this.pretty=!!t;var t=null,i=_typeof(e);if(this.serialize[i])try{t=!this.pretty&&this.nativeJSON?JSON.stringify(e):this.serialize[i].apply(this,[e])}catch(e){OpenLayers.Console.error("Trouble serializing: "+e)}return t},writeIndent:function(){var e=[];if(this.pretty)for(var t=0;t<this.level;++t)e.push(this.indent);return e.join("")},writeNewline:function(){return this.pretty?this.newline:""},writeSpace:function(){return this.pretty?this.space:""},serialize:{object:function(e){if(null==e)return"null";if(e.constructor==Date)return this.serialize.date.apply(this,[e]);if(e.constructor==Array)return this.serialize.array.apply(this,[e]);var t=["{"];this.level+=1;var i,s,n,r=!1;for(i in e)e.hasOwnProperty(i)&&(s=OpenLayers.Format.JSON.prototype.write.apply(this,[i,this.pretty]),n=OpenLayers.Format.JSON.prototype.write.apply(this,[e[i],this.pretty]),null!=s&&null!=n&&(r&&t.push(","),t.push(this.writeNewline(),this.writeIndent(),s,":",this.writeSpace(),n),r=!0));return--this.level,t.push(this.writeNewline(),this.writeIndent(),"}"),t.join("")},array:function(e){var t,i=["["];this.level+=1;for(var s=0,n=e.length;s<n;++s)null!=(t=OpenLayers.Format.JSON.prototype.write.apply(this,[e[s],this.pretty]))&&(0<s&&i.push(","),i.push(this.writeNewline(),this.writeIndent(),t));return--this.level,i.push(this.writeNewline(),this.writeIndent(),"]"),i.join("")},string:function(e){var s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(e)?'"'+e.replace(/([\x00-\x1f\\"])/g,function(e,t){var i=s[t];return i||(i=t.charCodeAt(),"\\u00"+Math.floor(i/16).toString(16)+(i%16).toString(16))})+'"':'"'+e+'"'},number:function(e){return isFinite(e)?String(e):"null"},boolean:function(e){return String(e)},date:function(e){function t(e){return e<10?"0"+e:e}return'"'+e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+"T"+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+'"'}},CLASS_NAME:"OpenLayers.Format.JSON"}),OpenLayers.Format.GeoJSON=OpenLayers.Class(OpenLayers.Format.JSON,{ignoreExtraDims:!1,read:function(e,t,i){t=t||"FeatureCollection";var s,n=null;if(s="string"==typeof e?OpenLayers.Format.JSON.prototype.read.apply(this,[e,i]):e){if("string"!=typeof s.type)OpenLayers.Console.error("Bad GeoJSON - no type: "+e);else if(this.isValidType(s,t))switch(t){case"Geometry":try{n=this.parseGeometry(s)}catch(e){OpenLayers.Console.error(e)}break;case"Feature":try{(n=this.parseFeature(s)).type="Feature"}catch(e){OpenLayers.Console.error(e)}break;case"FeatureCollection":switch(n=[],s.type){case"Feature":try{n.push(this.parseFeature(s))}catch(e){n=null,OpenLayers.Console.error(e)}break;case"FeatureCollection":for(e=0,t=s.features.length;e<t;++e)try{n.push(this.parseFeature(s.features[e]))}catch(e){n=null,OpenLayers.Console.error(e)}break;default:try{var r=this.parseGeometry(s);n.push(new OpenLayers.Feature.Vector(r))}catch(e){n=null,OpenLayers.Console.error(e)}}}}else OpenLayers.Console.error("Bad JSON: "+e);return n},isValidType:function(e,t){var i=!1;switch(t){case"Geometry":-1==OpenLayers.Util.indexOf("Point MultiPoint LineString MultiLineString Polygon MultiPolygon Box GeometryCollection".split(" "),e.type)?OpenLayers.Console.error("Unsupported geometry type: "+e.type):i=!0;break;case"FeatureCollection":i=!0;break;default:e.type==t?i=!0:OpenLayers.Console.error("Cannot convert types from "+e.type+" to "+t)}return i},parseFeature:function(e){var t,i=e.properties||{},s=e.geometry&&e.geometry.bbox||e.bbox;try{t=this.parseGeometry(e.geometry)}catch(e){throw e}return t=new OpenLayers.Feature.Vector(t,i),s&&(t.bounds=OpenLayers.Bounds.fromArray(s)),e.id&&(t.fid=e.id),t},parseGeometry:function(e){if(null==e)return null;var t=!1;if("GeometryCollection"==e.type){if(!OpenLayers.Util.isArray(e.geometries))throw"GeometryCollection must have geometries array: "+e;for(var i=e.geometries.length,t=Array(i),s=0;s<i;++s)t[s]=this.parseGeometry.apply(this,[e.geometries[s]]);i=new OpenLayers.Geometry.Collection(t),t=!0}else{if(!OpenLayers.Util.isArray(e.coordinates))throw"Geometry must have coordinates array: "+e;if(!this.parseCoords[e.type.toLowerCase()])throw"Unsupported geometry type: "+e.type;try{i=this.parseCoords[e.type.toLowerCase()].apply(this,[e.coordinates])}catch(e){throw e}}return this.internalProjection&&this.externalProjection&&!t&&i.transform(this.externalProjection,this.internalProjection),i},parseCoords:{point:function(e){if(0==this.ignoreExtraDims&&2!=e.length)throw"Only 2D points are supported: "+e;return new OpenLayers.Geometry.Point(e[0],e[1])},multipoint:function(e){for(var t=[],i=null,s=0,n=e.length;s<n;++s){try{i=this.parseCoords.point.apply(this,[e[s]])}catch(e){throw e}t.push(i)}return new OpenLayers.Geometry.MultiPoint(t)},linestring:function(e){for(var t=[],i=null,s=0,n=e.length;s<n;++s){try{i=this.parseCoords.point.apply(this,[e[s]])}catch(e){throw e}t.push(i)}return new OpenLayers.Geometry.LineString(t)},multilinestring:function(e){for(var t=[],i=null,s=0,n=e.length;s<n;++s){try{i=this.parseCoords.linestring.apply(this,[e[s]])}catch(e){throw e}t.push(i)}return new OpenLayers.Geometry.MultiLineString(t)},polygon:function(e){for(var t,i,s=[],n=0,r=e.length;n<r;++n){try{i=this.parseCoords.linestring.apply(this,[e[n]])}catch(e){throw e}t=new OpenLayers.Geometry.LinearRing(i.components),s.push(t)}return new OpenLayers.Geometry.Polygon(s)},multipolygon:function(e){for(var t=[],i=null,s=0,n=e.length;s<n;++s){try{i=this.parseCoords.polygon.apply(this,[e[s]])}catch(e){throw e}t.push(i)}return new OpenLayers.Geometry.MultiPolygon(t)},box:function(e){if(2!=e.length)throw"GeoJSON box coordinates must have 2 elements";return new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing([new OpenLayers.Geometry.Point(e[0][0],e[0][1]),new OpenLayers.Geometry.Point(e[1][0],e[0][1]),new OpenLayers.Geometry.Point(e[1][0],e[1][1]),new OpenLayers.Geometry.Point(e[0][0],e[1][1]),new OpenLayers.Geometry.Point(e[0][0],e[0][1])])])}},write:function(e,t){var i={type:null};if(OpenLayers.Util.isArray(e)){i.type="FeatureCollection";var s=e.length;i.features=Array(s);for(var n=0;n<s;++n){var r=e[n];if(!r instanceof OpenLayers.Feature.Vector)throw"FeatureCollection only supports collections of features: "+r;i.features[n]=this.extract.feature.apply(this,[r])}}else 0==e.CLASS_NAME.indexOf("OpenLayers.Geometry")?i=this.extract.geometry.apply(this,[e]):e instanceof OpenLayers.Feature.Vector&&(i=this.extract.feature.apply(this,[e]),e.layer&&e.layer.projection&&(i.crs=this.createCRSObject(e)));return OpenLayers.Format.JSON.prototype.write.apply(this,[i,t])},createCRSObject:function(e){var t={};return t=(e=e.layer.projection.toString()).match(/epsg:/i)?4326==(e=parseInt(e.substring(e.indexOf(":")+1)))?{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:{type:"name",properties:{name:"EPSG:"+e}}:t},extract:{feature:function(e){var t=this.extract.geometry.apply(this,[e.geometry]),t={type:"Feature",properties:e.attributes,geometry:t};return null!=e.fid&&(t.id=e.fid),t},geometry:function(e){if(null==e)return null;this.internalProjection&&this.externalProjection&&(e=e.clone()).transform(this.internalProjection,this.externalProjection);var t=e.CLASS_NAME.split(".")[2];return e=this.extract[t.toLowerCase()].apply(this,[e]),"Collection"==t?{type:"GeometryCollection",geometries:e}:{type:t,coordinates:e}},point:function(e){return[e.x,e.y]},multipoint:function(e){for(var t=[],i=0,s=e.components.length;i<s;++i)t.push(this.extract.point.apply(this,[e.components[i]]));return t},linestring:function(e){for(var t=[],i=0,s=e.components.length;i<s;++i)t.push(this.extract.point.apply(this,[e.components[i]]));return t},multilinestring:function(e){for(var t=[],i=0,s=e.components.length;i<s;++i)t.push(this.extract.linestring.apply(this,[e.components[i]]));return t},polygon:function(e){for(var t=[],i=0,s=e.components.length;i<s;++i)t.push(this.extract.linestring.apply(this,[e.components[i]]));return t},multipolygon:function(e){for(var t=[],i=0,s=e.components.length;i<s;++i)t.push(this.extract.polygon.apply(this,[e.components[i]]));return t},collection:function(e){for(var t=e.components.length,i=Array(t),s=0;s<t;++s)i[s]=this.extract.geometry.apply(this,[e.components[s]]);return i}},CLASS_NAME:"OpenLayers.Format.GeoJSON"}),OpenLayers.Protocol.Script=OpenLayers.Class(OpenLayers.Protocol,{url:null,params:null,callback:null,callbackTemplate:"OpenLayers.Protocol.Script.registry.${id}",callbackKey:"callback",callbackPrefix:"",scope:null,format:null,pendingRequests:null,srsInBBOX:!1,initialize:function(e){var i;this.params={},this.pendingRequests={},OpenLayers.Protocol.prototype.initialize.apply(this,arguments),this.format||(this.format=new OpenLayers.Format.GeoJSON),!this.filterToParams&&OpenLayers.Format.QueryStringFilter&&(i=new OpenLayers.Format.QueryStringFilter({srsInBBOX:this.srsInBBOX}),this.filterToParams=function(e,t){return i.write(e,t)})},read:function(t){OpenLayers.Protocol.prototype.read.apply(this,arguments),(t=OpenLayers.Util.applyDefaults(t,this.options)).params=OpenLayers.Util.applyDefaults(t.params,this.options.params),t.filter&&this.filterToParams&&(t.params=this.filterToParams(t.filter,t.params));var i=new OpenLayers.Protocol.Response({requestType:"read"}),e=this.createRequest(t.url,t.params,OpenLayers.Function.bind(function(e){i.data=e,this.handleRead(i,t)},this));return i.priv=e,i},createRequest:function(e,t,i){i=OpenLayers.Protocol.Script.register(i);var s=OpenLayers.String.format(this.callbackTemplate,{id:i});return(t=OpenLayers.Util.extend({},t))[this.callbackKey]=this.callbackPrefix+s,e=OpenLayers.Util.urlAppend(e,OpenLayers.Util.getParameterString(t)),(t=document.createElement("script")).type="text/javascript",t.src=e,t.id="OpenLayers_Protocol_Script_"+i,this.pendingRequests[t.id]=t,document.getElementsByTagName("head")[0].appendChild(t),t},destroyRequest:function(e){OpenLayers.Protocol.Script.unregister(e.id.split("_").pop()),delete this.pendingRequests[e.id],e.parentNode&&e.parentNode.removeChild(e)},handleRead:function(e,t){this.handleResponse(e,t)},handleResponse:function(e,t){t.callback&&(e.data?(e.features=this.parseFeatures(e.data),e.code=OpenLayers.Protocol.Response.SUCCESS):e.code=OpenLayers.Protocol.Response.FAILURE,this.destroyRequest(e.priv),t.callback.call(t.scope,e))},parseFeatures:function(e){return this.format.read(e)},abort:function(e){if(e)this.destroyRequest(e.priv);else for(var t in this.pendingRequests)this.destroyRequest(this.pendingRequests[t])},destroy:function(){this.abort(),delete this.params,delete this.format,OpenLayers.Protocol.prototype.destroy.apply(this)},CLASS_NAME:"OpenLayers.Protocol.Script"}),!function(){var i=OpenLayers.Protocol.Script,s=0;i.registry={},i.register=function(e){var t="c"+ ++s;return i.registry[t]=function(){e.apply(this,arguments)},t},i.unregister=function(e){delete i.registry[e]}}(),OpenLayers.Format.EncodedPolyline=OpenLayers.Class(OpenLayers.Format,{geometryType:"linestring",initialize:function(e){OpenLayers.Format.prototype.initialize.apply(this,[e])},read:function(e){var t;if("linestring"==this.geometryType)t=OpenLayers.Geometry.LineString;else if("linearring"==this.geometryType)t=OpenLayers.Geometry.LinearRing;else if("multipoint"==this.geometryType)t=OpenLayers.Geometry.MultiPoint;else if("point"!=this.geometryType&&"polygon"!=this.geometryType)return null;for(var i=(e=this.decodeDeltas(e,2)).length,s=[],n=0;n+1<i;){var r=e[n++],a=e[n++];s.push(new OpenLayers.Geometry.Point(a,r))}return"point"==this.geometryType?new OpenLayers.Feature.Vector(s[0]):"polygon"==this.geometryType?new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing(s)])):new OpenLayers.Feature.Vector(new t(s))},decode:function(e,t,i){i=(e=this.decodeDeltas(e,t,i||1e5)).length;for(var s=[],n=0;n+(t-1)<i;){for(var r=[],a=0;a<t;++a)r.push(e[n++]);s.push(r)}return s},write:function(e){if("point"==(t=(e=(e.constructor==Array?e[0]:e).geometry).CLASS_NAME.split(".")[2].toLowerCase()))e=Array(e);else if("linestring"==t||"linearring"==t||"multipoint"==t)e=e.components;else{if("polygon"!=t)return null;e=e.components[0].components}for(var t=[],i=e.length,s=0;s<i;++s){var n=e[s];t.push(n.y),t.push(n.x)}return this.encodeDeltas(t,2)},encode:function(e,t,i){i=i||1e5;for(var s=[],n=e.length,r=0;r<n;++r)for(var a=e[r],o=0;o<t;++o)s.push(a[o]);return this.encodeDeltas(s,t,i)},encodeDeltas:function(e,t,i){for(var s=Array(t),n=0;n<t;++n)s[n]=0;for(var r=e.length,a=0;a<r;)for(n=0;n<t;++n,++a){var o=e[a],l=o-s[n];s[n]=o,e[a]=l}return this.encodeFloats(e,i||1e5)},decodeDeltas:function(e,t,i){for(var s=Array(t),n=0;n<t;++n)s[n]=0;i=(e=this.decodeFloats(e,i||1e5)).length;for(var r=0;r<i;)for(n=0;n<t;++n,++r)s[n]+=e[r],e[r]=s[n];return e},encodeFloats:function(e,t){for(var i=t||1e5,s=e.length,n=0;n<s;++n)e[n]=Math.round(e[n]*i);return this.encodeSignedIntegers(e)},decodeFloats:function(e,t){for(var i=t||1e5,s=this.decodeSignedIntegers(e),n=s.length,r=0;r<n;++r)s[r]/=i;return s},encodeSignedIntegers:function(e){for(var t=e.length,i=0;i<t;++i){var s=e[i],n=s<<1;e[i]=n=s<0?~n:n}return this.encodeUnsignedIntegers(e)},decodeSignedIntegers:function(e){for(var t=(e=this.decodeUnsignedIntegers(e)).length,i=0;i<t;++i){var s=e[i];e[i]=1&s?~(s>>1):s>>1}return e},encodeUnsignedIntegers:function(e){for(var t="",i=e.length,s=0;s<i;++s)t+=this.encodeUnsignedInteger(e[s]);return t},decodeUnsignedIntegers:function(e){for(var t=[],i=0,s=0,n=e.length,r=0;r<n;++r){var a=e.charCodeAt(r)-63,i=i|(31&a)<<s;a<32?(t.push(i),s=i=0):s+=5}return t},encodeFloat:function(e,t){return e=Math.round(e*(t||1e5)),this.encodeSignedInteger(e)},decodeFloat:function(e,t){return this.decodeSignedInteger(e)/(t||1e5)},encodeSignedInteger:function(e){var t=e<<1;return this.encodeUnsignedInteger(t=e<0?~t:t)},decodeSignedInteger:function(e){return 1&(e=this.decodeUnsignedInteger(e))?~(e>>1):e>>1},encodeUnsignedInteger:function(e){for(var t="";32<=e;)t+=String.fromCharCode(63+(32|31&e)),e>>=5;return t+String.fromCharCode(e+63)},decodeUnsignedInteger:function(e){for(var t=0,i=0,s=e.length,n=0;n<s;++n){var r=e.charCodeAt(n)-63,t=t|(31&r)<<i;if(r<32)break;i+=5}return t},CLASS_NAME:"OpenLayers.Format.EncodedPolyline"}),OpenLayers.Control.Panel=OpenLayers.Class(OpenLayers.Control,{controls:null,autoActivate:!0,defaultControl:null,saveState:!1,allowDepress:!1,activeState:null,initialize:function(e){OpenLayers.Control.prototype.initialize.apply(this,[e]),this.controls=[],this.activeState={}},destroy:function(){this.map&&this.map.events.unregister("buttonclick",this,this.onButtonClick),OpenLayers.Control.prototype.destroy.apply(this,arguments);for(var e,t=this.controls.length-1;0<=t;t--)(e=this.controls[t]).events&&e.events.un({activate:this.iconOn,deactivate:this.iconOff}),e.panel_div=null;this.activeState=null},activate:function(){if(OpenLayers.Control.prototype.activate.apply(this,arguments)){for(var e,t=0,i=this.controls.length;t<i;t++)((e=this.controls[t])===this.defaultControl||this.saveState&&this.activeState[e.id])&&e.activate();return!0===this.saveState&&(this.defaultControl=null),this.redraw(),!0}return!1},deactivate:function(){if(OpenLayers.Control.prototype.deactivate.apply(this,arguments)){for(var e,t=0,i=this.controls.length;t<i;t++)e=this.controls[t],this.activeState[e.id]=e.deactivate();return this.redraw(),!0}return!1},draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),this.outsideViewport?(this.events.attachToElement(this.div),this.events.register("buttonclick",this,this.onButtonClick)):this.map.events.register("buttonclick",this,this.onButtonClick),this.addControlsToMap(this.controls),this.div},redraw:function(){for(var e=this.div.childNodes.length-1;0<=e;e--)this.div.removeChild(this.div.childNodes[e]);if(this.div.innerHTML="",this.active)for(var e=0,t=this.controls.length;e<t;e++)this.div.appendChild(this.controls[e].panel_div)},activateControl:function(e){if(!this.active)return!1;if(e.type==OpenLayers.Control.TYPE_BUTTON)e.trigger();else if(e.type==OpenLayers.Control.TYPE_TOGGLE)e.active?e.deactivate():e.activate();else if(this.allowDepress&&e.active)e.deactivate();else{for(var t,i=0,s=this.controls.length;i<s;i++)(t=this.controls[i])==e||t.type!==OpenLayers.Control.TYPE_TOOL&&null!=t.type||t.deactivate();e.activate()}},addControls:function(e){OpenLayers.Util.isArray(e)||(e=[e]),this.controls=this.controls.concat(e);for(var t=0,i=e.length;t<i;t++){var s=e[t],n=this.createControlMarkup(s);OpenLayers.Element.addClass(n,s.displayClass+"ItemInactive"),OpenLayers.Element.addClass(n,"olButton"),""==s.title||n.title||(n.title=s.title),s.panel_div=n}this.map&&(this.addControlsToMap(e),this.redraw())},createControlMarkup:function(e){return document.createElement("div")},addControlsToMap:function(e){for(var t,i=0,s=e.length;i<s;i++)!0===(t=e[i]).autoActivate?(t.autoActivate=!1,this.map.addControl(t),t.autoActivate=!0):(this.map.addControl(t),t.deactivate()),t.events.on({activate:this.iconOn,deactivate:this.iconOff})},iconOn:function(){var e=this.panel_div;e.className=e.className.replace(RegExp("\\b("+this.displayClass+"Item)Inactive\\b"),"$1Active")},iconOff:function(){var e=this.panel_div;e.className=e.className.replace(RegExp("\\b("+this.displayClass+"Item)Active\\b"),"$1Inactive")},onButtonClick:function(e){var t=this.controls;e=e.buttonElement;for(var i=t.length-1;0<=i;--i)if(t[i].panel_div===e){this.activateControl(t[i]);break}},getControlsBy:function(t,i){var s="function"==typeof i.test;return OpenLayers.Array.filter(this.controls,function(e){return e[t]==i||s&&i.test(e[t])})},getControlsByName:function(e){return this.getControlsBy("name",e)},getControlsByClass:function(e){return this.getControlsBy("CLASS_NAME",e)},CLASS_NAME:"OpenLayers.Control.Panel"}),OpenLayers.Control.Button=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_BUTTON,trigger:function(){},CLASS_NAME:"OpenLayers.Control.Button"}),OpenLayers.Control.ZoomIn=OpenLayers.Class(OpenLayers.Control.Button,{trigger:function(){this.map&&this.map.zoomIn()},CLASS_NAME:"OpenLayers.Control.ZoomIn"}),OpenLayers.Control.ZoomOut=OpenLayers.Class(OpenLayers.Control.Button,{trigger:function(){this.map&&this.map.zoomOut()},CLASS_NAME:"OpenLayers.Control.ZoomOut"}),OpenLayers.Control.ZoomToMaxExtent=OpenLayers.Class(OpenLayers.Control.Button,{trigger:function(){this.map&&this.map.zoomToMaxExtent()},CLASS_NAME:"OpenLayers.Control.ZoomToMaxExtent"}),OpenLayers.Control.ZoomPanel=OpenLayers.Class(OpenLayers.Control.Panel,{initialize:function(e){OpenLayers.Control.Panel.prototype.initialize.apply(this,[e]),this.addControls([new OpenLayers.Control.ZoomIn,new OpenLayers.Control.ZoomToMaxExtent,new OpenLayers.Control.ZoomOut])},CLASS_NAME:"OpenLayers.Control.ZoomPanel"}),OpenLayers.Layer.HTTPRequest=OpenLayers.Class(OpenLayers.Layer,{URL_HASH_FACTOR:(Math.sqrt(5)-1)/2,url:null,params:null,reproject:!1,initialize:function(e,t,i,s){OpenLayers.Layer.prototype.initialize.apply(this,[e,s]),this.url=t,this.params||(this.params=OpenLayers.Util.extend({},i))},destroy:function(){this.params=this.url=null,OpenLayers.Layer.prototype.destroy.apply(this,arguments)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.HTTPRequest(this.name,this.url,this.params,this.getOptions())),OpenLayers.Layer.prototype.clone.apply(this,[e])},setUrl:function(e){this.url=e},mergeNewParams:function(e){return this.params=OpenLayers.Util.extend(this.params,e),e=this.redraw(),null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"params"}),e},redraw:function(e){return e?this.mergeNewParams({_olSalt:Math.random()}):OpenLayers.Layer.prototype.redraw.apply(this,[])},selectUrl:function(e,t){for(var i=1,s=0,n=e.length;s<n;s++)i=(i*=e.charCodeAt(s)*this.URL_HASH_FACTOR)-Math.floor(i);return t[Math.floor(i*t.length)]},getFullRequestString:function(e,t){var i,t=t||this.url,s=OpenLayers.Util.extend({},this.params),s=OpenLayers.Util.extend(s,e),n=OpenLayers.Util.getParameterString(s),n=(OpenLayers.Util.isArray(t)&&(t=this.selectUrl(n,t)),OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(t)));for(i in s)i.toUpperCase()in n&&delete s[i];return n=OpenLayers.Util.getParameterString(s),OpenLayers.Util.urlAppend(t,n)},CLASS_NAME:"OpenLayers.Layer.HTTPRequest"}),OpenLayers.Tile=OpenLayers.Class({events:null,eventListeners:null,id:null,layer:null,url:null,bounds:null,size:null,position:null,isLoading:!1,initialize:function(e,t,i,s,n,r){this.layer=e,this.position=t.clone(),this.setBounds(i),this.url=s,n&&(this.size=n.clone()),this.id=OpenLayers.Util.createUniqueID("Tile_"),OpenLayers.Util.extend(this,r),this.events=new OpenLayers.Events(this),this.eventListeners instanceof Object&&this.events.on(this.eventListeners)},unload:function(){this.isLoading&&(this.isLoading=!1,this.events.triggerEvent("unload"))},destroy:function(){this.position=this.size=this.bounds=this.layer=null,this.eventListeners&&this.events.un(this.eventListeners),this.events.destroy(),this.events=this.eventListeners=null},draw:function(e){e||this.clear();var t=this.shouldDraw();return t=t&&!e&&!1===this.events.triggerEvent("beforedraw")?null:t},shouldDraw:function(){var e,t=!1,i=this.layer.maxExtent;return i&&(e=(e=this.layer.map).baseLayer.wrapDateLine&&e.getMaxExtent(),this.bounds.intersectsBounds(i,{inclusive:!1,worldBounds:e})&&(t=!0)),t||this.layer.displayOutsideMaxExtent},setBounds:function(e){var t,i;e=e.clone(),this.layer.map.baseLayer.wrapDateLine&&(t=this.layer.map.getMaxExtent(),i=this.layer.map.getResolution(),e=e.wrapDateLine(t,{leftTolerance:i,rightTolerance:i})),this.bounds=e},moveTo:function(e,t,i){null==i&&(i=!0),this.setBounds(e),this.position=t.clone(),i&&this.draw()},clear:function(e){},CLASS_NAME:"OpenLayers.Tile"}),OpenLayers.Tile.Image=OpenLayers.Class(OpenLayers.Tile,{url:null,imgDiv:null,frame:null,imageReloadAttempts:null,layerAlphaHack:null,asyncRequestId:null,maxGetUrlLength:null,canvasContext:null,crossOriginKeyword:null,initialize:function(e,t,i,s,n,r){OpenLayers.Tile.prototype.initialize.apply(this,arguments),this.url=s,this.layerAlphaHack=this.layer.alpha&&OpenLayers.Util.alphaHack(),(null!=this.maxGetUrlLength||this.layer.gutter||this.layerAlphaHack)&&(this.frame=document.createElement("div"),this.frame.style.position="absolute",this.frame.style.overflow="hidden"),null!=this.maxGetUrlLength&&OpenLayers.Util.extend(this,OpenLayers.Tile.Image.IFrame)},destroy:function(){this.imgDiv&&(this.clear(),this.frame=this.imgDiv=null),this.asyncRequestId=null,OpenLayers.Tile.prototype.destroy.apply(this,arguments)},draw:function(){var e=OpenLayers.Tile.prototype.draw.apply(this,arguments);return e?(this.layer!=this.layer.map.baseLayer&&this.layer.reproject&&(this.bounds=this.getBoundsFromBaseLayer(this.position)),this.isLoading?this._loadEvent="reload":(this.isLoading=!0,this._loadEvent="loadstart"),this.renderTile(),this.positionTile()):!1===e&&this.unload(),e},renderTile:function(){var t;this.layer.async?(t=this.asyncRequestId=(this.asyncRequestId||0)+1,this.layer.getURLasync(this.bounds,function(e){t==this.asyncRequestId&&(this.url=e,this.initImage())},this)):(this.url=this.layer.getURL(this.bounds),this.initImage())},positionTile:function(){var e=this.getTile().style,t=this.frame?this.size:this.layer.getImageSize(this.bounds),i=1;this.layer instanceof OpenLayers.Layer.Grid&&(i=this.layer.getServerResolution()/this.layer.map.getResolution()),e.left=this.position.x+"px",e.top=this.position.y+"px",e.width=Math.round(i*t.w)+"px",e.height=Math.round(i*t.h)+"px"},clear:function(){OpenLayers.Tile.prototype.clear.apply(this,arguments);var e,t=this.imgDiv;t&&((e=this.getTile()).parentNode===this.layer.div&&this.layer.div.removeChild(e),this.setImgSrc(),!0===this.layerAlphaHack&&(t.style.filter=""),OpenLayers.Element.removeClass(t,"olImageLoadError")),this.canvasContext=null},getImage:function(){var e,t,i;return this.imgDiv||(this.imgDiv=OpenLayers.Tile.Image.IMAGE.cloneNode(!1),e=this.imgDiv.style,this.frame&&(i=t=0,this.layer.gutter&&(t=this.layer.gutter/this.layer.tileSize.w*100,i=this.layer.gutter/this.layer.tileSize.h*100),e.left=-t+"%",e.top=-i+"%",e.width=2*t+100+"%",e.height=2*i+100+"%"),e.visibility="hidden",e.opacity=0,this.layer.opacity<1&&(e.filter="alpha(opacity="+100*this.layer.opacity+")"),e.position="absolute",this.layerAlphaHack&&(e.paddingTop=e.height,e.height="0",e.width="100%"),this.frame&&this.frame.appendChild(this.imgDiv)),this.imgDiv},setImage:function(e){this.imgDiv=e},initImage:function(){var e,t;this.url||this.imgDiv?(this.events.triggerEvent("beforeload"),this.layer.div.appendChild(this.getTile()),this.events.triggerEvent(this._loadEvent),t=(e=this.getImage()).getAttribute("src")||"",this.url&&OpenLayers.Util.isEquivalentUrl(t,this.url)?this._loadTimeout=window.setTimeout(OpenLayers.Function.bind(this.onImageLoad,this),0):(this.stopLoading(),this.crossOriginKeyword&&e.removeAttribute("crossorigin"),OpenLayers.Event.observe(e,"load",OpenLayers.Function.bind(this.onImageLoad,this)),OpenLayers.Event.observe(e,"error",OpenLayers.Function.bind(this.onImageError,this)),this.imageReloadAttempts=0,this.setImgSrc(this.url))):this.isLoading=!1},setImgSrc:function(e){var t=this.imgDiv;e?(t.style.visibility="hidden",t.style.opacity=0,this.crossOriginKeyword&&("data:"!==e.substr(0,5)?t.setAttribute("crossorigin",this.crossOriginKeyword):t.removeAttribute("crossorigin")),t.src=e):(this.stopLoading(),this.imgDiv=null,t.parentNode&&t.parentNode.removeChild(t))},getTile:function(){return this.frame||this.getImage()},createBackBuffer:function(){var e;if(this.imgDiv&&!this.isLoading)return this.frame?(e=this.frame.cloneNode(!1)).appendChild(this.imgDiv):e=this.imgDiv,this.imgDiv=null,e},onImageLoad:function(){var e=this.imgDiv;this.stopLoading(),e.style.visibility="inherit",e.style.opacity=this.layer.opacity,this.isLoading=!1,this.canvasContext=null,this.events.triggerEvent("loadend"),!0===this.layerAlphaHack&&(e.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e.src+"', sizingMethod='scale')")},onImageError:function(){var e=this.imgDiv;null!=e.src&&(this.imageReloadAttempts++,this.imageReloadAttempts<=OpenLayers.IMAGE_RELOAD_ATTEMPTS?this.setImgSrc(this.layer.getURL(this.bounds)):(OpenLayers.Element.addClass(e,"olImageLoadError"),this.events.triggerEvent("loaderror"),this.onImageLoad()))},stopLoading:function(){OpenLayers.Event.stopObservingElement(this.imgDiv),window.clearTimeout(this._loadTimeout),delete this._loadTimeout},getCanvasContext:function(){var e;if(OpenLayers.CANVAS_SUPPORTED&&this.imgDiv&&!this.isLoading)return this.canvasContext||((e=document.createElement("canvas")).width=this.size.w,e.height=this.size.h,this.canvasContext=e.getContext("2d"),this.canvasContext.drawImage(this.imgDiv,0,0)),this.canvasContext},CLASS_NAME:"OpenLayers.Tile.Image"}),OpenLayers.Tile.Image.IMAGE=function(){var e=new Image;return e.className="olTileImage",e.galleryImg="no",e}(),OpenLayers.Layer.Grid=OpenLayers.Class(OpenLayers.Layer.HTTPRequest,{tileSize:null,tileOriginCorner:"bl",tileOrigin:null,tileOptions:null,tileClass:OpenLayers.Tile.Image,grid:null,singleTile:!1,ratio:1.5,buffer:0,transitionEffect:"resize",numLoadingTiles:0,serverResolutions:null,loading:!1,backBuffer:null,gridResolution:null,backBufferResolution:null,backBufferLonLat:null,backBufferTimerId:null,removeBackBufferDelay:null,className:null,gridLayout:null,rowSign:null,transitionendEvents:["transitionend","webkitTransitionEnd","otransitionend","oTransitionEnd"],initialize:function(e,t,i,s){OpenLayers.Layer.HTTPRequest.prototype.initialize.apply(this,arguments),this.grid=[],this._removeBackBuffer=OpenLayers.Function.bind(this.removeBackBuffer,this),this.initProperties(),this.rowSign="t"===this.tileOriginCorner.substr(0,1)?1:-1},initProperties:function(){void 0===this.options.removeBackBufferDelay&&(this.removeBackBufferDelay=this.singleTile?0:2500),void 0===this.options.className&&(this.className=this.singleTile?"olLayerGridSingleTile":"olLayerGrid")},setMap:function(e){OpenLayers.Layer.HTTPRequest.prototype.setMap.call(this,e),OpenLayers.Element.addClass(this.div,this.className)},removeMap:function(e){this.removeBackBuffer()},destroy:function(){this.removeBackBuffer(),this.clearGrid(),this.tileSize=this.grid=null,OpenLayers.Layer.HTTPRequest.prototype.destroy.apply(this,arguments)},clearGrid:function(){if(this.grid){for(var e=0,t=this.grid.length;e<t;e++)for(var i=this.grid[e],s=0,n=i.length;s<n;s++)this.destroyTile(i[s]);this.grid=[],this.gridLayout=this.gridResolution=null}},addOptions:function(e,t){e=void 0!==e.singleTile&&e.singleTile!==this.singleTile;OpenLayers.Layer.HTTPRequest.prototype.addOptions.apply(this,arguments),this.map&&e&&(this.initProperties(),this.clearGrid(),this.tileSize=this.options.tileSize,this.setTileSize(),this.moveTo(null,!0))},clone:function(e){return null==e&&(e=new OpenLayers.Layer.Grid(this.name,this.url,this.params,this.getOptions())),e=OpenLayers.Layer.HTTPRequest.prototype.clone.apply(this,[e]),null!=this.tileSize&&(e.tileSize=this.tileSize.clone()),e.grid=[],e.gridResolution=null,e.backBuffer=null,e.backBufferTimerId=null,e.loading=!1,e.numLoadingTiles=0,e},moveTo:function(e,t,i){var s,n,r;OpenLayers.Layer.HTTPRequest.prototype.moveTo.apply(this,arguments),null!=(e=e||this.map.getExtent())&&(s=!this.grid.length||t,n=this.getTilesBounds(),r=this.map.getResolution(),this.getServerResolution(r),this.singleTile?!s&&(i||n.containsBounds(e))||(t&&"resize"!==this.transitionEffect&&this.removeBackBuffer(),t&&"resize"!==this.transitionEffect||this.applyBackBuffer(r),this.initSingleTile(e)):(s=s||!n.intersectsBounds(e,{worldBounds:this.map.baseLayer.wrapDateLine&&this.map.getMaxExtent()}))?(!t||"resize"!==this.transitionEffect&&this.gridResolution!==r||this.applyBackBuffer(r),this.initGriddedTiles(e)):this.moveGriddedTiles())},getTileData:function(e){var t,i,s,n,r,a=null,o=e.lon,l=e.lat,h=this.grid.length;return this.map&&h&&(t=this.map.getResolution(),e=this.tileSize.w,i=this.tileSize.h,s=(n=this.grid[0][0].bounds).left,n=n.top,o<s&&this.map.baseLayer.wrapDateLine&&(o+=(r=this.map.getMaxExtent().getWidth())*Math.ceil((s-o)/r)),o=(o-s)/(t*e),l=(n-l)/(t*i),t=Math.floor(o),0<=(s=Math.floor(l))&&s<h&&(h=this.grid[s][t])&&(a={tile:h,i:Math.floor((o-t)*e),j:Math.floor((l-s)*i)})),a},destroyTile:function(e){this.removeTileMonitoringHooks(e),e.destroy()},getServerResolution:function(e){var t=Number.POSITIVE_INFINITY;if(e=e||this.map.getResolution(),this.serverResolutions&&-1===OpenLayers.Util.indexOf(this.serverResolutions,e)){for(var i,s,n,r=this.serverResolutions.length-1;0<=r&&(s=this.serverResolutions[r],!(t<(i=Math.abs(s-e))));r--)t=i,n=s;e=n}return e},getServerZoom:function(){var e=this.getServerResolution();return this.serverResolutions?OpenLayers.Util.indexOf(this.serverResolutions,e):this.map.getZoomForResolution(e)+(this.zoomOffset||0)},applyBackBuffer:function(e){null!==this.backBufferTimerId&&this.removeBackBuffer();var t=this.backBuffer;if(!t){if(!(t=this.createBackBuffer()))return;e===this.gridResolution?this.div.insertBefore(t,this.div.firstChild):this.map.baseLayer.div.parentNode.insertBefore(t,this.map.baseLayer.div),this.backBuffer=t;var i=this.grid[0][0].bounds;this.backBufferLonLat={lon:i.left,lat:i.top},this.backBufferResolution=this.gridResolution}for(var s,i=this.backBufferResolution/e,n=t.childNodes,r=n.length-1;0<=r;--r)(s=n[r]).style.top=(i*s._i*s._h|0)+"px",s.style.left=(i*s._j*s._w|0)+"px",s.style.width=Math.round(i*s._w)+"px",s.style.height=Math.round(i*s._h)+"px";e=this.getViewPortPxFromLonLat(this.backBufferLonLat,e),i=this.map.layerContainerOriginPx.y,t.style.left=Math.round(e.x-this.map.layerContainerOriginPx.x)+"px",t.style.top=Math.round(e.y-i)+"px"},createBackBuffer:function(){var e;if(0<this.grid.length){(e=document.createElement("div")).id=this.div.id+"_bb",e.className="olBackBuffer",e.style.position="absolute";var t=this.map;e.style.zIndex="resize"===this.transitionEffect?this.getZIndex()-1:t.Z_INDEX_BASE.BaseLayer-(t.getNumLayers()-t.getLayerIndex(this));for(var t=0,i=this.grid.length;t<i;t++)for(var s=0,n=this.grid[t].length;s<n;s++){var r=this.grid[t][s],a=this.grid[t][s].createBackBuffer();a&&(a._i=t,a._j=s,a._w=r.size.w,a._h=r.size.h,a.id=r.id+"_bb",e.appendChild(a))}}return e},removeBackBuffer:function(){if(this._transitionElement){for(var e=this.transitionendEvents.length-1;0<=e;--e)OpenLayers.Event.stopObserving(this._transitionElement,this.transitionendEvents[e],this._removeBackBuffer);delete this._transitionElement}this.backBuffer&&(this.backBuffer.parentNode&&this.backBuffer.parentNode.removeChild(this.backBuffer),(this.backBufferResolution=this.backBuffer=null)!==this.backBufferTimerId&&(window.clearTimeout(this.backBufferTimerId),this.backBufferTimerId=null))},moveByPx:function(e,t){this.singleTile||this.moveGriddedTiles()},setTileSize:function(e){this.singleTile&&((e=this.map.getSize()).h=parseInt(e.h*this.ratio,10),e.w=parseInt(e.w*this.ratio,10)),OpenLayers.Layer.HTTPRequest.prototype.setTileSize.apply(this,[e])},getTilesBounds:function(){var e,t=null,i=this.grid.length;return i&&(t=this.grid[i-1][0].bounds,i=this.grid[0].length*t.getWidth(),e=this.grid.length*t.getHeight(),t=new OpenLayers.Bounds(t.left,t.bottom,t.left+i,t.bottom+e)),t},initSingleTile:function(e){this.events.triggerEvent("retile");var t=e.getCenterLonLat(),i=e.getWidth()*this.ratio;e=e.getHeight()*this.ratio,t=new OpenLayers.Bounds(t.lon-i/2,t.lat-e/2,t.lon+i/2,t.lat+e/2),i=this.map.getLayerPxFromLonLat({lon:t.left,lat:t.top}),this.grid.length||(this.grid[0]=[]),(e=this.grid[0][0])?e.moveTo(t,i):(e=this.addTile(t,i),this.addTileMonitoringHooks(e),e.draw(),this.grid[0][0]=e),this.removeExcessTiles(1,1),this.gridResolution=this.getServerResolution()},calculateGridLayout:function(e,t,i){var s=i*this.tileSize.w,n=(i*=this.tileSize.h,Math.floor((e.left-t.lon)/s)-this.buffer),r=this.rowSign;return{tilelon:s,tilelat:i,startcol:n,startrow:e=Math[~r?"floor":"ceil"](r*(t.lat-e.top+i)/i)-this.buffer*r}},getTileOrigin:function(){var e,t=this.tileOrigin;return t||(t=this.getMaxExtent(),e={tl:["left","top"],tr:["right","top"],bl:["left","bottom"],br:["right","bottom"]}[this.tileOriginCorner],t=new OpenLayers.LonLat(t[e[0]],t[e[1]])),t},getTileBoundsForGridIndex:function(e,t){var i=this.getTileOrigin(),s=(a=this.gridLayout).tilelon,n=a.tilelat,r=a.startcol,a=a.startrow,o=this.rowSign;return new OpenLayers.Bounds(i.lon+(r+t)*s,i.lat-(a+e*o)*n*o,i.lon+(r+t+1)*s,i.lat-(a+(e-1)*o)*n*o)},initGriddedTiles:function(e){this.events.triggerEvent("retile");var t=this.map.getSize(),i=this.getTileOrigin(),s=this.map.getResolution(),n=this.getServerResolution(),s=this.tileSize.w/(r=s/n),r=this.tileSize.h/r,a=Math.ceil(t.h/r)+2*this.buffer+1,t=Math.ceil(t.w/s)+2*this.buffer+1,i=(this.gridLayout=n=this.calculateGridLayout(e,i,n),n.tilelon),o=n.tilelat,n=this.map.layerContainerOriginPx.x,l=this.map.layerContainerOriginPx.y,h=this.getTileBoundsForGridIndex(0,0),p=this.map.getViewPortPxFromLonLat(new OpenLayers.LonLat(h.left,h.top)),n=(p.x=Math.round(p.x)-n,p.y=Math.round(p.y)-l,[]),l=this.map.getCenter(),u=0;do{var c=this.grid[u],d=(c||this.grid.push(c=[]),0);do{var h=this.getTileBoundsForGridIndex(u,d),y=p.clone(),m=(y.x+=d*Math.round(s),y.y+=u*Math.round(r),c[d])}while(m?m.moveTo(h,y,!1):(m=this.addTile(h,y),this.addTileMonitoringHooks(m),c.push(m)),y=h.getCenterLonLat(),n.push({tile:m,distance:Math.pow(y.lon-l.lon,2)+Math.pow(y.lat-l.lat,2)}),d+=1,h.right<=e.right+i*this.buffer||d<t)}while(u+=1,h.bottom>=e.bottom-o*this.buffer||u<a);for(this.removeExcessTiles(u,d),this.gridResolution=s=this.getServerResolution(),n.sort(function(e,t){return e.distance-t.distance}),e=0,s=n.length;e<s;++e)n[e].tile.draw()},getMaxExtent:function(){return this.maxExtent},addTile:function(e,t){t=new this.tileClass(this,t,e,null,this.tileSize,this.tileOptions);return this.events.triggerEvent("addtile",{tile:t}),t},addTileMonitoringHooks:function(s){s.onLoadStart=function(){!1===this.loading&&(this.loading=!0,this.events.triggerEvent("loadstart")),this.events.triggerEvent("tileloadstart",{tile:s}),this.numLoadingTiles++,!this.singleTile&&this.backBuffer&&this.gridResolution===this.backBufferResolution&&OpenLayers.Element.addClass(s.getTile(),"olTileReplacing")},s.onLoadEnd=function(e){var t,i;if(this.numLoadingTiles--,e="unload"===e.type,this.events.triggerEvent("tileloaded",{tile:s,aborted:e}),this.singleTile||e||!this.backBuffer||this.gridResolution!==this.backBufferResolution||(t=s.getTile(),"none"===OpenLayers.Element.getStyle(t,"display")&&(i=document.getElementById(s.id+"_bb"))&&i.parentNode.removeChild(i),OpenLayers.Element.removeClass(t,"olTileReplacing")),0===this.numLoadingTiles){if(this.backBuffer)if(0===this.backBuffer.childNodes.length)this.removeBackBuffer();else{for(this._transitionElement=e?this.div.lastChild:s.imgDiv,t=(e=this.transitionendEvents).length-1;0<=t;--t)OpenLayers.Event.observe(this._transitionElement,e[t],this._removeBackBuffer);this.backBufferTimerId=window.setTimeout(this._removeBackBuffer,this.removeBackBufferDelay)}this.loading=!1,this.events.triggerEvent("loadend")}},s.onLoadError=function(){this.events.triggerEvent("tileerror",{tile:s})},s.events.on({loadstart:s.onLoadStart,loadend:s.onLoadEnd,unload:s.onLoadEnd,loaderror:s.onLoadError,scope:this})},removeTileMonitoringHooks:function(e){e.unload(),e.events.un({loadstart:e.onLoadStart,loadend:e.onLoadEnd,unload:e.onLoadEnd,loaderror:e.onLoadError,scope:this})},moveGriddedTiles:function(){for(var e=this.buffer+1;;){var t=(i=this.grid[0][0]).position.x+this.map.layerContainerOriginPx.x,i=i.position.y+this.map.layerContainerOriginPx.y,s=this.getServerResolution()/this.map.getResolution();if(-(s={w:Math.round(this.tileSize.w*s),h:Math.round(this.tileSize.h*s)}).w*(e-1)<t)this.shiftColumn(!0,s);else if(t<-s.w*e)this.shiftColumn(!1,s);else if(-s.h*(e-1)<i)this.shiftRow(!0,s);else{if(!(i<-s.h*e))break;this.shiftRow(!1,s)}}},shiftRow:function(e,t){var i=this.grid,s=e?0:i.length-1,n=e?-1:1;this.gridLayout.startrow+=n*this.rowSign;for(var r=i[s],a=i[e?"pop":"shift"](),o=0,l=a.length;o<l;o++){var h=a[o],p=r[o].position.clone();p.y+=t.h*n,h.moveTo(this.getTileBoundsForGridIndex(s,o),p)}i[e?"unshift":"push"](a)},shiftColumn:function(e,t){var i=this.grid,s=e?0:i[0].length-1,n=e?-1:1;this.gridLayout.startcol+=n;for(var r=0,a=i.length;r<a;r++){var o=i[r],l=o[s].position.clone(),h=o[e?"pop":"shift"]();l.x+=t.w*n,h.moveTo(this.getTileBoundsForGridIndex(r,s),l),o[e?"unshift":"push"](h)}},removeExcessTiles:function(e,t){for(;this.grid.length>e;)for(var i=this.grid.pop(),s=0,n=i.length;s<n;s++){var r=i[s];this.destroyTile(r)}for(s=0,n=this.grid.length;s<n;s++)for(;this.grid[s].length>t;)r=(i=this.grid[s]).pop(),this.destroyTile(r)},onMapResize:function(){this.singleTile&&(this.clearGrid(),this.setTileSize())},getTileBounds:function(e){var t=this.maxExtent,i=(s=this.getResolution())*this.tileSize.w,s=s*this.tileSize.h,n=this.getLonLatFromViewPortPx(e);return e=t.left+i*Math.floor((n.lon-t.left)/i),t=t.bottom+s*Math.floor((n.lat-t.bottom)/s),new OpenLayers.Bounds(e,t,e+i,t+s)},CLASS_NAME:"OpenLayers.Layer.Grid"}),OpenLayers.Format.ArcXML=OpenLayers.Class(OpenLayers.Format.XML,{fontStyleKeys:"antialiasing blockout font fontcolor fontsize fontstyle glowing interval outline printmode shadow transparency".split(" "),request:null,response:null,initialize:function(e){var t;this.request=new OpenLayers.Format.ArcXML.Request,this.response=new OpenLayers.Format.ArcXML.Response,e&&("feature"==e.requesttype?(this.request.get_image=null,t=this.request.get_feature.query,this.addCoordSys(t.featurecoordsys,e.featureCoordSys),this.addCoordSys(t.filtercoordsys,e.filterCoordSys),e.polygon?(t.isspatial=!0,t.spatialfilter.polygon=e.polygon):e.envelope&&(t.isspatial=!0,t.spatialfilter.envelope={minx:0,miny:0,maxx:0,maxy:0},this.parseEnvelope(t.spatialfilter.envelope,e.envelope))):"image"==e.requesttype?(this.request.get_feature=null,t=this.request.get_image.properties,this.parseEnvelope(t.envelope,e.envelope),this.addLayers(t.layerlist,e.layers),this.addImageSize(t.imagesize,e.tileSize),this.addCoordSys(t.featurecoordsys,e.featureCoordSys),this.addCoordSys(t.filtercoordsys,e.filterCoordSys)):this.request=null),OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},parseEnvelope:function(e,t){t&&4==t.length&&(e.minx=t[0],e.miny=t[1],e.maxx=t[2],e.maxy=t[3])},addLayers:function(e,t){for(var i=0,s=t.length;i<s;i++)e.push(t[i])},addImageSize:function(e,t){null!==t&&(e.width=t.w,e.height=t.h,e.printwidth=t.w,e.printheight=t.h)},addCoordSys:function(e,t){"string"==typeof t?(e.id=parseInt(t),e.string=t):"object"==_typeof(t)&&null!==t.proj&&(e.id=t.proj.srsProjNumber,e.string=t.proj.srsCode)},iserror:function(e){return e?null!==(e=(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])).documentElement.getElementsByTagName("ERROR"))&&0<e.length:""!==this.response.error},read:function(e){var t,i,s=null;if((s=(e="string"==typeof e?OpenLayers.Format.XML.prototype.read.apply(this,[e]):e)&&e.documentElement?"ARCXML"==e.documentElement.nodeName?e.documentElement:e.documentElement.getElementsByTagName("ARCXML")[0]:s)&&"parsererror"!==s.firstChild.nodeName)return this.parseResponse(s);try{t=e.firstChild.nodeValue,i=e.firstChild.childNodes[1].firstChild.nodeValue}catch(e){}throw{message:"Error parsing the ArcXML request",error:t,source:i}},write:function(e){e=e||this.request;var t=this.createElementNS("","ARCXML"),i=(t.setAttribute("version","1.1"),this.createElementNS("","REQUEST"));if(null!=e.get_image){var s=this.createElementNS("","GET_IMAGE"),n=(i.appendChild(s),this.createElementNS("","PROPERTIES"));if(s.appendChild(n),null!=(e=e.get_image.properties).featurecoordsys&&(s=this.createElementNS("","FEATURECOORDSYS"),n.appendChild(s),0===e.featurecoordsys.id?s.setAttribute("string",e.featurecoordsys.string):s.setAttribute("id",e.featurecoordsys.id)),null!=e.filtercoordsys&&(s=this.createElementNS("","FILTERCOORDSYS"),n.appendChild(s),0===e.filtercoordsys.id?s.setAttribute("string",e.filtercoordsys.string):s.setAttribute("id",e.filtercoordsys.id)),null!=e.envelope&&(s=this.createElementNS("","ENVELOPE"),n.appendChild(s),s.setAttribute("minx",e.envelope.minx),s.setAttribute("miny",e.envelope.miny),s.setAttribute("maxx",e.envelope.maxx),s.setAttribute("maxy",e.envelope.maxy)),s=this.createElementNS("","IMAGESIZE"),n.appendChild(s),s.setAttribute("height",e.imagesize.height),s.setAttribute("width",e.imagesize.width),e.imagesize.height==e.imagesize.printheight&&e.imagesize.width==e.imagesize.printwidth||(s.setAttribute("printheight",e.imagesize.printheight),s.setArrtibute("printwidth",e.imagesize.printwidth)),null!=e.background&&(s=this.createElementNS("","BACKGROUND"),n.appendChild(s),s.setAttribute("color",e.background.color.r+","+e.background.color.g+","+e.background.color.b),null!==e.background.transcolor&&s.setAttribute("transcolor",e.background.transcolor.r+","+e.background.transcolor.g+","+e.background.transcolor.b)),null!=e.layerlist&&0<e.layerlist.length)for(s=this.createElementNS("","LAYERLIST"),n.appendChild(s),n=0;n<e.layerlist.length;n++){var r=this.createElementNS("","LAYERDEF");if(s.appendChild(r),r.setAttribute("id",e.layerlist[n].id),r.setAttribute("visible",e.layerlist[n].visible),"object"==_typeof(e.layerlist[n].query)){var a=e.layerlist[n].query;if(a.where.length<0)continue;var o=null;(o="boolean"==typeof a.spatialfilter&&a.spatialfilter?this.createElementNS("","SPATIALQUERY"):this.createElementNS("","QUERY")).setAttribute("where",a.where),"number"==typeof a.accuracy&&0<a.accuracy&&o.setAttribute("accuracy",a.accuracy),"number"==typeof a.featurelimit&&a.featurelimit<2e3&&o.setAttribute("featurelimit",a.featurelimit),"string"==typeof a.subfields&&"#ALL#"!=a.subfields&&o.setAttribute("subfields",a.subfields),"string"==typeof a.joinexpression&&0<a.joinexpression.length&&o.setAttribute("joinexpression",a.joinexpression),"string"==typeof a.jointables&&0<a.jointables.length&&o.setAttribute("jointables",a.jointables),r.appendChild(o)}"object"==_typeof(e.layerlist[n].renderer)&&this.addRenderer(r,e.layerlist[n].renderer)}}else null!=e.get_feature&&((s=this.createElementNS("","GET_FEATURES")).setAttribute("outputmode","newxml"),s.setAttribute("checkesc","true"),e.get_feature.geometry?s.setAttribute("geometry",e.get_feature.geometry):s.setAttribute("geometry","false"),e.get_feature.compact&&s.setAttribute("compact",e.get_feature.compact),"number"==e.get_feature.featurelimit&&s.setAttribute("featurelimit",e.get_feature.featurelimit),s.setAttribute("globalenvelope","true"),i.appendChild(s),null!=e.get_feature.layer&&0<e.get_feature.layer.length&&((n=this.createElementNS("","LAYER")).setAttribute("id",e.get_feature.layer),s.appendChild(n)),null!=(e=e.get_feature.query)&&(n=null,n=e.isspatial?this.createElementNS("","SPATIALQUERY"):this.createElementNS("","QUERY"),s.appendChild(n),"number"==typeof e.accuracy&&n.setAttribute("accuracy",e.accuracy),null!=e.featurecoordsys&&(s=this.createElementNS("","FEATURECOORDSYS"),0==e.featurecoordsys.id?s.setAttribute("string",e.featurecoordsys.string):s.setAttribute("id",e.featurecoordsys.id),n.appendChild(s)),null!=e.filtercoordsys&&(s=this.createElementNS("","FILTERCOORDSYS"),0===e.filtercoordsys.id?s.setAttribute("string",e.filtercoordsys.string):s.setAttribute("id",e.filtercoordsys.id),n.appendChild(s)),0<e.buffer&&((s=this.createElementNS("","BUFFER")).setAttribute("distance",e.buffer),n.appendChild(s)),e.isspatial&&((s=this.createElementNS("","SPATIALFILTER")).setAttribute("relation",e.spatialfilter.relation),n.appendChild(s),e.spatialfilter.envelope?((r=this.createElementNS("","ENVELOPE")).setAttribute("minx",e.spatialfilter.envelope.minx),r.setAttribute("miny",e.spatialfilter.envelope.miny),r.setAttribute("maxx",e.spatialfilter.envelope.maxx),r.setAttribute("maxy",e.spatialfilter.envelope.maxy),s.appendChild(r)):"object"==_typeof(e.spatialfilter.polygon)&&s.appendChild(this.writePolygonGeometry(e.spatialfilter.polygon))),null!=e.where&&0<e.where.length&&n.setAttribute("where",e.where)));return t.appendChild(i),OpenLayers.Format.XML.prototype.write.apply(this,[t])},addGroupRenderer:function(e,t){var i=this.createElementNS("","GROUPRENDERER");e.appendChild(i);for(var s=0;s<t.length;s++)this.addRenderer(i,t[s])},addRenderer:function(e,t){var i;OpenLayers.Util.isArray(t)?this.addGroupRenderer(e,t):(i=this.createElementNS("",t.type.toUpperCase()+"RENDERER"),e.appendChild(i),"VALUEMAPRENDERER"==i.tagName?this.addValueMapRenderer(i,t):"VALUEMAPLABELRENDERER"==i.tagName?this.addValueMapLabelRenderer(i,t):"SIMPLELABELRENDERER"==i.tagName?this.addSimpleLabelRenderer(i,t):"SCALEDEPENDENTRENDERER"==i.tagName&&this.addScaleDependentRenderer(i,t))},addScaleDependentRenderer:function(e,t){"string"!=typeof t.lower&&"number"!=typeof t.lower||e.setAttribute("lower",t.lower),"string"!=typeof t.upper&&"number"!=typeof t.upper||e.setAttribute("upper",t.upper),this.addRenderer(e,t.renderer)},addValueMapLabelRenderer:function(e,t){if(e.setAttribute("lookupfield",t.lookupfield),e.setAttribute("labelfield",t.labelfield),"object"==_typeof(t.exacts))for(var i=0,s=t.exacts.length;i<s;i++){var n=t.exacts[i],r=this.createElementNS("","EXACT");if("string"==typeof n.value&&r.setAttribute("value",n.value),"string"==typeof n.label&&r.setAttribute("label",n.label),"string"==typeof n.method&&r.setAttribute("method",n.method),e.appendChild(r),"object"==_typeof(n.symbol)){var a=null;if(null!=(a="text"==n.symbol.type?this.createElementNS("","TEXTSYMBOL"):a)){for(var o=this.fontStyleKeys,l=0,h=o.length;l<h;l++){var p=o[l];n.symbol[p]&&a.setAttribute(p,n.symbol[p])}r.appendChild(a)}}}},addValueMapRenderer:function(e,t){if(e.setAttribute("lookupfield",t.lookupfield),"object"==_typeof(t.ranges))for(var i=0,s=t.ranges.length;i<s;i++){var n,r=t.ranges[i],a=this.createElementNS("","RANGE");a.setAttribute("lower",r.lower),a.setAttribute("upper",r.upper),e.appendChild(a),"object"!=_typeof(r.symbol)||(n=null)!=(n="simplepolygon"==r.symbol.type?this.createElementNS("","SIMPLEPOLYGONSYMBOL"):n)&&("string"==typeof r.symbol.boundarycolor&&n.setAttribute("boundarycolor",r.symbol.boundarycolor),"string"==typeof r.symbol.fillcolor&&n.setAttribute("fillcolor",r.symbol.fillcolor),"number"==typeof r.symbol.filltransparency&&n.setAttribute("filltransparency",r.symbol.filltransparency),a.appendChild(n))}else if("object"==_typeof(t.exacts))for(i=0,s=t.exacts.length;i<s;i++)r=t.exacts[i],a=this.createElementNS("","EXACT"),"string"==typeof r.value&&a.setAttribute("value",r.value),"string"==typeof r.label&&a.setAttribute("label",r.label),"string"==typeof r.method&&a.setAttribute("method",r.method),e.appendChild(a),"object"==_typeof(r.symbol)&&((n=null)!=(n="simplemarker"==r.symbol.type?this.createElementNS("","SIMPLEMARKERSYMBOL"):n)&&("string"==typeof r.symbol.antialiasing&&n.setAttribute("antialiasing",r.symbol.antialiasing),"string"==typeof r.symbol.color&&n.setAttribute("color",r.symbol.color),"string"==typeof r.symbol.outline&&n.setAttribute("outline",r.symbol.outline),"string"==typeof r.symbol.overlap&&n.setAttribute("overlap",r.symbol.overlap),"string"==typeof r.symbol.shadow&&n.setAttribute("shadow",r.symbol.shadow),"number"==typeof r.symbol.transparency&&n.setAttribute("transparency",r.symbol.transparency),"string"==typeof r.symbol.usecentroid&&n.setAttribute("usecentroid",r.symbol.usecentroid),"number"==typeof r.symbol.width&&n.setAttribute("width",r.symbol.width),a.appendChild(n)))},addSimpleLabelRenderer:function(e,t){e.setAttribute("field",t.field);for(var i="featureweight howmanylabels labelbufferratio labelpriorities labelweight linelabelposition rotationalangles".split(" "),s=0,n=i.length;s<n;s++){var r=i[s];t[r]&&e.setAttribute(r,t[r])}if("text"==t.symbol.type){var a=t.symbol,o=this.createElementNS("","TEXTSYMBOL");for(e.appendChild(o),s=0,n=(i=this.fontStyleKeys).length;s<n;s++)a[r=i[s]]&&o.setAttribute(r,t[r])}},writePolygonGeometry:function(e){if(!(e instanceof OpenLayers.Geometry.Polygon))throw{message:"Cannot write polygon geometry to ArcXML with an "+e.CLASS_NAME+" object.",geometry:e};for(var t=this.createElementNS("","POLYGON"),i=0,s=e.components.length;i<s;i++){for(var n=e.components[i],r=this.createElementNS("","RING"),a=0,o=n.components.length;a<o;a++){var l=n.components[a],h=this.createElementNS("","POINT");h.setAttribute("x",l.x),h.setAttribute("y",l.y),r.appendChild(h)}t.appendChild(r)}return t},parseResponse:function(e){"string"==typeof e&&(e=(new OpenLayers.Format.XML).read(e));var t=new OpenLayers.Format.ArcXML.Response,i=e.getElementsByTagName("ERROR");if(null!=i&&0<i.length)t.error=this.getChildValue(i,"Unknown error.");else{if(null==(i=e.getElementsByTagName("RESPONSE"))||0==i.length)return t.error="No RESPONSE tag found in ArcXML response.",t;if("IMAGE"==(s="#text"==(s=i[0].firstChild.nodeName)?i[0].firstChild.nextSibling.nodeName:s))i=e.getElementsByTagName("ENVELOPE"),e=e.getElementsByTagName("OUTPUT"),null==i||0==i.length?t.error="No ENVELOPE tag found in ArcXML response.":null==e||0==e.length?t.error="No OUTPUT tag found in ArcXML response.":(i=this.parseAttributes(i[0]),s=this.parseAttributes(e[0]),t.image="string"==typeof s.type?{envelope:i,output:{type:s.type,data:this.getChildValue(e[0])}}:{envelope:i,output:s});else if("FEATURES"==s){if(i=(e=i[0].getElementsByTagName("FEATURES"))[0].getElementsByTagName("FEATURECOUNT"),t.features.featurecount=i[0].getAttribute("count"),0<t.features.featurecount)for(i=e[0].getElementsByTagName("ENVELOPE"),t.features.envelope=this.parseAttributes(i[0],"number"),e=e[0].getElementsByTagName("FEATURE"),i=0;i<e.length;i++){for(var s=new OpenLayers.Feature.Vector,n=e[i].getElementsByTagName("FIELD"),r=0;r<n.length;r++){var a=n[r].getAttribute("name"),o=n[r].getAttribute("value");s.attributes[a]=o}if(0<(n=e[i].getElementsByTagName("POLYGON")).length){for(n=n[0].getElementsByTagName("RING"),r=[],a=0;a<n.length;a++){(o=[]).push(this.parsePointGeometry(n[a]));for(var l=n[a].getElementsByTagName("HOLE"),h=0;h<l.length;h++)o.push(this.parsePointGeometry(l[h]));r.push(new OpenLayers.Geometry.Polygon(o))}s.geometry=1==r.length?r[0]:new OpenLayers.Geometry.MultiPolygon(r)}t.features.feature.push(s)}}else t.error="Unidentified response type."}return t},parseAttributes:function(e,t){for(var i={},s=0;s<e.attributes.length;s++)i[e.attributes[s].nodeName]="number"==t?parseFloat(e.attributes[s].nodeValue):e.attributes[s].nodeValue;return i},parsePointGeometry:function(e){var t=[],i=e.getElementsByTagName("COORDS");if(0<i.length)for(e=(e=this.getChildValue(i[0])).split(/;/),i=0;i<e.length;i++){var s=e[i].split(/ /);t.push(new OpenLayers.Geometry.Point(s[0],s[1]))}else if(0<(e=e.getElementsByTagName("POINT")).length)for(i=0;i<e.length;i++)t.push(new OpenLayers.Geometry.Point(parseFloat(e[i].getAttribute("x")),parseFloat(e[i].getAttribute("y"))));return new OpenLayers.Geometry.LinearRing(t)},CLASS_NAME:"OpenLayers.Format.ArcXML"}),OpenLayers.Format.ArcXML.Request=OpenLayers.Class({initialize:function(e){return OpenLayers.Util.extend(this,{get_image:{properties:{background:null,draw:!0,envelope:{minx:0,miny:0,maxx:0,maxy:0},featurecoordsys:{id:0,string:"",datumtransformid:0,datumtransformstring:""},filtercoordsys:{id:0,string:"",datumtransformid:0,datumtransformstring:""},imagesize:{height:0,width:0,dpi:96,printheight:0,printwidth:0,scalesymbols:!1},layerlist:[],output:{baseurl:"",legendbaseurl:"",legendname:"",legendpath:"",legendurl:"",name:"",path:"",type:"jpg",url:""}}},get_feature:{layer:"",query:{isspatial:!1,featurecoordsys:{id:0,string:"",datumtransformid:0,datumtransformstring:""},filtercoordsys:{id:0,string:"",datumtransformid:0,datumtransformstring:""},buffer:0,where:"",spatialfilter:{relation:"envelope_intersection",envelope:null}}},environment:{separators:{cs:" ",ts:";"}},layer:[],workspaces:[]})},CLASS_NAME:"OpenLayers.Format.ArcXML.Request"}),OpenLayers.Format.ArcXML.Response=OpenLayers.Class({initialize:function(e){return OpenLayers.Util.extend(this,{image:{envelope:null,output:""},features:{featurecount:0,envelope:null,feature:[]},error:""})},CLASS_NAME:"OpenLayers.Format.ArcXML.Response"}),!function(){function e(){this._object=t&&!i?new t:new window.ActiveXObject("Microsoft.XMLHTTP"),this._listeners=[]}function l(){return new e}function h(e){l.onreadystatechange&&l.onreadystatechange.apply(e),e.dispatchEvent({type:"readystatechange",bubbles:!1,cancelable:!1,timeStamp:new Date+0})}function p(e){try{e.responseText=e._object.responseText}catch(e){}try{var t,i=e._object,s=i.responseXML,n=i.responseText;d&&n&&s&&!s.documentElement&&i.getResponseHeader("Content-Type").match(/[^\/]+\/[^\+]+\+xml/)&&((s=new window.ActiveXObject("Microsoft.XMLDOM")).async=!1,s.validateOnParse=!1,s.loadXML(n)),t=s&&(d&&0!=s.parseError||!s.documentElement||s.documentElement&&"parsererror"==s.documentElement.tagName)?null:s,e.responseXML=t}catch(e){}try{e.status=e._object.status}catch(e){}try{e.statusText=e._object.statusText}catch(e){}}function u(e){e._object.onreadystatechange=new window.Function}var t=window.XMLHttpRequest,c=!!window.controllers,d=window.document.all&&!window.opera,i=d&&window.navigator.userAgent.match(/MSIE 7.0/);l.prototype=e.prototype,c&&t.wrapped&&(l.wrapped=t.wrapped),l.UNSENT=0,l.OPENED=1,l.HEADERS_RECEIVED=2,l.LOADING=3,l.DONE=4,l.prototype.readyState=l.UNSENT,l.prototype.responseText="",l.prototype.responseXML=null,l.prototype.status=0,l.prototype.statusText="",l.prototype.priority="NORMAL",l.prototype.onreadystatechange=null,l.onreadystatechange=null,l.onopen=null,l.onsend=null,l.onabort=null,l.prototype.open=function(e,t,i,s,n){delete this._headers,arguments.length<3&&(i=!0),this._async=i;var r,a=this,o=this.readyState;d&&i&&(r=function(){o!=l.DONE&&(u(a),a.abort())},window.attachEvent("onunload",r)),l.onopen&&l.onopen.apply(this,arguments),4<arguments.length?this._object.open(e,t,i,s,n):3<arguments.length?this._object.open(e,t,i,s):this._object.open(e,t,i),this.readyState=l.OPENED,h(this),this._object.onreadystatechange=function(){c&&!i||(a.readyState=a._object.readyState,p(a),a._aborted?a.readyState=l.UNSENT:(a.readyState==l.DONE&&(delete a._data,u(a),d&&i&&window.detachEvent("onunload",r)),o!=a.readyState&&h(a),o=a.readyState))}},l.prototype.send=function(e){l.onsend&&l.onsend.apply(this,arguments),(e=arguments.length?e:null)&&e.nodeType&&(e=window.XMLSerializer?(new window.XMLSerializer).serializeToString(e):e.xml,this._headers["Content-Type"]||this._object.setRequestHeader("Content-Type","application/xml")),this._data=e;e:if(this._object.send(this._data),c&&!this._async)for(this.readyState=l.OPENED,p(this);this.readyState<l.DONE;)if(this.readyState++,h(this),this._aborted)break e},l.prototype.abort=function(){l.onabort&&l.onabort.apply(this,arguments),this.readyState>l.UNSENT&&(this._aborted=!0),this._object.abort(),u(this),this.readyState=l.UNSENT,delete this._data},l.prototype.getAllResponseHeaders=function(){return this._object.getAllResponseHeaders()},l.prototype.getResponseHeader=function(e){return this._object.getResponseHeader(e)},l.prototype.setRequestHeader=function(e,t){return this._headers||(this._headers={}),this._headers[e]=t,this._object.setRequestHeader(e,t)},l.prototype.addEventListener=function(e,t,i){for(var s,n=0;s=this._listeners[n];n++)if(s[0]==e&&s[1]==t&&s[2]==i)return;this._listeners.push([e,t,i])},l.prototype.removeEventListener=function(e,t,i){for(var s,n=0;(s=this._listeners[n])&&(s[0]!=e||s[1]!=t||s[2]!=i);n++);s&&this._listeners.splice(n,1)},l.prototype.dispatchEvent=function(e){"readystatechange"==(e={type:e.type,target:this,currentTarget:this,eventPhase:2,bubbles:e.bubbles,cancelable:e.cancelable,timeStamp:e.timeStamp,stopPropagation:function(){},preventDefault:function(){},initEvent:function(){}}).type&&this.onreadystatechange&&(this.onreadystatechange.handleEvent||this.onreadystatechange).apply(this,[e]);for(var t,i=0;t=this._listeners[i];i++)t[0]!=e.type||t[2]||(t[1].handleEvent||t[1]).apply(this,[e])},l.prototype.toString=function(){return"[object XMLHttpRequest]"},l.toString=function(){return"[XMLHttpRequest]"},window.Function.prototype.apply||(window.Function.prototype.apply=function(e,t){t=t||[],e.__func=this,e.__func(t[0],t[1],t[2],t[3],t[4]),delete e.__func}),OpenLayers.Request||(OpenLayers.Request={}),OpenLayers.Request.XMLHttpRequest=l}(),OpenLayers.ProxyHost="",OpenLayers.Request||(OpenLayers.Request={}),OpenLayers.Util.extend(OpenLayers.Request,{DEFAULT_CONFIG:{method:"GET",url:window.location.href,async:!0,user:void 0,password:void 0,params:null,proxy:OpenLayers.ProxyHost,headers:{},data:null,callback:function(){},success:null,failure:null,scope:null},URL_SPLIT_REGEX:/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/,events:new OpenLayers.Events(void 0),makeSameOrigin:function(e,t){var i,s=0!==e.indexOf("http"),n=!s&&e.match(this.URL_SPLIT_REGEX);return n&&(i=window.location,s=n[1]==i.protocol&&n[3]==i.hostname,n=n[4],i=i.port,(80!=n&&""!=n||"80"!=i&&""!=i)&&(s=s&&n==i)),s||t&&(e="function"==typeof t?t(e):t+encodeURIComponent(e)),e},issue:function(e){var t,i=OpenLayers.Util.extend(this.DEFAULT_CONFIG,{proxy:OpenLayers.ProxyHost}),i=((e=e||{}).headers=e.headers||{},(e=OpenLayers.Util.applyDefaults(e,i)).headers=OpenLayers.Util.applyDefaults(e.headers,i.headers),!1);for(t in e.headers)e.headers.hasOwnProperty(t)&&"x-requested-with"===t.toLowerCase()&&(i=!0);!1===i&&(e.headers["X-Requested-With"]="XMLHttpRequest");var s,n=new OpenLayers.Request.XMLHttpRequest,r=OpenLayers.Util.urlAppend(e.url,OpenLayers.Util.getParameterString(e.params||{})),r=OpenLayers.Request.makeSameOrigin(r,e.proxy);for(s in n.open(e.method,r,e.async,e.user,e.password),e.headers)n.setRequestHeader(s,e.headers[s]);var a=this.events,o=this;return!(n.onreadystatechange=function(){n.readyState==OpenLayers.Request.XMLHttpRequest.DONE&&!1!==a.triggerEvent("complete",{request:n,config:e,requestUrl:r})&&o.runCallbacks({request:n,config:e,requestUrl:r})})===e.async?n.send(e.data):window.setTimeout(function(){0!==n.readyState&&n.send(e.data)},0),n},runCallbacks:function(e){var t,i,s=e.request,n=e.config,r=n.scope?OpenLayers.Function.bind(n.callback,n.scope):n.callback;n.success&&(t=n.scope?OpenLayers.Function.bind(n.success,n.scope):n.success),n.failure&&(i=n.scope?OpenLayers.Function.bind(n.failure,n.scope):n.failure),"file:"==OpenLayers.Util.createUrlObject(n.url).protocol&&s.responseText&&(s.status=200),r(s),(!s.status||200<=s.status&&s.status<300)&&(this.events.triggerEvent("success",e),t&&t(s)),s.status&&(s.status<200||300<=s.status)&&(this.events.triggerEvent("failure",e),i&&i(s))},GET:function(e){return e=OpenLayers.Util.extend(e,{method:"GET"}),OpenLayers.Request.issue(e)},POST:function(e){return(e=OpenLayers.Util.extend(e,{method:"POST"})).headers=e.headers||{},"CONTENT-TYPE"in OpenLayers.Util.upperCaseObject(e.headers)||(e.headers["Content-Type"]="application/xml"),OpenLayers.Request.issue(e)},PUT:function(e){return(e=OpenLayers.Util.extend(e,{method:"PUT"})).headers=e.headers||{},"CONTENT-TYPE"in OpenLayers.Util.upperCaseObject(e.headers)||(e.headers["Content-Type"]="application/xml"),OpenLayers.Request.issue(e)},DELETE:function(e){return e=OpenLayers.Util.extend(e,{method:"DELETE"}),OpenLayers.Request.issue(e)},HEAD:function(e){return e=OpenLayers.Util.extend(e,{method:"HEAD"}),OpenLayers.Request.issue(e)},OPTIONS:function(e){return e=OpenLayers.Util.extend(e,{method:"OPTIONS"}),OpenLayers.Request.issue(e)}}),OpenLayers.Layer.ArcIMS=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{ClientVersion:"9.2",ServiceName:""},featureCoordSys:"4326",filterCoordSys:"4326",layers:null,async:!0,name:"ArcIMS",isBaseLayer:!0,DEFAULT_OPTIONS:{tileSize:new OpenLayers.Size(512,512),featureCoordSys:"4326",filterCoordSys:"4326",layers:null,isBaseLayer:!0,async:!0,name:"ArcIMS"},initialize:function(e,t,i){this.tileSize=new OpenLayers.Size(512,512),this.params=OpenLayers.Util.applyDefaults({ServiceName:i.serviceName},this.DEFAULT_PARAMS),this.options=OpenLayers.Util.applyDefaults(i,this.DEFAULT_OPTIONS),OpenLayers.Layer.Grid.prototype.initialize.apply(this,[e,t,this.params,i]),this.transparent&&(this.isBaseLayer||(this.isBaseLayer=!1),"image/jpeg"==this.format&&(this.format=OpenLayers.Util.alphaHack()?"image/gif":"image/png")),null===this.options.layers&&(this.options.layers=[])},getURL:function(e){var t="";return e=this.adjustBounds(e),e=new OpenLayers.Format.ArcXML(OpenLayers.Util.extend(this.options,{requesttype:"image",envelope:e.toArray(),tileSize:this.tileSize})),null!=(e=new OpenLayers.Request.POST({url:this.getFullRequestString(),data:e.write(),async:!1}))&&((t=e.responseXML)&&t.documentElement||(t=e.responseText),t=(new OpenLayers.Format.ArcXML).read(t),t=this.getUrlOrImage(t.image.output)),t},getURLasync:function(e,i,s){e=this.adjustBounds(e),e=new OpenLayers.Format.ArcXML(OpenLayers.Util.extend(this.options,{requesttype:"image",envelope:e.toArray(),tileSize:this.tileSize})),OpenLayers.Request.POST({url:this.getFullRequestString(),async:!0,data:e.write(),callback:function(e){var t=e.responseXML;t&&t.documentElement||(t=e.responseText),e=(new OpenLayers.Format.ArcXML).read(t),i.call(s,this.getUrlOrImage(e.image.output))},scope:this})},getUrlOrImage:function(e){var t="";return e.url?t=e.url:e.data&&(t="data:image/"+e.type+";base64,"+e.data),t},setLayerQuery:function(e,t){for(var i=0;i<this.options.layers.length;i++)if(e==this.options.layers[i].id)return void(this.options.layers[i].query=t);this.options.layers.push({id:e,visible:!0,query:t})},getFeatureInfo:function(e,t,i){var s=i.buffer||1,n=i.callback||function(){},r=i.scope||window,a={},o=(OpenLayers.Util.extend(a,this.options),a.requesttype="feature",e instanceof OpenLayers.LonLat?(a.polygon=null,a.envelope=[e.lon-s,e.lat-s,e.lon+s,e.lat+s]):e instanceof OpenLayers.Geometry.Polygon&&(a.envelope=null,a.polygon=e),new OpenLayers.Format.ArcXML(a));OpenLayers.Util.extend(o.request.get_feature,i),o.request.get_feature.layer=t.id,"number"==typeof t.query.accuracy?o.request.get_feature.query.accuracy=t.query.accuracy:(e=this.map.getCenter(),(i=this.map.getViewPortPxFromLonLat(e)).x++,i=this.map.getLonLatFromPixel(i),o.request.get_feature.query.accuracy=i.lon-e.lon),o.request.get_feature.query.where=t.query.where,o.request.get_feature.query.spatialfilter.relation="area_intersection",OpenLayers.Request.POST({url:this.getFullRequestString({CustomService:"Query"}),data:o.write(),callback:function(e){e=o.parseResponse(e.responseText),o.iserror()?n.call(r,null):n.call(r,e.features)}})},clone:function(e){return null==e&&(e=new OpenLayers.Layer.ArcIMS(this.name,this.url,this.getOptions())),OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},CLASS_NAME:"OpenLayers.Layer.ArcIMS"}),OpenLayers.Control.PanZoom=OpenLayers.Class(OpenLayers.Control,{slideFactor:50,slideRatio:null,buttons:null,position:null,initialize:function(e){this.position=new OpenLayers.Pixel(OpenLayers.Control.PanZoom.X,OpenLayers.Control.PanZoom.Y),OpenLayers.Control.prototype.initialize.apply(this,arguments)},destroy:function(){this.map&&this.map.events.unregister("buttonclick",this,this.onButtonClick),this.removeButtons(),this.position=this.buttons=null,OpenLayers.Control.prototype.destroy.apply(this,arguments)},setMap:function(e){OpenLayers.Control.prototype.setMap.apply(this,arguments),this.map.events.register("buttonclick",this,this.onButtonClick)},draw:function(e){OpenLayers.Control.prototype.draw.apply(this,arguments),e=this.position,this.buttons=[];var t={w:18,h:18},i=new OpenLayers.Pixel(e.x+t.w/2,e.y);return this._addButton("panup","north-mini.png",i,t),e.y=i.y+t.h,this._addButton("panleft","west-mini.png",e,t),this._addButton("panright","east-mini.png",e.add(t.w,0),t),this._addButton("pandown","south-mini.png",i.add(0,2*t.h),t),this._addButton("zoomin","zoom-plus-mini.png",i.add(0,3*t.h+5),t),this._addButton("zoomworld","zoom-world-mini.png",i.add(0,4*t.h+5),t),this._addButton("zoomout","zoom-minus-mini.png",i.add(0,5*t.h+5),t),this.div},_addButton:function(e,t,i,s){return t=OpenLayers.Util.getImageLocation(t),(i=OpenLayers.Util.createAlphaImageDiv(this.id+"_"+e,i,s,t,"absolute")).style.cursor="pointer",this.div.appendChild(i),i.action=e,i.className="olButton",this.buttons.push(i),i},_removeButton:function(e){this.div.removeChild(e),OpenLayers.Util.removeItem(this.buttons,e)},removeButtons:function(){for(var e=this.buttons.length-1;0<=e;--e)this._removeButton(this.buttons[e])},onButtonClick:function(e){switch(e.buttonElement.action){case"panup":this.map.pan(0,-this.getSlideFactor("h"));break;case"pandown":this.map.pan(0,this.getSlideFactor("h"));break;case"panleft":this.map.pan(-this.getSlideFactor("w"),0);break;case"panright":this.map.pan(this.getSlideFactor("w"),0);break;case"zoomin":this.map.zoomIn();break;case"zoomout":this.map.zoomOut();break;case"zoomworld":this.map.zoomToMaxExtent()}},getSlideFactor:function(e){return this.slideRatio?this.map.getSize()[e]*this.slideRatio:this.slideFactor},CLASS_NAME:"OpenLayers.Control.PanZoom"}),OpenLayers.Control.PanZoom.X=4,OpenLayers.Control.PanZoom.Y=4,OpenLayers.Control.PanZoomBar=OpenLayers.Class(OpenLayers.Control.PanZoom,{zoomStopWidth:18,zoomStopHeight:11,slider:null,sliderEvents:null,zoombarDiv:null,zoomWorldIcon:!1,panIcons:!0,forceFixedZoomLevel:!1,mouseDragStart:null,deltaY:null,zoomStart:null,destroy:function(){this._removeZoomBar(),this.map.events.un({changebaselayer:this.redraw,updatesize:this.redraw,scope:this}),OpenLayers.Control.PanZoom.prototype.destroy.apply(this,arguments),delete this.mouseDragStart,delete this.zoomStart},setMap:function(e){OpenLayers.Control.PanZoom.prototype.setMap.apply(this,arguments),this.map.events.on({changebaselayer:this.redraw,updatesize:this.redraw,scope:this})},redraw:function(){null!=this.div&&(this.removeButtons(),this._removeZoomBar()),this.draw()},draw:function(e){OpenLayers.Control.prototype.draw.apply(this,arguments),e=this.position.clone(),this.buttons=[];var t,i,s={w:18,h:18};return this.panIcons?(t=new OpenLayers.Pixel(e.x+s.w/2,e.y),i=s.w,this.zoomWorldIcon&&(t=new OpenLayers.Pixel(e.x+s.w,e.y)),this._addButton("panup","north-mini.png",t,s),e.y=t.y+s.h,this._addButton("panleft","west-mini.png",e,s),this.zoomWorldIcon&&(this._addButton("zoomworld","zoom-world-mini.png",e.add(s.w,0),s),i*=2),this._addButton("panright","east-mini.png",e.add(i,0),s),this._addButton("pandown","south-mini.png",t.add(0,2*s.h),s),this._addButton("zoomin","zoom-plus-mini.png",t.add(0,3*s.h+5),s),t=this._addZoomBar(t.add(0,4*s.h+5)),this._addButton("zoomout","zoom-minus-mini.png",t,s)):(this._addButton("zoomin","zoom-plus-mini.png",e,s),t=this._addZoomBar(e.add(0,s.h)),this._addButton("zoomout","zoom-minus-mini.png",t,s),this.zoomWorldIcon&&(t=t.add(0,s.h+3),this._addButton("zoomworld","zoom-world-mini.png",t,s))),this.div},_addZoomBar:function(e){var t=OpenLayers.Util.getImageLocation("slider.png"),i=this.id+"_"+this.map.id,s=this.map.getMinZoom(),n=this.map.getNumZoomLevels()-1-this.map.getZoom(),r=((n=OpenLayers.Util.createAlphaImageDiv(i,e.add(-1,n*this.zoomStopHeight),{w:20,h:9},t,"absolute")).style.cursor="move",this.slider=n,this.sliderEvents=new OpenLayers.Events(this,n,null,!0,{includeXY:!0}),this.sliderEvents.on({touchstart:this.zoomBarDown,touchmove:this.zoomBarDrag,touchend:this.zoomBarUp,mousedown:this.zoomBarDown,mousemove:this.zoomBarDrag,mouseup:this.zoomBarUp}),{w:this.zoomStopWidth,h:this.zoomStopHeight*(this.map.getNumZoomLevels()-s)}),t=OpenLayers.Util.getImageLocation("zoombar.png"),i=null;return OpenLayers.Util.alphaHack()?(i=this.id+"_"+this.map.id,(i=OpenLayers.Util.createAlphaImageDiv(i,e,{w:r.w,h:this.zoomStopHeight},t,"absolute",null,"crop")).style.height=r.h+"px"):i=OpenLayers.Util.createDiv("OpenLayers_Control_PanZoomBar_Zoombar"+this.map.id,e,r,t),i.style.cursor="pointer",i.className="olButton",this.zoombarDiv=i,this.div.appendChild(i),this.startTop=parseInt(i.style.top),this.div.appendChild(n),this.map.events.register("zoomend",this,this.moveZoomBar),e.add(0,this.zoomStopHeight*(this.map.getNumZoomLevels()-s))},_removeZoomBar:function(){this.sliderEvents.un({touchstart:this.zoomBarDown,touchmove:this.zoomBarDrag,touchend:this.zoomBarUp,mousedown:this.zoomBarDown,mousemove:this.zoomBarDrag,mouseup:this.zoomBarUp}),this.sliderEvents.destroy(),this.div.removeChild(this.zoombarDiv),this.zoombarDiv=null,this.div.removeChild(this.slider),this.slider=null,this.map.events.unregister("zoomend",this,this.moveZoomBar)},onButtonClick:function(e){OpenLayers.Control.PanZoom.prototype.onButtonClick.apply(this,arguments),e.buttonElement===this.zoombarDiv&&(e=e.buttonXY.y/this.zoomStopHeight,!this.forceFixedZoomLevel&&this.map.fractionalZoom||(e=Math.floor(e)),e=this.map.getNumZoomLevels()-1-e,e=Math.min(Math.max(e,0),this.map.getNumZoomLevels()-1),this.map.zoomTo(e))},passEventToSlider:function(e){this.sliderEvents.handleBrowserEvent(e)},zoomBarDown:function(e){(OpenLayers.Event.isLeftClick(e)||OpenLayers.Event.isSingleTouch(e))&&(this.map.events.on({touchmove:this.passEventToSlider,mousemove:this.passEventToSlider,mouseup:this.passEventToSlider,scope:this}),this.mouseDragStart=e.xy.clone(),this.zoomStart=e.xy.clone(),this.div.style.cursor="move",this.zoombarDiv.offsets=null,OpenLayers.Event.stop(e))},zoomBarDrag:function(e){var t,i;null!=this.mouseDragStart&&(t=this.mouseDragStart.y-e.xy.y,i=OpenLayers.Util.pagePosition(this.zoombarDiv),0<e.clientY-i[1]&&e.clientY-i[1]<parseInt(this.zoombarDiv.style.height)-2&&(t=parseInt(this.slider.style.top)-t,this.slider.style.top=t+"px",this.mouseDragStart=e.xy.clone()),this.deltaY=this.zoomStart.y-e.xy.y,OpenLayers.Event.stop(e))},zoomBarUp:function(e){var t;(OpenLayers.Event.isLeftClick(e)||"touchend"===e.type)&&this.mouseDragStart&&(this.div.style.cursor="",this.map.events.un({touchmove:this.passEventToSlider,mouseup:this.passEventToSlider,mousemove:this.passEventToSlider,scope:this}),t=this.map.zoom,t=!this.forceFixedZoomLevel&&this.map.fractionalZoom?(t+=this.deltaY/this.zoomStopHeight,Math.min(Math.max(t,0),this.map.getNumZoomLevels()-1)):(t+=this.deltaY/this.zoomStopHeight,Math.max(Math.round(t),0)),this.map.zoomTo(t),this.zoomStart=this.mouseDragStart=null,this.deltaY=0,OpenLayers.Event.stop(e))},moveZoomBar:function(){var e=(this.map.getNumZoomLevels()-1-this.map.getZoom())*this.zoomStopHeight+this.startTop+1;this.slider.style.top=e+"px"},CLASS_NAME:"OpenLayers.Control.PanZoomBar"}),OpenLayers.Format.WFSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.1.0",CLASS_NAME:"OpenLayers.Format.WFSCapabilities"}),OpenLayers.Format.WFSCapabilities.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{wfs:"http://www.opengis.net/wfs",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",ows:"http://www.opengis.net/ows"},errorProperty:"featureTypeList",defaultPrefix:"wfs",read:function(e){(e="string"==typeof e?OpenLayers.Format.XML.prototype.read.apply(this,[e]):e)&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),t},readers:{wfs:{WFS_Capabilities:function(e,t){this.readChildNodes(e,t)},FeatureTypeList:function(e,t){t.featureTypeList={featureTypes:[]},this.readChildNodes(e,t.featureTypeList)},FeatureType:function(e,t){var i={};this.readChildNodes(e,i),t.featureTypes.push(i)},Name:function(e,t){var i=this.getChildValue(e);i&&(i=i.split(":"),t.name=i.pop(),0<i.length&&(t.featureNS=this.lookupNamespaceURI(e,i[0])))},Title:function(e,t){e=this.getChildValue(e);e&&(t.title=e)},Abstract:function(e,t){e=this.getChildValue(e);e&&(t.abstract=e)}}},CLASS_NAME:"OpenLayers.Format.WFSCapabilities.v1"}),OpenLayers.Format.WFSCapabilities.v1_1_0=OpenLayers.Class(OpenLayers.Format.WFSCapabilities.v1,{regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},readers:{wfs:OpenLayers.Util.applyDefaults({DefaultSRS:function(e,t){e=this.getChildValue(e);e&&(t.srs=e)}},OpenLayers.Format.WFSCapabilities.v1.prototype.readers.wfs),ows:OpenLayers.Format.OWSCommon.v1.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.WFSCapabilities.v1_1_0"}),OpenLayers.Layer.Image=OpenLayers.Class(OpenLayers.Layer,{isBaseLayer:!0,url:null,extent:null,size:null,tile:null,aspectRatio:null,initialize:function(e,t,i,s,n){this.url=t,this.maxExtent=this.extent=i,this.size=s,OpenLayers.Layer.prototype.initialize.apply(this,[e,n]),this.aspectRatio=this.extent.getHeight()/this.size.h/(this.extent.getWidth()/this.size.w)},destroy:function(){this.tile&&(this.removeTileMonitoringHooks(this.tile),this.tile.destroy(),this.tile=null),OpenLayers.Layer.prototype.destroy.apply(this,arguments)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.Image(this.name,this.url,this.extent,this.size,this.getOptions())),OpenLayers.Layer.prototype.clone.apply(this,[e])},setMap:function(e){null==this.options.maxResolution&&(this.options.maxResolution=this.aspectRatio*this.extent.getWidth()/this.size.w),OpenLayers.Layer.prototype.setMap.apply(this,arguments)},moveTo:function(e,t,i){OpenLayers.Layer.prototype.moveTo.apply(this,arguments);var s=null==this.tile;(t||s)&&(this.setTileSize(),t=this.map.getLayerPxFromLonLat({lon:this.extent.left,lat:this.extent.top}),s?(this.tile=new OpenLayers.Tile.Image(this,t,this.extent,null,this.tileSize),this.addTileMonitoringHooks(this.tile)):(this.tile.size=this.tileSize.clone(),this.tile.position=t.clone()),this.tile.draw())},setTileSize:function(){var e=this.extent.getWidth()/this.map.getResolution(),t=this.extent.getHeight()/this.map.getResolution();this.tileSize=new OpenLayers.Size(e,t)},addTileMonitoringHooks:function(e){e.onLoadStart=function(){this.events.triggerEvent("loadstart")},e.events.register("loadstart",this,e.onLoadStart),e.onLoadEnd=function(){this.events.triggerEvent("loadend")},e.events.register("loadend",this,e.onLoadEnd),e.events.register("unload",this,e.onLoadEnd)},removeTileMonitoringHooks:function(e){e.unload(),e.events.un({loadstart:e.onLoadStart,loadend:e.onLoadEnd,unload:e.onLoadEnd,scope:this})},setUrl:function(e){this.url=e,this.tile.draw()},getURL:function(e){return this.url},CLASS_NAME:"OpenLayers.Layer.Image"}),OpenLayers.Strategy=OpenLayers.Class({layer:null,options:null,active:null,autoActivate:!0,autoDestroy:!0,initialize:function(e){OpenLayers.Util.extend(this,e),this.options=e,this.active=!1},destroy:function(){this.deactivate(),this.options=this.layer=null},setLayer:function(e){this.layer=e},activate:function(){return!this.active&&(this.active=!0)},deactivate:function(){return!!this.active&&!(this.active=!1)},CLASS_NAME:"OpenLayers.Strategy"}),OpenLayers.Strategy.Save=OpenLayers.Class(OpenLayers.Strategy,{events:null,auto:!1,timer:null,initialize:function(e){OpenLayers.Strategy.prototype.initialize.apply(this,[e]),this.events=new OpenLayers.Events(this)},activate:function(){var e=OpenLayers.Strategy.prototype.activate.call(this);return e&&this.auto&&("number"==typeof this.auto?this.timer=window.setInterval(OpenLayers.Function.bind(this.save,this),1e3*this.auto):this.layer.events.on({featureadded:this.triggerSave,afterfeaturemodified:this.triggerSave,scope:this})),e},deactivate:function(){var e=OpenLayers.Strategy.prototype.deactivate.call(this);return e&&this.auto&&("number"==typeof this.auto?window.clearInterval(this.timer):this.layer.events.un({featureadded:this.triggerSave,afterfeaturemodified:this.triggerSave,scope:this})),e},triggerSave:function(e){var t=e.feature;t.state!==OpenLayers.State.INSERT&&t.state!==OpenLayers.State.UPDATE&&t.state!==OpenLayers.State.DELETE||this.save([e.feature])},save:function(e){e=e||this.layer.features,this.events.triggerEvent("start",{features:e});var t=this.layer.projection,i=this.layer.map.getProjectionObject();if(!i.equals(t)){for(var s,n,r=e.length,a=Array(r),o=0;o<r;++o)(n=(s=e[o]).clone()).fid=s.fid,n.state=s.state,s.url&&(n.url=s.url),n._original=s,n.geometry.transform(i,t),a[o]=n;e=a}this.layer.protocol.commit(e,{callback:this.onCommit,scope:this})},onCommit:function(e){var t={response:e};if(e.success()){for(var i,s=e.reqFeatures,n=[],r=e.insertIds||[],a=0,o=0,l=s.length;o<l;++o)(e=(i=(i=s[o])._original||i).state)&&(e==OpenLayers.State.DELETE?n.push(i):e==OpenLayers.State.INSERT&&(i.fid=r[a],++a),i.state=null);0<n.length&&this.layer.destroyFeatures(n),this.events.triggerEvent("success",t)}else this.events.triggerEvent("fail",t)},CLASS_NAME:"OpenLayers.Strategy.Save"}),OpenLayers.Events.featureclick=OpenLayers.Class({cache:null,map:null,provides:["featureclick","nofeatureclick","featureover","featureout"],initialize:function(t){if((this.target=t).object instanceof OpenLayers.Map)this.setMap(t.object);else{if(!(t.object instanceof OpenLayers.Layer.Vector))throw"Listeners for '"+this.provides.join("', '")+"' events can only be registered for OpenLayers.Layer.Vector or OpenLayers.Map instances";t.object.map?this.setMap(t.object.map):t.object.events.register("added",this,function(e){this.setMap(t.object.map)})}for(var e=this.provides.length-1;0<=e;--e)t.extensions[this.provides[e]]=!0},setMap:function(e){this.map=e,this.cache={},e.events.register("mousedown",this,this.start,{extension:!0}),e.events.register("mouseup",this,this.onClick,{extension:!0}),e.events.register("touchstart",this,this.start,{extension:!0}),e.events.register("touchmove",this,this.cancel,{extension:!0}),e.events.register("touchend",this,this.onClick,{extension:!0}),e.events.register("mousemove",this,this.onMousemove,{extension:!0})},start:function(e){this.startEvt=e},cancel:function(e){delete this.startEvt},onClick:function(e){if(this.startEvt&&("touchend"===e.type||OpenLayers.Event.isLeftClick(e))){e=this.getFeatures(this.startEvt),delete this.startEvt;for(var t,i,s={},n=0,r=e.length;n<r&&!(s[(i=(t=e[n]).layer).id]=!0)!==this.triggerEvent("featureclick",{feature:t});++n);for(n=0,r=this.map.layers.length;n<r;++n)(i=this.map.layers[n])instanceof OpenLayers.Layer.Vector&&!s[i.id]&&this.triggerEvent("nofeatureclick",{layer:i})}},onMousemove:function(e){delete this.startEvt;var t=this.getFeatures(e),i={};e=[];for(var s,n=0,r=t.length;n<r;++n)i[(s=t[n]).id]=s,this.cache[s.id]||e.push(s);var a,t=[];for(a in this.cache)(s=this.cache[a]).layer&&s.layer.map?i[s.id]||t.push(s):delete this.cache[a];for(n=0,r=e.length;n<r&&(s=e[n],this.cache[s.id]=s,!1!==(a=this.triggerEvent("featureover",{feature:s})));++n);for(n=0,r=t.length;n<r&&(s=t[n],delete this.cache[s.id],!1!==(a=this.triggerEvent("featureout",{feature:s})));++n);},triggerEvent:function(e,t){var i=(t.feature||t).layer,s=this.target.object;if(s instanceof OpenLayers.Map||s===i)return this.target.triggerEvent(e,t)},getFeatures:function(e){for(var t,i,s,n=e.clientX,r=e.clientY,a=[],o=[],l=[],h=this.map.layers.length-1;0<=h;--h)if("none"!==(t=this.map.layers[h]).div.style.display)if(t.renderer instanceof OpenLayers.Renderer.Elements){if(t instanceof OpenLayers.Layer.Vector)for(i=document.elementFromPoint(n,r);i&&i._featureId;)i=!!(s=t.getFeatureById(i._featureId))&&(a.push(s),i.style.display="none",o.push(i),document.elementFromPoint(n,r));l.push(t),t.div.style.display="none"}else t.renderer instanceof OpenLayers.Renderer.Canvas&&(s=t.renderer.getFeatureIdFromEvent(e))&&(a.push(s),l.push(t));for(h=0,e=o.length;h<e;++h)o[h].style.display="";for(h=l.length-1;0<=h;--h)l[h].div.style.display="block";return a},destroy:function(){for(var e=this.provides.length-1;0<=e;--e)delete this.target.extensions[this.provides[e]];this.map.events.un({mousemove:this.onMousemove,mousedown:this.start,mouseup:this.onClick,touchstart:this.start,touchmove:this.cancel,touchend:this.onClick,scope:this}),delete this.cache,delete this.map,delete this.target}}),OpenLayers.Events.nofeatureclick=OpenLayers.Events.featureclick,OpenLayers.Events.featureover=OpenLayers.Events.featureclick,OpenLayers.Events.featureout=OpenLayers.Events.featureclick,OpenLayers.Format.GPX=OpenLayers.Class(OpenLayers.Format.XML,{defaultDesc:"No description available",extractWaypoints:!0,extractTracks:!0,extractRoutes:!0,extractAttributes:!0,namespaces:{gpx:"http://www.topografix.com/GPX/1/1",xsi:"http://www.w3.org/2001/XMLSchema-instance"},schemaLocation:"http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",creator:"OpenLayers",initialize:function(e){this.externalProjection=new OpenLayers.Projection("EPSG:4326"),OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));var t=[];if(this.extractTracks)for(var i=e.getElementsByTagName("trk"),s=0,n=i.length;s<n;s++){var r={};this.extractAttributes&&(r=this.parseAttributes(i[s]));for(var a=this.getElementsByTagNameNS(i[s],i[s].namespaceURI,"trkseg"),o=0,l=a.length;o<l;o++){var h=this.extractSegment(a[o],"trkpt");t.push(new OpenLayers.Feature.Vector(h,r))}}if(this.extractRoutes)for(i=0,s=(n=e.getElementsByTagName("rte")).length;i<s;i++)r={},this.extractAttributes&&(r=this.parseAttributes(n[i])),a=this.extractSegment(n[i],"rtept"),t.push(new OpenLayers.Feature.Vector(a,r));if(this.extractWaypoints)for(i=0,n=(e=e.getElementsByTagName("wpt")).length;i<n;i++)r={},this.extractAttributes&&(r=this.parseAttributes(e[i])),s=new OpenLayers.Geometry.Point(e[i].getAttribute("lon"),e[i].getAttribute("lat")),t.push(new OpenLayers.Feature.Vector(s,r));if(this.internalProjection&&this.externalProjection)for(r=0,e=t.length;r<e;r++)t[r].geometry.transform(this.externalProjection,this.internalProjection);return t},extractSegment:function(e,t){for(var i=this.getElementsByTagNameNS(e,e.namespaceURI,t),s=[],n=0,r=i.length;n<r;n++)s.push(new OpenLayers.Geometry.Point(i[n].getAttribute("lon"),i[n].getAttribute("lat")));return new OpenLayers.Geometry.LineString(s)},parseAttributes:function(e){var t,i,s={};for(e=e.firstChild;e;)1==e.nodeType&&e.firstChild&&(3==(t=e.firstChild).nodeType||4==t.nodeType)&&("trkseg"!=(i=e.prefix?e.nodeName.split(":")[1]:e.nodeName)&&"rtept"!=i&&(s[i]=t.nodeValue)),e=e.nextSibling;return s},write:function(e,t){e=OpenLayers.Util.isArray(e)?e:[e];var i=this.createElementNS(this.namespaces.gpx,"gpx");i.setAttribute("version","1.1"),i.setAttribute("creator",this.creator),this.setAttributes(i,{"xsi:schemaLocation":this.schemaLocation}),t&&"object"==_typeof(t)&&i.appendChild(this.buildMetadataNode(t));for(var s=0,n=e.length;s<n;s++)i.appendChild(this.buildFeatureNode(e[s]));return OpenLayers.Format.XML.prototype.write.apply(this,[i])},buildMetadataNode:function(e){for(var t=["name","desc","author"],i=this.createElementNS(this.namespaces.gpx,"metadata"),s=0;s<t.length;s++){var n,r=t[s];e[r]&&((n=this.createElementNS(this.namespaces.gpx,r)).appendChild(this.createTextNode(e[r])),i.appendChild(n))}return i},buildFeatureNode:function(e){var t,i=(i=e.geometry).clone();if(this.internalProjection&&this.externalProjection&&i.transform(this.internalProjection,this.externalProjection),"OpenLayers.Geometry.Point"==i.CLASS_NAME)return t=this.buildWptNode(i),this.appendAttributesNode(t,e),t;t=this.createElementNS(this.namespaces.gpx,"trk"),this.appendAttributesNode(t,e),e=this.buildTrkSegNode(i);for(var i=0,s=(e=OpenLayers.Util.isArray(e)?e:[e]).length;i<s;i++)t.appendChild(e[i]);return t},buildTrkSegNode:function(e){var t,i,s,n;if("OpenLayers.Geometry.LineString"==e.CLASS_NAME||"OpenLayers.Geometry.LinearRing"==e.CLASS_NAME){for(t=this.createElementNS(this.namespaces.gpx,"trkseg"),i=0,s=e.components.length;i<s;i++)n=e.components[i],t.appendChild(this.buildTrkPtNode(n));return t}for(t=[],i=0,s=e.components.length;i<s;i++)t.push(this.buildTrkSegNode(e.components[i]));return t},buildTrkPtNode:function(e){var t=this.createElementNS(this.namespaces.gpx,"trkpt");return t.setAttribute("lon",e.x),t.setAttribute("lat",e.y),t},buildWptNode:function(e){var t=this.createElementNS(this.namespaces.gpx,"wpt");return t.setAttribute("lon",e.x),t.setAttribute("lat",e.y),t},appendAttributesNode:function(e,t){var i=this.createElementNS(this.namespaces.gpx,"name");i.appendChild(this.createTextNode(t.attributes.name||t.id)),e.appendChild(i),(i=this.createElementNS(this.namespaces.gpx,"desc")).appendChild(this.createTextNode(t.attributes.description||this.defaultDesc)),e.appendChild(i)},CLASS_NAME:"OpenLayers.Format.GPX"}),OpenLayers.Format.WMSDescribeLayer=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.1.1",CLASS_NAME:"OpenLayers.Format.WMSDescribeLayer"}),OpenLayers.Format.WMSDescribeLayer.v1_1_1=OpenLayers.Class(OpenLayers.Format.WMSDescribeLayer,{initialize:function(e){OpenLayers.Format.WMSDescribeLayer.prototype.initialize.apply(this,[e])},read:function(e){for(var t,i=(e="string"==typeof e?OpenLayers.Format.XML.prototype.read.apply(this,[e]):e).documentElement.childNodes,s={layerDescriptions:[]},n=0;n<i.length;++n)if("LayerDescription"==(r=(t=i[n]).nodeName)){var r=t.getAttribute("name"),a="",o="",l="";t.getAttribute("owsType")?(a=t.getAttribute("owsType"),o=t.getAttribute("owsURL")):""!=t.getAttribute("wfs")?(a="WFS",o=t.getAttribute("wfs")):""!=t.getAttribute("wcs")&&(a="WCS",o=t.getAttribute("wcs")),0<(t=t.getElementsByTagName("Query")).length&&((l=t[0].getAttribute("typeName"))||(l=t[0].getAttribute("typename"))),s.layerDescriptions.push(t={layerName:r,owsType:a,owsURL:o,typeName:l}),s.length=s.layerDescriptions.length,s[s.length-1]=t}else if("ServiceException"==r)return{error:(new OpenLayers.Format.OGCExceptionReport).read(e)};return s},CLASS_NAME:"OpenLayers.Format.WMSDescribeLayer.v1_1_1"}),OpenLayers.Format.WMSDescribeLayer.v1_1_0=OpenLayers.Format.WMSDescribeLayer.v1_1_1,OpenLayers.Layer.XYZ=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:!0,sphericalMercator:!1,zoomOffset:0,serverResolutions:null,initialize:function(e,t,i){(i&&i.sphericalMercator||this.sphericalMercator)&&(i=OpenLayers.Util.extend({projection:"EPSG:900913",numZoomLevels:19},i)),OpenLayers.Layer.Grid.prototype.initialize.apply(this,[e||this.name,t||this.url,{},i])},clone:function(e){return null==e&&(e=new OpenLayers.Layer.XYZ(this.name,this.url,this.getOptions())),OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getURL:function(e){e=this.getXYZ(e);var t=this.url;return OpenLayers.Util.isArray(t)&&(t=this.selectUrl(""+e.x+e.y+e.z,t)),OpenLayers.String.format(t,e)},getXYZ:function(e){var t,i=this.getServerResolution(),s=Math.round((e.left-this.maxExtent.left)/(i*this.tileSize.w));return e=Math.round((this.maxExtent.top-e.top)/(i*this.tileSize.h)),i=this.getServerZoom(),{x:s=this.wrapDateLine?(s%(t=Math.pow(2,i))+t)%t:s,y:e,z:i}},setMap:function(e){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments),this.tileOrigin||(this.tileOrigin=new OpenLayers.LonLat(this.maxExtent.left,this.maxExtent.bottom))},CLASS_NAME:"OpenLayers.Layer.XYZ"}),OpenLayers.Layer.OSM=OpenLayers.Class(OpenLayers.Layer.XYZ,{name:"OpenStreetMap",url:["http://a.tile.openstreetmap.org/${z}/${x}/${y}.png","http://b.tile.openstreetmap.org/${z}/${x}/${y}.png","http://c.tile.openstreetmap.org/${z}/${x}/${y}.png"],attribution:"&copy; <a href='http://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors",sphericalMercator:!0,wrapDateLine:!0,tileOptions:null,initialize:function(e,t,i){OpenLayers.Layer.XYZ.prototype.initialize.apply(this,arguments),this.tileOptions=OpenLayers.Util.extend({crossOriginKeyword:"anonymous"},this.options&&this.options.tileOptions)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.OSM(this.name,this.url,this.getOptions())),OpenLayers.Layer.XYZ.prototype.clone.apply(this,[e])},CLASS_NAME:"OpenLayers.Layer.OSM"}),OpenLayers.Renderer=OpenLayers.Class({container:null,root:null,extent:null,locked:!1,size:null,resolution:null,map:null,featureDx:0,initialize:function(e,t){this.container=OpenLayers.Util.getElement(e),OpenLayers.Util.extend(this,t)},destroy:function(){this.map=this.resolution=this.size=this.extent=this.container=null},supported:function(){return!1},setExtent:function(e,t){var i;return this.extent=e.clone(),this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&(i=e.getWidth()/this.map.getExtent().getWidth(),e=e.scale(1/i),this.extent=e.wrapDateLine(this.map.getMaxExtent()).scale(i)),t&&(this.resolution=null),!0},setSize:function(e){this.size=e.clone(),this.resolution=null},getResolution:function(){return this.resolution=this.resolution||this.map.getResolution()},drawFeature:function(e,t){if(null==t&&(t=e.style),e.geometry){var i,s,n,r,a=e.geometry.getBounds();if(a)return this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&(r=this.map.getMaxExtent()),a.intersectsBounds(this.extent,{worldBounds:r})?this.calculateFeatureDx(a,r):t={display:"none"},a=this.drawGeometry(e.geometry,t,e.id),"none"!=t.display&&t.label&&!1!==a?(r=e.geometry.getCentroid(),(t.labelXOffset||t.labelYOffset)&&(i=isNaN(t.labelXOffset)?0:t.labelXOffset,s=isNaN(t.labelYOffset)?0:t.labelYOffset,n=this.getResolution(),r.move(i*n,s*n)),this.drawText(e.id,t,r)):this.removeText(e.id),a}},calculateFeatureDx:function(e,t){this.featureDx=0,t&&(t=t.getWidth(),this.featureDx=Math.round(((e.left+e.right)/2-(this.extent.left+this.extent.right)/2)/t)*t)},drawGeometry:function(e,t,i){},drawText:function(e,t,i){},removeText:function(e){},clear:function(){},getFeatureIdFromEvent:function(e){},eraseFeatures:function(e){for(var t=0,i=(e=OpenLayers.Util.isArray(e)?e:[e]).length;t<i;++t){var s=e[t];this.eraseGeometry(s.geometry,s.id),this.removeText(s.id)}},eraseGeometry:function(e,t){},moveRoot:function(e){},getRenderLayerId:function(){return this.container.id},applyDefaultSymbolizer:function(e){var t=OpenLayers.Util.extend({},OpenLayers.Renderer.defaultSymbolizer);return!1===e.stroke&&(delete t.strokeWidth,delete t.strokeColor),!1===e.fill&&delete t.fillColor,OpenLayers.Util.extend(t,e),t},CLASS_NAME:"OpenLayers.Renderer"}),OpenLayers.Renderer.defaultSymbolizer={fillColor:"#000000",strokeColor:"#000000",strokeWidth:2,fillOpacity:1,strokeOpacity:1,pointRadius:0,labelAlign:"cm"},OpenLayers.Renderer.symbol={star:[350,75,379,161,469,161,397,215,423,301,350,250,277,301,303,215,231,161,321,161,350,75],cross:[4,0,6,0,6,4,10,4,10,6,6,6,6,10,4,10,4,6,0,6,0,4,4,4,4,0],x:[0,0,25,0,50,35,75,0,100,0,65,50,100,100,75,100,50,65,25,100,0,100,35,50,0,0],square:[0,0,0,1,1,1,1,0,0,0],triangle:[0,10,10,10,5,0,0,10]},OpenLayers.Renderer.Canvas=OpenLayers.Class(OpenLayers.Renderer,{hitDetection:!0,hitOverflow:0,canvas:null,features:null,pendingRedraw:!1,cachedSymbolBounds:{},initialize:function(e,t){OpenLayers.Renderer.prototype.initialize.apply(this,arguments),this.root=document.createElement("canvas"),this.container.appendChild(this.root),this.canvas=this.root.getContext("2d"),this.features={},this.hitDetection&&(this.hitCanvas=document.createElement("canvas"),this.hitContext=this.hitCanvas.getContext("2d"))},setExtent:function(){return OpenLayers.Renderer.prototype.setExtent.apply(this,arguments),!1},eraseGeometry:function(e,t){this.eraseFeatures(this.features[t][0])},supported:function(){return OpenLayers.CANVAS_SUPPORTED},setSize:function(e){this.size=e.clone();var t=this.root;t.style.width=e.w+"px",t.style.height=e.h+"px",t.width=e.w,t.height=e.h,this.resolution=null,this.hitDetection&&((t=this.hitCanvas).style.width=e.w+"px",t.style.height=e.h+"px",t.width=e.w,t.height=e.h)},drawFeature:function(e,t){var i,s;return e.geometry&&(t=this.applyDefaultSymbolizer(t||e.style),i=e.geometry.getBounds(),this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&(s=this.map.getMaxExtent()),s=i&&i.intersectsBounds(this.extent,{worldBounds:s}),(i="none"!==t.display&&!!i&&s)?this.features[e.id]=[e,t]:delete this.features[e.id],this.pendingRedraw=!0),this.pendingRedraw&&!this.locked&&(this.redraw(),this.pendingRedraw=!1),i},drawGeometry:function(e,t,i){var s=e.CLASS_NAME;if("OpenLayers.Geometry.Collection"==s||"OpenLayers.Geometry.MultiPoint"==s||"OpenLayers.Geometry.MultiLineString"==s||"OpenLayers.Geometry.MultiPolygon"==s)for(s=0;s<e.components.length;s++)this.drawGeometry(e.components[s],t,i);else switch(e.CLASS_NAME){case"OpenLayers.Geometry.Point":this.drawPoint(e,t,i);break;case"OpenLayers.Geometry.LineString":this.drawLineString(e,t,i);break;case"OpenLayers.Geometry.LinearRing":this.drawLinearRing(e,t,i);break;case"OpenLayers.Geometry.Polygon":this.drawPolygon(e,t,i)}},drawExternalGraphic:function(n,e,r){var a=new Image,t=e.title||e.graphicTitle,o=(t&&(a.title=t),e.graphicWidth||e.graphicHeight),l=e.graphicHeight||e.graphicWidth,o=o||2*e.pointRadius,l=l||2*e.pointRadius,h=null!=e.graphicXOffset?e.graphicXOffset:-.5*o,p=null!=e.graphicYOffset?e.graphicYOffset:-.5*l,u=e.graphicOpacity||e.fillOpacity;a.onload=OpenLayers.Function.bind(function(){var e,t,i,s;this.features[r]&&(e=(t=this.getLocalXY(n))[0],t=t[1],isNaN(e)||isNaN(t)||(e=e+h|0,t=t+p|0,(i=this.canvas).globalAlpha=u,s=OpenLayers.Renderer.Canvas.drawImageScaleFactor||(OpenLayers.Renderer.Canvas.drawImageScaleFactor=/android 2.1/.test(navigator.userAgent.toLowerCase())?320/window.screen.width:1),i.drawImage(a,e*s,t*s,o*s,l*s),this.hitDetection&&(this.setHitContextStyle("fill",r),this.hitContext.fillRect(e,t,o,l))))},this),a.src=e.externalGraphic},drawNamedSymbol:function(e,t,i){var s,n,r,a=Math.PI/180,o=OpenLayers.Renderer.symbol[t.graphicName];if(!o)throw Error(t.graphicName+" is not a valid symbol name");if(!(!o.length||o.length<2||(n=(e=this.getLocalXY(e))[0],r=e[1],isNaN(n)||isNaN(r)))){if(this.canvas.lineCap="round",this.canvas.lineJoin="round",this.hitDetection&&(this.hitContext.lineCap="round",this.hitContext.lineJoin="round"),t.graphicName in this.cachedSymbolBounds)s=this.cachedSymbolBounds[t.graphicName];else{for(s=new OpenLayers.Bounds,e=0;e<o.length;e+=2)s.extend(new OpenLayers.LonLat(o[e],o[e+1]));this.cachedSymbolBounds[t.graphicName]=s}if(this.canvas.save(),this.hitDetection&&this.hitContext.save(),this.canvas.translate(n,r),this.hitDetection&&this.hitContext.translate(n,r),e=a*t.rotation,isNaN(e)||(this.canvas.rotate(e),this.hitDetection&&this.hitContext.rotate(e)),a=2*t.pointRadius/Math.max(s.getWidth(),s.getHeight()),this.canvas.scale(a,a),this.hitDetection&&this.hitContext.scale(a,a),e=s.getCenterLonLat().lon,s=s.getCenterLonLat().lat,this.canvas.translate(-e,-s),this.hitDetection&&this.hitContext.translate(-e,-s),r=t.strokeWidth,t.strokeWidth=r/a,!1!==t.fill){for(this.setCanvasStyle("fill",t),this.canvas.beginPath(),e=0;e<o.length;e+=2)s=o[e],n=o[e+1],0==e&&this.canvas.moveTo(s,n),this.canvas.lineTo(s,n);if(this.canvas.closePath(),this.canvas.fill(),this.hitDetection){for(this.setHitContextStyle("fill",i,t),this.hitContext.beginPath(),e=0;e<o.length;e+=2)s=o[e],n=o[e+1],0==e&&this.canvas.moveTo(s,n),this.hitContext.lineTo(s,n);this.hitContext.closePath(),this.hitContext.fill()}}if(!1!==t.stroke){for(this.setCanvasStyle("stroke",t),this.canvas.beginPath(),e=0;e<o.length;e+=2)s=o[e],n=o[e+1],0==e&&this.canvas.moveTo(s,n),this.canvas.lineTo(s,n);if(this.canvas.closePath(),this.canvas.stroke(),this.hitDetection){for(this.setHitContextStyle("stroke",i,t,a),this.hitContext.beginPath(),e=0;e<o.length;e+=2)s=o[e],n=o[e+1],0==e&&this.hitContext.moveTo(s,n),this.hitContext.lineTo(s,n);this.hitContext.closePath(),this.hitContext.stroke()}}t.strokeWidth=r,this.canvas.restore(),this.hitDetection&&this.hitContext.restore(),this.setCanvasStyle("reset")}},setCanvasStyle:function(e,t){"fill"===e?(this.canvas.globalAlpha=t.fillOpacity,this.canvas.fillStyle=t.fillColor):"stroke"===e?(this.canvas.globalAlpha=t.strokeOpacity,this.canvas.strokeStyle=t.strokeColor,this.canvas.lineWidth=t.strokeWidth):(this.canvas.globalAlpha=0,this.canvas.lineWidth=1)},featureIdToHex:function(e){16777216<=(e=Number(e.split("_").pop())+1)&&(this.hitOverflow=e-16777215,e=e%16777216+1);var t=(e="000000"+e.toString(16)).length;return"#"+e.substring(t-6,t)},setHitContextStyle:function(e,t,i,s){t=this.featureIdToHex(t),"fill"==e?(this.hitContext.globalAlpha=1,this.hitContext.fillStyle=t):"stroke"==e?(this.hitContext.globalAlpha=1,this.hitContext.strokeStyle=t,void 0===s?this.hitContext.lineWidth=i.strokeWidth+2:isNaN(s)||(this.hitContext.lineWidth=i.strokeWidth+2/s)):(this.hitContext.globalAlpha=0,this.hitContext.lineWidth=1)},drawPoint:function(e,t,i){var s,n,r;!1!==t.graphic&&(t.externalGraphic?this.drawExternalGraphic(e,t,i):t.graphicName&&"circle"!=t.graphicName?this.drawNamedSymbol(e,t,i):(e=(s=this.getLocalXY(e))[0],s=s[1],isNaN(e)||isNaN(s)||(n=2*Math.PI,r=t.pointRadius,!1!==t.fill&&(this.setCanvasStyle("fill",t),this.canvas.beginPath(),this.canvas.arc(e,s,r,0,n,!0),this.canvas.fill(),this.hitDetection&&(this.setHitContextStyle("fill",i,t),this.hitContext.beginPath(),this.hitContext.arc(e,s,r,0,n,!0),this.hitContext.fill())),!1!==t.stroke&&(this.setCanvasStyle("stroke",t),this.canvas.beginPath(),this.canvas.arc(e,s,r,0,n,!0),this.canvas.stroke(),this.hitDetection&&(this.setHitContextStyle("stroke",i,t),this.hitContext.beginPath(),this.hitContext.arc(e,s,r,0,n,!0),this.hitContext.stroke()),this.setCanvasStyle("reset")))))},drawLineString:function(e,t,i){t=OpenLayers.Util.applyDefaults({fill:!1},t),this.drawLinearRing(e,t,i)},drawLinearRing:function(e,t,i){!1!==t.fill&&(this.setCanvasStyle("fill",t),this.renderPath(this.canvas,e,t,i,"fill"),this.hitDetection&&(this.setHitContextStyle("fill",i,t),this.renderPath(this.hitContext,e,t,i,"fill"))),!1!==t.stroke&&(this.setCanvasStyle("stroke",t),this.renderPath(this.canvas,e,t,i,"stroke"),this.hitDetection&&(this.setHitContextStyle("stroke",i,t),this.renderPath(this.hitContext,e,t,i,"stroke"))),this.setCanvasStyle("reset")},renderPath:function(e,t,i,s,n){i=(t=t.components).length,e.beginPath();var r=(s=this.getLocalXY(t[0]))[1];if(!isNaN(s[0])&&!isNaN(r)){for(e.moveTo(s[0],s[1]),s=1;s<i;++s)r=this.getLocalXY(t[s]),e.lineTo(r[0],r[1]);"fill"===n?e.fill():e.stroke()}},drawPolygon:function(e,t,i){var s=(e=e.components).length;this.drawLinearRing(e[0],t,i);for(var n=1;n<s;++n)this.canvas.globalCompositeOperation="destination-out",this.hitDetection&&(this.hitContext.globalCompositeOperation="destination-out"),this.drawLinearRing(e[n],OpenLayers.Util.applyDefaults({stroke:!1,fillOpacity:1},t),i),this.canvas.globalCompositeOperation="source-over",this.hitDetection&&(this.hitContext.globalCompositeOperation="source-over"),this.drawLinearRing(e[n],OpenLayers.Util.applyDefaults({fill:!1},t),i)},drawText:function(e,t){var i=this.getLocalXY(e),s=(this.setCanvasStyle("reset"),this.canvas.fillStyle=t.fontColor,this.canvas.globalAlpha=t.fontOpacity||1,[t.fontStyle||"normal","normal",t.fontWeight||"normal",t.fontSize||"1em",t.fontFamily||"sans-serif"].join(" ")),n=t.label.split("\n"),r=n.length;if(this.canvas.fillText){this.canvas.font=s,this.canvas.textAlign=OpenLayers.Renderer.Canvas.LABEL_ALIGN[t.labelAlign[0]]||"center",this.canvas.textBaseline=OpenLayers.Renderer.Canvas.LABEL_ALIGN[t.labelAlign[1]]||"middle";var a=OpenLayers.Renderer.Canvas.LABEL_FACTOR[t.labelAlign[1]];for(null==a&&(a=-.5),s=this.canvas.measureText("Mg").height||this.canvas.measureText("xx").width,i[1]+=s*a*(r-1),a=0;a<r;a++)t.labelOutlineWidth&&(this.canvas.save(),this.canvas.globalAlpha=t.labelOutlineOpacity||t.fontOpacity||1,this.canvas.strokeStyle=t.labelOutlineColor,this.canvas.lineWidth=t.labelOutlineWidth,this.canvas.strokeText(n[a],i[0],i[1]+s*a+1),this.canvas.restore()),this.canvas.fillText(n[a],i[0],i[1]+s*a)}else if(this.canvas.mozDrawText){this.canvas.mozTextStyle=s;var o=OpenLayers.Renderer.Canvas.LABEL_FACTOR[t.labelAlign[0]];for(null==o&&(o=-.5),null==(a=OpenLayers.Renderer.Canvas.LABEL_FACTOR[t.labelAlign[1]])&&(a=-.5),s=this.canvas.mozMeasureText("xx"),i[1]+=s*(1+a*r),a=0;a<r;a++){var l=i[0]+o*this.canvas.mozMeasureText(n[a]),h=i[1]+a*s;this.canvas.translate(l,h),this.canvas.mozDrawText(n[a]),this.canvas.translate(-l,-h)}}this.setCanvasStyle("reset")},getLocalXY:function(e){var t=this.getResolution(),i=this.extent;return[(e.x-this.featureDx)/t+-i.left/t,i.top/t-e.y/t]},clear:function(){var e=this.root.height,t=this.root.width;this.canvas.clearRect(0,0,t,e),this.features={},this.hitDetection&&this.hitContext.clearRect(0,0,t,e)},getFeatureIdFromEvent:function(e){var t;if(this.hitDetection&&"none"!==this.root.style.display&&!this.map.dragging&&(e=e.xy,255===(e=this.hitContext.getImageData(0|e.x,0|e.y,1,1).data)[3]&&(e=e[2]+256*(e[1]+256*e[0])))){e="OpenLayers_Feature_Vector_"+(e-1+this.hitOverflow);try{t=this.features[e][0]}catch(e){}}return t},eraseFeatures:function(e){OpenLayers.Util.isArray(e)||(e=[e]);for(var t=0;t<e.length;++t)delete this.features[e[t].id];this.redraw()},redraw:function(){if(!this.locked){var e,t,i,s=this.root.height,n=this.root.width,s=(this.canvas.clearRect(0,0,n,s),this.hitDetection&&this.hitContext.clearRect(0,0,n,s),[]),r=this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&this.map.getMaxExtent();for(i in this.features)this.features.hasOwnProperty(i)&&(e=(n=this.features[i][0]).geometry,this.calculateFeatureDx(e.getBounds(),r),t=this.features[i][1],this.drawGeometry(e,t,n.id),t.label&&s.push([n,t]));for(n=0,e=s.length;n<e;++n)i=s[n],this.drawText(i[0].geometry.getCentroid(),i[1])}},CLASS_NAME:"OpenLayers.Renderer.Canvas"}),OpenLayers.Renderer.Canvas.LABEL_ALIGN={l:"left",r:"right",t:"top",b:"bottom"},OpenLayers.Renderer.Canvas.LABEL_FACTOR={l:0,r:-1,t:0,b:-1},OpenLayers.Renderer.Canvas.drawImageScaleFactor=null,OpenLayers.Format.OSM=OpenLayers.Class(OpenLayers.Format.XML,{checkTags:!1,interestingTagsExclude:null,areaTags:null,initialize:function(e){var t={interestingTagsExclude:"source source_ref source:ref history attribution created_by".split(" "),areaTags:"area building leisure tourism ruins historic landuse military natural sport".split(" ")},t=OpenLayers.Util.extend(t,e),i={};for(e=0;e<t.interestingTagsExclude.length;e++)i[t.interestingTagsExclude[e]]=!0;for(t.interestingTagsExclude=i,i={},e=0;e<t.areaTags.length;e++)i[t.areaTags[e]]=!0;t.areaTags=i,this.externalProjection=new OpenLayers.Projection("EPSG:4326"),OpenLayers.Format.XML.prototype.initialize.apply(this,[t])},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));var t=this.getNodes(e),i=this.getWays(e);e=Array(i.length);for(var s,n=0;n<i.length;n++){for(var r=Array(i[n].nodes.length),a=this.isWayArea(i[n])?1:0,o=0;o<i[n].nodes.length;o++){var l=t[i[n].nodes[o]],h=new OpenLayers.Geometry.Point(l.lon,l.lat);h.osm_id=parseInt(i[n].nodes[o]),r[o]=h,l.used=!0}l=null,l=a?new OpenLayers.Geometry.Polygon(new OpenLayers.Geometry.LinearRing(r)):new OpenLayers.Geometry.LineString(r),this.internalProjection&&this.externalProjection&&l.transform(this.externalProjection,this.internalProjection),(r=new OpenLayers.Feature.Vector(l,i[n].tags)).osm_id=parseInt(i[n].id),r.fid="way."+r.osm_id,e[n]=r}for(s in t){if(!(l=t[s]).used||this.checkTags){if(i=null,this.checkTags){if(i=this.getTags(l.node,!0),l.used&&!i[1])continue;i=i[0]}else i=this.getTags(l.node);r=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(l.lon,l.lat),i),this.internalProjection&&this.externalProjection&&r.geometry.transform(this.externalProjection,this.internalProjection),r.osm_id=parseInt(s),r.fid="node."+r.osm_id,e.push(r)}l.node=null}return e},getNodes:function(e){e=e.getElementsByTagName("node");for(var t={},i=0;i<e.length;i++){var s=e[i];t[s.getAttribute("id")]={lat:s.getAttribute("lat"),lon:s.getAttribute("lon"),node:s}}return t},getWays:function(e){e=e.getElementsByTagName("way");for(var t=[],i=0;i<e.length;i++){var s=e[i],n={id:s.getAttribute("id")};n.tags=this.getTags(s),s=s.getElementsByTagName("nd"),n.nodes=Array(s.length);for(var r=0;r<s.length;r++)n.nodes[r]=s[r].getAttribute("ref");t.push(n)}return t},getTags:function(e,t){for(var i=e.getElementsByTagName("tag"),s={},n=!1,r=0;r<i.length;r++){var a=i[r].getAttribute("k");s[a]=i[r].getAttribute("v"),!t||this.interestingTagsExclude[a]||(n=!0)}return t?[s,n]:s},isWayArea:function(e){var t=!1,i=!1;if(e.nodes[0]==e.nodes[e.nodes.length-1]&&(t=!0),this.checkTags)for(var s in e.tags)if(this.areaTags[s]){i=!0;break}return t&&(!this.checkTags||i)},write:function(e){OpenLayers.Util.isArray(e)||(e=[e]),this.osm_id=1,this.created_nodes={};var t=this.createElementNS(null,"osm");t.setAttribute("version","0.5"),t.setAttribute("generator","OpenLayers "+OpenLayers.VERSION_NUMBER);for(var i=e.length-1;0<=i;i--)for(var s=this.createFeatureNodes(e[i]),n=0;n<s.length;n++)t.appendChild(s[n]);return OpenLayers.Format.XML.prototype.write.apply(this,[t])},createFeatureNodes:function(e){var t=[],i=(i=(i=e.geometry.CLASS_NAME).substring(i.lastIndexOf(".")+1)).toLowerCase();return t=(i=this.createXML[i])?i.apply(this,[e]):t},createXML:{point:function(e){var t=null,i=e.geometry||e,s=(this.internalProjection&&this.externalProjection&&(i=i.clone()).transform(this.internalProjection,this.externalProjection),!1),n=(e.osm_id?(t=e.osm_id,this.created_nodes[t]&&(s=!0)):(t=-this.osm_id,this.osm_id++),s?this.created_nodes[t]:this.createElementNS(null,"node"));return(this.created_nodes[t]=n).setAttribute("id",t),n.setAttribute("lon",i.x),n.setAttribute("lat",i.y),e.attributes&&this.serializeTags(e,n),this.setState(e,n),s?[]:[n]},linestring:function(e){var t,i=[],s=e.geometry,n=(e.osm_id?t=e.osm_id:(t=-this.osm_id,this.osm_id++),this.createElementNS(null,"way"));for(n.setAttribute("id",t),t=0;t<s.components.length;t++){var r,a=this.createXML.point.apply(this,[s.components[t]]);a.length?(r=(a=a[0]).getAttribute("id"),i.push(a)):(r=s.components[t].osm_id,a=this.created_nodes[r]),this.setState(e,a),(a=this.createElementNS(null,"nd")).setAttribute("ref",r),n.appendChild(a)}return this.serializeTags(e,n),i.push(n),i},polygon:function(e){var t=OpenLayers.Util.extend({area:"yes"},e.attributes);return(t=new OpenLayers.Feature.Vector(e.geometry.components[0],t)).osm_id=e.osm_id,this.createXML.linestring.apply(this,[t])}},serializeTags:function(e,t){for(var i in e.attributes){var s=this.createElementNS(null,"tag");s.setAttribute("k",i),s.setAttribute("v",e.attributes[i]),t.appendChild(s)}},setState:function(e,t){if(e.state){var i=null;switch(e.state){case OpenLayers.State.UPDATE:case OpenLayers.State.DELETE:i="delete"}i&&t.setAttribute("action",i)}},CLASS_NAME:"OpenLayers.Format.OSM"}),OpenLayers.Handler.Keyboard=OpenLayers.Class(OpenLayers.Handler,{KEY_EVENTS:["keydown","keyup"],eventListener:null,observeElement:null,initialize:function(e,t,i){OpenLayers.Handler.prototype.initialize.apply(this,arguments),this.eventListener=OpenLayers.Function.bindAsEventListener(this.handleKeyEvent,this)},destroy:function(){this.deactivate(),this.eventListener=null,OpenLayers.Handler.prototype.destroy.apply(this,arguments)},activate:function(){if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){this.observeElement=this.observeElement||document;for(var e=0,t=this.KEY_EVENTS.length;e<t;e++)OpenLayers.Event.observe(this.observeElement,this.KEY_EVENTS[e],this.eventListener);return!0}return!1},deactivate:function(){var e=!1;if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){for(var e=0,t=this.KEY_EVENTS.length;e<t;e++)OpenLayers.Event.stopObserving(this.observeElement,this.KEY_EVENTS[e],this.eventListener);e=!0}return e},handleKeyEvent:function(e){this.checkModifiers(e)&&this.callback(e.type,[e])},CLASS_NAME:"OpenLayers.Handler.Keyboard"}),OpenLayers.Control.ModifyFeature=OpenLayers.Class(OpenLayers.Control,{documentDrag:!1,geometryTypes:null,clickout:!0,toggle:!0,standalone:!1,layer:null,feature:null,vertex:null,vertices:null,virtualVertices:null,handlers:null,deleteCodes:null,virtualStyle:null,vertexRenderIntent:null,mode:null,createVertices:!0,modified:!1,radiusHandle:null,dragHandle:null,onModificationStart:function(){},onModification:function(){},onModificationEnd:function(){},initialize:function(e,t){t=t||{},this.layer=e,this.vertices=[],this.virtualVertices=[],this.virtualStyle=OpenLayers.Util.extend({},this.layer.style||this.layer.styleMap.createSymbolizer(null,t.vertexRenderIntent)),this.virtualStyle.fillOpacity=.3,this.virtualStyle.strokeOpacity=.3,this.deleteCodes=[46,68],this.mode=OpenLayers.Control.ModifyFeature.RESHAPE,OpenLayers.Control.prototype.initialize.apply(this,[t]),OpenLayers.Util.isArray(this.deleteCodes)||(this.deleteCodes=[this.deleteCodes]);e={documentDrag:this.documentDrag,stopDown:!1};this.handlers={keyboard:new OpenLayers.Handler.Keyboard(this,{keydown:this.handleKeypress}),drag:new OpenLayers.Handler.Drag(this,{down:function(e){this.vertex=null,(e=this.layer.getFeatureFromEvent(this.handlers.drag.evt))?this.dragStart(e):this.clickout&&(this._unselect=this.feature)},move:function(e){delete this._unselect,this.vertex&&this.dragVertex(this.vertex,e)},up:function(){this.handlers.drag.stopDown=!1,this._unselect&&(this.unselectFeature(this._unselect),delete this._unselect)},done:function(e){this.vertex&&this.dragComplete(this.vertex)}},e)}},destroy:function(){this.map&&this.map.events.un({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),this.layer=null,OpenLayers.Control.prototype.destroy.apply(this,[])},activate:function(){return this.moveLayerToTop(),this.map.events.on({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),this.handlers.keyboard.activate()&&this.handlers.drag.activate()&&OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){var e=!1;return OpenLayers.Control.prototype.deactivate.apply(this,arguments)&&(this.moveLayerBack(),this.map.events.un({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),this.layer.removeFeatures(this.vertices,{silent:!0}),this.layer.removeFeatures(this.virtualVertices,{silent:!0}),this.vertices=[],this.handlers.drag.deactivate(),this.handlers.keyboard.deactivate(),(e=this.feature)&&e.geometry&&e.layer&&this.unselectFeature(e),e=!0),e},beforeSelectFeature:function(e){return this.layer.events.triggerEvent("beforefeaturemodified",{feature:e})},selectFeature:function(e){var t;this.feature===e||this.geometryTypes&&-1==OpenLayers.Util.indexOf(this.geometryTypes,e.geometry.CLASS_NAME)||(!1!==this.beforeSelectFeature(e)&&(this.feature&&this.unselectFeature(this.feature),this.feature=e,this.layer.selectedFeatures.push(e),this.layer.drawFeature(e,"select"),this.modified=!1,this.resetVertices(),this.onModificationStart(this.feature)),t=e.modified,!e.geometry||t&&t.geometry||(this._originalGeometry=e.geometry.clone()))},unselectFeature:function(e){this.layer.removeFeatures(this.vertices,{silent:!0}),this.vertices=[],this.layer.destroyFeatures(this.virtualVertices,{silent:!0}),this.virtualVertices=[],this.dragHandle&&(this.layer.destroyFeatures([this.dragHandle],{silent:!0}),delete this.dragHandle),this.radiusHandle&&(this.layer.destroyFeatures([this.radiusHandle],{silent:!0}),delete this.radiusHandle),this.layer.drawFeature(this.feature,"default"),this.feature=null,OpenLayers.Util.removeItem(this.layer.selectedFeatures,e),this.onModificationEnd(e),this.layer.events.triggerEvent("afterfeaturemodified",{feature:e,modified:this.modified}),this.modified=!1},dragStart:function(e){var t="OpenLayers.Geometry.Point"==e.geometry.CLASS_NAME;this.standalone||(e._sketch||!t)&&e._sketch||(this.toggle&&this.feature===e&&(this._unselect=e),this.selectFeature(e)),(e._sketch||t)&&(this.vertex=e,this.handlers.drag.stopDown=!0)},dragVertex:function(e,t){var i=this.map.getLonLatFromViewPortPx(t),s=e.geometry;s.move(i.lon-s.x,i.lat-s.y),this.modified=!0,"OpenLayers.Geometry.Point"==this.feature.geometry.CLASS_NAME?this.layer.events.triggerEvent("vertexmodified",{vertex:e.geometry,feature:this.feature,pixel:t}):(e._index?(e.geometry.parent.addComponent(e.geometry,e._index),delete e._index,OpenLayers.Util.removeItem(this.virtualVertices,e),this.vertices.push(e)):e==this.dragHandle?(this.layer.removeFeatures(this.vertices,{silent:!0}),this.vertices=[],this.radiusHandle&&(this.layer.destroyFeatures([this.radiusHandle],{silent:!0}),this.radiusHandle=null)):e!==this.radiusHandle&&this.layer.events.triggerEvent("vertexmodified",{vertex:e.geometry,feature:this.feature,pixel:t}),0<this.virtualVertices.length&&(this.layer.destroyFeatures(this.virtualVertices,{silent:!0}),this.virtualVertices=[]),this.layer.drawFeature(this.feature,this.standalone?void 0:"select")),this.layer.drawFeature(e)},dragComplete:function(e){this.resetVertices(),this.setFeatureState(),this.onModification(this.feature),this.layer.events.triggerEvent("featuremodified",{feature:this.feature})},setFeatureState:function(){var e;this.feature.state!=OpenLayers.State.INSERT&&this.feature.state!=OpenLayers.State.DELETE&&(this.feature.state=OpenLayers.State.UPDATE,this.modified&&this._originalGeometry)&&((e=this.feature).modified=OpenLayers.Util.extend(e.modified,{geometry:this._originalGeometry}),delete this._originalGeometry)},resetVertices:function(){0<this.vertices.length&&(this.layer.removeFeatures(this.vertices,{silent:!0}),this.vertices=[]),0<this.virtualVertices.length&&(this.layer.removeFeatures(this.virtualVertices,{silent:!0}),this.virtualVertices=[]),this.dragHandle&&(this.layer.destroyFeatures([this.dragHandle],{silent:!0}),this.dragHandle=null),this.radiusHandle&&(this.layer.destroyFeatures([this.radiusHandle],{silent:!0}),this.radiusHandle=null),this.feature&&"OpenLayers.Geometry.Point"!=this.feature.geometry.CLASS_NAME&&(this.mode&OpenLayers.Control.ModifyFeature.DRAG&&this.collectDragHandle(),this.mode&(OpenLayers.Control.ModifyFeature.ROTATE|OpenLayers.Control.ModifyFeature.RESIZE)&&this.collectRadiusHandle(),this.mode&OpenLayers.Control.ModifyFeature.RESHAPE&&(this.mode&OpenLayers.Control.ModifyFeature.RESIZE||this.collectVertices()))},handleKeypress:function(e){var t=e.keyCode;this.feature&&-1!=OpenLayers.Util.indexOf(this.deleteCodes,t)&&(t=this.layer.getFeatureFromEvent(this.handlers.drag.evt))&&-1!=OpenLayers.Util.indexOf(this.vertices,t)&&!this.handlers.drag.dragging&&t.geometry.parent&&(t.geometry.parent.removeComponent(t.geometry),this.layer.events.triggerEvent("vertexremoved",{vertex:t.geometry,feature:this.feature,pixel:e.xy}),this.layer.drawFeature(this.feature,this.standalone?void 0:"select"),this.modified=!0,this.resetVertices(),this.setFeatureState(),this.onModification(this.feature),this.layer.events.triggerEvent("featuremodified",{feature:this.feature}))},collectVertices:function(){this.vertices=[],this.virtualVertices=[];var a=this;!function e(t){var i,s;if("OpenLayers.Geometry.Point"==t.CLASS_NAME)(n=new OpenLayers.Feature.Vector(t))._sketch=!0,n.renderIntent=a.vertexRenderIntent,a.vertices.push(n);else{for(s=t.components.length,"OpenLayers.Geometry.LinearRing"==t.CLASS_NAME&&--s,i=0;i<s;++i)"OpenLayers.Geometry.Point"==(n=t.components[i]).CLASS_NAME?((n=new OpenLayers.Feature.Vector(n))._sketch=!0,n.renderIntent=a.vertexRenderIntent,a.vertices.push(n)):e(n);if(a.createVertices&&"OpenLayers.Geometry.MultiPoint"!=t.CLASS_NAME)for(i=0,s=t.components.length;i<s-1;++i){var n=t.components[i],r=t.components[i+1];"OpenLayers.Geometry.Point"==n.CLASS_NAME&&"OpenLayers.Geometry.Point"==r.CLASS_NAME&&((n=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point((n.x+r.x)/2,(n.y+r.y)/2),null,a.virtualStyle)).geometry.parent=t,n._index=i+1,n._sketch=!0,a.virtualVertices.push(n))}}}.call(this,this.feature.geometry),this.layer.addFeatures(this.virtualVertices,{silent:!0}),this.layer.addFeatures(this.vertices,{silent:!0})},collectDragHandle:function(){var i=this.feature.geometry,e=i.getBounds().getCenterLonLat(),e=new OpenLayers.Geometry.Point(e.lon,e.lat),t=new OpenLayers.Feature.Vector(e);e.move=function(e,t){OpenLayers.Geometry.Point.prototype.move.call(this,e,t),i.move(e,t)},t._sketch=!0,this.dragHandle=t,this.dragHandle.renderIntent=this.vertexRenderIntent,this.layer.addFeatures([this.dragHandle],{silent:!0})},collectRadiusHandle:function(){var a=this.feature.geometry,e=(t=a.getBounds()).getCenterLonLat(),o=new OpenLayers.Geometry.Point(e.lon,e.lat),t=new OpenLayers.Geometry.Point(t.right,t.bottom),e=new OpenLayers.Feature.Vector(t),l=this.mode&OpenLayers.Control.ModifyFeature.RESIZE,h=this.mode&OpenLayers.Control.ModifyFeature.RESHAPE,p=this.mode&OpenLayers.Control.ModifyFeature.ROTATE;t.move=function(e,t){OpenLayers.Geometry.Point.prototype.move.call(this,e,t);var i,s,n=this.x-o.x,r=this.y-o.y,e=n-e,t=r-t;p&&(i=Math.atan2(t,e),i=(i=Math.atan2(r,n)-i)*(180/Math.PI),a.rotate(i,o)),l&&(h?s=n/e/(r/=t):(e=Math.sqrt(e*e+t*t),r=Math.sqrt(n*n+r*r)/e),a.resize(r,o,s))},e._sketch=!0,this.radiusHandle=e,this.radiusHandle.renderIntent=this.vertexRenderIntent,this.layer.addFeatures([this.radiusHandle],{silent:!0})},setMap:function(e){this.handlers.drag.setMap(e),OpenLayers.Control.prototype.setMap.apply(this,arguments)},handleMapEvents:function(e){"removelayer"!=e.type&&"order"!=e.property||this.moveLayerToTop()},moveLayerToTop:function(){var e=Math.max(this.map.Z_INDEX_BASE.Feature-1,this.layer.getZIndex())+1;this.layer.setZIndex(e)},moveLayerBack:function(){var e=this.layer.getZIndex()-1;e>=this.map.Z_INDEX_BASE.Feature?this.layer.setZIndex(e):this.map.setLayerZIndex(this.layer,this.map.getLayerIndex(this.layer))},CLASS_NAME:"OpenLayers.Control.ModifyFeature"}),OpenLayers.Control.ModifyFeature.RESHAPE=1,OpenLayers.Control.ModifyFeature.RESIZE=2,OpenLayers.Control.ModifyFeature.ROTATE=4,OpenLayers.Control.ModifyFeature.DRAG=8,OpenLayers.Layer.Bing=OpenLayers.Class(OpenLayers.Layer.XYZ,{key:null,serverResolutions:[156543.03390625,78271.516953125,39135.7584765625,19567.87923828125,9783.939619140625,4891.9698095703125,2445.9849047851562,1222.9924523925781,611.4962261962891,305.74811309814453,152.87405654907226,76.43702827453613,38.218514137268066,19.109257068634033,9.554628534317017,4.777314267158508,2.388657133579254,1.194328566789627,.5971642833948135,.29858214169740677,.14929107084870338,.07464553542435169],attributionTemplate:'<span class="olBingAttribution ${type}"><div><a target="_blank" href="http://www.bing.com/maps/"><img src="${logo}" /></a></div>${copyrights}<a style="white-space: nowrap" target="_blank" href="http://www.microsoft.com/maps/product/terms.html">Terms of Use</a></span>',metadata:null,protocolRegex:/^http:/i,type:"Road",culture:"en-US",metadataParams:null,tileOptions:null,protocol:~window.location.href.indexOf("http")?"":"http:",initialize:function(e){e=OpenLayers.Util.applyDefaults({sphericalMercator:!0},e),OpenLayers.Layer.XYZ.prototype.initialize.apply(this,[e.name||"Bing "+(e.type||this.type),null,e]),this.tileOptions=OpenLayers.Util.extend({crossOriginKeyword:"anonymous"},this.options.tileOptions),this.loadMetadata()},loadMetadata:function(){this._callbackId="_callback_"+this.id.replace(/\./g,"_"),window[this._callbackId]=OpenLayers.Function.bind(OpenLayers.Layer.Bing.processMetadata,this);var e=OpenLayers.Util.applyDefaults({key:this.key,jsonp:this._callbackId,include:"ImageryProviders"},this.metadataParams),e=this.protocol+"//dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.type+"?"+OpenLayers.Util.getParameterString(e),t=document.createElement("script");t.type="text/javascript",t.src=e,t.id=this._callbackId,document.getElementsByTagName("head")[0].appendChild(t)},initLayer:function(){var e=this.metadata.resourceSets[0].resources[0],t=(t=(t=e.imageUrl.replace("{quadkey}","${quadkey}")).replace("{culture}",this.culture)).replace(this.protocolRegex,this.protocol);this.url=[];for(var i=0;i<e.imageUrlSubdomains.length;++i)this.url.push(t.replace("{subdomain}",e.imageUrlSubdomains[i]));this.addOptions({maxResolution:Math.min(this.serverResolutions[e.zoomMin],this.maxResolution||Number.POSITIVE_INFINITY),numZoomLevels:Math.min(e.zoomMax+1-e.zoomMin,this.numZoomLevels)},!0),this.isBaseLayer||this.redraw(),this.updateAttribution()},getURL:function(e){if(this.url){var t=this.getXYZ(e);e=t.x;for(var i=t.y,s=[],n=t=t.z;0<n;--n){var r="0",a=1<<n-1;0!=(e&a)&&r++,0!=(i&a)&&(r++,r++),s.push(r)}return s=s.join(""),e=this.selectUrl(""+e+i+t,this.url),OpenLayers.String.format(e,{quadkey:s})}},updateAttribution:function(){var e=this.metadata;if(e.resourceSets&&this.map&&this.map.center){for(var t,i,s,n,r,a=e.resourceSets[0].resources[0],o=this.map.getExtent().transform(this.map.getProjectionObject(),new OpenLayers.Projection("EPSG:4326")),l=a.imageryProviders||[],h=OpenLayers.Util.indexOf(this.serverResolutions,this.getServerResolution()),a="",p=0,u=l.length;p<u;++p)for(i=0,s=(t=l[p]).coverageAreas.length;i<s;++i)r=t.coverageAreas[i],n=OpenLayers.Bounds.fromArray(r.bbox,!0),o.intersectsBounds(n)&&h<=r.zoomMax&&h>=r.zoomMin&&(a+=t.attribution+" ");e=e.brandLogoUri.replace(this.protocolRegex,this.protocol),this.attribution=OpenLayers.String.format(this.attributionTemplate,{type:this.type.toLowerCase(),logo:e,copyrights:a}),this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"attribution"})}},setMap:function(){OpenLayers.Layer.XYZ.prototype.setMap.apply(this,arguments),this.map.events.register("moveend",this,this.updateAttribution)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.Bing(this.options)),OpenLayers.Layer.XYZ.prototype.clone.apply(this,[e])},destroy:function(){this.map&&this.map.events.unregister("moveend",this,this.updateAttribution),OpenLayers.Layer.XYZ.prototype.destroy.apply(this,arguments)},CLASS_NAME:"OpenLayers.Layer.Bing"}),OpenLayers.Layer.Bing.processMetadata=function(e){this.metadata=e,this.initLayer(),(e=document.getElementById(this._callbackId)).parentNode.removeChild(e),window[this._callbackId]=void 0,delete this._callbackId},OpenLayers.StyleMap=OpenLayers.Class({styles:null,extendDefault:!0,initialize:function(e,t){if(this.styles={default:new OpenLayers.Style(OpenLayers.Feature.Vector.style.default),select:new OpenLayers.Style(OpenLayers.Feature.Vector.style.select),temporary:new OpenLayers.Style(OpenLayers.Feature.Vector.style.temporary),delete:new OpenLayers.Style(OpenLayers.Feature.Vector.style.delete)},e instanceof OpenLayers.Style)this.styles.default=e,this.styles.select=e,this.styles.temporary=e,this.styles.delete=e;else if("object"==_typeof(e))for(var i in e)if(e[i]instanceof OpenLayers.Style)this.styles[i]=e[i];else{if("object"!=_typeof(e[i])){this.styles.default=new OpenLayers.Style(e),this.styles.select=new OpenLayers.Style(e),this.styles.temporary=new OpenLayers.Style(e),this.styles.delete=new OpenLayers.Style(e);break}this.styles[i]=new OpenLayers.Style(e[i])}OpenLayers.Util.extend(this,t)},destroy:function(){for(var e in this.styles)this.styles[e].destroy();this.styles=null},createSymbolizer:function(e,t){e=e||new OpenLayers.Feature.Vector,this.styles[t]||(t="default"),e.renderIntent=t;var i={};return this.extendDefault&&"default"!=t&&(i=this.styles.default.createSymbolizer(e)),OpenLayers.Util.extend(i,this.styles[t].createSymbolizer(e))},addUniqueValueRules:function(e,t,i,s){var n,r=[];for(n in i)r.push(new OpenLayers.Rule({symbolizer:i[n],context:s,filter:new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.EQUAL_TO,property:t,value:n})}));this.styles[e].addRules(r)},CLASS_NAME:"OpenLayers.StyleMap"}),OpenLayers.Layer.Vector=OpenLayers.Class(OpenLayers.Layer,{isBaseLayer:!1,isFixed:!1,features:null,filter:null,selectedFeatures:null,unrenderedFeatures:null,reportError:!0,style:null,styleMap:null,strategies:null,protocol:null,renderers:["SVG","VML","Canvas"],renderer:null,rendererOptions:null,geometryType:null,drawn:!1,ratio:1,initialize:function(e,t){if(OpenLayers.Layer.prototype.initialize.apply(this,arguments),this.renderer&&this.renderer.supported()||this.assignRenderer(),this.renderer&&this.renderer.supported()||(this.renderer=null,this.displayError()),this.styleMap||(this.styleMap=new OpenLayers.StyleMap),this.features=[],this.selectedFeatures=[],this.unrenderedFeatures={},this.strategies)for(var i=0,s=this.strategies.length;i<s;i++)this.strategies[i].setLayer(this)},destroy:function(){if(this.strategies){for(var e,t=0,i=this.strategies.length;t<i;t++)(e=this.strategies[t]).autoDestroy&&e.destroy();this.strategies=null}this.protocol&&(this.protocol.autoDestroy&&this.protocol.destroy(),this.protocol=null),this.destroyFeatures(),this.unrenderedFeatures=this.selectedFeatures=this.features=null,this.renderer&&this.renderer.destroy(),this.drawn=this.geometryType=this.renderer=null,OpenLayers.Layer.prototype.destroy.apply(this,arguments)},clone:function(e){null==e&&(e=new OpenLayers.Layer.Vector(this.name,this.getOptions())),e=OpenLayers.Layer.prototype.clone.apply(this,[e]);for(var t=this.features,i=t.length,s=Array(i),n=0;n<i;++n)s[n]=t[n].clone();return e.features=s,e},refresh:function(e){this.calculateInRange()&&this.visibility&&this.events.triggerEvent("refresh",e)},assignRenderer:function(){for(var e=0,t=this.renderers.length;e<t;e++){var i=this.renderers[e];if((i="function"==typeof i?i:OpenLayers.Renderer[i])&&i.prototype.supported()){this.renderer=new i(this.div,this.rendererOptions);break}}},displayError:function(){this.reportError&&OpenLayers.Console.userError(OpenLayers.i18n("browserNotSupported",{renderers:this.renderers.join("\n")}))},setMap:function(e){var t;OpenLayers.Layer.prototype.setMap.apply(this,arguments),this.renderer?(this.renderer.map=this.map,(t=this.map.getSize()).w*=this.ratio,t.h*=this.ratio,this.renderer.setSize(t)):this.map.removeLayer(this)},afterAdd:function(){if(this.strategies)for(var e,t=0,i=this.strategies.length;t<i;t++)(e=this.strategies[t]).autoActivate&&e.activate()},removeMap:function(e){if(this.drawn=!1,this.strategies)for(var t=0,i=this.strategies.length;t<i;t++)(e=this.strategies[t]).autoActivate&&e.deactivate()},onMapResize:function(){OpenLayers.Layer.prototype.onMapResize.apply(this,arguments);var e=this.map.getSize();e.w*=this.ratio,e.h*=this.ratio,this.renderer.setSize(e)},moveTo:function(e,t,i){OpenLayers.Layer.prototype.moveTo.apply(this,arguments);var s=!0;if(!i){this.renderer.root.style.visibility="hidden";var n=(s=this.map.getSize()).w,s=s.h,n=n/2*this.ratio-n/2,s=s/2*this.ratio-s/2,n=n+this.map.layerContainerOriginPx.x,n=-Math.round(n),s=s+this.map.layerContainerOriginPx.y,s=-Math.round(s);if(this.div.style.left=n+"px",this.div.style.top=s+"px",n=this.map.getExtent().scale(this.ratio),s=this.renderer.setExtent(n,t),this.renderer.root.style.visibility="visible",!0===OpenLayers.IS_GECKO&&(this.div.scrollLeft=this.div.scrollLeft),!t&&s)for(var r in this.unrenderedFeatures)n=this.unrenderedFeatures[r],this.drawFeature(n)}if(!this.drawn||t||!s)for(this.drawn=!0,r=0,s=this.features.length;r<s;r++)this.renderer.locked=r!==s-1,n=this.features[r],this.drawFeature(n)},display:function(e){OpenLayers.Layer.prototype.display.apply(this,arguments);var t=this.div.style.display;t!=this.renderer.root.style.display&&(this.renderer.root.style.display=t)},addFeatures:function(e,t){OpenLayers.Util.isArray(e)||(e=[e]);var i=!t||!t.silent;if(i){var s={features:e};if(!1===this.events.triggerEvent("beforefeaturesadded",s))return;e=s.features}for(var s=[],n=0,r=e.length;n<r;n++){this.renderer.locked=n!=e.length-1;var a=e[n];if(this.geometryType&&!(a.geometry instanceof this.geometryType))throw new TypeError("addFeatures: component should be an "+this.geometryType.prototype.CLASS_NAME);if(a.layer=this,!a.style&&this.style&&(a.style=OpenLayers.Util.extend({},this.style)),i){if(!1===this.events.triggerEvent("beforefeatureadded",{feature:a}))continue;this.preFeatureInsert(a)}s.push(a),this.features.push(a),this.drawFeature(a),i&&(this.events.triggerEvent("featureadded",{feature:a}),this.onFeatureInsert(a))}i&&this.events.triggerEvent("featuresadded",{features:s})},removeFeatures:function(e,t){if(e&&0!==e.length){if(e===this.features)return this.removeAllFeatures(t);(e=OpenLayers.Util.isArray(e)?e:[e])===this.selectedFeatures&&(e=e.slice());var i=!t||!t.silent;i&&this.events.triggerEvent("beforefeaturesremoved",{features:e});for(var s=e.length-1;0<=s;s--){this.renderer.locked=!(0==s||!e[s-1].geometry);var n=e[s];delete this.unrenderedFeatures[n.id],i&&this.events.triggerEvent("beforefeatureremoved",{feature:n}),this.features=OpenLayers.Util.removeItem(this.features,n),n.layer=null,n.geometry&&this.renderer.eraseFeatures(n),-1!=OpenLayers.Util.indexOf(this.selectedFeatures,n)&&OpenLayers.Util.removeItem(this.selectedFeatures,n),i&&this.events.triggerEvent("featureremoved",{feature:n})}i&&this.events.triggerEvent("featuresremoved",{features:e})}},removeAllFeatures:function(e){e=!e||!e.silent;var t=this.features;e&&this.events.triggerEvent("beforefeaturesremoved",{features:t});for(var i,s=t.length-1;0<=s;s--)i=t[s],e&&this.events.triggerEvent("beforefeatureremoved",{feature:i}),i.layer=null,e&&this.events.triggerEvent("featureremoved",{feature:i});this.renderer.clear(),this.features=[],this.unrenderedFeatures={},this.selectedFeatures=[],e&&this.events.triggerEvent("featuresremoved",{features:t})},destroyFeatures:function(e,t){if(e=null==e?this.features:e){this.removeFeatures(e,t);for(var i=e.length-1;0<=i;i--)e[i].destroy()}},drawFeature:function(e,t){var i;this.drawn&&("object"!=_typeof(t)&&(i=(t=t||e.state!==OpenLayers.State.DELETE?t:"delete")||e.renderIntent,(t=e.style||this.style)||(t=this.styleMap.createSymbolizer(e,i))),!1===(i=this.renderer.drawFeature(e,t))||null===i?this.unrenderedFeatures[e.id]=e:delete this.unrenderedFeatures[e.id])},eraseFeatures:function(e){this.renderer.eraseFeatures(e)},getFeatureFromEvent:function(e){if(!this.renderer)throw Error("getFeatureFromEvent called on layer with no renderer. This usually means you destroyed a layer, but not some handler which is associated with it.");var t=null;return t=(e=this.renderer.getFeatureIdFromEvent(e))?"string"==typeof e?this.getFeatureById(e):e:t},getFeatureBy:function(e,t){for(var i=null,s=0,n=this.features.length;s<n;++s)if(this.features[s][e]==t){i=this.features[s];break}return i},getFeatureById:function(e){return this.getFeatureBy("id",e)},getFeatureByFid:function(e){return this.getFeatureBy("fid",e)},getFeaturesByAttribute:function(e,t){for(var i,s=this.features.length,n=[],r=0;r<s;r++)(i=this.features[r])&&i.attributes&&i.attributes[e]===t&&n.push(i);return n},onFeatureInsert:function(e){},preFeatureInsert:function(e){},getDataExtent:function(){var e=null,t=this.features;if(t&&0<t.length)for(var i=null,s=0,n=t.length;s<n;s++)(i=t[s].geometry)&&(e=null===e?new OpenLayers.Bounds:e).extend(i.getBounds());return e},CLASS_NAME:"OpenLayers.Layer.Vector"}),OpenLayers.Layer.PointGrid=OpenLayers.Class(OpenLayers.Layer.Vector,{dx:null,dy:null,ratio:1.5,maxFeatures:250,rotation:0,origin:null,gridBounds:null,initialize:function(e){OpenLayers.Layer.Vector.prototype.initialize.apply(this,[(e=e||{}).name,e])},setMap:function(e){OpenLayers.Layer.Vector.prototype.setMap.apply(this,arguments),e.events.register("moveend",this,this.onMoveEnd)},removeMap:function(e){e.events.unregister("moveend",this,this.onMoveEnd),OpenLayers.Layer.Vector.prototype.removeMap.apply(this,arguments)},setRatio:function(e){this.ratio=e,this.updateGrid(!0)},setMaxFeatures:function(e){this.maxFeatures=e,this.updateGrid(!0)},setSpacing:function(e,t){this.dx=e,this.dy=t||e,this.updateGrid(!0)},setOrigin:function(e){this.origin=e,this.updateGrid(!0)},getOrigin:function(){return this.origin||(this.origin=this.map.getExtent().getCenterLonLat()),this.origin},setRotation:function(e){this.rotation=e,this.updateGrid(!0)},onMoveEnd:function(){this.updateGrid()},getViewBounds:function(){var e,t=this.map.getExtent();return this.rotation&&(e=this.getOrigin(),e=new OpenLayers.Geometry.Point(e.lon,e.lat),(t=t.toGeometry()).rotate(-this.rotation,e),t=t.getBounds()),t},updateGrid:function(e){if(e||this.invalidBounds()){var t=this.getViewBounds(),i=this.getOrigin();e=new OpenLayers.Geometry.Point(i.lon,i.lat);var s=(r=t.getWidth())/(a=t.getHeight()),n=Math.sqrt(this.dx*this.dy*this.maxFeatures/s),r=Math.min(r*this.ratio,n*s),a=Math.min(a*this.ratio,n),t=t.getCenterLonLat();this.gridBounds=new OpenLayers.Bounds(t.lon-r/2,t.lat-a/2,t.lon+r/2,t.lat+a/2);for(var o,t=Math.floor(a/this.dy),r=Math.floor(r/this.dx),a=i.lon+this.dx*Math.ceil((this.gridBounds.left-i.lon)/this.dx),i=i.lat+this.dy*Math.ceil((this.gridBounds.bottom-i.lat)/this.dy),n=Array(t*r),l=0;l<r;++l)for(var s=a+l*this.dx,h=0;h<t;++h)o=i+h*this.dy,o=new OpenLayers.Geometry.Point(s,o),this.rotation&&o.rotate(this.rotation,e),n[l*t+h]=new OpenLayers.Feature.Vector(o);this.destroyFeatures(this.features,{silent:!0}),this.addFeatures(n,{silent:!0})}},invalidBounds:function(){return!this.gridBounds||!this.gridBounds.containsBounds(this.getViewBounds())},CLASS_NAME:"OpenLayers.Layer.PointGrid"}),OpenLayers.Handler.MouseWheel=OpenLayers.Class(OpenLayers.Handler,{wheelListener:null,interval:0,maxDelta:Number.POSITIVE_INFINITY,delta:0,cumulative:!0,initialize:function(e,t,i){OpenLayers.Handler.prototype.initialize.apply(this,arguments),this.wheelListener=OpenLayers.Function.bindAsEventListener(this.onWheelEvent,this)},destroy:function(){OpenLayers.Handler.prototype.destroy.apply(this,arguments),this.wheelListener=null},onWheelEvent:function(e){if(this.map&&this.checkModifiers(e)){for(var t,i=!1,s=!1,n=!1,r=OpenLayers.Event.element(e);null!=r&&!n&&!i;){if(!i)try{var a,i=(a=r.currentStyle?r.currentStyle.overflow:document.defaultView.getComputedStyle(r,null).getPropertyValue("overflow"))&&"auto"==a||"scroll"==a}catch(e){}if(!s&&!(s=OpenLayers.Element.hasClass(r,"olScrollable")))for(var n=0,o=this.map.layers.length;n<o;n++){var l=this.map.layers[n];if(r==l.div||r==l.pane){s=!0;break}}n=r==this.map.div,r=r.parentNode}!i&&n&&(s&&(i=0,e.wheelDelta?(0==(i=e.wheelDelta)%160&&(i*=.75),i/=120):e.detail&&(i=-(e.detail/Math.abs(e.detail))),this.delta+=i,window.clearTimeout(this._timeoutId),this.interval&&Math.abs(this.delta)<this.maxDelta?(t=OpenLayers.Util.extend({},e),this._timeoutId=window.setTimeout(OpenLayers.Function.bind(function(){this.wheelZoom(t)},this),this.interval)):this.wheelZoom(e)),OpenLayers.Event.stop(e))}},wheelZoom:function(e){var t=this.delta;this.delta=0,t&&(e.xy=this.map.events.getMousePosition(e),t<0?this.callback("down",[e,this.cumulative?Math.max(-this.maxDelta,t):-1]):this.callback("up",[e,this.cumulative?Math.min(this.maxDelta,t):1]))},activate:function(e){var t;return!!OpenLayers.Handler.prototype.activate.apply(this,arguments)&&(t=this.wheelListener,OpenLayers.Event.observe(window,"DOMMouseScroll",t),OpenLayers.Event.observe(window,"mousewheel",t),OpenLayers.Event.observe(document,"mousewheel",t),!0)},deactivate:function(e){var t;return!!OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(t=this.wheelListener,OpenLayers.Event.stopObserving(window,"DOMMouseScroll",t),OpenLayers.Event.stopObserving(window,"mousewheel",t),OpenLayers.Event.stopObserving(document,"mousewheel",t),!0)},CLASS_NAME:"OpenLayers.Handler.MouseWheel"}),OpenLayers.Symbolizer=OpenLayers.Class({zIndex:0,initialize:function(e){OpenLayers.Util.extend(this,e)},clone:function clone(){return new(eval(this.CLASS_NAME))(OpenLayers.Util.extend({},this))},CLASS_NAME:"OpenLayers.Symbolizer"}),OpenLayers.Symbolizer.Raster=OpenLayers.Class(OpenLayers.Symbolizer,{initialize:function(e){OpenLayers.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"OpenLayers.Symbolizer.Raster"}),OpenLayers.Rule=OpenLayers.Class({id:null,name:null,title:null,description:null,context:null,filter:null,elseFilter:!1,symbolizer:null,symbolizers:null,minScaleDenominator:null,maxScaleDenominator:null,initialize:function(e){this.symbolizer={},OpenLayers.Util.extend(this,e),this.symbolizers&&delete this.symbolizer,this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){for(var e in this.symbolizer)this.symbolizer[e]=null;this.symbolizer=null,delete this.symbolizers},evaluate:function(e){var t,i=this.getContext(e),s=!0;return(this.minScaleDenominator||this.maxScaleDenominator)&&(t=e.layer.map.getScale()),s=(s=(s=this.minScaleDenominator?t>=OpenLayers.Style.createLiteral(this.minScaleDenominator,i):s)&&this.maxScaleDenominator?t<OpenLayers.Style.createLiteral(this.maxScaleDenominator,i):s)&&this.filter?"OpenLayers.Filter.FeatureId"==this.filter.CLASS_NAME?this.filter.evaluate(e):this.filter.evaluate(i):s},getContext:function(e){var t=(t=this.context)||e.attributes||e.data;return t="function"==typeof this.context?this.context(e):t},clone:function(){var e=OpenLayers.Util.extend({},this);if(this.symbolizers){var t=this.symbolizers.length;e.symbolizers=Array(t);for(var i=0;i<t;++i)e.symbolizers[i]=this.symbolizers[i].clone()}else for(var s in e.symbolizer={},this.symbolizer)t=this.symbolizer[s],"object"===(i=_typeof(t))?e.symbolizer[s]=OpenLayers.Util.extend({},t):"string"===i&&(e.symbolizer[s]=t);return e.filter=this.filter&&this.filter.clone(),e.context=this.context&&OpenLayers.Util.extend({},this.context),new OpenLayers.Rule(e)},CLASS_NAME:"OpenLayers.Rule"}),OpenLayers.Format.SLD=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{profile:null,defaultVersion:"1.0.0",stringifyOutput:!0,namedLayersAsArray:!1,CLASS_NAME:"OpenLayers.Format.SLD"}),OpenLayers.Symbolizer.Polygon=OpenLayers.Class(OpenLayers.Symbolizer,{initialize:function(e){OpenLayers.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"OpenLayers.Symbolizer.Polygon"}),OpenLayers.Format.GML.v2=OpenLayers.Class(OpenLayers.Format.GML.Base,{schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd",initialize:function(e){OpenLayers.Format.GML.Base.prototype.initialize.apply(this,[e])},readers:{gml:OpenLayers.Util.applyDefaults({outerBoundaryIs:function(e,t){var i={};this.readChildNodes(e,i),t.outer=i.components[0]},innerBoundaryIs:function(e,t){var i={};this.readChildNodes(e,i),t.inner.push(i.components[0])},Box:function(e,t){this.readChildNodes(e,e={}),t.components||(t.components=[]);var i=e.points[0],e=e.points[1];t.components.push(new OpenLayers.Bounds(i.x,i.y,e.x,e.y))}},OpenLayers.Format.GML.Base.prototype.readers.gml),feature:OpenLayers.Format.GML.Base.prototype.readers.feature,wfs:OpenLayers.Format.GML.Base.prototype.readers.wfs},write:function(e){var t=OpenLayers.Util.isArray(e)?"wfs:FeatureCollection":"gml:featureMember";return e=this.writeNode(t,e),this.setAttributeNS(e,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[e])},writers:{gml:OpenLayers.Util.applyDefaults({Point:function(e){var t=this.createElementNSPlus("gml:Point");return this.writeNode("coordinates",[e],t),t},coordinates:function(e){for(var t,i=e.length,s=Array(i),n=0;n<i;++n)t=e[n],s[n]=this.xy?t.x+","+t.y:t.y+","+t.x,null!=t.z&&(s[n]+=","+t.z);return this.createElementNSPlus("gml:coordinates",{attributes:{decimal:".",cs:",",ts:" "},value:1==i?s[0]:s.join(" ")})},LineString:function(e){var t=this.createElementNSPlus("gml:LineString");return this.writeNode("coordinates",e.components,t),t},Polygon:function(e){var t=this.createElementNSPlus("gml:Polygon");this.writeNode("outerBoundaryIs",e.components[0],t);for(var i=1;i<e.components.length;++i)this.writeNode("innerBoundaryIs",e.components[i],t);return t},outerBoundaryIs:function(e){var t=this.createElementNSPlus("gml:outerBoundaryIs");return this.writeNode("LinearRing",e,t),t},innerBoundaryIs:function(e){var t=this.createElementNSPlus("gml:innerBoundaryIs");return this.writeNode("LinearRing",e,t),t},LinearRing:function(e){var t=this.createElementNSPlus("gml:LinearRing");return this.writeNode("coordinates",e.components,t),t},Box:function(e){var t=this.createElementNSPlus("gml:Box");return this.writeNode("coordinates",[{x:e.left,y:e.bottom},{x:e.right,y:e.top}],t),this.srsName&&t.setAttribute("srsName",this.srsName),t}},OpenLayers.Format.GML.Base.prototype.writers.gml),feature:OpenLayers.Format.GML.Base.prototype.writers.feature,wfs:OpenLayers.Format.GML.Base.prototype.writers.wfs},CLASS_NAME:"OpenLayers.Format.GML.v2"}),OpenLayers.Format.Filter.v1_0_0=OpenLayers.Class(OpenLayers.Format.GML.v2,OpenLayers.Format.Filter.v1,{VERSION:"1.0.0",schemaLocation:"http://www.opengis.net/ogc/filter/1.0.0/filter.xsd",initialize:function(e){OpenLayers.Format.GML.v2.prototype.initialize.apply(this,[e])},readers:{ogc:OpenLayers.Util.applyDefaults({PropertyIsEqualTo:function(e,t){var i=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.EQUAL_TO});this.readChildNodes(e,i),t.filters.push(i)},PropertyIsNotEqualTo:function(e,t){var i=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.NOT_EQUAL_TO});this.readChildNodes(e,i),t.filters.push(i)},PropertyIsLike:function(e,t){var i=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.LIKE}),s=(this.readChildNodes(e,i),e.getAttribute("wildCard")),n=e.getAttribute("singleChar"),e=e.getAttribute("escape");i.value2regex(s,n,e),t.filters.push(i)}},OpenLayers.Format.Filter.v1.prototype.readers.ogc),gml:OpenLayers.Format.GML.v2.prototype.readers.gml,feature:OpenLayers.Format.GML.v2.prototype.readers.feature},writers:{ogc:OpenLayers.Util.applyDefaults({PropertyIsEqualTo:function(e){var t=this.createElementNSPlus("ogc:PropertyIsEqualTo");return this.writeNode("PropertyName",e,t),this.writeOgcExpression(e.value,t),t},PropertyIsNotEqualTo:function(e){var t=this.createElementNSPlus("ogc:PropertyIsNotEqualTo");return this.writeNode("PropertyName",e,t),this.writeOgcExpression(e.value,t),t},PropertyIsLike:function(e){var t=this.createElementNSPlus("ogc:PropertyIsLike",{attributes:{wildCard:"*",singleChar:".",escape:"!"}});return this.writeNode("PropertyName",e,t),this.writeNode("Literal",e.regex2value(),t),t},BBOX:function(e){var t=this.createElementNSPlus("ogc:BBOX"),i=(e.property&&this.writeNode("PropertyName",e,t),this.writeNode("gml:Box",e.value,t));return e.projection&&i.setAttribute("srsName",e.projection),t}},OpenLayers.Format.Filter.v1.prototype.writers.ogc),gml:OpenLayers.Format.GML.v2.prototype.writers.gml,feature:OpenLayers.Format.GML.v2.prototype.writers.feature},writeSpatial:function(e,t){var i,t=this.createElementNSPlus("ogc:"+t);return this.writeNode("PropertyName",e,t),e.value instanceof OpenLayers.Filter.Function?this.writeNode("Function",e.value,t):(i=e.value instanceof OpenLayers.Geometry?this.writeNode("feature:_geometry",e.value).firstChild:this.writeNode("gml:Box",e.value),e.projection&&i.setAttribute("srsName",e.projection),t.appendChild(i)),t},CLASS_NAME:"OpenLayers.Format.Filter.v1_0_0"}),OpenLayers.Format.WFST.v1_0_0=OpenLayers.Class(OpenLayers.Format.Filter.v1_0_0,OpenLayers.Format.WFST.v1,{version:"1.0.0",srsNameInQuery:!1,schemaLocations:{wfs:"http://schemas.opengis.net/wfs/1.0.0/WFS-transaction.xsd"},initialize:function(e){OpenLayers.Format.Filter.v1_0_0.prototype.initialize.apply(this,[e]),OpenLayers.Format.WFST.v1.prototype.initialize.apply(this,[e])},readNode:function(e,t,i){return OpenLayers.Format.GML.v2.prototype.readNode.apply(this,arguments)},readers:{wfs:OpenLayers.Util.applyDefaults({WFS_TransactionResponse:function(e,t){t.insertIds=[],t.success=!1,this.readChildNodes(e,t)},InsertResult:function(e,t){var i={fids:[]};this.readChildNodes(e,i),t.insertIds=t.insertIds.concat(i.fids)},TransactionResult:function(e,t){this.readChildNodes(e,t)},Status:function(e,t){this.readChildNodes(e,t)},SUCCESS:function(e,t){t.success=!0}},OpenLayers.Format.WFST.v1.prototype.readers.wfs),gml:OpenLayers.Format.GML.v2.prototype.readers.gml,feature:OpenLayers.Format.GML.v2.prototype.readers.feature,ogc:OpenLayers.Format.Filter.v1_0_0.prototype.readers.ogc},writers:{wfs:OpenLayers.Util.applyDefaults({Query:function(e){var t=(e=OpenLayers.Util.extend({featureNS:this.featureNS,featurePrefix:this.featurePrefix,featureType:this.featureType,srsName:this.srsName,srsNameInQuery:this.srsNameInQuery},e)).featurePrefix,i=this.createElementNSPlus("wfs:Query",{attributes:{typeName:(t?t+":":"")+e.featureType}});if(e.srsNameInQuery&&e.srsName&&i.setAttribute("srsName",e.srsName),e.featureNS&&i.setAttribute("xmlns:"+t,e.featureNS),e.propertyNames)for(var t=0,s=e.propertyNames.length;t<s;t++)this.writeNode("ogc:PropertyName",{property:e.propertyNames[t]},i);return e.filter&&(this.setFilterProperty(e.filter),this.writeNode("ogc:Filter",e.filter,i)),i}},OpenLayers.Format.WFST.v1.prototype.writers.wfs),gml:OpenLayers.Format.GML.v2.prototype.writers.gml,feature:OpenLayers.Format.GML.v2.prototype.writers.feature,ogc:OpenLayers.Format.Filter.v1_0_0.prototype.writers.ogc},CLASS_NAME:"OpenLayers.Format.WFST.v1_0_0"}),OpenLayers.ElementsIndexer=OpenLayers.Class({maxZIndex:null,order:null,indices:null,compare:null,initialize:function(e){this.compare=e?OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_Y_ORDER:OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_DRAWING_ORDER,this.clear()},insert:function(e){this.exists(e)&&this.remove(e);var t=e.id;this.determineZIndex(e);for(var i,s=-1,n=this.order.length;1<n-s;)i=parseInt((s+n)/2),0<this.compare(this,e,OpenLayers.Util.getElement(this.order[i]))?s=i:n=i;return this.order.splice(n,0,t),this.indices[t]=this.getZIndex(e),this.getNextElement(n)},remove:function(e){e=e.id;var t=OpenLayers.Util.indexOf(this.order,e);0<=t&&(this.order.splice(t,1),delete this.indices[e],this.maxZIndex=0<this.order.length?this.indices[this.order[this.order.length-1]]:0)},clear:function(){this.order=[],this.indices={},this.maxZIndex=0},exists:function(e){return null!=this.indices[e.id]},getZIndex:function(e){return e._style.graphicZIndex},determineZIndex:function(e){var t=e._style.graphicZIndex;null==t?(t=this.maxZIndex,e._style.graphicZIndex=t):t>this.maxZIndex&&(this.maxZIndex=t)},getNextElement:function(e){var t;return(e+=1)<this.order.length?null==(t=OpenLayers.Util.getElement(this.order[e]))?this.getNextElement(e):t:null},CLASS_NAME:"OpenLayers.ElementsIndexer"}),OpenLayers.ElementsIndexer.IndexingMethods={Z_ORDER:function(e,t,i){t=e.getZIndex(t);var s=0;return s=i?t-(e=e.getZIndex(i)):s},Z_ORDER_DRAWING_ORDER:function(e,t,i){return e=OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER(e,t,i),e=i&&0==e?1:e},Z_ORDER_Y_ORDER:function(e,t,i){return e=OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER(e,t,i),e=i&&0===e?0===(t=i._boundsBottom-t._boundsBottom)?1:t:e}},OpenLayers.Renderer.Elements=OpenLayers.Class(OpenLayers.Renderer,{rendererRoot:null,root:null,vectorRoot:null,textRoot:null,xmlns:null,xOffset:0,indexer:null,BACKGROUND_ID_SUFFIX:"_background",LABEL_ID_SUFFIX:"_label",LABEL_OUTLINE_SUFFIX:"_outline",initialize:function(e,t){OpenLayers.Renderer.prototype.initialize.apply(this,arguments),this.rendererRoot=this.createRenderRoot(),this.root=this.createRoot("_root"),this.vectorRoot=this.createRoot("_vroot"),this.textRoot=this.createRoot("_troot"),this.root.appendChild(this.vectorRoot),this.root.appendChild(this.textRoot),this.rendererRoot.appendChild(this.root),this.container.appendChild(this.rendererRoot),t&&(t.zIndexing||t.yOrdering)&&(this.indexer=new OpenLayers.ElementsIndexer(t.yOrdering))},destroy:function(){this.clear(),this.xmlns=this.root=this.rendererRoot=null,OpenLayers.Renderer.prototype.destroy.apply(this,arguments)},clear:function(){var e,t=this.vectorRoot;if(t)for(;e=t.firstChild;)t.removeChild(e);if(t=this.textRoot)for(;e=t.firstChild;)t.removeChild(e);this.indexer&&this.indexer.clear()},setExtent:function(e,t){var i,s,n=OpenLayers.Renderer.prototype.setExtent.apply(this,arguments),r=this.getResolution();return this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&(s=e.getWidth()/this.map.getExtent().getWidth(),e=e.scale(1/s),(s=this.map.getMaxExtent()).right>e.left&&s.right<e.right?i=!0:s.left>e.left&&s.left<e.right&&(i=!1),i===this.rightOfDateLine&&!t||(this.xOffset=!(n=!1)===i?s.getWidth()/r:0),this.rightOfDateLine=i),n},getNodeType:function(e,t){},drawGeometry:function(e,t,i){var s=!0;if("OpenLayers.Geometry.Collection"!=(n=e.CLASS_NAME)&&"OpenLayers.Geometry.MultiPoint"!=n&&"OpenLayers.Geometry.MultiLineString"!=n&&"OpenLayers.Geometry.MultiPolygon"!=n)return n=s=!1,"none"!=t.display&&(t.backgroundGraphic?this.redrawBackgroundNode(e.id,e,t,i):n=!0,s=this.redrawNode(e.id,e,t,i)),0==s&&(t=document.getElementById(e.id))&&(t._style.backgroundGraphic&&(n=!0),t.parentNode.removeChild(t)),n&&(t=document.getElementById(e.id+this.BACKGROUND_ID_SUFFIX))&&t.parentNode.removeChild(t),s;for(var n=0,r=e.components.length;n<r;n++)s=this.drawGeometry(e.components[n],t,i)&&s;return s},redrawNode:function(e,t,i,s){return i=this.applyDefaultSymbolizer(i),(e=this.nodeFactory(e,this.getNodeType(t,i)))._featureId=s,e._boundsBottom=t.getBounds().bottom,e._geometryClass=t.CLASS_NAME,e._style=i,!1!==(t=this.drawGeometryNode(e,t,i))&&(e=t.node,this.indexer?(i=this.indexer.insert(e))?this.vectorRoot.insertBefore(e,i):this.vectorRoot.appendChild(e):e.parentNode!==this.vectorRoot&&this.vectorRoot.appendChild(e),this.postDraw(e),t.complete)},redrawBackgroundNode:function(e,t,i,s){return(i=OpenLayers.Util.extend({},i)).externalGraphic=i.backgroundGraphic,i.graphicXOffset=i.backgroundXOffset,i.graphicYOffset=i.backgroundYOffset,i.graphicZIndex=i.backgroundGraphicZIndex,i.graphicWidth=i.backgroundWidth||i.graphicWidth,i.graphicHeight=i.backgroundHeight||i.graphicHeight,i.backgroundGraphic=null,i.backgroundXOffset=null,i.backgroundYOffset=null,i.backgroundGraphicZIndex=null,this.redrawNode(e+this.BACKGROUND_ID_SUFFIX,t,i,null)},drawGeometryNode:function(e,t,i){var s,n={isFilled:void 0===(i=i||e._style).fill||i.fill,isStroked:void 0===i.stroke?!!i.strokeWidth:i.stroke};switch(t.CLASS_NAME){case"OpenLayers.Geometry.Point":!1===i.graphic&&(n.isFilled=!1,n.isStroked=!1),s=this.drawPoint(e,t);break;case"OpenLayers.Geometry.LineString":n.isFilled=!1,s=this.drawLineString(e,t);break;case"OpenLayers.Geometry.LinearRing":s=this.drawLinearRing(e,t);break;case"OpenLayers.Geometry.Polygon":s=this.drawPolygon(e,t);break;case"OpenLayers.Geometry.Rectangle":s=this.drawRectangle(e,t)}return e._options=n,0!=s&&{node:this.setStyle(e,i,n,t),complete:s}},postDraw:function(e){},drawPoint:function(e,t){},drawLineString:function(e,t){},drawLinearRing:function(e,t){},drawPolygon:function(e,t){},drawRectangle:function(e,t){},drawCircle:function(e,t){},removeText:function(e){var t=document.getElementById(e+this.LABEL_ID_SUFFIX);t&&this.textRoot.removeChild(t),(e=document.getElementById(e+this.LABEL_OUTLINE_SUFFIX))&&this.textRoot.removeChild(e)},getFeatureIdFromEvent:function(e){var t=e.target,i=t&&t.correspondingUseElement;return(i||t||e.srcElement)._featureId},eraseGeometry:function(e,t){if("OpenLayers.Geometry.MultiPoint"==e.CLASS_NAME||"OpenLayers.Geometry.MultiLineString"==e.CLASS_NAME||"OpenLayers.Geometry.MultiPolygon"==e.CLASS_NAME||"OpenLayers.Geometry.Collection"==e.CLASS_NAME)for(var i=0,s=e.components.length;i<s;i++)this.eraseGeometry(e.components[i],t);else(i=OpenLayers.Util.getElement(e.id))&&i.parentNode&&(i.geometry&&(i.geometry.destroy(),i.geometry=null),i.parentNode.removeChild(i),this.indexer&&this.indexer.remove(i),i._style.backgroundGraphic&&(i=OpenLayers.Util.getElement(e.id+this.BACKGROUND_ID_SUFFIX))&&i.parentNode&&i.parentNode.removeChild(i))},nodeFactory:function(e,t){var i=OpenLayers.Util.getElement(e);return i?this.nodeTypeCompare(i,t)||(i.parentNode.removeChild(i),i=this.nodeFactory(e,t)):i=this.createNode(t,e),i},nodeTypeCompare:function(e,t){},createNode:function(e,t){},moveRoot:function(e){var t=this.root;(t=e.root.parentNode==this.rendererRoot?e.root:t).parentNode.removeChild(t),e.rendererRoot.appendChild(t)},getRenderLayerId:function(){return this.root.parentNode.parentNode.id},isComplexSymbol:function(e){return"circle"!=e&&!!e},CLASS_NAME:"OpenLayers.Renderer.Elements"}),OpenLayers.Control.ArgParser=OpenLayers.Class(OpenLayers.Control,{center:null,zoom:null,layers:null,displayProjection:null,getParameters:function(e){e=e||window.location.href;var t=OpenLayers.Util.getParameters(e),i=e.indexOf("#");return 0<i&&(e="?"+e.substring(i+1,e.length),OpenLayers.Util.extend(t,OpenLayers.Util.getParameters(e))),t},setMap:function(e){OpenLayers.Control.prototype.setMap.apply(this,arguments);for(var t=0,i=this.map.controls.length;t<i;t++){var s=this.map.controls[t];if(s!=this&&"OpenLayers.Control.ArgParser"==s.CLASS_NAME){s.displayProjection!=this.displayProjection&&(this.displayProjection=s.displayProjection);break}}t==this.map.controls.length&&((t=this.getParameters()).layers&&(this.layers=t.layers,this.map.events.register("addlayer",this,this.configureLayers),this.configureLayers()),t.lat&&t.lon&&(this.center=new OpenLayers.LonLat(parseFloat(t.lon),parseFloat(t.lat)),t.zoom&&(this.zoom=parseFloat(t.zoom)),this.map.events.register("changebaselayer",this,this.setCenter),this.setCenter()))},setCenter:function(){this.map.baseLayer&&(this.map.events.unregister("changebaselayer",this,this.setCenter),this.displayProjection&&this.center.transform(this.displayProjection,this.map.getProjectionObject()),this.map.setCenter(this.center,this.zoom))},configureLayers:function(){if(this.layers.length==this.map.layers.length){this.map.events.unregister("addlayer",this,this.configureLayers);for(var e=0,t=this.layers.length;e<t;e++){var i=this.map.layers[e],s=this.layers.charAt(e);"B"==s?this.map.setBaseLayer(i):"T"!=s&&"F"!=s||i.setVisibility("T"==s)}}},CLASS_NAME:"OpenLayers.Control.ArgParser"}),OpenLayers.Control.Permalink=OpenLayers.Class(OpenLayers.Control,{argParserClass:OpenLayers.Control.ArgParser,element:null,anchor:!1,base:"",displayProjection:null,initialize:function(e,t,i){null===e||"object"!=_typeof(e)||OpenLayers.Util.isElement(e)?(OpenLayers.Control.prototype.initialize.apply(this,[i]),this.element=OpenLayers.Util.getElement(e),this.base=t||document.location.href):(this.base=document.location.href,OpenLayers.Control.prototype.initialize.apply(this,[e]),null!=this.element&&(this.element=OpenLayers.Util.getElement(this.element)))},destroy:function(){this.element&&this.element.parentNode==this.div&&(this.div.removeChild(this.element),this.element=null),this.map&&this.map.events.unregister("moveend",this,this.updateLink),OpenLayers.Control.prototype.destroy.apply(this,arguments)},setMap:function(e){OpenLayers.Control.prototype.setMap.apply(this,arguments);for(var t=0,i=this.map.controls.length;t<i;t++){var s=this.map.controls[t];if(s.CLASS_NAME==this.argParserClass.CLASS_NAME){s.displayProjection!=this.displayProjection&&(this.displayProjection=s.displayProjection);break}}t==this.map.controls.length&&this.map.addControl(new this.argParserClass({displayProjection:this.displayProjection}))},draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),this.element||this.anchor||(this.element=document.createElement("a"),this.element.innerHTML=OpenLayers.i18n("Permalink"),this.element.href="",this.div.appendChild(this.element)),this.map.events.on({moveend:this.updateLink,changelayer:this.updateLink,changebaselayer:this.updateLink,scope:this}),this.updateLink(),this.div},updateLink:function(){var e=this.anchor?"#":"?",t=this.base,i=null;-1!=t.indexOf("#")&&0==this.anchor&&(i=t.substring(t.indexOf("#"),t.length)),t=(t=-1!=t.indexOf(e)?t.substring(0,t.indexOf(e)):t).split("#")[0]+e+OpenLayers.Util.getParameterString(this.createParams()),i&&(t+=i),this.anchor&&!this.element?window.location.href=t:this.element.href=t},createParams:function(e,t,i){e=e||this.map.getCenter();var s=OpenLayers.Util.getParameters(this.base);if(e)for(s.zoom=t||this.map.getZoom(),t=e.lat,e=e.lon,this.displayProjection&&(e=(t=OpenLayers.Projection.transform({x:e,y:t},this.map.getProjectionObject(),this.displayProjection)).x,t=t.y),s.lat=Math.round(1e5*t)/1e5,s.lon=Math.round(1e5*e)/1e5,i=i||this.map.layers,s.layers="",e=0,t=i.length;e<t;e++){var n=i[e];s.layers=n.isBaseLayer?s.layers+(n==this.map.baseLayer?"B":"0"):s.layers+(n.getVisibility()?"T":"F")}return s},CLASS_NAME:"OpenLayers.Control.Permalink"}),OpenLayers.Layer.TMS=OpenLayers.Class(OpenLayers.Layer.Grid,{serviceVersion:"1.0.0",layername:null,type:null,isBaseLayer:!0,tileOrigin:null,serverResolutions:null,zoomOffset:0,initialize:function(e,t,i){var s=[];s.push(e,t,{},i),OpenLayers.Layer.Grid.prototype.initialize.apply(this,s)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.TMS(this.name,this.url,this.getOptions())),OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getURL:function(e){e=this.adjustBounds(e);var t=this.getServerResolution(),i=Math.round((e.left-this.tileOrigin.lon)/(t*this.tileSize.w));return e=Math.round((e.bottom-this.tileOrigin.lat)/(t*this.tileSize.h)),t=this.getServerZoom(),i=this.serviceVersion+"/"+this.layername+"/"+t+"/"+i+"/"+e+"."+this.type,e=this.url,(e=OpenLayers.Util.isArray(e)?this.selectUrl(i,e):e)+i},setMap:function(e){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments),this.tileOrigin||(this.tileOrigin=new OpenLayers.LonLat(this.map.maxExtent.left,this.map.maxExtent.bottom))},CLASS_NAME:"OpenLayers.Layer.TMS"}),OpenLayers.Format.WCSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.1.0",CLASS_NAME:"OpenLayers.Format.WCSCapabilities"}),OpenLayers.Format.WCSCapabilities.v1=OpenLayers.Class(OpenLayers.Format.XML,{regExes:{trimSpace:/^\s*|\s*$/g,splitSpace:/\s+/},defaultPrefix:"wcs",read:function(e){(e="string"==typeof e?OpenLayers.Format.XML.prototype.read.apply(this,[e]):e)&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),t},CLASS_NAME:"OpenLayers.Format.WCSCapabilities.v1"}),OpenLayers.Format.WCSCapabilities.v1_0_0=OpenLayers.Class(OpenLayers.Format.WCSCapabilities.v1,{namespaces:{wcs:"http://www.opengis.net/wcs",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",ows:"http://www.opengis.net/ows"},errorProperty:"service",readers:{wcs:(_wcs={WCS_Capabilities:function(e,t){this.readChildNodes(e,t)},Service:function(e,t){t.service={},this.readChildNodes(e,t.service)},name:function(e,t){t.name=this.getChildValue(e)},label:function(e,t){t.label=this.getChildValue(e)},keywords:function(e,t){t.keywords=[],this.readChildNodes(e,t.keywords)},keyword:function(e,t){t.push(this.getChildValue(e))},responsibleParty:function(e,t){t.responsibleParty={},this.readChildNodes(e,t.responsibleParty)},individualName:function(e,t){t.individualName=this.getChildValue(e)},organisationName:function(e,t){t.organisationName=this.getChildValue(e)},positionName:function(e,t){t.positionName=this.getChildValue(e)},contactInfo:function(e,t){t.contactInfo={},this.readChildNodes(e,t.contactInfo)},phone:function(e,t){t.phone={},this.readChildNodes(e,t.phone)},voice:function(e,t){t.voice=this.getChildValue(e)},facsimile:function(e,t){t.facsimile=this.getChildValue(e)},address:function(e,t){t.address={},this.readChildNodes(e,t.address)},deliveryPoint:function(e,t){t.deliveryPoint=this.getChildValue(e)},city:function(e,t){t.city=this.getChildValue(e)},postalCode:function(e,t){t.postalCode=this.getChildValue(e)},country:function(e,t){t.country=this.getChildValue(e)},electronicMailAddress:function(e,t){t.electronicMailAddress=this.getChildValue(e)},fees:function(e,t){t.fees=this.getChildValue(e)},accessConstraints:function(e,t){t.accessConstraints=this.getChildValue(e)},ContentMetadata:function(e,t){t.contentMetadata=[],this.readChildNodes(e,t.contentMetadata)},CoverageOfferingBrief:function(e,t){var i={};this.readChildNodes(e,i),t.push(i)}},_defineProperty(_wcs,"name",function(e,t){t.name=this.getChildValue(e)}),_defineProperty(_wcs,"label",function(e,t){t.label=this.getChildValue(e)}),_defineProperty(_wcs,"lonLatEnvelope",function(e,t){var i,s,n=this.getElementsByTagNameNS(e,"http://www.opengis.net/gml","pos");2==n.length&&(s={},OpenLayers.Format.GML.v3.prototype.readers.gml.pos.apply(this,[n[0],i={}]),OpenLayers.Format.GML.v3.prototype.readers.gml.pos.apply(this,[n[1],s]),t.lonLatEnvelope={},t.lonLatEnvelope.srsName=e.getAttribute("srsName"),t.lonLatEnvelope.min=i.points[0],t.lonLatEnvelope.max=s.points[0])}),_wcs)},CLASS_NAME:"OpenLayers.Format.WCSCapabilities.v1_0_0"}),OpenLayers.Strategy.Fixed=OpenLayers.Class(OpenLayers.Strategy,{preload:!1,activate:function(){var e=OpenLayers.Strategy.prototype.activate.apply(this,arguments);return e&&(this.layer.events.on({refresh:this.load,scope:this}),1==this.layer.visibility||this.preload?this.load():this.layer.events.on({visibilitychanged:this.load,scope:this})),e},deactivate:function(){var e=OpenLayers.Strategy.prototype.deactivate.call(this);return e&&this.layer.events.un({refresh:this.load,visibilitychanged:this.load,scope:this}),e},load:function(e){var t=this.layer;t.events.triggerEvent("loadstart",{filter:t.filter}),t.protocol.read(OpenLayers.Util.applyDefaults({callback:this.merge,filter:t.filter,scope:this},e)),t.events.un({visibilitychanged:this.load,scope:this})},merge:function(e){var t=this.layer,i=(t.destroyFeatures(),e.features);if(i&&0<i.length){var s=t.projection,n=t.map.getProjectionObject();if(!n.equals(s))for(var r,a=0,o=i.length;a<o;++a)(r=i[a].geometry)&&r.transform(s,n);t.addFeatures(i)}t.events.triggerEvent("loadend",{response:e})},CLASS_NAME:"OpenLayers.Strategy.Fixed"}),OpenLayers.Control.Zoom=OpenLayers.Class(OpenLayers.Control,{zoomInText:"+",zoomInId:"olZoomInLink",zoomOutText:"−",zoomOutId:"olZoomOutLink",draw:function(){var e=OpenLayers.Control.prototype.draw.apply(this),t=(i=this.getOrCreateLinks(e)).zoomIn,i=i.zoomOut,s=this.map.events;return i.parentNode!==e&&(s=this.events).attachToElement(i.parentNode),s.register("buttonclick",this,this.onZoomClick),this.zoomInLink=t,this.zoomOutLink=i,e},getOrCreateLinks:function(e){var t=document.getElementById(this.zoomInId),i=document.getElementById(this.zoomOutId);return t||((t=document.createElement("a")).href="#zoomIn",t.appendChild(document.createTextNode(this.zoomInText)),t.className="olControlZoomIn",e.appendChild(t)),OpenLayers.Element.addClass(t,"olButton"),i||((i=document.createElement("a")).href="#zoomOut",i.appendChild(document.createTextNode(this.zoomOutText)),i.className="olControlZoomOut",e.appendChild(i)),OpenLayers.Element.addClass(i,"olButton"),{zoomIn:t,zoomOut:i}},onZoomClick:function(e){(e=e.buttonElement)===this.zoomInLink?this.map.zoomIn():e===this.zoomOutLink&&this.map.zoomOut()},destroy:function(){this.map&&this.map.events.unregister("buttonclick",this,this.onZoomClick),delete this.zoomInLink,delete this.zoomOutLink,OpenLayers.Control.prototype.destroy.apply(this)},CLASS_NAME:"OpenLayers.Control.Zoom"}),OpenLayers.Layer.PointTrack=OpenLayers.Class(OpenLayers.Layer.Vector,{dataFrom:null,styleFrom:null,addNodes:function(e,t){if(e.length<2)throw Error("At least two point features have to be added to create a line from");for(var i,s,n,r,a=Array(e.length-1),o=0,l=e.length;o<l;o++){if(i=(s=e[o]).geometry){if("OpenLayers.Geometry.Point"!=i.CLASS_NAME)throw new TypeError("Only features with point geometries are supported.")}else i=s.lonlat,i=new OpenLayers.Geometry.Point(i.lon,i.lat);0<o&&(s=null!=this.dataFrom?e[o+this.dataFrom].data||e[o+this.dataFrom].attributes:null,n=null!=this.styleFrom?e[o+this.styleFrom].style:null,r=new OpenLayers.Geometry.LineString([r,i]),a[o-1]=new OpenLayers.Feature.Vector(r,s,n)),r=i}this.addFeatures(a,t)},CLASS_NAME:"OpenLayers.Layer.PointTrack"}),OpenLayers.Layer.PointTrack.SOURCE_NODE=-1,OpenLayers.Layer.PointTrack.TARGET_NODE=0,OpenLayers.Layer.PointTrack.dataFrom={SOURCE_NODE:-1,TARGET_NODE:0},OpenLayers.Protocol.WFS=function(e){e=OpenLayers.Util.applyDefaults(e,OpenLayers.Protocol.WFS.DEFAULTS);var t=OpenLayers.Protocol.WFS["v"+e.version.replace(/\./g,"_")];if(t)return new t(e);throw"Unsupported WFS version: "+e.version},OpenLayers.Protocol.WFS.fromWMSLayer=function(e,t){var i,s=e.params.LAYERS;return 1<(s=(OpenLayers.Util.isArray(s)?s[0]:s).split(":")).length&&(i=s[0]),s=s.pop(),i={url:e.url,featureType:s,featurePrefix:i,srsName:e.projection&&e.projection.getCode()||e.map&&e.map.getProjectionObject().getCode(),version:"1.1.0"},new OpenLayers.Protocol.WFS(OpenLayers.Util.applyDefaults(t,i))},OpenLayers.Protocol.WFS.DEFAULTS={version:"1.0.0"},OpenLayers.Layer.Markers=OpenLayers.Class(OpenLayers.Layer,{isBaseLayer:!1,markers:null,drawn:!1,initialize:function(e,t){OpenLayers.Layer.prototype.initialize.apply(this,arguments),this.markers=[]},destroy:function(){this.clearMarkers(),this.markers=null,OpenLayers.Layer.prototype.destroy.apply(this,arguments)},setOpacity:function(e){if(e!=this.opacity){this.opacity=e,e=0;for(var t=this.markers.length;e<t;e++)this.markers[e].setOpacity(this.opacity)}},moveTo:function(e,t,i){if(OpenLayers.Layer.prototype.moveTo.apply(this,arguments),t||!this.drawn){for(var s=0,n=this.markers.length;s<n;s++)this.drawMarker(this.markers[s]);this.drawn=!0}},addMarker:function(e){this.markers.push(e),this.opacity<1&&e.setOpacity(this.opacity),this.map&&this.map.getExtent()&&(e.map=this.map,this.drawMarker(e))},removeMarker:function(e){this.markers&&this.markers.length&&(OpenLayers.Util.removeItem(this.markers,e),e.erase())},clearMarkers:function(){if(null!=this.markers)for(;0<this.markers.length;)this.removeMarker(this.markers[0])},drawMarker:function(e){var t=this.map.getLayerPxFromLonLat(e.lonlat);null==t?e.display(!1):e.isDrawn()?e.icon&&e.icon.moveTo(t):(e=e.draw(t),this.div.appendChild(e))},getDataExtent:function(){var e=null;if(this.markers&&0<this.markers.length)for(var e=new OpenLayers.Bounds,t=0,i=this.markers.length;t<i;t++)e.extend(this.markers[t].lonlat);return e},CLASS_NAME:"OpenLayers.Layer.Markers"}),OpenLayers.Control.Pan=OpenLayers.Class(OpenLayers.Control.Button,{slideFactor:50,slideRatio:null,direction:null,initialize:function(e,t){this.direction=e,this.CLASS_NAME+=this.direction,OpenLayers.Control.prototype.initialize.apply(this,[t])},trigger:function(){if(this.map){var e=OpenLayers.Function.bind(function(e){return this.slideRatio?this.map.getSize()[e]*this.slideRatio:this.slideFactor},this);switch(this.direction){case OpenLayers.Control.Pan.NORTH:this.map.pan(0,-e("h"));break;case OpenLayers.Control.Pan.SOUTH:this.map.pan(0,e("h"));break;case OpenLayers.Control.Pan.WEST:this.map.pan(-e("w"),0);break;case OpenLayers.Control.Pan.EAST:this.map.pan(e("w"),0)}}},CLASS_NAME:"OpenLayers.Control.Pan"}),OpenLayers.Control.Pan.NORTH="North",OpenLayers.Control.Pan.SOUTH="South",OpenLayers.Control.Pan.EAST="East",OpenLayers.Control.Pan.WEST="West",OpenLayers.Format.CSWGetDomain=function(e){e=OpenLayers.Util.applyDefaults(e,OpenLayers.Format.CSWGetDomain.DEFAULTS);var t=OpenLayers.Format.CSWGetDomain["v"+e.version.replace(/\./g,"_")];if(t)return new t(e);throw"Unsupported CSWGetDomain version: "+e.version},OpenLayers.Format.CSWGetDomain.DEFAULTS={version:"2.0.2"},OpenLayers.Format.CSWGetDomain.v2_0_2=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",csw:"http://www.opengis.net/cat/csw/2.0.2"},defaultPrefix:"csw",version:"2.0.2",schemaLocation:"http://www.opengis.net/cat/csw/2.0.2 http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd",PropertyName:null,ParameterName:null,read:function(e){(e="string"==typeof e?OpenLayers.Format.XML.prototype.read.apply(this,[e]):e)&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),t},readers:{csw:{GetDomainResponse:function(e,t){this.readChildNodes(e,t)},DomainValues:function(e,t){OpenLayers.Util.isArray(t.DomainValues)||(t.DomainValues=[]);for(var i=e.attributes,s={},n=0,r=i.length;n<r;++n)s[i[n].name]=i[n].nodeValue;this.readChildNodes(e,s),t.DomainValues.push(s)},PropertyName:function(e,t){t.PropertyName=this.getChildValue(e)},ParameterName:function(e,t){t.ParameterName=this.getChildValue(e)},ListOfValues:function(e,t){OpenLayers.Util.isArray(t.ListOfValues)||(t.ListOfValues=[]),this.readChildNodes(e,t.ListOfValues)},Value:function(e,t){for(var i=e.attributes,s={},n=0,r=i.length;n<r;++n)s[i[n].name]=i[n].nodeValue;s.value=this.getChildValue(e),t.push({Value:s})},ConceptualScheme:function(e,t){t.ConceptualScheme={},this.readChildNodes(e,t.ConceptualScheme)},Name:function(e,t){t.Name=this.getChildValue(e)},Document:function(e,t){t.Document=this.getChildValue(e)},Authority:function(e,t){t.Authority=this.getChildValue(e)},RangeOfValues:function(e,t){t.RangeOfValues={},this.readChildNodes(e,t.RangeOfValues)},MinValue:function(e,t){for(var i=e.attributes,s={},n=0,r=i.length;n<r;++n)s[i[n].name]=i[n].nodeValue;s.value=this.getChildValue(e),t.MinValue=s},MaxValue:function(e,t){for(var i=e.attributes,s={},n=0,r=i.length;n<r;++n)s[i[n].name]=i[n].nodeValue;s.value=this.getChildValue(e),t.MaxValue=s}}},write:function(e){return e=this.writeNode("csw:GetDomain",e),OpenLayers.Format.XML.prototype.write.apply(this,[e])},writers:{csw:{GetDomain:function(e){var t=this.createElementNSPlus("csw:GetDomain",{attributes:{service:"CSW",version:this.version}});return e.PropertyName||this.PropertyName?this.writeNode("csw:PropertyName",e.PropertyName||this.PropertyName,t):(e.ParameterName||this.ParameterName)&&this.writeNode("csw:ParameterName",e.ParameterName||this.ParameterName,t),this.readChildNodes(t,e),t},PropertyName:function(e){return this.createElementNSPlus("csw:PropertyName",{value:e})},ParameterName:function(e){return this.createElementNSPlus("csw:ParameterName",{value:e})}}},CLASS_NAME:"OpenLayers.Format.CSWGetDomain.v2_0_2"}),OpenLayers.Format.ArcXML.Features=OpenLayers.Class(OpenLayers.Format.XML,{read:function(e){return(new OpenLayers.Format.ArcXML).read(e).features.feature}}),OpenLayers.Control.Snapping=OpenLayers.Class(OpenLayers.Control,{DEFAULTS:{tolerance:10,node:!0,edge:!0,vertex:!0},greedy:!0,precedence:["node","vertex","edge"],resolution:null,geoToleranceCache:null,layer:null,feature:null,point:null,initialize:function(e){OpenLayers.Control.prototype.initialize.apply(this,[e]),this.options=e||{},this.options.layer&&this.setLayer(this.options.layer),e=OpenLayers.Util.extend({},this.options.defaults),this.defaults=OpenLayers.Util.applyDefaults(e,this.DEFAULTS),this.setTargets(this.options.targets),0===this.targets.length&&this.layer&&this.addTargetLayer(this.layer),this.geoToleranceCache={}},setLayer:function(e){this.active?(this.deactivate(),this.layer=e,this.activate()):this.layer=e},setTargets:function(e){if(this.targets=[],e&&e.length)for(var t,i=0,s=e.length;i<s;++i)(t=e[i])instanceof OpenLayers.Layer.Vector?this.addTargetLayer(t):this.addTarget(t)},addTargetLayer:function(e){this.addTarget({layer:e})},addTarget:function(e){(e=OpenLayers.Util.applyDefaults(e,this.defaults)).nodeTolerance=e.nodeTolerance||e.tolerance,e.vertexTolerance=e.vertexTolerance||e.tolerance,e.edgeTolerance=e.edgeTolerance||e.tolerance,this.targets.push(e)},removeTargetLayer:function(e){for(var t,i=this.targets.length-1;0<=i;--i)(t=this.targets[i]).layer===e&&this.removeTarget(t)},removeTarget:function(e){return OpenLayers.Util.removeItem(this.targets,e)},activate:function(){var e=OpenLayers.Control.prototype.activate.call(this);return e&&this.layer&&this.layer.events&&this.layer.events.on({sketchstarted:this.onSketchModified,sketchmodified:this.onSketchModified,vertexmodified:this.onVertexModified,scope:this}),e},deactivate:function(){var e=OpenLayers.Control.prototype.deactivate.call(this);return e&&this.layer&&this.layer.events&&this.layer.events.un({sketchstarted:this.onSketchModified,sketchmodified:this.onSketchModified,vertexmodified:this.onVertexModified,scope:this}),this.point=this.feature=null,e},onSketchModified:function(e){this.feature=e.feature,this.considerSnapping(e.vertex,e.vertex)},onVertexModified:function(e){this.feature=e.feature;var t=this.layer.map.getLonLatFromViewPortPx(e.pixel);this.considerSnapping(e.vertex,new OpenLayers.Geometry.Point(t.lon,t.lat))},considerSnapping:function(e,t){for(var i,s,n={rank:Number.POSITIVE_INFINITY,dist:Number.POSITIVE_INFINITY,x:null,y:null},r=!1,a=0,o=this.targets.length;a<o;++a)if(s=this.targets[a],i=this.testTarget(s,t)){if(this.greedy){(n=i).target=s,r=!0;break}(i.rank<n.rank||i.rank===n.rank&&i.dist<n.dist)&&((n=i).target=s,r=!0)}r&&(!1!==this.events.triggerEvent("beforesnap",{point:e,x:n.x,y:n.y,distance:n.dist,layer:n.target.layer,snapType:this.precedence[n.rank]})?(e.x=n.x,e.y=n.y,this.point=e,this.events.triggerEvent("snap",{point:e,snapType:this.precedence[n.rank],layer:n.target.layer,distance:n.dist})):r=!1),this.point&&!r&&(e.x=t.x,e.y=t.y,this.point=null,this.events.triggerEvent("unsnap",{point:e}))},testTarget:function(e,t){var i=this.layer.map.getResolution();if("minResolution"in e&&i<e.minResolution||"maxResolution"in e&&i>=e.maxResolution)return null;for(var s,n,r,a,i={node:this.getGeoTolerance(e.nodeTolerance,i),vertex:this.getGeoTolerance(e.vertexTolerance,i),edge:this.getGeoTolerance(e.edgeTolerance,i)},o=Math.max(i.node,i.vertex,i.edge),l={rank:Number.POSITIVE_INFINITY,dist:Number.POSITIVE_INFINITY},h=!1,p=e.layer.features,u=this.precedence.length,c=new OpenLayers.LonLat(t.x,t.y),d=0,y=p.length;d<y;++d)if((s=p[d])!==this.feature&&!s._sketch&&s.state!==OpenLayers.State.DELETE&&(!e.filter||e.filter.evaluate(s))&&s.atPoint(c,o,o))for(var m=0,f=Math.min(l.rank+1,u);m<f;++m)if(e[n=this.precedence[m]])if("edge"===n){if((a=(g=s.geometry.distanceTo(t,{details:!0})).distance)<=i[n]&&a<l.dist){l={rank:m,dist:a,x:g.x0,y:g.y0},h=!0;break}}else{for(var g,v=!1,L=0,O=(g=s.geometry.getVertices("node"===n)).length;L<O;++L)(a=(r=g[L]).distanceTo(t))<=i[n]&&(m<l.rank||m===l.rank&&a<l.dist)&&(l={rank:m,dist:a,x:r.x,y:r.y},v=h=!0);if(v)break}return h?l:null},getGeoTolerance:function(e,t){t!==this.resolution&&(this.resolution=t,this.geoToleranceCache={});var i=this.geoToleranceCache[e];return void 0===i&&(this.geoToleranceCache[e]=i=e*t),i},destroy:function(){this.active&&this.deactivate(),delete this.layer,delete this.targets,OpenLayers.Control.prototype.destroy.call(this)},CLASS_NAME:"OpenLayers.Control.Snapping"}),OpenLayers.Format.OWSCommon.v1_1_0=OpenLayers.Class(OpenLayers.Format.OWSCommon.v1,{namespaces:{ows:"http://www.opengis.net/ows/1.1",xlink:"http://www.w3.org/1999/xlink"},readers:{ows:OpenLayers.Util.applyDefaults({ExceptionReport:function(e,t){t.exceptionReport={version:e.getAttribute("version"),language:e.getAttribute("xml:lang"),exceptions:[]},this.readChildNodes(e,t.exceptionReport)},AllowedValues:function(e,t){t.allowedValues={},this.readChildNodes(e,t.allowedValues)},AnyValue:function(e,t){t.anyValue=!0},DataType:function(e,t){t.dataType=this.getChildValue(e)},Range:function(e,t){t.range={},this.readChildNodes(e,t.range)},MinimumValue:function(e,t){t.minValue=this.getChildValue(e)},MaximumValue:function(e,t){t.maxValue=this.getChildValue(e)},Identifier:function(e,t){t.identifier=this.getChildValue(e)},SupportedCRS:function(e,t){t.supportedCRS=this.getChildValue(e)}},OpenLayers.Format.OWSCommon.v1.prototype.readers.ows)},writers:{ows:OpenLayers.Util.applyDefaults({Range:function(e){var t=this.createElementNSPlus("ows:Range",{attributes:{"ows:rangeClosure":e.closure}});return this.writeNode("ows:MinimumValue",e.minValue,t),this.writeNode("ows:MaximumValue",e.maxValue,t),t},MinimumValue:function(e){return this.createElementNSPlus("ows:MinimumValue",{value:e})},MaximumValue:function(e){return this.createElementNSPlus("ows:MaximumValue",{value:e})},Value:function(e){return this.createElementNSPlus("ows:Value",{value:e})}},OpenLayers.Format.OWSCommon.v1.prototype.writers.ows)},CLASS_NAME:"OpenLayers.Format.OWSCommon.v1_1_0"}),OpenLayers.Format.WCSGetCoverage=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ows:"http://www.opengis.net/ows/1.1",wcs:"http://www.opengis.net/wcs/1.1",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},VERSION:"1.1.2",schemaLocation:"http://www.opengis.net/wcs/1.1 http://schemas.opengis.net/wcs/1.1/wcsGetCoverage.xsd",write:function(e){return e=this.writeNode("wcs:GetCoverage",e),this.setAttributeNS(e,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[e])},writers:{wcs:{GetCoverage:function(e){var t=this.createElementNSPlus("wcs:GetCoverage",{attributes:{version:e.version||this.VERSION,service:"WCS"}});return this.writeNode("ows:Identifier",e.identifier,t),this.writeNode("wcs:DomainSubset",e.domainSubset,t),this.writeNode("wcs:Output",e.output,t),t},DomainSubset:function(e){var t=this.createElementNSPlus("wcs:DomainSubset",{});return this.writeNode("ows:BoundingBox",e.boundingBox,t),e.temporalSubset&&this.writeNode("wcs:TemporalSubset",e.temporalSubset,t),t},TemporalSubset:function(e){for(var t=this.createElementNSPlus("wcs:TemporalSubset",{}),i=0,s=e.timePeriods.length;i<s;++i)this.writeNode("wcs:TimePeriod",e.timePeriods[i],t);return t},TimePeriod:function(e){var t=this.createElementNSPlus("wcs:TimePeriod",{});return this.writeNode("wcs:BeginPosition",e.begin,t),this.writeNode("wcs:EndPosition",e.end,t),e.resolution&&this.writeNode("wcs:TimeResolution",e.resolution,t),t},BeginPosition:function(e){return this.createElementNSPlus("wcs:BeginPosition",{value:e})},EndPosition:function(e){return this.createElementNSPlus("wcs:EndPosition",{value:e})},TimeResolution:function(e){return this.createElementNSPlus("wcs:TimeResolution",{value:e})},Output:function(e){var t=this.createElementNSPlus("wcs:Output",{attributes:{format:e.format,store:e.store}});return e.gridCRS&&this.writeNode("wcs:GridCRS",e.gridCRS,t),t},GridCRS:function(e){var t=this.createElementNSPlus("wcs:GridCRS",{});return this.writeNode("wcs:GridBaseCRS",e.baseCRS,t),e.type&&this.writeNode("wcs:GridType",e.type,t),e.origin&&this.writeNode("wcs:GridOrigin",e.origin,t),this.writeNode("wcs:GridOffsets",e.offsets,t),e.CS&&this.writeNode("wcs:GridCS",e.CS,t),t},GridBaseCRS:function(e){return this.createElementNSPlus("wcs:GridBaseCRS",{value:e})},GridOrigin:function(e){return this.createElementNSPlus("wcs:GridOrigin",{value:e})},GridType:function(e){return this.createElementNSPlus("wcs:GridType",{value:e})},GridOffsets:function(e){return this.createElementNSPlus("wcs:GridOffsets",{value:e})},GridCS:function(e){return this.createElementNSPlus("wcs:GridCS",{value:e})}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.writers.ows},CLASS_NAME:"OpenLayers.Format.WCSGetCoverage"}),OpenLayers.Format.KML=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{kml:"http://www.opengis.net/kml/2.2",gx:"http://www.google.com/kml/ext/2.2"},kmlns:"http://earth.google.com/kml/2.0",placemarksDesc:"No description available",foldersName:"OpenLayers export",foldersDesc:"Exported on "+new Date,extractAttributes:!0,kvpAttributes:!1,extractStyles:!1,extractTracks:!1,trackAttributes:null,internalns:null,features:null,styles:null,styleBaseUrl:"",fetched:null,maxDepth:0,initialize:function(e){this.regExes={trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g,kmlColor:/(\w{2})(\w{2})(\w{2})(\w{2})/,kmlIconPalette:/root:\/\/icons\/palette-(\d+)(\.\w+)/,straightBracket:/\$\[(.*?)\]/g},this.externalProjection=new OpenLayers.Projection("EPSG:4326"),OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},read:function(e){return this.features=[],this.styles={},this.fetched={},this.parseData(e,{depth:0,styleBaseUrl:this.styleBaseUrl})},parseData:function(e,t){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));for(var i=["Link","NetworkLink","Style","StyleMap","Placemark"],s=0,n=i.length;s<n;++s){var r=i[s],a=this.getElementsByTagNameNS(e,"*",r);if(0!=a.length)switch(r.toLowerCase()){case"link":case"networklink":this.parseLinks(a,t);break;case"style":this.extractStyles&&this.parseStyles(a,t);break;case"stylemap":this.extractStyles&&this.parseStyleMaps(a,t);break;case"placemark":this.parseFeatures(a,t)}}return this.features},parseLinks:function(e,t){if(t.depth>=this.maxDepth)return!1;var i=OpenLayers.Util.extend({},t);i.depth++;for(var s=0,n=e.length;s<n;s++){var r=this.parseProperty(e[s],"*","href");r&&!this.fetched[r]&&(this.fetched[r]=!0,(r=this.fetchLink(r))&&this.parseData(r,i))}},fetchLink:function(e){if(e=OpenLayers.Request.GET({url:e,async:!1}))return e.responseText},parseStyles:function(e,t){for(var i=0,s=e.length;i<s;i++){var n=this.parseStyle(e[i]);n&&(this.styles[(t.styleBaseUrl||"")+"#"+n.id]=n)}},parseKmlColor:function(e){var t=null;return t=(e=e&&e.match(this.regExes.kmlColor))?{color:"#"+e[4]+e[3]+e[2],opacity:parseInt(e[1],16)/255}:t},parseStyle:function(e){for(var t,i={},s=["LineStyle","PolyStyle","IconStyle","BalloonStyle","LabelStyle"],n=0,r=s.length;n<r;++n)if(t=this.getElementsByTagNameNS(e,"*",p=s[n])[0])switch(p.toLowerCase()){case"linestyle":p=this.parseProperty(t,"*","color"),(p=this.parseKmlColor(p))&&(i.strokeColor=p.color,i.strokeOpacity=p.opacity),(p=this.parseProperty(t,"*","width"))&&(i.strokeWidth=p);break;case"polystyle":p=this.parseProperty(t,"*","color"),(p=this.parseKmlColor(p))&&(i.fillOpacity=p.opacity,i.fillColor=p.color),"0"==this.parseProperty(t,"*","fill")&&(i.fillColor="none"),"0"==this.parseProperty(t,"*","outline")&&(i.strokeWidth="0");break;case"iconstyle":var a,o,l,h=parseFloat(this.parseProperty(t,"*","scale")||1),p=32*h,u=32*h,c=this.getElementsByTagNameNS(t,"*","Icon")[0];!c||(a=this.parseProperty(c,"*","href"))&&(o=this.parseProperty(c,"*","w"),l=this.parseProperty(c,"*","h"),!OpenLayers.String.startsWith(a,"http://maps.google.com/mapfiles/kml")||o||l||(l=o=64,h/=2),o=o||l,l=l||o,o&&(p=parseInt(o)*h),l&&(u=parseInt(l)*h),(l=a.match(this.regExes.kmlIconPalette))&&(o=l[1],l=l[2],a=this.parseProperty(c,"*","x"),a="http://maps.google.com/mapfiles/kml/pal"+o+"/icon"+(8*((c=this.parseProperty(c,"*","y"))?7-c/32:7)+(a?a/32:0))+l),i.graphicOpacity=1,i.externalGraphic=a),(t=this.getElementsByTagNameNS(t,"*","hotSpot")[0])&&(a=parseFloat(t.getAttribute("x")),c=parseFloat(t.getAttribute("y")),"pixels"==(o=t.getAttribute("xunits"))?i.graphicXOffset=-a*h:"insetPixels"==o?i.graphicXOffset=a*h-p:"fraction"==o&&(i.graphicXOffset=-p*a),"pixels"==(t=t.getAttribute("yunits"))?i.graphicYOffset=c*h-u+1:"insetPixels"==t?i.graphicYOffset=-c*h+1:"fraction"==t&&(i.graphicYOffset=-u*(1-c)+1)),i.graphicWidth=p,i.graphicHeight=u;break;case"balloonstyle":(t=OpenLayers.Util.getXmlNodeValue(t))&&(i.balloonStyle=t.replace(this.regExes.straightBracket,"${$1}"));break;case"labelstyle":p=this.parseProperty(t,"*","color"),(p=this.parseKmlColor(p))&&(i.fontColor=p.color,i.fontOpacity=p.opacity)}return!i.strokeColor&&i.fillColor&&(i.strokeColor=i.fillColor),(e=e.getAttribute("id"))&&i&&(i.id=e),i},parseStyleMaps:function(e,t){for(var i=0,s=e.length;i<s;i++)for(var n=e[i],r=this.getElementsByTagNameNS(n,"*","Pair"),n=n.getAttribute("id"),a=0,o=r.length;a<o;a++){var l=r[a],h=this.parseProperty(l,"*","key");(l=this.parseProperty(l,"*","styleUrl"))&&"normal"==h&&(this.styles[(t.styleBaseUrl||"")+"#"+n]=this.styles[(t.styleBaseUrl||"")+l])}},parseFeatures:function(e,t){for(var i=[],s=0,n=e.length;s<n;s++){var r,a=e[s],o=this.parseFeature.apply(this,[a]);if(!o)throw"Bad Placemark: "+s;this.extractStyles&&o.attributes&&o.attributes.styleUrl&&(o.style=this.getStyle(o.attributes.styleUrl,t)),this.extractStyles&&(r=(r=this.getElementsByTagNameNS(a,"*","Style")[0])&&this.parseStyle(r))&&(o.style=OpenLayers.Util.extend(o.style,r)),this.extractTracks?(a=this.getElementsByTagNameNS(a,this.namespaces.gx,"Track"))&&0<a.length&&(this.readNode(a[0],o={features:[],feature:o}),0<o.features.length&&i.push.apply(i,o.features)):i.push(o)}this.features=this.features.concat(i)},readers:{kml:{when:function(e,t){t.whens.push(OpenLayers.Date.parse(this.getChildValue(e)))},_trackPointAttribute:function(e,t){var i=e.nodeName.split(":").pop();t.attributes[i].push(this.getChildValue(e))}},gx:{Track:function(e,t){var i,s={whens:[],points:[],angles:[]};if(this.trackAttributes){s.attributes={};for(var n=0,r=this.trackAttributes.length;n<r;++n)i=this.trackAttributes[n],s.attributes[i]=[],i in this.readers.kml||(this.readers.kml[i]=this.readers.kml._trackPointAttribute)}if(this.readChildNodes(e,s),s.whens.length!==s.points.length)throw Error("gx:Track with unequal number of when ("+s.whens.length+") and gx:coord ("+s.points.length+") elements.");var a=0<s.angles.length;if(a&&s.whens.length!==s.angles.length)throw Error("gx:Track with unequal number of when ("+s.whens.length+") and gx:angles ("+s.angles.length+") elements.");for(var o,n=0,r=s.whens.length;n<r;++n){if((o=t.feature.clone()).fid=t.feature.fid||t.feature.id,i=s.points[n],"z"in(o.geometry=i)&&(o.attributes.altitude=i.z),this.internalProjection&&this.externalProjection&&o.geometry.transform(this.externalProjection,this.internalProjection),this.trackAttributes)for(var l=0,h=this.trackAttributes.length;l<h;++l)i=this.trackAttributes[l],o.attributes[i]=s.attributes[i][n];o.attributes.when=s.whens[n],o.attributes.trackId=t.feature.id,a&&(i=s.angles[n],o.attributes.heading=parseFloat(i[0]),o.attributes.tilt=parseFloat(i[1]),o.attributes.roll=parseFloat(i[2])),t.features.push(o)}},coord:function(e,t){var e=this.getChildValue(e).replace(this.regExes.trimSpace,"").split(/\s+/),i=new OpenLayers.Geometry.Point(e[0],e[1]);2<e.length&&(i.z=parseFloat(e[2])),t.points.push(i)},angles:function(e,t){e=this.getChildValue(e).replace(this.regExes.trimSpace,"").split(/\s+/);t.angles.push(e)}}},parseFeature:function(e){for(var t,i,s,n,r=["MultiGeometry","Polygon","LineString","Point"],a=0,o=r.length;a<o;++a)if(t=r[a],this.internalns=e.namespaceURI||this.kmlns,0<(i=this.getElementsByTagNameNS(e,this.internalns,t)).length){if(!(r=this.parseGeometry[t.toLowerCase()]))throw new TypeError("Unsupported geometry type: "+t);s=r.apply(this,[i[0]]),this.internalProjection&&this.externalProjection&&s.transform(this.externalProjection,this.internalProjection);break}return this.extractAttributes&&(n=this.parseAttributes(e)),t=new OpenLayers.Feature.Vector(s,n),null!=(e=e.getAttribute("id")||e.getAttribute("name"))&&(t.fid=e),t},getStyle:function(e,t){var i=OpenLayers.Util.removeTail(e),t=OpenLayers.Util.extend({},t);return t.depth++,t.styleBaseUrl=i,!this.styles[e]&&!OpenLayers.String.startsWith(e,"#")&&t.depth<=this.maxDepth&&!this.fetched[i]&&(i=this.fetchLink(i))&&this.parseData(i,t),OpenLayers.Util.extend({},this.styles[e])},parseGeometry:{point:function(e){var t,i=this.getElementsByTagNameNS(e,this.internalns,"coordinates");if(e=[],0<i.length&&(e=(t=(t=i[0].firstChild.nodeValue).replace(this.regExes.removeSpace,"")).split(",")),i=null,1<e.length)return 2==e.length&&(e[2]=null),i=new OpenLayers.Geometry.Point(e[0],e[1],e[2]);throw"Bad coordinate string: "+t},linestring:function(e,t){var i=null;if(0<(e=this.getElementsByTagNameNS(e,this.internalns,"coordinates")).length){for(var s,n=(i=(e=(e=(e=this.getChildValue(e[0])).replace(this.regExes.trimSpace,"")).replace(this.regExes.trimComma,",")).split(this.regExes.splitSpace)).length,r=Array(n),a=0;a<n;++a){if(!(1<(s=i[a].split(",")).length))throw"Bad LineString point coordinates: "+i[a];2==s.length&&(s[2]=null),r[a]=new OpenLayers.Geometry.Point(s[0],s[1],s[2])}if(!n)throw"Bad LineString coordinates: "+e;i=new(t?OpenLayers.Geometry.LinearRing:OpenLayers.Geometry.LineString)(r)}return i},polygon:function(e){var t=(e=this.getElementsByTagNameNS(e,this.internalns,"LinearRing")).length,i=Array(t);if(0<t)for(var s=0,n=e.length;s<n;++s){if(!(t=this.parseGeometry.linestring.apply(this,[e[s],!0])))throw"Bad LinearRing geometry: "+s;i[s]=t}return new OpenLayers.Geometry.Polygon(i)},multigeometry:function(e){for(var t,i=[],s=e.childNodes,n=0,r=s.length;n<r;++n)1==(e=s[n]).nodeType&&(t=e.prefix?e.nodeName.split(":")[1]:e.nodeName,(t=this.parseGeometry[t.toLowerCase()])&&i.push(t.apply(this,[e])));return new OpenLayers.Geometry.Collection(i)}},parseAttributes:function(e){var t,i,s,n={};(r=e.getElementsByTagName("ExtendedData")).length&&(n=this.parseExtendedData(r[0]));for(var r=0,a=(e=e.childNodes).length;r<a;++r)if(1==(t=e[r]).nodeType&&(1<=(i=t.childNodes).length&&i.length<=3)){switch(i.length){case 1:s=i[0];break;case 2:s=i[0],i=i[1],s=3==s.nodeType||4==s.nodeType?s:i;break;default:s=i[1]}3!=s.nodeType&&4!=s.nodeType||(t=t.prefix?t.nodeName.split(":")[1]:t.nodeName,(s=OpenLayers.Util.getXmlNodeValue(s))&&(s=s.replace(this.regExes.trimSpace,""),n[t]=s))}return n},parseExtendedData:function(e){for(var t={},i=e.getElementsByTagName("Data"),s=0,n=i.length;s<n;s++){var r,a=(r=i[s]).getAttribute("name"),o={},l=r.getElementsByTagName("value");l.length&&(o.value=this.getChildValue(l[0])),this.kvpAttributes?t[a]=o.value:((r=r.getElementsByTagName("displayName")).length&&(o.displayName=this.getChildValue(r[0])),t[a]=o)}for(s=0,n=(e=e.getElementsByTagName("SimpleData")).length;s<n;s++)o={},a=(r=e[s]).getAttribute("name"),o.value=this.getChildValue(r),this.kvpAttributes?t[a]=o.value:t[o.displayName=a]=o;return t},parseProperty:function(e,t,i){var s;e=this.getElementsByTagNameNS(e,t,i);try{s=OpenLayers.Util.getXmlNodeValue(e[0])}catch(e){s=null}return s},write:function(e){OpenLayers.Util.isArray(e)||(e=[e]);for(var t=this.createElementNS(this.kmlns,"kml"),i=this.createFolderXML(),s=0,n=e.length;s<n;++s)i.appendChild(this.createPlacemarkXML(e[s]));return t.appendChild(i),OpenLayers.Format.XML.prototype.write.apply(this,[t])},createFolderXML:function(){var e,t,i=this.createElementNS(this.kmlns,"Folder");return this.foldersName&&(e=this.createElementNS(this.kmlns,"name"),t=this.createTextNode(this.foldersName),e.appendChild(t),i.appendChild(e)),this.foldersDesc&&(e=this.createElementNS(this.kmlns,"description"),t=this.createTextNode(this.foldersDesc),e.appendChild(t),i.appendChild(e)),i},createPlacemarkXML:function(e){var t=this.createElementNS(this.kmlns,"name"),i=e.style&&e.style.label?e.style.label:e.id,s=(t.appendChild(this.createTextNode(e.attributes.name||i)),this.createElementNS(this.kmlns,"description"));return s.appendChild(this.createTextNode(e.attributes.description||this.placemarksDesc)),i=this.createElementNS(this.kmlns,"Placemark"),null!=e.fid&&i.setAttribute("id",e.fid),i.appendChild(t),i.appendChild(s),t=this.buildGeometryNode(e.geometry),i.appendChild(t),e.attributes&&(e=this.buildExtendedData(e.attributes))&&i.appendChild(e),i},buildGeometryNode:function(e){var t=(t=e.CLASS_NAME).substring(t.lastIndexOf(".")+1),i=null;return i=(t=this.buildGeometry[t.toLowerCase()])?t.apply(this,[e]):i},buildGeometry:{point:function(e){var t=this.createElementNS(this.kmlns,"Point");return t.appendChild(this.buildCoordinatesNode(e)),t},multipoint:function(e){return this.buildGeometry.collection.apply(this,[e])},linestring:function(e){var t=this.createElementNS(this.kmlns,"LineString");return t.appendChild(this.buildCoordinatesNode(e)),t},multilinestring:function(e){return this.buildGeometry.collection.apply(this,[e])},linearring:function(e){var t=this.createElementNS(this.kmlns,"LinearRing");return t.appendChild(this.buildCoordinatesNode(e)),t},polygon:function(e){for(var t,i,s=this.createElementNS(this.kmlns,"Polygon"),n=0,r=(e=e.components).length;n<r;++n)t=this.createElementNS(this.kmlns,t=0==n?"outerBoundaryIs":"innerBoundaryIs"),i=this.buildGeometry.linearring.apply(this,[e[n]]),t.appendChild(i),s.appendChild(t);return s},multipolygon:function(e){return this.buildGeometry.collection.apply(this,[e])},collection:function(e){for(var t,i=this.createElementNS(this.kmlns,"MultiGeometry"),s=0,n=e.components.length;s<n;++s)(t=this.buildGeometryNode.apply(this,[e.components[s]]))&&i.appendChild(t);return i}},buildCoordinatesNode:function(e){var t,i=this.createElementNS(this.kmlns,"coordinates");if(t=e.components){for(var s=t.length,n=Array(s),r=0;r<s;++r)e=t[r],n[r]=this.buildCoordinates(e);t=n.join(" ")}else t=this.buildCoordinates(e);return t=this.createTextNode(t),i.appendChild(t),i},buildCoordinates:function(e){return this.internalProjection&&this.externalProjection&&(e=e.clone()).transform(this.internalProjection,this.externalProjection),e.x+","+e.y},buildExtendedData:function(e){var t,i,s,n,r=this.createElementNS(this.kmlns,"ExtendedData");for(t in e)e[t]&&"name"!=t&&"description"!=t&&"styleUrl"!=t&&((i=this.createElementNS(this.kmlns,"Data")).setAttribute("name",t),s=this.createElementNS(this.kmlns,"value"),"object"==_typeof(e[t])?(e[t].value&&s.appendChild(this.createTextNode(e[t].value)),e[t].displayName&&((n=this.createElementNS(this.kmlns,"displayName")).appendChild(this.getXMLDoc().createCDATASection(e[t].displayName)),i.appendChild(n))):s.appendChild(this.createTextNode(e[t])),i.appendChild(s),r.appendChild(i));return this.isSimpleContent(r)?null:r},CLASS_NAME:"OpenLayers.Format.KML"}),OpenLayers.Format.WMSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.1.1",profile:null,CLASS_NAME:"OpenLayers.Format.WMSCapabilities"}),OpenLayers.Format.WMSCapabilities.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{wms:"http://www.opengis.net/wms",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},defaultPrefix:"wms",read:function(e){var t=e="string"==typeof e?OpenLayers.Format.XML.prototype.read.apply(this,[e]):e,i=(e&&9==e.nodeType&&(e=e.documentElement),{});return this.readNode(e,i),void 0===i.service&&(e=new OpenLayers.Format.OGCExceptionReport,i.error=e.read(t)),i},readers:{wms:{Service:function(e,t){t.service={},this.readChildNodes(e,t.service)},Name:function(e,t){t.name=this.getChildValue(e)},Title:function(e,t){t.title=this.getChildValue(e)},Abstract:function(e,t){t.abstract=this.getChildValue(e)},BoundingBox:function(e,t){var i={},e=(i.bbox=[parseFloat(e.getAttribute("minx")),parseFloat(e.getAttribute("miny")),parseFloat(e.getAttribute("maxx")),parseFloat(e.getAttribute("maxy"))],{x:parseFloat(e.getAttribute("resx")),y:parseFloat(e.getAttribute("resy"))});return isNaN(e.x)&&isNaN(e.y)||(i.res=e),i},OnlineResource:function(e,t){t.href=this.getAttributeNS(e,this.namespaces.xlink,"href")},ContactInformation:function(e,t){t.contactInformation={},this.readChildNodes(e,t.contactInformation)},ContactPersonPrimary:function(e,t){t.personPrimary={},this.readChildNodes(e,t.personPrimary)},ContactPerson:function(e,t){t.person=this.getChildValue(e)},ContactOrganization:function(e,t){t.organization=this.getChildValue(e)},ContactPosition:function(e,t){t.position=this.getChildValue(e)},ContactAddress:function(e,t){t.contactAddress={},this.readChildNodes(e,t.contactAddress)},AddressType:function(e,t){t.type=this.getChildValue(e)},Address:function(e,t){t.address=this.getChildValue(e)},City:function(e,t){t.city=this.getChildValue(e)},StateOrProvince:function(e,t){t.stateOrProvince=this.getChildValue(e)},PostCode:function(e,t){t.postcode=this.getChildValue(e)},Country:function(e,t){t.country=this.getChildValue(e)},ContactVoiceTelephone:function(e,t){t.phone=this.getChildValue(e)},ContactFacsimileTelephone:function(e,t){t.fax=this.getChildValue(e)},ContactElectronicMailAddress:function(e,t){t.email=this.getChildValue(e)},Fees:function(e,t){e=this.getChildValue(e);e&&"none"!=e.toLowerCase()&&(t.fees=e)},AccessConstraints:function(e,t){e=this.getChildValue(e);e&&"none"!=e.toLowerCase()&&(t.accessConstraints=e)},Capability:function(e,t){t.capability={nestedLayers:[],layers:[]},this.readChildNodes(e,t.capability)},Request:function(e,t){t.request={},this.readChildNodes(e,t.request)},GetCapabilities:function(e,t){t.getcapabilities={formats:[]},this.readChildNodes(e,t.getcapabilities)},Format:function(e,t){OpenLayers.Util.isArray(t.formats)?t.formats.push(this.getChildValue(e)):t.format=this.getChildValue(e)},DCPType:function(e,t){this.readChildNodes(e,t)},HTTP:function(e,t){this.readChildNodes(e,t)},Get:function(e,t){t.get={},this.readChildNodes(e,t.get),t.href||(t.href=t.get.href)},Post:function(e,t){t.post={},this.readChildNodes(e,t.post),t.href||(t.href=t.get.href)},GetMap:function(e,t){t.getmap={formats:[]},this.readChildNodes(e,t.getmap)},GetFeatureInfo:function(e,t){t.getfeatureinfo={formats:[]},this.readChildNodes(e,t.getfeatureinfo)},Exception:function(e,t){t.exception={formats:[]},this.readChildNodes(e,t.exception)},Layer:function(e,t){var i;t.capability?(i=t.capability,u=t):i=t;var s=(r=e.getAttributeNode("queryable"))&&r.specified?e.getAttribute("queryable"):null,n=(r=e.getAttributeNode("cascaded"))&&r.specified?e.getAttribute("cascaded"):null,r=(r=e.getAttributeNode("opaque"))&&r.specified?e.getAttribute("opaque"):null,a=e.getAttribute("noSubsets"),o=e.getAttribute("fixedWidth"),l=e.getAttribute("fixedHeight"),h=u||{},p=OpenLayers.Util.extend,u={nestedLayers:[],styles:u?[].concat(u.styles):[],srs:u?p({},h.srs):{},metadataURLs:[],bbox:u?p({},h.bbox):{},llbbox:h.llbbox,dimensions:u?p({},h.dimensions):{},authorityURLs:u?p({},h.authorityURLs):{},identifiers:{},keywords:[],queryable:s&&""!==s?"1"===s||"true"===s:h.queryable||!1,cascaded:null!==n?parseInt(n):h.cascaded||0,opaque:r?"1"===r||"true"===r:h.opaque||!1,noSubsets:null!==a?"1"===a||"true"===a:h.noSubsets||!1,fixedWidth:null!=o?parseInt(o):h.fixedWidth||0,fixedHeight:null!=l?parseInt(l):h.fixedHeight||0,minScale:h.minScale,maxScale:h.maxScale,attribution:h.attribution};t.nestedLayers.push(u),u.capability=i,this.readChildNodes(e,u),delete u.capability,u.name&&(s=u.name.split(":"),r=(n=i.request).getfeatureinfo,0<s.length&&(u.prefix=s[0]),i.layers.push(u),void 0===u.formats&&(u.formats=n.getmap.formats),void 0===u.infoFormats&&r&&(u.infoFormats=r.formats))},Attribution:function(e,t){t.attribution={},this.readChildNodes(e,t.attribution)},LogoURL:function(e,t){t.logo={width:e.getAttribute("width"),height:e.getAttribute("height")},this.readChildNodes(e,t.logo)},Style:function(e,t){var i={};t.styles.push(i),this.readChildNodes(e,i)},LegendURL:function(e,t){var i={width:e.getAttribute("width"),height:e.getAttribute("height")};t.legend=i,this.readChildNodes(e,i)},MetadataURL:function(e,t){var i={type:e.getAttribute("type")};t.metadataURLs.push(i),this.readChildNodes(e,i)},DataURL:function(e,t){t.dataURL={},this.readChildNodes(e,t.dataURL)},FeatureListURL:function(e,t){t.featureListURL={},this.readChildNodes(e,t.featureListURL)},AuthorityURL:function(e,t){var i=e.getAttribute("name"),s={};this.readChildNodes(e,s),t.authorityURLs[i]=s.href},Identifier:function(e,t){var i=e.getAttribute("authority");t.identifiers[i]=this.getChildValue(e)},KeywordList:function(e,t){this.readChildNodes(e,t)},SRS:function(e,t){t.srs[this.getChildValue(e)]=!0}}},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1"}),OpenLayers.Format.WMSCapabilities.v1_1=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1,{readers:{wms:OpenLayers.Util.applyDefaults({WMT_MS_Capabilities:function(e,t){this.readChildNodes(e,t)},Keyword:function(e,t){t.keywords&&t.keywords.push(this.getChildValue(e))},DescribeLayer:function(e,t){t.describelayer={formats:[]},this.readChildNodes(e,t.describelayer)},GetLegendGraphic:function(e,t){t.getlegendgraphic={formats:[]},this.readChildNodes(e,t.getlegendgraphic)},GetStyles:function(e,t){t.getstyles={formats:[]},this.readChildNodes(e,t.getstyles)},PutStyles:function(e,t){t.putstyles={formats:[]},this.readChildNodes(e,t.putstyles)},UserDefinedSymbolization:function(e,t){e={supportSLD:1==parseInt(e.getAttribute("SupportSLD")),userLayer:1==parseInt(e.getAttribute("UserLayer")),userStyle:1==parseInt(e.getAttribute("UserStyle")),remoteWFS:1==parseInt(e.getAttribute("RemoteWFS"))};t.userSymbols=e},LatLonBoundingBox:function(e,t){t.llbbox=[parseFloat(e.getAttribute("minx")),parseFloat(e.getAttribute("miny")),parseFloat(e.getAttribute("maxx")),parseFloat(e.getAttribute("maxy"))]},BoundingBox:function(e,t){var i=OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms.BoundingBox.apply(this,[e,t]);i.srs=e.getAttribute("SRS"),t.bbox[i.srs]=i},ScaleHint:function(e,t){var i=e.getAttribute("min"),e=e.getAttribute("max"),s=Math.pow(2,.5),n=OpenLayers.INCHES_PER_UNIT.m;0!=i&&(t.maxScale=parseFloat((i/s*n*OpenLayers.DOTS_PER_INCH).toPrecision(13))),e!=Number.POSITIVE_INFINITY&&(t.minScale=parseFloat((e/s*n*OpenLayers.DOTS_PER_INCH).toPrecision(13)))},Dimension:function(e,t){e={name:e.getAttribute("name").toLowerCase(),units:e.getAttribute("units"),unitsymbol:e.getAttribute("unitSymbol")};t.dimensions[e.name]=e},Extent:function(e,t){var i=e.getAttribute("name").toLowerCase();i in t.dimensions&&((i=t.dimensions[i]).nearestVal="1"===e.getAttribute("nearestValue"),i.multipleVal="1"===e.getAttribute("multipleValues"),i.current="1"===e.getAttribute("current"),i.default=e.getAttribute("default")||"",t=this.getChildValue(e),i.values=t.split(","))}},OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms)},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_1"}),OpenLayers.Format.WMSCapabilities.v1_1_0=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_1,{version:"1.1.0",readers:{wms:OpenLayers.Util.applyDefaults({SRS:function(e,t){for(var i=this.getChildValue(e).split(/ +/),s=0,n=i.length;s<n;s++)t.srs[i[s]]=!0}},OpenLayers.Format.WMSCapabilities.v1_1.prototype.readers.wms)},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_1_0"}),OpenLayers.Protocol.WFS.v1=OpenLayers.Class(OpenLayers.Protocol,{version:null,srsName:"EPSG:4326",featureType:null,featureNS:null,geometryName:"the_geom",schema:null,featurePrefix:"feature",formatOptions:null,readFormat:null,readOptions:null,initialize:function(e){OpenLayers.Protocol.prototype.initialize.apply(this,[e]),e.format||(this.format=OpenLayers.Format.WFST(OpenLayers.Util.extend({version:this.version,featureType:this.featureType,featureNS:this.featureNS,featurePrefix:this.featurePrefix,geometryName:this.geometryName,srsName:this.srsName,schema:this.schema},this.formatOptions))),!e.geometryName&&1<parseFloat(this.format.version)&&this.setGeometryName(null)},destroy:function(){this.options&&!this.options.format&&this.format.destroy(),this.format=null,OpenLayers.Protocol.prototype.destroy.apply(this)},read:function(e){OpenLayers.Protocol.prototype.read.apply(this,arguments),e=OpenLayers.Util.extend({},e),OpenLayers.Util.applyDefaults(e,this.options||{});var t=new OpenLayers.Protocol.Response({requestType:"read"}),i=OpenLayers.Format.XML.prototype.write.apply(this.format,[this.format.writeNode("wfs:GetFeature",e)]);return t.priv=OpenLayers.Request.POST({url:e.url,callback:this.createCallback(this.handleRead,t,e),params:e.params,headers:e.headers,data:i}),t},setFeatureType:function(e){this.featureType=e,this.format.featureType=e},setGeometryName:function(e){this.geometryName=e,this.format.geometryName=e},handleRead:function(e,t){var i;t=OpenLayers.Util.extend({},t),OpenLayers.Util.applyDefaults(t,this.options),t.callback&&(200<=(i=e.priv).status&&i.status<300?(i=this.parseResponse(i,t.readOptions))&&!1!==i.success?(t.readOptions&&"object"==t.readOptions.output?OpenLayers.Util.extend(e,i):e.features=i,e.code=OpenLayers.Protocol.Response.SUCCESS):(e.code=OpenLayers.Protocol.Response.FAILURE,e.error=i):e.code=OpenLayers.Protocol.Response.FAILURE,t.callback.call(t.scope,e))},parseResponse:function(e,t){var i=e.responseXML;return!(i=i&&i.documentElement?i:e.responseText)||i.length<=0?null:(i=null!==this.readFormat?this.readFormat.read(i):this.format.read(i,t),this.featureNS||(e=this.readFormat||this.format,this.featureNS=e.featureNS,e.autoConfig=!1,this.geometryName||this.setGeometryName(e.geometryName)),i)},commit:function(e,t){t=OpenLayers.Util.extend({},t),OpenLayers.Util.applyDefaults(t,this.options);var i=new OpenLayers.Protocol.Response({requestType:"commit",reqFeatures:e});return i.priv=OpenLayers.Request.POST({url:t.url,headers:t.headers,data:this.format.write(e,t),callback:this.createCallback(this.handleCommit,i,t)}),i},handleCommit:function(e,t){var i,s;t.callback&&((s=(i=e.priv).responseXML)&&s.documentElement||(s=i.responseText),i=this.format.read(s)||{},e.insertIds=i.insertIds||[],i.success?e.code=OpenLayers.Protocol.Response.SUCCESS:(e.code=OpenLayers.Protocol.Response.FAILURE,e.error=i),t.callback.call(t.scope,e))},filterDelete:function(e,t){t=OpenLayers.Util.extend({},t),OpenLayers.Util.applyDefaults(t,this.options),new OpenLayers.Protocol.Response({requestType:"commit"});var i=this.format.createElementNSPlus("wfs:Transaction",{attributes:{service:"WFS",version:this.version}}),s=this.format.createElementNSPlus("wfs:Delete",{attributes:{typeName:(t.featureNS?this.featurePrefix+":":"")+t.featureType}}),e=(t.featureNS&&s.setAttribute("xmlns:"+this.featurePrefix,t.featureNS),this.format.writeNode("ogc:Filter",e));return s.appendChild(e),i.appendChild(s),i=OpenLayers.Format.XML.prototype.write.apply(this.format,[i]),OpenLayers.Request.POST({url:this.url,callback:t.callback||function(){},data:i})},abort:function(e){e&&e.priv.abort()},CLASS_NAME:"OpenLayers.Protocol.WFS.v1"}),OpenLayers.Handler.Feature=OpenLayers.Class(OpenLayers.Handler,{EVENTMAP:{click:{in:"click",out:"clickout"},mousemove:{in:"over",out:"out"},dblclick:{in:"dblclick",out:null},mousedown:{in:null,out:null},mouseup:{in:null,out:null},touchstart:{in:"click",out:"clickout"}},feature:null,lastFeature:null,down:null,up:null,clickTolerance:4,geometryTypes:null,stopClick:!0,stopDown:!0,stopUp:!1,initialize:function(e,t,i,s){OpenLayers.Handler.prototype.initialize.apply(this,[e,i,s]),this.layer=t},touchstart:function(e){return this.startTouch(),!!OpenLayers.Event.isMultiTouch(e)||this.mousedown(e)},touchmove:function(e){OpenLayers.Event.preventDefault(e)},mousedown:function(e){return(OpenLayers.Event.isLeftClick(e)||OpenLayers.Event.isSingleTouch(e))&&(this.down=e.xy),!this.handle(e)||!this.stopDown},mouseup:function(e){return this.up=e.xy,!this.handle(e)||!this.stopUp},click:function(e){return!this.handle(e)||!this.stopClick},mousemove:function(e){return(this.callbacks.over||this.callbacks.out)&&this.handle(e),!0},dblclick:function(e){return!this.handle(e)},geometryTypeMatches:function(e){return null==this.geometryTypes||-1<OpenLayers.Util.indexOf(this.geometryTypes,e.geometry.CLASS_NAME)},handle:function(e){this.feature&&!this.feature.layer&&(this.feature=null);var t=e.type,i=!1,s=!!this.feature,n="click"==t||"dblclick"==t||"touchstart"==t;return(this.feature=this.layer.getFeatureFromEvent(e))&&!this.feature.layer&&(this.feature=null),this.lastFeature&&!this.lastFeature.layer&&(this.lastFeature=null),this.feature?("touchstart"===t&&OpenLayers.Event.preventDefault(e),e=this.feature!=this.lastFeature,this.geometryTypeMatches(this.feature)?(s&&e?(this.lastFeature&&this.triggerCallback(t,"out",[this.lastFeature]),this.triggerCallback(t,"in",[this.feature])):s&&!n||this.triggerCallback(t,"in",[this.feature]),this.lastFeature=this.feature,i=!0):(this.lastFeature&&(s&&e||n)&&this.triggerCallback(t,"out",[this.lastFeature]),this.feature=null)):this.lastFeature&&(s||n)&&this.triggerCallback(t,"out",[this.lastFeature]),i},triggerCallback:function(e,t,i){(t=this.EVENTMAP[e][t])&&("click"==e&&this.up&&this.down?(Math.sqrt(Math.pow(this.up.x-this.down.x,2)+Math.pow(this.up.y-this.down.y,2))<=this.clickTolerance&&this.callback(t,i),this.up=this.down=null):this.callback(t,i))},activate:function(){var e=!1;return OpenLayers.Handler.prototype.activate.apply(this,arguments)&&(this.moveLayerToTop(),this.map.events.on({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),e=!0),e},deactivate:function(){var e=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.moveLayerBack(),this.up=this.down=this.lastFeature=this.feature=null,this.map.events.un({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),e=!0),e},handleMapEvents:function(e){"removelayer"!=e.type&&"order"!=e.property||this.moveLayerToTop()},moveLayerToTop:function(){var e=Math.max(this.map.Z_INDEX_BASE.Feature-1,this.layer.getZIndex())+1;this.layer.setZIndex(e)},moveLayerBack:function(){var e=this.layer.getZIndex()-1;e>=this.map.Z_INDEX_BASE.Feature?this.layer.setZIndex(e):this.map.setLayerZIndex(this.layer,this.map.getLayerIndex(this.layer))},CLASS_NAME:"OpenLayers.Handler.Feature"}),OpenLayers.Layer.Vector.RootContainer=OpenLayers.Class(OpenLayers.Layer.Vector,{displayInLayerSwitcher:!1,layers:null,display:function(){},getFeatureFromEvent:function(e){for(var t,i=this.layers,s=0;s<i.length;s++)if(t=i[s].getFeatureFromEvent(e))return t},setMap:function(e){OpenLayers.Layer.Vector.prototype.setMap.apply(this,arguments),this.collectRoots(),e.events.register("changelayer",this,this.handleChangeLayer)},removeMap:function(e){e.events.unregister("changelayer",this,this.handleChangeLayer),this.resetRoots(),OpenLayers.Layer.Vector.prototype.removeMap.apply(this,arguments)},collectRoots:function(){for(var e,t=0;t<this.map.layers.length;++t)e=this.map.layers[t],-1!=OpenLayers.Util.indexOf(this.layers,e)&&e.renderer.moveRoot(this.renderer)},resetRoots:function(){for(var e,t=0;t<this.layers.length;++t)e=this.layers[t],this.renderer&&e.renderer.getRenderLayerId()==this.id&&this.renderer.moveRoot(e.renderer)},handleChangeLayer:function(e){var t=e.layer;"order"==e.property&&-1!=OpenLayers.Util.indexOf(this.layers,t)&&(this.resetRoots(),this.collectRoots())},CLASS_NAME:"OpenLayers.Layer.Vector.RootContainer"}),OpenLayers.Control.SelectFeature=OpenLayers.Class(OpenLayers.Control,{multipleKey:null,toggleKey:null,multiple:!1,clickout:!0,toggle:!1,hover:!1,highlightOnly:!1,box:!1,onBeforeSelect:function(){},onSelect:function(){},onUnselect:function(){},scope:null,geometryTypes:null,layer:null,layers:null,callbacks:null,selectStyle:null,renderIntent:"select",handlers:null,initialize:function(e,t){OpenLayers.Control.prototype.initialize.apply(this,[t]),null===this.scope&&(this.scope=this),this.initLayer(e);t={click:this.clickFeature,clickout:this.clickoutFeature};this.hover&&(t.over=this.overFeature,t.out=this.outFeature),this.callbacks=OpenLayers.Util.extend(t,this.callbacks),this.handlers={feature:new OpenLayers.Handler.Feature(this,this.layer,this.callbacks,{geometryTypes:this.geometryTypes})},this.box&&(this.handlers.box=new OpenLayers.Handler.Box(this,{done:this.selectBox},{boxDivClassName:"olHandlerBoxSelectFeature"}))},initLayer:function(e){OpenLayers.Util.isArray(e)?(this.layers=e,this.layer=new OpenLayers.Layer.Vector.RootContainer(this.id+"_container",{layers:e})):this.layer=e},destroy:function(){this.active&&this.layers&&this.map.removeLayer(this.layer),OpenLayers.Control.prototype.destroy.apply(this,arguments),this.layers&&this.layer.destroy()},activate:function(){return this.active||(this.layers&&this.map.addLayer(this.layer),this.handlers.feature.activate(),this.box&&this.handlers.box&&this.handlers.box.activate()),OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){return this.active&&(this.handlers.feature.deactivate(),this.handlers.box&&this.handlers.box.deactivate(),this.layers&&this.map.removeLayer(this.layer)),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},unselectAll:function(e){for(var t,i,s,n=this.layers||[this.layer],r=0;r<n.length;++r)if(s=0,null!=(t=n[r]).selectedFeatures)for(;t.selectedFeatures.length>s;)i=t.selectedFeatures[s],e&&e.except==i?++s:this.unselect(i)},clickFeature:function(e){this.hover||(-1<OpenLayers.Util.indexOf(e.layer.selectedFeatures,e)?this.toggleSelect()?this.unselect(e):this.multipleSelect()||this.unselectAll({except:e}):(this.multipleSelect()||this.unselectAll({except:e}),this.select(e)))},multipleSelect:function(){return this.multiple||this.handlers.feature.evt&&this.handlers.feature.evt[this.multipleKey]},toggleSelect:function(){return this.toggle||this.handlers.feature.evt&&this.handlers.feature.evt[this.toggleKey]},clickoutFeature:function(e){!this.hover&&this.clickout&&this.unselectAll()},overFeature:function(e){var t=e.layer;this.hover&&(this.highlightOnly?this.highlight(e):-1==OpenLayers.Util.indexOf(t.selectedFeatures,e)&&this.select(e))},outFeature:function(e){var t;this.hover&&(this.highlightOnly?e._lastHighlighter==this.id&&(e._prevHighlighter&&e._prevHighlighter!=this.id?(delete e._lastHighlighter,(t=this.map.getControl(e._prevHighlighter))&&t.highlight(e)):this.unhighlight(e)):this.unselect(e))},highlight:function(e){var t=e.layer;!1!==this.events.triggerEvent("beforefeaturehighlighted",{feature:e})&&(e._prevHighlighter=e._lastHighlighter,e._lastHighlighter=this.id,t.drawFeature(e,this.selectStyle||this.renderIntent),this.events.triggerEvent("featurehighlighted",{feature:e}))},unhighlight:function(e){var t=e.layer;null==e._prevHighlighter?delete e._lastHighlighter:(e._prevHighlighter!=this.id&&(e._lastHighlighter=e._prevHighlighter),delete e._prevHighlighter),t.drawFeature(e,e.style||e.layer.style||"default"),this.events.triggerEvent("featureunhighlighted",{feature:e})},select:function(e){var t=this.onBeforeSelect.call(this.scope,e),i=e.layer;!1===t||!1!==i.events.triggerEvent("beforefeatureselected",{feature:e})&&(i.selectedFeatures.push(e),this.highlight(e),this.handlers.feature.lastFeature||(this.handlers.feature.lastFeature=i.selectedFeatures[0]),i.events.triggerEvent("featureselected",{feature:e}),this.onSelect.call(this.scope,e))},unselect:function(e){var t=e.layer;this.unhighlight(e),OpenLayers.Util.removeItem(t.selectedFeatures,e),t.events.triggerEvent("featureunselected",{feature:e}),this.onUnselect.call(this.scope,e)},selectBox:function(e){if(e instanceof OpenLayers.Bounds){var t=this.map.getLonLatFromPixel({x:e.left,y:e.bottom}),i=(e=this.map.getLonLatFromPixel({x:e.right,y:e.top}),t=new OpenLayers.Bounds(t.lon,t.lat,e.lon,e.lat),this.multipleSelect()||this.unselectAll(),e=this.multiple,this.multiple=!0,this.layers||[this.layer]);this.events.triggerEvent("boxselectionstart",{layers:i});for(var s=0;s<i.length;++s)for(var n,r=0,a=(n=i[s]).features.length;r<a;++r){var o=n.features[r];o.getVisibility()&&(null==this.geometryTypes||-1<OpenLayers.Util.indexOf(this.geometryTypes,o.geometry.CLASS_NAME))&&t.toGeometry().intersects(o.geometry)&&-1==OpenLayers.Util.indexOf(n.selectedFeatures,o)&&this.select(o)}this.multiple=e,this.events.triggerEvent("boxselectionend",{layers:i})}},setMap:function(e){this.handlers.feature.setMap(e),this.box&&this.handlers.box.setMap(e),OpenLayers.Control.prototype.setMap.apply(this,arguments)},setLayer:function(e){var t=this.active;this.unselectAll(),this.deactivate(),this.layers&&(this.layer.destroy(),this.layers=null),this.initLayer(e),this.handlers.feature.layer=this.layer,t&&this.activate()},CLASS_NAME:"OpenLayers.Control.SelectFeature"}),OpenLayers.Handler.Point=OpenLayers.Class(OpenLayers.Handler,{point:null,layer:null,multi:!1,citeCompliant:!1,mouseDown:!1,stoppedDown:null,lastDown:null,lastUp:null,persist:!1,stopDown:!1,stopUp:!1,layerOptions:null,pixelTolerance:5,lastTouchPx:null,initialize:function(e,t,i){i&&i.layerOptions&&i.layerOptions.styleMap||(this.style=OpenLayers.Util.extend(OpenLayers.Feature.Vector.style.default,{})),OpenLayers.Handler.prototype.initialize.apply(this,arguments)},activate:function(){if(!OpenLayers.Handler.prototype.activate.apply(this,arguments))return!1;var e=OpenLayers.Util.extend({displayInLayerSwitcher:!1,calculateInRange:OpenLayers.Function.True,wrapDateLine:this.citeCompliant},this.layerOptions);return this.layer=new OpenLayers.Layer.Vector(this.CLASS_NAME,e),this.map.addLayer(this.layer),!0},createFeature:function(e){e=this.layer.getLonLatFromViewPortPx(e),e=new OpenLayers.Geometry.Point(e.lon,e.lat),this.point=new OpenLayers.Feature.Vector(e),this.callback("create",[this.point.geometry,this.point]),this.point.geometry.clearBounds(),this.layer.addFeatures([this.point],{silent:!0})},deactivate:function(){return!!OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.cancel(),null!=this.layer.map&&(this.destroyFeature(!0),this.layer.destroy(!1)),!(this.layer=null))},destroyFeature:function(e){!this.layer||!e&&this.persist||this.layer.destroyFeatures(),this.point=null},destroyPersistedFeature:function(){var e=this.layer;e&&1<e.features.length&&this.layer.features[0].destroy()},finalize:function(e){this.mouseDown=!1,this.lastTouchPx=this.lastUp=this.lastDown=null,this.callback(e?"cancel":"done",[this.geometryClone()]),this.destroyFeature(e)},cancel:function(){this.finalize(!0)},click:function(e){return OpenLayers.Event.stop(e),!1},dblclick:function(e){return OpenLayers.Event.stop(e),!1},modifyFeature:function(e){this.point||this.createFeature(e),e=this.layer.getLonLatFromViewPortPx(e),this.point.geometry.x=e.lon,this.point.geometry.y=e.lat,this.callback("modify",[this.point.geometry,this.point,!1]),this.point.geometry.clearBounds(),this.drawFeature()},drawFeature:function(){this.layer.drawFeature(this.point,this.style)},getGeometry:function(){var e=this.point&&this.point.geometry;return e=e&&this.multi?new OpenLayers.Geometry.MultiPoint([e]):e},geometryClone:function(){var e=this.getGeometry();return e&&e.clone()},mousedown:function(e){return this.down(e)},touchstart:function(e){return this.startTouch(),this.lastTouchPx=e.xy,this.down(e)},mousemove:function(e){return this.move(e)},touchmove:function(e){return this.lastTouchPx=e.xy,this.move(e)},mouseup:function(e){return this.up(e)},touchend:function(e){return e.xy=this.lastTouchPx,this.up(e)},down:function(e){return this.mouseDown=!0,this.lastDown=e.xy,this.touch||this.modifyFeature(e.xy),this.stoppedDown=this.stopDown,!this.stopDown},move:function(e){return this.touch||this.mouseDown&&!this.stoppedDown||this.modifyFeature(e.xy),!0},up:function(e){return this.mouseDown=!1,this.stoppedDown=this.stopDown,!(!(!this.checkModifiers(e)||this.lastUp&&this.lastUp.equals(e.xy))&&this.lastDown&&this.passesTolerance(this.lastDown,e.xy,this.pixelTolerance))||(this.touch&&this.modifyFeature(e.xy),this.persist&&this.destroyPersistedFeature(),this.lastUp=e.xy,this.finalize(),!this.stopUp)},mouseout:function(e){OpenLayers.Util.mouseLeft(e,this.map.viewPortDiv)&&(this.stoppedDown=this.stopDown,this.mouseDown=!1)},passesTolerance:function(e,t,i){var s=!0;return s=null!=i&&e&&t&&e.distanceTo(t)>i?!1:s},CLASS_NAME:"OpenLayers.Handler.Point"}),OpenLayers.Handler.Path=OpenLayers.Class(OpenLayers.Handler.Point,{line:null,maxVertices:null,doubleTouchTolerance:20,freehand:!1,freehandToggle:"shiftKey",timerId:null,redoStack:null,createFeature:function(e){e=this.layer.getLonLatFromViewPortPx(e),e=new OpenLayers.Geometry.Point(e.lon,e.lat),this.point=new OpenLayers.Feature.Vector(e),this.line=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString([this.point.geometry])),this.callback("create",[this.point.geometry,this.getSketch()]),this.point.geometry.clearBounds(),this.layer.addFeatures([this.line,this.point],{silent:!0})},destroyFeature:function(e){OpenLayers.Handler.Point.prototype.destroyFeature.call(this,e),this.line=null},destroyPersistedFeature:function(){var e=this.layer;e&&2<e.features.length&&this.layer.features[0].destroy()},removePoint:function(){this.point&&this.layer.removeFeatures([this.point])},addPoint:function(e){this.layer.removeFeatures([this.point]),e=this.layer.getLonLatFromViewPortPx(e),this.point=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(e.lon,e.lat)),this.line.geometry.addComponent(this.point.geometry,this.line.geometry.components.length),this.layer.addFeatures([this.point]),this.callback("point",[this.point.geometry,this.getGeometry()]),this.callback("modify",[this.point.geometry,this.getSketch()]),this.drawFeature(),delete this.redoStack},insertXY:function(e,t){this.line.geometry.addComponent(new OpenLayers.Geometry.Point(e,t),this.getCurrentPointIndex()),this.drawFeature(),delete this.redoStack},insertDeltaXY:function(e,t){var i=this.getCurrentPointIndex()-1;!(i=this.line.geometry.components[i])||isNaN(i.x)||isNaN(i.y)||this.insertXY(i.x+e,i.y+t)},insertDirectionLength:function(e,t){e*=Math.PI/180;var i=t*Math.cos(e),t=t*Math.sin(e);this.insertDeltaXY(i,t)},insertDeflectionLength:function(e,t){var i,s=this.getCurrentPointIndex()-1;0<s&&(i=this.line.geometry.components[s],s=this.line.geometry.components[s-1],i=Math.atan2(i.y-s.y,i.x-s.x),this.insertDirectionLength(180*i/Math.PI+e,t))},getCurrentPointIndex:function(){return this.line.geometry.components.length-1},undo:function(){var e=this.line.geometry,t=e.components,i=this.getCurrentPointIndex()-1,s=t[i],n=e.removeComponent(s);return n&&(this.touch&&0<i&&(e=(t=e.components)[i-1],(t=t[i=this.getCurrentPointIndex()]).x=e.x,t.y=e.y),this.redoStack||(this.redoStack=[]),this.redoStack.push(s),this.drawFeature()),n},redo:function(){var e=this.redoStack&&this.redoStack.pop();return e&&(this.line.geometry.addComponent(e,this.getCurrentPointIndex()),this.drawFeature()),!!e},freehandMode:function(e){return this.freehandToggle&&e[this.freehandToggle]?!this.freehand:this.freehand},modifyFeature:function(e,t){this.line||this.createFeature(e);e=this.layer.getLonLatFromViewPortPx(e);this.point.geometry.x=e.lon,this.point.geometry.y=e.lat,this.callback("modify",[this.point.geometry,this.getSketch(),t]),this.point.geometry.clearBounds(),this.drawFeature()},drawFeature:function(){this.layer.drawFeature(this.line,this.style),this.layer.drawFeature(this.point,this.style)},getSketch:function(){return this.line},getGeometry:function(){var e=this.line&&this.line.geometry;return e=e&&this.multi?new OpenLayers.Geometry.MultiLineString([e]):e},touchstart:function(e){return this.timerId&&this.passesTolerance(this.lastTouchPx,e.xy,this.doubleTouchTolerance)?(this.finishGeometry(),window.clearTimeout(this.timerId),this.timerId=null,!1):(this.timerId&&(window.clearTimeout(this.timerId),this.timerId=null),this.timerId=window.setTimeout(OpenLayers.Function.bind(function(){this.timerId=null},this),300),OpenLayers.Handler.Point.prototype.touchstart.call(this,e))},down:function(e){var t=this.stopDown;return this.freehandMode(e)&&(t=!0,this.touch&&(this.modifyFeature(e.xy,!!this.lastUp),OpenLayers.Event.stop(e))),this.touch||this.lastDown&&this.passesTolerance(this.lastDown,e.xy,this.pixelTolerance)||this.modifyFeature(e.xy,!!this.lastUp),this.mouseDown=!0,this.lastDown=e.xy,!(this.stoppedDown=t)},move:function(e){return this.stoppedDown&&this.freehandMode(e)?(this.persist&&this.destroyPersistedFeature(),this.maxVertices&&this.line&&this.line.geometry.components.length===this.maxVertices?(this.removePoint(),this.finalize()):this.addPoint(e.xy),!1):(this.touch||this.mouseDown&&!this.stoppedDown||this.modifyFeature(e.xy,!!this.lastUp),!0)},up:function(e){return!this.mouseDown||this.lastUp&&this.lastUp.equals(e.xy)||(this.stoppedDown&&this.freehandMode(e)?(this.persist&&this.destroyPersistedFeature(),this.removePoint(),this.finalize()):this.passesTolerance(this.lastDown,e.xy,this.pixelTolerance)&&(this.touch&&this.modifyFeature(e.xy),null==this.lastUp&&this.persist&&this.destroyPersistedFeature(),this.addPoint(e.xy),this.lastUp=e.xy,this.line.geometry.components.length===this.maxVertices+1&&this.finishGeometry())),this.stoppedDown=this.stopDown,this.mouseDown=!1,!this.stopUp},finishGeometry:function(){this.line.geometry.removeComponent(this.line.geometry.components[this.line.geometry.components.length-1]),this.removePoint(),this.finalize()},dblclick:function(e){return this.freehandMode(e)||this.finishGeometry(),!1},CLASS_NAME:"OpenLayers.Handler.Path"}),OpenLayers.Spherical=OpenLayers.Spherical||{},OpenLayers.Spherical.DEFAULT_RADIUS=6378137,OpenLayers.Spherical.computeDistanceBetween=function(e,t,i){i=i||OpenLayers.Spherical.DEFAULT_RADIUS;var s=Math.sin(Math.PI*(t.lon-e.lon)/360),n=Math.sin(Math.PI*(t.lat-e.lat)/360);return e=n*n+s*s*Math.cos(Math.PI*e.lat/180)*Math.cos(Math.PI*t.lat/180),2*i*Math.atan2(Math.sqrt(e),Math.sqrt(1-e))},OpenLayers.Spherical.computeHeading=function(e,t){var i=Math.sin(Math.PI*(e.lon-t.lon)/180)*Math.cos(Math.PI*t.lat/180),e=Math.cos(Math.PI*e.lat/180)*Math.sin(Math.PI*t.lat/180)-Math.sin(Math.PI*e.lat/180)*Math.cos(Math.PI*t.lat/180)*Math.cos(Math.PI*(e.lon-t.lon)/180);return 180*Math.atan2(i,e)/Math.PI},OpenLayers.Control.CacheWrite=OpenLayers.Class(OpenLayers.Control,{layers:null,imageFormat:"image/png",quotaRegEx:/quota/i,setMap:function(e){OpenLayers.Control.prototype.setMap.apply(this,arguments);for(var t=this.layers||e.layers,i=t.length-1;0<=i;--i)this.addLayer({layer:t[i]});this.layers||e.events.on({addlayer:this.addLayer,removeLayer:this.removeLayer,scope:this})},addLayer:function(e){e.layer.events.on({tileloadstart:this.makeSameOrigin,tileloaded:this.onTileLoaded,scope:this})},removeLayer:function(e){e.layer.events.un({tileloadstart:this.makeSameOrigin,tileloaded:this.onTileLoaded,scope:this})},makeSameOrigin:function(e){var t;this.active&&((e=e.tile)instanceof OpenLayers.Tile.Image&&!e.crossOriginKeyword&&"data:"!==e.url.substr(0,5))&&(t=OpenLayers.Request.makeSameOrigin(e.url,OpenLayers.ProxyHost),OpenLayers.Control.CacheWrite.urlMap[t]=e.url,e.url=t)},onTileLoaded:function(e){this.active&&!e.aborted&&e.tile instanceof OpenLayers.Tile.Image&&"data:"!==e.tile.url.substr(0,5)&&(this.cache({tile:e.tile}),delete OpenLayers.Control.CacheWrite.urlMap[e.tile.url])},cache:function(t){if(window.localStorage){t=t.tile;try{var i=t.getCanvasContext();i&&window.localStorage.setItem("olCache_"+(OpenLayers.Control.CacheWrite.urlMap[t.url]||t.url),i.canvas.toDataURL(this.imageFormat))}catch(e){(i=e.name||e.message)&&this.quotaRegEx.test(i)?this.events.triggerEvent("cachefull",{tile:t}):OpenLayers.Console.error(e.toString())}}},destroy:function(){if(this.layers||this.map)for(var e=this.layers||this.map.layers,t=e.length-1;0<=t;--t)this.removeLayer({layer:e[t]});this.map&&this.map.events.un({addlayer:this.addLayer,removeLayer:this.removeLayer,scope:this}),OpenLayers.Control.prototype.destroy.apply(this,arguments)},CLASS_NAME:"OpenLayers.Control.CacheWrite"}),OpenLayers.Control.CacheWrite.clearCache=function(){if(window.localStorage)for(var e,t=window.localStorage.length-1;0<=t;--t)"olCache_"===(e=window.localStorage.key(t)).substr(0,8)&&window.localStorage.removeItem(e)},OpenLayers.Control.CacheWrite.urlMap={},OpenLayers.Format.Context=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{layerOptions:null,layerParams:null,read:function(e,t){var i=OpenLayers.Format.XML.VersionedOGC.prototype.read.apply(this,arguments);return t&&t.map&&(this.context=i,i=t.map instanceof OpenLayers.Map?this.mergeContextToMap(i,t.map):(t=t.map,!OpenLayers.Util.isElement(t)&&"string"!=typeof t||(t={div:t}),this.contextToMap(i,t))),i},getLayerFromContext:function(e){var t,i,s={queryable:e.queryable,visibility:e.visibility,maxExtent:e.maxExtent,metadata:OpenLayers.Util.applyDefaults(e.metadata,{styles:e.styles,formats:e.formats,abstract:e.abstract,dataURL:e.dataURL}),numZoomLevels:e.numZoomLevels,units:e.units,isBaseLayer:e.isBaseLayer,opacity:e.opacity,displayInLayerSwitcher:e.displayInLayerSwitcher,singleTile:e.singleTile,tileSize:e.tileSize?new OpenLayers.Size(e.tileSize.width,e.tileSize.height):void 0,minScale:e.minScale||e.maxScaleDenominator,maxScale:e.maxScale||e.minScaleDenominator,srs:e.srs,dimensions:e.dimensions,metadataURL:e.metadataURL},n=(this.layerOptions&&OpenLayers.Util.applyDefaults(s,this.layerOptions),{layers:e.name,transparent:e.transparent,version:e.version});if(e.formats&&0<e.formats.length)for(n.format=e.formats[0].value,t=0,i=e.formats.length;t<i;t++){var r=e.formats[t];if(1==r.current){n.format=r.value;break}}if(e.styles&&0<e.styles.length)for(t=0,i=e.styles.length;t<i;t++)if(1==(r=e.styles[t]).current){r.href?n.sld=r.href:r.body?n.sld_body=r.body:n.styles=r.name;break}return this.layerParams&&OpenLayers.Util.applyDefaults(n,this.layerParams),t=null,(i=e.service)==OpenLayers.Format.Context.serviceTypes.WFS?(s.strategies=[new OpenLayers.Strategy.BBOX],s.protocol=new OpenLayers.Protocol.WFS({url:e.url,featurePrefix:e.name.split(":")[0],featureType:e.name.split(":").pop()}),t=new OpenLayers.Layer.Vector(e.title||e.name,s)):i==OpenLayers.Format.Context.serviceTypes.KML?(s.strategies=[new OpenLayers.Strategy.Fixed],s.protocol=new OpenLayers.Protocol.HTTP({url:e.url,format:new OpenLayers.Format.KML}),t=new OpenLayers.Layer.Vector(e.title||e.name,s)):i==OpenLayers.Format.Context.serviceTypes.GML?(s.strategies=[new OpenLayers.Strategy.Fixed],s.protocol=new OpenLayers.Protocol.HTTP({url:e.url,format:new OpenLayers.Format.GML}),t=new OpenLayers.Layer.Vector(e.title||e.name,s)):e.features?(t=new OpenLayers.Layer.Vector(e.title||e.name,s)).addFeatures(e.features):!0!==e.categoryLayer&&(t=new OpenLayers.Layer.WMS(e.title||e.name,e.url,n,s)),t},getLayersFromContext:function(e){for(var t=[],i=0,s=e.length;i<s;i++){var n=this.getLayerFromContext(e[i]);null!==n&&t.push(n)}return t},contextToMap:function(e,t){(t=OpenLayers.Util.applyDefaults({maxExtent:e.maxExtent,projection:e.projection,units:e.units},t)).maxExtent&&(t.maxResolution=t.maxExtent.getWidth()/OpenLayers.Map.TILE_WIDTH),t.metadata={contactInformation:e.contactInformation,abstract:e.abstract,keywords:e.keywords,logo:e.logo,descriptionURL:e.descriptionURL};t=new OpenLayers.Map(t);return t.addLayers(this.getLayersFromContext(e.layersContext)),t.setCenter(e.bounds.getCenterLonLat(),t.getZoomForExtent(e.bounds,!0)),t},mergeContextToMap:function(e,t){return t.addLayers(this.getLayersFromContext(e.layersContext)),t},write:function(e,t){return e=this.toContext(e),OpenLayers.Format.XML.VersionedOGC.prototype.write.apply(this,arguments)},CLASS_NAME:"OpenLayers.Format.Context"}),OpenLayers.Format.Context.serviceTypes={WMS:"urn:ogc:serviceType:WMS",WFS:"urn:ogc:serviceType:WFS",WCS:"urn:ogc:serviceType:WCS",GML:"urn:ogc:serviceType:GML",SLD:"urn:ogc:serviceType:SLD",FES:"urn:ogc:serviceType:FES",KML:"urn:ogc:serviceType:KML"},OpenLayers.Format.WMC=OpenLayers.Class(OpenLayers.Format.Context,{defaultVersion:"1.1.0",layerToContext:function(e){var t=this.getParser(),i={queryable:e.queryable,visibility:e.visibility,name:e.params.LAYERS,title:e.name,abstract:e.metadata.abstract,dataURL:e.metadata.dataURL,metadataURL:e.metadataURL,server:{version:e.params.VERSION,url:e.url},maxExtent:e.maxExtent,transparent:e.params.TRANSPARENT,numZoomLevels:e.numZoomLevels,units:e.units,isBaseLayer:e.isBaseLayer,opacity:1==e.opacity?void 0:e.opacity,displayInLayerSwitcher:e.displayInLayerSwitcher,singleTile:e.singleTile,tileSize:e.singleTile||!e.tileSize?void 0:{width:e.tileSize.w,height:e.tileSize.h},minScale:e.options.resolutions||e.options.scales||e.options.maxResolution||e.options.minScale?e.minScale:void 0,maxScale:e.options.resolutions||e.options.scales||e.options.minResolution||e.options.maxScale?e.maxScale:void 0,formats:[],styles:[],srs:e.srs,dimensions:e.dimensions};if(e.metadata.servertitle&&(i.server.title=e.metadata.servertitle),e.metadata.formats&&0<e.metadata.formats.length)for(var s=0,n=e.metadata.formats.length;s<n;s++){var r=e.metadata.formats[s];i.formats.push({value:r.value,current:r.value==e.params.FORMAT})}else i.formats.push({value:e.params.FORMAT,current:!0});if(e.metadata.styles&&0<e.metadata.styles.length)for(s=0,n=e.metadata.styles.length;s<n;s++)(t=e.metadata.styles[s]).current=t.href==e.params.SLD||t.body==e.params.SLD_BODY||t.name==e.params.STYLES,i.styles.push(t);else i.styles.push({href:e.params.SLD,body:e.params.SLD_BODY,name:e.params.STYLES||t.defaultStyleName,title:t.defaultStyleTitle,current:!0});return i},toContext:function(e){var t,i={},s=e.layers;if("OpenLayers.Map"==e.CLASS_NAME?(t=e.metadata||{},i.size=e.getSize(),i.bounds=e.getExtent(),i.projection=e.projection,i.title=e.title,i.keywords=t.keywords,i.abstract=t.abstract,i.logo=t.logo,i.descriptionURL=t.descriptionURL,i.contactInformation=t.contactInformation,i.maxExtent=e.maxExtent):(OpenLayers.Util.applyDefaults(i,e),null!=i.layers&&delete i.layers),null==i.layersContext&&(i.layersContext=[]),null!=s&&OpenLayers.Util.isArray(s))for(e=0,t=s.length;e<t;e++){var n=s[e];n instanceof OpenLayers.Layer.WMS&&i.layersContext.push(this.layerToContext(n))}return i},CLASS_NAME:"OpenLayers.Format.WMC"}),OpenLayers.Format.WMC.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ol:"http://openlayers.org/context",wmc:"http://www.opengis.net/context",sld:"http://www.opengis.net/sld",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},schemaLocation:"",getNamespacePrefix:function(e){var t=null;if(null==e)t=this.namespaces[this.defaultPrefix];else for(t in this.namespaces)if(this.namespaces[t]==e)break;return t},defaultPrefix:"wmc",rootPrefix:null,defaultStyleName:"",defaultStyleTitle:"Default",initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},read:function(e){e=(e="string"==typeof e?OpenLayers.Format.XML.prototype.read.apply(this,[e]):e).documentElement,this.rootPrefix=e.prefix;var t={version:e.getAttribute("version")};return this.runChildNodes(t,e),t},runChildNodes:function(e,t){for(var i,s,n=t.childNodes,r=0,a=n.length;r<a;++r)1==(i=n[r]).nodeType&&(s=this.getNamespacePrefix(i.namespaceURI),(s=this["read_"+s+"_"+i.nodeName.split(":").pop()])&&s.apply(this,[e,i]))},read_wmc_General:function(e,t){this.runChildNodes(e,t)},read_wmc_BoundingBox:function(e,t){e.projection=t.getAttribute("SRS"),e.bounds=new OpenLayers.Bounds(t.getAttribute("minx"),t.getAttribute("miny"),t.getAttribute("maxx"),t.getAttribute("maxy"))},read_wmc_LayerList:function(e,t){e.layersContext=[],this.runChildNodes(e,t)},read_wmc_Layer:function(e,t){var i={visibility:"1"!=t.getAttribute("hidden"),queryable:"1"==t.getAttribute("queryable"),formats:[],styles:[],metadata:{}};this.runChildNodes(i,t),e.layersContext.push(i)},read_wmc_Extension:function(e,t){this.runChildNodes(e,t)},read_ol_units:function(e,t){e.units=this.getChildValue(t)},read_ol_maxExtent:function(e,t){t=new OpenLayers.Bounds(t.getAttribute("minx"),t.getAttribute("miny"),t.getAttribute("maxx"),t.getAttribute("maxy"));e.maxExtent=t},read_ol_transparent:function(e,t){e.transparent=this.getChildValue(t)},read_ol_numZoomLevels:function(e,t){e.numZoomLevels=parseInt(this.getChildValue(t))},read_ol_opacity:function(e,t){e.opacity=parseFloat(this.getChildValue(t))},read_ol_singleTile:function(e,t){e.singleTile="true"==this.getChildValue(t)},read_ol_tileSize:function(e,t){t={width:t.getAttribute("width"),height:t.getAttribute("height")};e.tileSize=t},read_ol_isBaseLayer:function(e,t){e.isBaseLayer="true"==this.getChildValue(t)},read_ol_displayInLayerSwitcher:function(e,t){e.displayInLayerSwitcher="true"==this.getChildValue(t)},read_wmc_Server:function(e,t){e.version=t.getAttribute("version"),e.url=this.getOnlineResource_href(t),e.metadata.servertitle=t.getAttribute("title")},read_wmc_FormatList:function(e,t){this.runChildNodes(e,t)},read_wmc_Format:function(e,t){var i={value:this.getChildValue(t)};"1"==t.getAttribute("current")&&(i.current=!0),e.formats.push(i)},read_wmc_StyleList:function(e,t){this.runChildNodes(e,t)},read_wmc_Style:function(e,t){var i={};this.runChildNodes(i,t),"1"==t.getAttribute("current")&&(i.current=!0),e.styles.push(i)},read_wmc_SLD:function(e,t){this.runChildNodes(e,t)},read_sld_StyledLayerDescriptor:function(e,t){t=OpenLayers.Format.XML.prototype.write.apply(this,[t]);e.body=t},read_sld_FeatureTypeStyle:function(e,t){t=OpenLayers.Format.XML.prototype.write.apply(this,[t]);e.body=t},read_wmc_OnlineResource:function(e,t){e.href=this.getAttributeNS(t,this.namespaces.xlink,"href")},read_wmc_Name:function(e,t){t=this.getChildValue(t);t&&(e.name=t)},read_wmc_Title:function(e,t){t=this.getChildValue(t);t&&(e.title=t)},read_wmc_MetadataURL:function(e,t){e.metadataURL=this.getOnlineResource_href(t)},read_wmc_KeywordList:function(e,t){e.keywords=[],this.runChildNodes(e.keywords,t)},read_wmc_Keyword:function(e,t){e.push(this.getChildValue(t))},read_wmc_Abstract:function(e,t){t=this.getChildValue(t);t&&(e.abstract=t)},read_wmc_LogoURL:function(e,t){e.logo={width:t.getAttribute("width"),height:t.getAttribute("height"),format:t.getAttribute("format"),href:this.getOnlineResource_href(t)}},read_wmc_DescriptionURL:function(e,t){e.descriptionURL=this.getOnlineResource_href(t)},read_wmc_ContactInformation:function(e,t){var i={};this.runChildNodes(i,t),e.contactInformation=i},read_wmc_ContactPersonPrimary:function(e,t){var i={};this.runChildNodes(i,t),e.personPrimary=i},read_wmc_ContactPerson:function(e,t){t=this.getChildValue(t);t&&(e.person=t)},read_wmc_ContactOrganization:function(e,t){t=this.getChildValue(t);t&&(e.organization=t)},read_wmc_ContactPosition:function(e,t){t=this.getChildValue(t);t&&(e.position=t)},read_wmc_ContactAddress:function(e,t){var i={};this.runChildNodes(i,t),e.contactAddress=i},read_wmc_AddressType:function(e,t){t=this.getChildValue(t);t&&(e.type=t)},read_wmc_Address:function(e,t){t=this.getChildValue(t);t&&(e.address=t)},read_wmc_City:function(e,t){t=this.getChildValue(t);t&&(e.city=t)},read_wmc_StateOrProvince:function(e,t){t=this.getChildValue(t);t&&(e.stateOrProvince=t)},read_wmc_PostCode:function(e,t){t=this.getChildValue(t);t&&(e.postcode=t)},read_wmc_Country:function(e,t){t=this.getChildValue(t);t&&(e.country=t)},read_wmc_ContactVoiceTelephone:function(e,t){t=this.getChildValue(t);t&&(e.phone=t)},read_wmc_ContactFacsimileTelephone:function(e,t){t=this.getChildValue(t);t&&(e.fax=t)},read_wmc_ContactElectronicMailAddress:function(e,t){t=this.getChildValue(t);t&&(e.email=t)},read_wmc_DataURL:function(e,t){e.dataURL=this.getOnlineResource_href(t)},read_wmc_LegendURL:function(e,t){t={width:t.getAttribute("width"),height:t.getAttribute("height"),format:t.getAttribute("format"),href:this.getOnlineResource_href(t)};e.legend=t},read_wmc_DimensionList:function(e,t){e.dimensions={},this.runChildNodes(e.dimensions,t)},read_wmc_Dimension:function(e,t){var i={name:t.getAttribute("name").toLowerCase(),units:t.getAttribute("units")||"",unitSymbol:t.getAttribute("unitSymbol")||"",userValue:t.getAttribute("userValue")||"",nearestValue:"1"===t.getAttribute("nearestValue"),multipleValues:"1"===t.getAttribute("multipleValues"),current:"1"===t.getAttribute("current"),default:t.getAttribute("default")||""},t=this.getChildValue(t);i.values=t.split(","),e[i.name]=i},write:function(e,t){var i=this.createElementDefaultNS("ViewContext");return this.setAttributes(i,{version:this.VERSION,id:t&&"string"==typeof t.id?t.id:OpenLayers.Util.createUniqueID("OpenLayers_Context_")}),this.setAttributeNS(i,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),i.appendChild(this.write_wmc_General(e)),i.appendChild(this.write_wmc_LayerList(e)),OpenLayers.Format.XML.prototype.write.apply(this,[i])},createElementDefaultNS:function(e,t,i){return e=this.createElementNS(this.namespaces[this.defaultPrefix],e),t&&e.appendChild(this.createTextNode(t)),i&&this.setAttributes(e,i),e},setAttributes:function(e,t){var i,s;for(s in t)(i=t[s].toString()).match(/[A-Z]/)?this.setAttributeNS(e,null,s,i):e.setAttribute(s,i)},write_wmc_General:function(e){var t=this.createElementDefaultNS("General"),i=(e.size&&t.appendChild(this.createElementDefaultNS("Window",null,{width:e.size.w,height:e.size.h})),e.bounds);return t.appendChild(this.createElementDefaultNS("BoundingBox",null,{minx:i.left.toPrecision(18),miny:i.bottom.toPrecision(18),maxx:i.right.toPrecision(18),maxy:i.top.toPrecision(18),SRS:e.projection})),t.appendChild(this.createElementDefaultNS("Title",e.title)),e.keywords&&t.appendChild(this.write_wmc_KeywordList(e.keywords)),e.abstract&&t.appendChild(this.createElementDefaultNS("Abstract",e.abstract)),e.logo&&t.appendChild(this.write_wmc_URLType("LogoURL",e.logo.href,e.logo)),e.descriptionURL&&t.appendChild(this.write_wmc_URLType("DescriptionURL",e.descriptionURL)),e.contactInformation&&t.appendChild(this.write_wmc_ContactInformation(e.contactInformation)),t.appendChild(this.write_ol_MapExtension(e)),t},write_wmc_KeywordList:function(e){for(var t=this.createElementDefaultNS("KeywordList"),i=0,s=e.length;i<s;i++)t.appendChild(this.createElementDefaultNS("Keyword",e[i]));return t},write_wmc_ContactInformation:function(e){var t=this.createElementDefaultNS("ContactInformation");return e.personPrimary&&t.appendChild(this.write_wmc_ContactPersonPrimary(e.personPrimary)),e.position&&t.appendChild(this.createElementDefaultNS("ContactPosition",e.position)),e.contactAddress&&t.appendChild(this.write_wmc_ContactAddress(e.contactAddress)),e.phone&&t.appendChild(this.createElementDefaultNS("ContactVoiceTelephone",e.phone)),e.fax&&t.appendChild(this.createElementDefaultNS("ContactFacsimileTelephone",e.fax)),e.email&&t.appendChild(this.createElementDefaultNS("ContactElectronicMailAddress",e.email)),t},write_wmc_ContactPersonPrimary:function(e){var t=this.createElementDefaultNS("ContactPersonPrimary");return e.person&&t.appendChild(this.createElementDefaultNS("ContactPerson",e.person)),e.organization&&t.appendChild(this.createElementDefaultNS("ContactOrganization",e.organization)),t},write_wmc_ContactAddress:function(e){var t=this.createElementDefaultNS("ContactAddress");return e.type&&t.appendChild(this.createElementDefaultNS("AddressType",e.type)),e.address&&t.appendChild(this.createElementDefaultNS("Address",e.address)),e.city&&t.appendChild(this.createElementDefaultNS("City",e.city)),e.stateOrProvince&&t.appendChild(this.createElementDefaultNS("StateOrProvince",e.stateOrProvince)),e.postcode&&t.appendChild(this.createElementDefaultNS("PostCode",e.postcode)),e.country&&t.appendChild(this.createElementDefaultNS("Country",e.country)),t},write_ol_MapExtension:function(e){var t,i=this.createElementDefaultNS("Extension");return(e=e.maxExtent)&&(t=this.createElementNS(this.namespaces.ol,"ol:maxExtent"),this.setAttributes(t,{minx:e.left.toPrecision(18),miny:e.bottom.toPrecision(18),maxx:e.right.toPrecision(18),maxy:e.top.toPrecision(18)}),i.appendChild(t)),i},write_wmc_LayerList:function(e){for(var t=this.createElementDefaultNS("LayerList"),i=0,s=e.layersContext.length;i<s;++i)t.appendChild(this.write_wmc_Layer(e.layersContext[i]));return t},write_wmc_Layer:function(e){var t=this.createElementDefaultNS("Layer",null,{queryable:e.queryable?"1":"0",hidden:e.visibility?"0":"1"});return t.appendChild(this.write_wmc_Server(e)),t.appendChild(this.createElementDefaultNS("Name",e.name)),t.appendChild(this.createElementDefaultNS("Title",e.title)),e.abstract&&t.appendChild(this.createElementDefaultNS("Abstract",e.abstract)),e.dataURL&&t.appendChild(this.write_wmc_URLType("DataURL",e.dataURL)),e.metadataURL&&t.appendChild(this.write_wmc_URLType("MetadataURL",e.metadataURL)),t},write_wmc_LayerExtension:function(e){var t=this.createElementDefaultNS("Extension"),i=e.maxExtent,s=this.createElementNS(this.namespaces.ol,"ol:maxExtent");this.setAttributes(s,{minx:i.left.toPrecision(18),miny:i.bottom.toPrecision(18),maxx:i.right.toPrecision(18),maxy:i.top.toPrecision(18)}),t.appendChild(s),e.tileSize&&!e.singleTile&&(i=this.createElementNS(this.namespaces.ol,"ol:tileSize"),this.setAttributes(i,e.tileSize),t.appendChild(i));for(var n=0,r=(i="transparent numZoomLevels units isBaseLayer opacity displayInLayerSwitcher singleTile".split(" ")).length;n<r;++n)(s=this.createOLPropertyNode(e,i[n]))&&t.appendChild(s);return t},createOLPropertyNode:function(e,t){var i=null;return null!=e[t]&&(i=this.createElementNS(this.namespaces.ol,"ol:"+t)).appendChild(this.createTextNode(e[t].toString())),i},write_wmc_Server:function(e){e=e.server;var t=this.createElementDefaultNS("Server"),i={service:"OGC:WMS",version:e.version};return e.title&&(i.title=e.title),this.setAttributes(t,i),t.appendChild(this.write_wmc_OnlineResource(e.url)),t},write_wmc_URLType:function(e,t,i){if((e=this.createElementDefaultNS(e)).appendChild(this.write_wmc_OnlineResource(t)),i){t=["width","height","format"];for(var s=0;s<t.length;s++)t[s]in i&&e.setAttribute(t[s],i[t[s]])}return e},write_wmc_DimensionList:function(e){var t,i=this.createElementDefaultNS("DimensionList");for(t in e.dimensions){var s,n={},r=e.dimensions[t];for(s in r)n[s]="boolean"==typeof r[s]?Number(r[s]):r[s];r="",n.values&&(r=n.values.join(","),delete n.values),i.appendChild(this.createElementDefaultNS("Dimension",r,n))}return i},write_wmc_FormatList:function(e){for(var t=this.createElementDefaultNS("FormatList"),i=0,s=e.formats.length;i<s;i++){var n=e.formats[i];t.appendChild(this.createElementDefaultNS("Format",n.value,n.current&&1==n.current?{current:"1"}:null))}return t},write_wmc_StyleList:function(e){var t=this.createElementDefaultNS("StyleList");if((e=e.styles)&&OpenLayers.Util.isArray(e))for(var i,s=0,n=e.length;s<n;s++){var r=e[s],a=this.createElementDefaultNS("Style",null,r.current&&1==r.current?{current:"1"}:null);r.href?(i=this.createElementDefaultNS("SLD"),r.name&&i.appendChild(this.createElementDefaultNS("Name",r.name)),r.title&&i.appendChild(this.createElementDefaultNS("Title",r.title)),r.legend&&i.appendChild(this.write_wmc_URLType("LegendURL",r.legend.href,r.legend)),r=this.write_wmc_OnlineResource(r.href),i.appendChild(r),a.appendChild(i)):r.body?(i=this.createElementDefaultNS("SLD"),r.name&&i.appendChild(this.createElementDefaultNS("Name",r.name)),r.title&&i.appendChild(this.createElementDefaultNS("Title",r.title)),r.legend&&i.appendChild(this.write_wmc_URLType("LegendURL",r.legend.href,r.legend)),r=OpenLayers.Format.XML.prototype.read.apply(this,[r.body]).documentElement,i.ownerDocument&&i.ownerDocument.importNode&&(r=i.ownerDocument.importNode(r,!0)),i.appendChild(r),a.appendChild(i)):(a.appendChild(this.createElementDefaultNS("Name",r.name)),a.appendChild(this.createElementDefaultNS("Title",r.title)),r.abstract&&a.appendChild(this.createElementDefaultNS("Abstract",r.abstract)),r.legend&&a.appendChild(this.write_wmc_URLType("LegendURL",r.legend.href,r.legend))),t.appendChild(a)}return t},write_wmc_OnlineResource:function(e){var t=this.createElementDefaultNS("OnlineResource");return this.setAttributeNS(t,this.namespaces.xlink,"xlink:type","simple"),this.setAttributeNS(t,this.namespaces.xlink,"xlink:href",e),t},getOnlineResource_href:function(e){var t={};return 0<(e=e.getElementsByTagName("OnlineResource")).length&&this.read_wmc_OnlineResource(t,e[0]),t.href},CLASS_NAME:"OpenLayers.Format.WMC.v1"}),OpenLayers.Control.PanPanel=OpenLayers.Class(OpenLayers.Control.Panel,{slideFactor:50,slideRatio:null,initialize:function(e){OpenLayers.Control.Panel.prototype.initialize.apply(this,[e]),e={slideFactor:this.slideFactor,slideRatio:this.slideRatio},this.addControls([new OpenLayers.Control.Pan(OpenLayers.Control.Pan.NORTH,e),new OpenLayers.Control.Pan(OpenLayers.Control.Pan.SOUTH,e),new OpenLayers.Control.Pan(OpenLayers.Control.Pan.EAST,e),new OpenLayers.Control.Pan(OpenLayers.Control.Pan.WEST,e)])},CLASS_NAME:"OpenLayers.Control.PanPanel"}),OpenLayers.Control.Attribution=OpenLayers.Class(OpenLayers.Control,{separator:", ",template:"${layers}",destroy:function(){this.map.events.un({removelayer:this.updateAttribution,addlayer:this.updateAttribution,changelayer:this.updateAttribution,changebaselayer:this.updateAttribution,scope:this}),OpenLayers.Control.prototype.destroy.apply(this,arguments)},draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),this.map.events.on({changebaselayer:this.updateAttribution,changelayer:this.updateAttribution,addlayer:this.updateAttribution,removelayer:this.updateAttribution,scope:this}),this.updateAttribution(),this.div},updateAttribution:function(){var e=[];if(this.map&&this.map.layers){for(var t=0,i=this.map.layers.length;t<i;t++){var s=this.map.layers[t];s.attribution&&s.getVisibility()&&-1===OpenLayers.Util.indexOf(e,s.attribution)&&e.push(s.attribution)}this.div.innerHTML=OpenLayers.String.format(this.template,{layers:e.join(this.separator)})}},CLASS_NAME:"OpenLayers.Control.Attribution"}),OpenLayers.Kinetic=OpenLayers.Class({threshold:0,deceleration:.0035,nbPoints:100,delay:200,points:void 0,timerId:void 0,initialize:function(e){OpenLayers.Util.extend(this,e)},begin:function(){OpenLayers.Animation.stop(this.timerId),this.timerId=void 0,this.points=[]},update:function(e){this.points.unshift({xy:e,tick:(new Date).getTime()}),this.points.length>this.nbPoints&&this.points.pop()},end:function(e){for(var t,i,s=(new Date).getTime(),n=0,r=this.points.length;n<r&&!(s-(i=this.points[n]).tick>this.delay);n++)t=i;if(t&&(n=(new Date).getTime()-t.tick,!(0==(n=(s=Math.sqrt(Math.pow(e.x-t.xy.x,2)+Math.pow(e.y-t.xy.y,2)))/n)||n<this.threshold)))return s=Math.asin((e.y-t.xy.y)/s),{speed:n,theta:s=t.xy.x<=e.x?Math.PI-s:s}},move:function(e,r){var a=e.speed,o=Math.cos(e.theta),l=-Math.sin(e.theta),h=(new Date).getTime(),p=0,u=0;this.timerId=OpenLayers.Animation.start(OpenLayers.Function.bind(function(){var e,t,i,s,n;null!=this.timerId&&(e=(new Date).getTime()-h,t=(i=-this.deceleration*Math.pow(e,2)/2+a*e)*o,i*=l,n=!1,-this.deceleration*e+a<=0&&(OpenLayers.Animation.stop(this.timerId),n=!(this.timerId=null)),e=t-p,s=i-u,p=t,u=i,r(e,s,n))},this))},CLASS_NAME:"OpenLayers.Kinetic"}),OpenLayers.Format.WPSExecute=OpenLayers.Class(OpenLayers.Format.XML,OpenLayers.Format.Filter.v1_1_0,{namespaces:{ows:"http://www.opengis.net/ows/1.1",gml:"http://www.opengis.net/gml",wps:"http://www.opengis.net/wps/1.0.0",wfs:"http://www.opengis.net/wfs",ogc:"http://www.opengis.net/ogc",wcs:"http://www.opengis.net/wcs",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},VERSION:"1.0.0",schemaLocation:"http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd",schemaLocationAttr:function(e){},write:function(e){var t;return window.ActiveXObject?this.xmldom=t=new ActiveXObject("Microsoft.XMLDOM"):t=document.implementation.createDocument("","",null),e=this.writeNode("wps:Execute",e,t),this.setAttributeNS(e,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[e])},read:function(e){(e="string"==typeof e?OpenLayers.Format.XML.prototype.read.apply(this,[e]):e)&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),t},writers:{wps:{Execute:function(e){var t=this.createElementNSPlus("wps:Execute",{attributes:{version:this.VERSION,service:"WPS"}});return this.writeNode("ows:Identifier",e.identifier,t),this.writeNode("wps:DataInputs",e.dataInputs,t),this.writeNode("wps:ResponseForm",e.responseForm,t),t},ResponseForm:function(e){var t=this.createElementNSPlus("wps:ResponseForm",{});return e.rawDataOutput&&this.writeNode("wps:RawDataOutput",e.rawDataOutput,t),e.responseDocument&&this.writeNode("wps:ResponseDocument",e.responseDocument,t),t},ResponseDocument:function(e){var t=this.createElementNSPlus("wps:ResponseDocument",{attributes:{storeExecuteResponse:e.storeExecuteResponse,lineage:e.lineage,status:e.status}});if(e.outputs)for(var i=0,s=e.outputs.length;i<s;i++)this.writeNode("wps:Output",e.outputs[i],t);return t},Output:function(e){var t=this.createElementNSPlus("wps:Output",{attributes:{asReference:e.asReference,mimeType:e.mimeType,encoding:e.encoding,schema:e.schema}});return this.writeNode("ows:Identifier",e.identifier,t),this.writeNode("ows:Title",e.title,t),this.writeNode("ows:Abstract",e.abstract,t),t},RawDataOutput:function(e){var t=this.createElementNSPlus("wps:RawDataOutput",{attributes:{mimeType:e.mimeType,encoding:e.encoding,schema:e.schema}});return this.writeNode("ows:Identifier",e.identifier,t),t},DataInputs:function(e){for(var t=this.createElementNSPlus("wps:DataInputs",{}),i=0,s=e.length;i<s;++i)this.writeNode("wps:Input",e[i],t);return t},Input:function(e){var t=this.createElementNSPlus("wps:Input",{});return this.writeNode("ows:Identifier",e.identifier,t),e.title&&this.writeNode("ows:Title",e.title,t),e.data&&this.writeNode("wps:Data",e.data,t),e.reference&&this.writeNode("wps:Reference",e.reference,t),e.boundingBoxData&&this.writeNode("wps:BoundingBoxData",e.boundingBoxData,t),t},Data:function(e){var t=this.createElementNSPlus("wps:Data",{});return e.literalData?this.writeNode("wps:LiteralData",e.literalData,t):e.complexData?this.writeNode("wps:ComplexData",e.complexData,t):e.boundingBoxData&&this.writeNode("ows:BoundingBox",e.boundingBoxData,t),t},LiteralData:function(e){return this.createElementNSPlus("wps:LiteralData",{attributes:{uom:e.uom},value:e.value})},ComplexData:function(e){var t=this.createElementNSPlus("wps:ComplexData",{attributes:{mimeType:e.mimeType,encoding:e.encoding,schema:e.schema}}),i=e.value;return"string"==typeof i?t.appendChild(this.getXMLDoc().createCDATASection(e.value)):t.appendChild(i),t},Reference:function(e){var t=this.createElementNSPlus("wps:Reference",{attributes:{mimeType:e.mimeType,"xlink:href":e.href,method:e.method,encoding:e.encoding,schema:e.schema}});return e.body&&this.writeNode("wps:Body",e.body,t),t},BoundingBoxData:function(e,t){this.writers.ows.BoundingBox.apply(this,[e,t,"wps:BoundingBoxData"])},Body:function(e){var t=this.createElementNSPlus("wps:Body",{});return e.wcs?this.writeNode("wcs:GetCoverage",e.wcs,t):e.wfs?(this.featureType=e.wfs.featureType,this.version=e.wfs.version,this.writeNode("wfs:GetFeature",e.wfs,t)):this.writeNode("wps:Execute",e,t),t}},wcs:OpenLayers.Format.WCSGetCoverage.prototype.writers.wcs,wfs:OpenLayers.Format.WFST.v1_1_0.prototype.writers.wfs,ogc:OpenLayers.Format.Filter.v1_1_0.prototype.writers.ogc,ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.writers.ows},readers:{wps:{ExecuteResponse:function(e,t){t.executeResponse={lang:e.getAttribute("lang"),statusLocation:e.getAttribute("statusLocation"),serviceInstance:e.getAttribute("serviceInstance"),service:e.getAttribute("service")},this.readChildNodes(e,t.executeResponse)},Process:function(e,t){t.process={},this.readChildNodes(e,t.process)},Status:function(e,t){t.status={creationTime:e.getAttribute("creationTime")},this.readChildNodes(e,t.status)},ProcessSucceeded:function(e,t){t.processSucceeded=!0},ProcessOutputs:function(e,t){t.processOutputs=[],this.readChildNodes(e,t.processOutputs)},Output:function(e,t){var i={};this.readChildNodes(e,i),t.push(i)},Reference:function(e,t){t.reference={href:e.getAttribute("href"),mimeType:e.getAttribute("mimeType"),encoding:e.getAttribute("encoding"),schema:e.getAttribute("schema")}},Data:function(e,t){t.data={},this.readChildNodes(e,t)},LiteralData:function(e,t){t.literalData={dataType:e.getAttribute("dataType"),uom:e.getAttribute("uom"),value:this.getChildValue(e)}},ComplexData:function(e,t){if(t.complexData={mimeType:e.getAttribute("mimeType"),schema:e.getAttribute("schema"),encoding:e.getAttribute("encoding"),value:""},this.isSimpleContent(e))for(var i=e.firstChild;i;i=i.nextSibling)switch(i.nodeType){case 3:case 4:t.complexData.value+=i.nodeValue}else for(i=e.firstChild;i;i=i.nextSibling)1==i.nodeType&&(t.complexData.value=i)},BoundingBox:function(e,t){t.boundingBoxData={dimensions:e.getAttribute("dimensions"),crs:e.getAttribute("crs")},this.readChildNodes(e,t.boundingBoxData)}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.WPSExecute"}),OpenLayers.Layer.GeoRSS=OpenLayers.Class(OpenLayers.Layer.Markers,{location:null,features:null,formatOptions:null,selectedFeature:null,icon:null,popupSize:null,useFeedTitle:!0,initialize:function(e,t,i){OpenLayers.Layer.Markers.prototype.initialize.apply(this,[e,i]),this.location=t,this.features=[]},destroy:function(){OpenLayers.Layer.Markers.prototype.destroy.apply(this,arguments),this.clearFeatures(),this.features=null},loadRSS:function(){this.loaded||(this.events.triggerEvent("loadstart"),OpenLayers.Request.GET({url:this.location,success:this.parseData,scope:this}),this.loaded=!0)},moveTo:function(e,t,i){OpenLayers.Layer.Markers.prototype.moveTo.apply(this,arguments),this.visibility&&!this.loaded&&this.loadRSS()},parseData:function(t){var i=t.responseXML;if(i&&i.documentElement||(i=OpenLayers.Format.XML.prototype.read(t.responseText)),this.useFeedTitle){t=null;try{t=i.getElementsByTagNameNS("*","title")[0].firstChild.nodeValue}catch(e){t=i.getElementsByTagName("title")[0].firstChild.nodeValue}t&&this.setName(t)}OpenLayers.Util.extend(t={},this.formatOptions),this.map&&!this.projection.equals(this.map.getProjectionObject())&&(t.externalProjection=this.projection,t.internalProjection=this.map.getProjectionObject()),i=new OpenLayers.Format.GeoRSS(t).read(i),t=0;for(var e=i.length;t<e;t++){var s,n,r,a,o={},l=i[t];l.geometry&&(s=l.attributes.title||"Untitled",n=l.attributes.description||"No description.",r=l.attributes.link||"",l=l.geometry.getBounds().getCenterLonLat(),o.icon=null==this.icon?OpenLayers.Marker.defaultIcon():this.icon.clone(),o.popupSize=this.popupSize?this.popupSize.clone():new OpenLayers.Size(250,120),(s||n)&&(a=(a='<div class="olLayerGeoRSSClose">[x]</div>')+'<div class="olLayerGeoRSSTitle">',r&&(a+='<a class="link" href="'+r+'" target="_blank">'),a+=o.title=s,r&&(a+="</a>"),a=(a+='</div><div style="" class="olLayerGeoRSSDescription">')+(o.description=n)+"</div>",o.popupContentHTML=a),l=new OpenLayers.Feature(this,l,o),this.features.push(l),(o=l.createMarker()).events.register("click",l,this.markerClick),this.addMarker(o))}this.events.triggerEvent("loadend")},markerClick:function(e){var t=this==this.layer.selectedFeature;this.layer.selectedFeature=t?null:this;for(var i=0,s=this.layer.map.popups.length;i<s;i++)this.layer.map.removePopup(this.layer.map.popups[i]);t||(t=this.createPopup(),OpenLayers.Event.observe(t.div,"click",OpenLayers.Function.bind(function(){for(var e=0,t=this.layer.map.popups.length;e<t;e++)this.layer.map.removePopup(this.layer.map.popups[e])},this)),this.layer.map.addPopup(t)),OpenLayers.Event.stop(e)},clearFeatures:function(){if(null!=this.features)for(;0<this.features.length;){var e=this.features[0];OpenLayers.Util.removeItem(this.features,e),e.destroy()}},CLASS_NAME:"OpenLayers.Layer.GeoRSS"}),OpenLayers.Symbolizer.Point=OpenLayers.Class(OpenLayers.Symbolizer,{initialize:function(e){OpenLayers.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"OpenLayers.Symbolizer.Point"}),OpenLayers.Symbolizer.Line=OpenLayers.Class(OpenLayers.Symbolizer,{initialize:function(e){OpenLayers.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"OpenLayers.Symbolizer.Line"}),OpenLayers.Symbolizer.Text=OpenLayers.Class(OpenLayers.Symbolizer,{initialize:function(e){OpenLayers.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"OpenLayers.Symbolizer.Text"}),OpenLayers.Format.SLD.v1=OpenLayers.Class(OpenLayers.Format.Filter.v1_0_0,{namespaces:{sld:"http://www.opengis.net/sld",ogc:"http://www.opengis.net/ogc",gml:"http://www.opengis.net/gml",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},defaultPrefix:"sld",schemaLocation:null,multipleSymbolizers:!1,featureTypeCounter:null,defaultSymbolizer:{fillColor:"#808080",fillOpacity:1,strokeColor:"#000000",strokeOpacity:1,strokeWidth:1,strokeDashstyle:"solid",pointRadius:3,graphicName:"square"},read:function(e,t){t={namedLayers:!0===(t=OpenLayers.Util.applyDefaults(t,this.options)).namedLayersAsArray?[]:{}};return this.readChildNodes(e,t),t},readers:OpenLayers.Util.applyDefaults({sld:{StyledLayerDescriptor:function(e,t){t.version=e.getAttribute("version"),this.readChildNodes(e,t)},Name:function(e,t){t.name=this.getChildValue(e)},Title:function(e,t){t.title=this.getChildValue(e)},Abstract:function(e,t){t.description=this.getChildValue(e)},NamedLayer:function(e,t){var i={userStyles:[],namedStyles:[]};this.readChildNodes(e,i);for(var s=0,n=i.userStyles.length;s<n;++s)i.userStyles[s].layerName=i.name;OpenLayers.Util.isArray(t.namedLayers)?t.namedLayers.push(i):t.namedLayers[i.name]=i},NamedStyle:function(e,t){t.namedStyles.push(this.getChildName(e.firstChild))},UserStyle:function(e,t){var i={defaultsPerSymbolizer:!0,rules:[]};this.featureTypeCounter=-1,this.readChildNodes(e,i),i=this.multipleSymbolizers?(delete i.defaultsPerSymbolizer,new OpenLayers.Style2(i)):new OpenLayers.Style(this.defaultSymbolizer,i),t.userStyles.push(i)},IsDefault:function(e,t){"1"==this.getChildValue(e)&&(t.isDefault=!0)},FeatureTypeStyle:function(e,t){++this.featureTypeCounter;var i={rules:this.multipleSymbolizers?t.rules:[]};this.readChildNodes(e,i),this.multipleSymbolizers||(t.rules=i.rules)},Rule:function(e,t){var i;this.multipleSymbolizers&&(i={symbolizers:[]}),i=new OpenLayers.Rule(i),this.readChildNodes(e,i),t.rules.push(i)},ElseFilter:function(e,t){t.elseFilter=!0},MinScaleDenominator:function(e,t){t.minScaleDenominator=parseFloat(this.getChildValue(e))},MaxScaleDenominator:function(e,t){t.maxScaleDenominator=parseFloat(this.getChildValue(e))},TextSymbolizer:function(e,t){var i={};this.readChildNodes(e,i),this.multipleSymbolizers?(i.zIndex=this.featureTypeCounter,t.symbolizers.push(new OpenLayers.Symbolizer.Text(i))):t.symbolizer.Text=OpenLayers.Util.applyDefaults(i,t.symbolizer.Text)},LabelPlacement:function(e,t){this.readChildNodes(e,t)},PointPlacement:function(e,t){var i={};this.readChildNodes(e,i),i.labelRotation=i.rotation,delete i.rotation;var s,e=t.labelAnchorPointX,n=t.labelAnchorPointY;e<=1/3?s="l":1/3<e&&e<2/3?s="c":2/3<=e&&(s="r"),n<=1/3?s+="b":1/3<n&&n<2/3?s+="m":2/3<=n&&(s+="t"),i.labelAlign=s,OpenLayers.Util.applyDefaults(t,i)},AnchorPoint:function(e,t){this.readChildNodes(e,t)},AnchorPointX:function(e,t){e=this.readers.ogc._expression.call(this,e);e&&(t.labelAnchorPointX=e)},AnchorPointY:function(e,t){e=this.readers.ogc._expression.call(this,e);e&&(t.labelAnchorPointY=e)},Displacement:function(e,t){this.readChildNodes(e,t)},DisplacementX:function(e,t){e=this.readers.ogc._expression.call(this,e);e&&(t.labelXOffset=e)},DisplacementY:function(e,t){e=this.readers.ogc._expression.call(this,e);e&&(t.labelYOffset=e)},LinePlacement:function(e,t){this.readChildNodes(e,t)},PerpendicularOffset:function(e,t){e=this.readers.ogc._expression.call(this,e);e&&(t.labelPerpendicularOffset=e)},Label:function(e,t){e=this.readers.ogc._expression.call(this,e);e&&(t.label=e)},Font:function(e,t){this.readChildNodes(e,t)},Halo:function(e,t){var i={};this.readChildNodes(e,i),t.haloRadius=i.haloRadius,t.haloColor=i.fillColor,t.haloOpacity=i.fillOpacity},Radius:function(e,t){e=this.readers.ogc._expression.call(this,e);null!=e&&(t.haloRadius=e)},RasterSymbolizer:function(e,t){var i={};this.readChildNodes(e,i),this.multipleSymbolizers?(i.zIndex=this.featureTypeCounter,t.symbolizers.push(new OpenLayers.Symbolizer.Raster(i))):t.symbolizer.Raster=OpenLayers.Util.applyDefaults(i,t.symbolizer.Raster)},Geometry:function(e,t){t.geometry={},this.readChildNodes(e,t.geometry)},ColorMap:function(e,t){t.colorMap=[],this.readChildNodes(e,t.colorMap)},ColorMapEntry:function(e,t){var i=e.getAttribute("quantity"),s=e.getAttribute("opacity");t.push({color:e.getAttribute("color"),quantity:null!==i?parseFloat(i):void 0,label:e.getAttribute("label")||void 0,opacity:null!==s?parseFloat(s):void 0})},LineSymbolizer:function(e,t){var i={};this.readChildNodes(e,i),this.multipleSymbolizers?(i.zIndex=this.featureTypeCounter,t.symbolizers.push(new OpenLayers.Symbolizer.Line(i))):t.symbolizer.Line=OpenLayers.Util.applyDefaults(i,t.symbolizer.Line)},PolygonSymbolizer:function(e,t){var i={fill:!1,stroke:!1};this.multipleSymbolizers||(i=t.symbolizer.Polygon||i),this.readChildNodes(e,i),this.multipleSymbolizers?(i.zIndex=this.featureTypeCounter,t.symbolizers.push(new OpenLayers.Symbolizer.Polygon(i))):t.symbolizer.Polygon=i},PointSymbolizer:function(e,t){var i={fill:!1,stroke:!1,graphic:!1};this.multipleSymbolizers||(i=t.symbolizer.Point||i),this.readChildNodes(e,i),this.multipleSymbolizers?(i.zIndex=this.featureTypeCounter,t.symbolizers.push(new OpenLayers.Symbolizer.Point(i))):t.symbolizer.Point=i},Stroke:function(e,t){t.stroke=!0,this.readChildNodes(e,t)},Fill:function(e,t){t.fill=!0,this.readChildNodes(e,t)},CssParameter:function(e,t){var i=e.getAttribute("name"),s=this.cssMap[i];t.label&&("fill"===i?s="fontColor":"fill-opacity"===i&&(s="fontOpacity")),s&&(i=this.readers.ogc._expression.call(this,e))&&(t[s]=i)},Graphic:function(e,t){t.graphic=!0;var i={};this.readChildNodes(e,i);for(var s,n,r="stroke strokeColor strokeWidth strokeOpacity strokeLinecap fill fillColor fillOpacity graphicName rotation graphicFormat".split(" "),a=0,o=r.length;a<o;++a)null!=(n=i[s=r[a]])&&(t[s]=n);null!=i.opacity&&(t.graphicOpacity=i.opacity),null!=i.size&&(isNaN(i.size/2)?t.graphicWidth=i.size:t.pointRadius=i.size/2),null!=i.href&&(t.externalGraphic=i.href),null!=i.rotation&&(t.rotation=i.rotation)},ExternalGraphic:function(e,t){this.readChildNodes(e,t)},Mark:function(e,t){this.readChildNodes(e,t)},WellKnownName:function(e,t){t.graphicName=this.getChildValue(e)},Opacity:function(e,t){e=this.readers.ogc._expression.call(this,e);e&&(t.opacity=e)},Size:function(e,t){e=this.readers.ogc._expression.call(this,e);e&&(t.size=e)},Rotation:function(e,t){e=this.readers.ogc._expression.call(this,e);e&&(t.rotation=e)},OnlineResource:function(e,t){t.href=this.getAttributeNS(e,this.namespaces.xlink,"href")},Format:function(e,t){t.graphicFormat=this.getChildValue(e)}}},OpenLayers.Format.Filter.v1_0_0.prototype.readers),cssMap:{stroke:"strokeColor","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","stroke-linecap":"strokeLinecap","stroke-dasharray":"strokeDashstyle",fill:"fillColor","fill-opacity":"fillOpacity","font-family":"fontFamily","font-size":"fontSize","font-weight":"fontWeight","font-style":"fontStyle"},getCssProperty:function(e){var t,i=null;for(t in this.cssMap)if(this.cssMap[t]==e){i=t;break}return i},getGraphicFormat:function(e){var t,i;for(i in this.graphicFormats)if(this.graphicFormats[i].test(e)){t=i;break}return t||this.defaultGraphicFormat},defaultGraphicFormat:"image/png",graphicFormats:{"image/jpeg":/\.jpe?g$/i,"image/gif":/\.gif$/i,"image/png":/\.png$/i},write:function(e){return this.writers.sld.StyledLayerDescriptor.apply(this,[e])},writers:OpenLayers.Util.applyDefaults({sld:{_OGCExpression:function(e,t){var i=this.createElementNSPlus(e),s="string"==typeof t?t.split("${"):[t];i.appendChild(this.createTextNode(s[0]));for(var n,r,a=1,o=s.length;a<o;a++)0<(r=(n=s[a]).indexOf("}"))?(this.writeNode("ogc:PropertyName",{property:n.substring(0,r)},i),i.appendChild(this.createTextNode(n.substring(++r)))):i.appendChild(this.createTextNode("${"+n));return i},StyledLayerDescriptor:function(e){var t=this.createElementNSPlus("sld:StyledLayerDescriptor",{attributes:{version:this.VERSION,"xsi:schemaLocation":this.schemaLocation}});if(t.setAttribute("xmlns:ogc",this.namespaces.ogc),t.setAttribute("xmlns:gml",this.namespaces.gml),e.name&&this.writeNode("Name",e.name,t),e.title&&this.writeNode("Title",e.title,t),e.description&&this.writeNode("Abstract",e.description,t),OpenLayers.Util.isArray(e.namedLayers))for(var i=0,s=e.namedLayers.length;i<s;++i)this.writeNode("NamedLayer",e.namedLayers[i],t);else for(i in e.namedLayers)this.writeNode("NamedLayer",e.namedLayers[i],t);return t},Name:function(e){return this.createElementNSPlus("sld:Name",{value:e})},Title:function(e){return this.createElementNSPlus("sld:Title",{value:e})},Abstract:function(e){return this.createElementNSPlus("sld:Abstract",{value:e})},NamedLayer:function(e){var t=this.createElementNSPlus("sld:NamedLayer");if(this.writeNode("Name",e.name,t),e.namedStyles)for(var i=0,s=e.namedStyles.length;i<s;++i)this.writeNode("NamedStyle",e.namedStyles[i],t);if(e.userStyles)for(i=0,s=e.userStyles.length;i<s;++i)this.writeNode("UserStyle",e.userStyles[i],t);return t},NamedStyle:function(e){var t=this.createElementNSPlus("sld:NamedStyle");return this.writeNode("Name",e,t),t},UserStyle:function(e){var t=this.createElementNSPlus("sld:UserStyle");if(e.name&&this.writeNode("Name",e.name,t),e.title&&this.writeNode("Title",e.title,t),e.description&&this.writeNode("Abstract",e.description,t),e.isDefault&&this.writeNode("IsDefault",e.isDefault,t),this.multipleSymbolizers&&e.rules){for(var i,s,n,r,a={0:[]},o=[0],l=0,h=e.rules.length;l<h;++l)if((i=e.rules[l]).symbolizers){for(var p={},u=0,c=i.symbolizers.length;u<c;++u)(n=(s=i.symbolizers[u]).zIndex)in p||((r=i.clone()).symbolizers=[],p[n]=r),p[n].symbolizers.push(s.clone());for(n in p)n in a||(o.push(n),a[n]=[]),a[n].push(p[n])}else a[0].push(i.clone());for(o.sort(),l=0,h=o.length;l<h;++l)0<(i=a[o[l]]).length&&((r=e.clone()).rules=a[o[l]],this.writeNode("FeatureTypeStyle",r,t))}else this.writeNode("FeatureTypeStyle",e,t);return t},IsDefault:function(e){return this.createElementNSPlus("sld:IsDefault",{value:e?"1":"0"})},FeatureTypeStyle:function(e){for(var t=this.createElementNSPlus("sld:FeatureTypeStyle"),i=0,s=e.rules.length;i<s;++i)this.writeNode("Rule",e.rules[i],t);return t},Rule:function(e){var t,i,s=this.createElementNSPlus("sld:Rule");if(e.name&&this.writeNode("Name",e.name,s),e.title&&this.writeNode("Title",e.title,s),e.description&&this.writeNode("Abstract",e.description,s),e.elseFilter?this.writeNode("ElseFilter",null,s):e.filter&&this.writeNode("ogc:Filter",e.filter,s),null!=e.minScaleDenominator&&this.writeNode("MinScaleDenominator",e.minScaleDenominator,s),null!=e.maxScaleDenominator&&this.writeNode("MaxScaleDenominator",e.maxScaleDenominator,s),this.multipleSymbolizers&&e.symbolizers)for(var n=0,r=e.symbolizers.length;n<r;++n)t=(i=e.symbolizers[n]).CLASS_NAME.split(".").pop(),this.writeNode(t+"Symbolizer",i,s);else for(var n=0,a=(r=OpenLayers.Style.SYMBOLIZER_PREFIXES).length;n<a;++n)t=r[n],(i=e.symbolizer[t])&&this.writeNode(t+"Symbolizer",i,s);return s},ElseFilter:function(){return this.createElementNSPlus("sld:ElseFilter")},MinScaleDenominator:function(e){return this.createElementNSPlus("sld:MinScaleDenominator",{value:e})},MaxScaleDenominator:function(e){return this.createElementNSPlus("sld:MaxScaleDenominator",{value:e})},LineSymbolizer:function(e){var t=this.createElementNSPlus("sld:LineSymbolizer");return this.writeNode("Stroke",e,t),t},Stroke:function(e){var t=this.createElementNSPlus("sld:Stroke");return null!=e.strokeColor&&this.writeNode("CssParameter",{symbolizer:e,key:"strokeColor"},t),null!=e.strokeOpacity&&this.writeNode("CssParameter",{symbolizer:e,key:"strokeOpacity"},t),null!=e.strokeWidth&&this.writeNode("CssParameter",{symbolizer:e,key:"strokeWidth"},t),null!=e.strokeDashstyle&&"solid"!==e.strokeDashstyle&&this.writeNode("CssParameter",{symbolizer:e,key:"strokeDashstyle"},t),null!=e.strokeLinecap&&this.writeNode("CssParameter",{symbolizer:e,key:"strokeLinecap"},t),t},CssParameter:function(e){return this.createElementNSPlus("sld:CssParameter",{attributes:{name:this.getCssProperty(e.key)},value:e.symbolizer[e.key]})},TextSymbolizer:function(e){var t=this.createElementNSPlus("sld:TextSymbolizer");return null!=e.label&&this.writeNode("Label",e.label,t),null==e.fontFamily&&null==e.fontSize&&null==e.fontWeight&&null==e.fontStyle||this.writeNode("Font",e,t),null==e.labelAnchorPointX&&null==e.labelAnchorPointY&&null==e.labelAlign&&null==e.labelXOffset&&null==e.labelYOffset&&null==e.labelRotation&&null==e.labelPerpendicularOffset||this.writeNode("LabelPlacement",e,t),null==e.haloRadius&&null==e.haloColor&&null==e.haloOpacity||this.writeNode("Halo",e,t),null==e.fontColor&&null==e.fontOpacity||this.writeNode("Fill",{fillColor:e.fontColor,fillOpacity:e.fontOpacity},t),t},LabelPlacement:function(e){var t=this.createElementNSPlus("sld:LabelPlacement");return null==e.labelAnchorPointX&&null==e.labelAnchorPointY&&null==e.labelAlign&&null==e.labelXOffset&&null==e.labelYOffset&&null==e.labelRotation||null!=e.labelPerpendicularOffset||this.writeNode("PointPlacement",e,t),null!=e.labelPerpendicularOffset&&this.writeNode("LinePlacement",e,t),t},LinePlacement:function(e){var t=this.createElementNSPlus("sld:LinePlacement");return this.writeNode("PerpendicularOffset",e.labelPerpendicularOffset,t),t},PerpendicularOffset:function(e){return this.createElementNSPlus("sld:PerpendicularOffset",{value:e})},PointPlacement:function(e){var t=this.createElementNSPlus("sld:PointPlacement");return null==e.labelAnchorPointX&&null==e.labelAnchorPointY&&null==e.labelAlign||this.writeNode("AnchorPoint",e,t),null==e.labelXOffset&&null==e.labelYOffset||this.writeNode("Displacement",e,t),null!=e.labelRotation&&this.writeNode("Rotation",e.labelRotation,t),t},AnchorPoint:function(e){var t,i=this.createElementNSPlus("sld:AnchorPoint"),s=e.labelAnchorPointX,n=e.labelAnchorPointY;return null!=s&&this.writeNode("AnchorPointX",s,i),null!=n&&this.writeNode("AnchorPointY",n,i),null==s&&null==n&&("l"===(t=e.labelAlign.substr(0,1))?s=0:"c"===t?s=.5:"r"===t&&(s=1),"b"===(e=e.labelAlign.substr(1,1))?n=0:"m"===e?n=.5:"t"===e&&(n=1),this.writeNode("AnchorPointX",s,i),this.writeNode("AnchorPointY",n,i)),i},AnchorPointX:function(e){return this.createElementNSPlus("sld:AnchorPointX",{value:e})},AnchorPointY:function(e){return this.createElementNSPlus("sld:AnchorPointY",{value:e})},Displacement:function(e){var t=this.createElementNSPlus("sld:Displacement");return null!=e.labelXOffset&&this.writeNode("DisplacementX",e.labelXOffset,t),null!=e.labelYOffset&&this.writeNode("DisplacementY",e.labelYOffset,t),t},DisplacementX:function(e){return this.createElementNSPlus("sld:DisplacementX",{value:e})},DisplacementY:function(e){return this.createElementNSPlus("sld:DisplacementY",{value:e})},Font:function(e){var t=this.createElementNSPlus("sld:Font");return e.fontFamily&&this.writeNode("CssParameter",{symbolizer:e,key:"fontFamily"},t),e.fontSize&&this.writeNode("CssParameter",{symbolizer:e,key:"fontSize"},t),e.fontWeight&&this.writeNode("CssParameter",{symbolizer:e,key:"fontWeight"},t),e.fontStyle&&this.writeNode("CssParameter",{symbolizer:e,key:"fontStyle"},t),t},Label:function(e){return this.writers.sld._OGCExpression.call(this,"sld:Label",e)},Halo:function(e){var t=this.createElementNSPlus("sld:Halo");return e.haloRadius&&this.writeNode("Radius",e.haloRadius,t),(e.haloColor||e.haloOpacity)&&this.writeNode("Fill",{fillColor:e.haloColor,fillOpacity:e.haloOpacity},t),t},Radius:function(e){return this.createElementNSPlus("sld:Radius",{value:e})},RasterSymbolizer:function(e){var t=this.createElementNSPlus("sld:RasterSymbolizer");return e.geometry&&this.writeNode("Geometry",e.geometry,t),e.opacity&&this.writeNode("Opacity",e.opacity,t),e.colorMap&&this.writeNode("ColorMap",e.colorMap,t),t},Geometry:function(e){var t=this.createElementNSPlus("sld:Geometry");return e.property&&this.writeNode("ogc:PropertyName",e,t),t},ColorMap:function(e){for(var t=this.createElementNSPlus("sld:ColorMap"),i=0,s=e.length;i<s;++i)this.writeNode("ColorMapEntry",e[i],t);return t},ColorMapEntry:function(e){var t=this.createElementNSPlus("sld:ColorMapEntry");return t.setAttribute("color",e.color),void 0!==e.opacity&&t.setAttribute("opacity",parseFloat(e.opacity)),void 0!==e.quantity&&t.setAttribute("quantity",parseFloat(e.quantity)),void 0!==e.label&&t.setAttribute("label",e.label),t},PolygonSymbolizer:function(e){var t=this.createElementNSPlus("sld:PolygonSymbolizer");return!1!==e.fill&&this.writeNode("Fill",e,t),!1!==e.stroke&&this.writeNode("Stroke",e,t),t},Fill:function(e){var t=this.createElementNSPlus("sld:Fill");return e.fillColor&&this.writeNode("CssParameter",{symbolizer:e,key:"fillColor"},t),null!=e.fillOpacity&&this.writeNode("CssParameter",{symbolizer:e,key:"fillOpacity"},t),t},PointSymbolizer:function(e){var t=this.createElementNSPlus("sld:PointSymbolizer");return this.writeNode("Graphic",e,t),t},Graphic:function(e){var t=this.createElementNSPlus("sld:Graphic");return null!=e.externalGraphic?this.writeNode("ExternalGraphic",e,t):this.writeNode("Mark",e,t),null!=e.graphicOpacity&&this.writeNode("Opacity",e.graphicOpacity,t),null!=e.pointRadius?this.writeNode("Size",2*e.pointRadius,t):null!=e.graphicWidth&&this.writeNode("Size",e.graphicWidth,t),null!=e.rotation&&this.writeNode("Rotation",e.rotation,t),t},ExternalGraphic:function(e){var t=this.createElementNSPlus("sld:ExternalGraphic");return this.writeNode("OnlineResource",e.externalGraphic,t),e=e.graphicFormat||this.getGraphicFormat(e.externalGraphic),this.writeNode("Format",e,t),t},Mark:function(e){var t=this.createElementNSPlus("sld:Mark");return e.graphicName&&this.writeNode("WellKnownName",e.graphicName,t),!1!==e.fill&&this.writeNode("Fill",e,t),!1!==e.stroke&&this.writeNode("Stroke",e,t),t},WellKnownName:function(e){return this.createElementNSPlus("sld:WellKnownName",{value:e})},Opacity:function(e){return this.createElementNSPlus("sld:Opacity",{value:e})},Size:function(e){return this.writers.sld._OGCExpression.call(this,"sld:Size",e)},Rotation:function(e){return this.createElementNSPlus("sld:Rotation",{value:e})},OnlineResource:function(e){return this.createElementNSPlus("sld:OnlineResource",{attributes:{"xlink:type":"simple","xlink:href":e}})},Format:function(e){return this.createElementNSPlus("sld:Format",{value:e})}}},OpenLayers.Format.Filter.v1_0_0.prototype.writers),CLASS_NAME:"OpenLayers.Format.SLD.v1"}),OpenLayers.Layer.WMS=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{service:"WMS",version:"1.1.1",request:"GetMap",styles:"",format:"image/jpeg"},isBaseLayer:!0,encodeBBOX:!1,noMagic:!1,yx:{},initialize:function(e,t,i,s){var n=[];i=OpenLayers.Util.upperCaseObject(i),1.3<=parseFloat(i.VERSION)&&!i.EXCEPTIONS&&(i.EXCEPTIONS="INIMAGE"),n.push(e,t,i,s),OpenLayers.Layer.Grid.prototype.initialize.apply(this,n),OpenLayers.Util.applyDefaults(this.params,OpenLayers.Util.upperCaseObject(this.DEFAULT_PARAMS)),!this.noMagic&&this.params.TRANSPARENT&&"true"==this.params.TRANSPARENT.toString().toLowerCase()&&(null!=s&&s.isBaseLayer||(this.isBaseLayer=!1),"image/jpeg"==this.params.FORMAT&&(this.params.FORMAT=OpenLayers.Util.alphaHack()?"image/gif":"image/png"))},clone:function(e){return null==e&&(e=new OpenLayers.Layer.WMS(this.name,this.url,this.params,this.getOptions())),OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},reverseAxisOrder:function(){var e=this.projection.getCode();return 1.3<=parseFloat(this.params.VERSION)&&!!(this.yx[e]||OpenLayers.Projection.defaults[e]&&OpenLayers.Projection.defaults[e].yx)},getURL:function(e){e=this.adjustBounds(e);var t=this.getImageSize(),i={},s=this.reverseAxisOrder();return i.BBOX=this.encodeBBOX?e.toBBOX(null,s):e.toArray(s),i.WIDTH=t.w,i.HEIGHT=t.h,this.getFullRequestString(i)},mergeNewParams:function(e){return e=[OpenLayers.Util.upperCaseObject(e)],OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this,e)},getFullRequestString:function(e,t){var i=this.map.getProjectionObject(),i="none"==(i=(this.projection&&this.projection.equals(i)?this.projection:i).getCode())?null:i;return 1.3<=parseFloat(this.params.VERSION)?this.params.CRS=i:this.params.SRS=i,"boolean"==typeof this.params.TRANSPARENT&&(e.TRANSPARENT=this.params.TRANSPARENT?"TRUE":"FALSE"),OpenLayers.Layer.Grid.prototype.getFullRequestString.apply(this,arguments)},CLASS_NAME:"OpenLayers.Layer.WMS"}),OpenLayers.Layer.KaMap=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:!0,DEFAULT_PARAMS:{i:"jpeg",map:""},initialize:function(e,t,i,s){OpenLayers.Layer.Grid.prototype.initialize.apply(this,arguments),this.params=OpenLayers.Util.applyDefaults(this.params,this.DEFAULT_PARAMS)},getURL:function(e){e=this.adjustBounds(e);var t=this.map.getResolution(),i=Math.round(1e4*this.map.getScale())/1e4,s=Math.round(e.left/t);return e=-Math.round(e.top/t),this.getFullRequestString({t:e,l:s,s:i})},calculateGridLayout:function(e,t,i){return{tilelon:t=i*this.tileSize.w,tilelat:i*=this.tileSize.h,startcol:Math.floor(e.left/t)-this.buffer,startrow:Math.floor(e.top/i)+this.buffer}},getTileBoundsForGridIndex:function(e,t){this.getTileOrigin();var i=(n=this.gridLayout).tilelon,s=n.tilelat,t=(n.startcol+t)*i,n=(n.startrow-e)*s;return new OpenLayers.Bounds(t,n,t+i,n+s)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.KaMap(this.name,this.url,this.params,this.getOptions())),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e]),null!=this.tileSize&&(e.tileSize=this.tileSize.clone()),e.grid=[],e},getTileBounds:function(e){var t=(i=this.getResolution())*this.tileSize.w,i=i*this.tileSize.h,s=this.getLonLatFromViewPortPx(e);return e=t*Math.floor(s.lon/t),s=i*Math.floor(s.lat/i),new OpenLayers.Bounds(e,s,e+t,s+i)},CLASS_NAME:"OpenLayers.Layer.KaMap"}),OpenLayers.Format.WMC.v1_1_0=OpenLayers.Class(OpenLayers.Format.WMC.v1,{VERSION:"1.1.0",schemaLocation:"http://www.opengis.net/context http://schemas.opengis.net/context/1.1.0/context.xsd",initialize:function(e){OpenLayers.Format.WMC.v1.prototype.initialize.apply(this,[e])},read_sld_MinScaleDenominator:function(e,t){t=parseFloat(this.getChildValue(t));0<t&&(e.maxScale=t)},read_sld_MaxScaleDenominator:function(e,t){e.minScale=parseFloat(this.getChildValue(t))},read_wmc_SRS:function(e,t){"srs"in e||(e.srs={}),e.srs[this.getChildValue(t)]=!0},write_wmc_Layer:function(e){var t,i=OpenLayers.Format.WMC.v1.prototype.write_wmc_Layer.apply(this,[e]);if(e.maxScale&&((t=this.createElementNS(this.namespaces.sld,"sld:MinScaleDenominator")).appendChild(this.createTextNode(e.maxScale.toPrecision(16))),i.appendChild(t)),e.minScale&&((t=this.createElementNS(this.namespaces.sld,"sld:MaxScaleDenominator")).appendChild(this.createTextNode(e.minScale.toPrecision(16))),i.appendChild(t)),e.srs)for(var s in e.srs)i.appendChild(this.createElementDefaultNS("SRS",s));return i.appendChild(this.write_wmc_FormatList(e)),i.appendChild(this.write_wmc_StyleList(e)),e.dimensions&&i.appendChild(this.write_wmc_DimensionList(e)),i.appendChild(this.write_wmc_LayerExtension(e)),i},CLASS_NAME:"OpenLayers.Format.WMC.v1_1_0"}),OpenLayers.Format.XLS=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.1.0",stringifyOutput:!0,CLASS_NAME:"OpenLayers.Format.XLS"}),OpenLayers.Format.XLS.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{xls:"http://www.opengis.net/xls",gml:"http://www.opengis.net/gml",xsi:"http://www.w3.org/2001/XMLSchema-instance"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},xy:!0,defaultPrefix:"xls",schemaLocation:null,read:function(e,t){OpenLayers.Util.applyDefaults(t,this.options);t={};return this.readChildNodes(e,t),t},readers:{xls:{XLS:function(e,t){t.version=e.getAttribute("version"),this.readChildNodes(e,t)},Response:function(e,t){this.readChildNodes(e,t)},GeocodeResponse:function(e,t){t.responseLists=[],this.readChildNodes(e,t)},GeocodeResponseList:function(e,t){var i={features:[],numberOfGeocodedAddresses:parseInt(e.getAttribute("numberOfGeocodedAddresses"))};t.responseLists.push(i),this.readChildNodes(e,i)},GeocodedAddress:function(e,t){var i=new OpenLayers.Feature.Vector;t.features.push(i),this.readChildNodes(e,i),i.geometry=i.components[0]},GeocodeMatchCode:function(e,t){t.attributes.matchCode={accuracy:parseFloat(e.getAttribute("accuracy")),matchType:e.getAttribute("matchType")}},Address:function(e,t){var i={countryCode:e.getAttribute("countryCode"),addressee:e.getAttribute("addressee"),street:[],place:[]};t.attributes.address=i,this.readChildNodes(e,i)},freeFormAddress:function(e,t){t.freeFormAddress=this.getChildValue(e)},StreetAddress:function(e,t){this.readChildNodes(e,t)},Building:function(e,t){t.building={number:e.getAttribute("number"),subdivision:e.getAttribute("subdivision"),buildingName:e.getAttribute("buildingName")}},Street:function(e,t){t.street.push(this.getChildValue(e))},Place:function(e,t){t.place[e.getAttribute("type")]=this.getChildValue(e)},PostalCode:function(e,t){t.postalCode=this.getChildValue(e)}},gml:OpenLayers.Format.GML.v3.prototype.readers.gml},write:function(e){return this.writers.xls.XLS.apply(this,[e])},writers:{xls:{XLS:function(e){var t=this.createElementNSPlus("xls:XLS",{attributes:{version:this.VERSION,"xsi:schemaLocation":this.schemaLocation}});return this.writeNode("RequestHeader",e.header,t),this.writeNode("Request",e,t),t},RequestHeader:function(e){return this.createElementNSPlus("xls:RequestHeader")},Request:function(e){var t=this.createElementNSPlus("xls:Request",{attributes:{methodName:"GeocodeRequest",requestID:e.requestID||"",version:this.VERSION}});return this.writeNode("GeocodeRequest",e.addresses,t),t},GeocodeRequest:function(e){for(var t=this.createElementNSPlus("xls:GeocodeRequest"),i=0,s=e.length;i<s;i++)this.writeNode("Address",e[i],t);return t},Address:function(e){var t=this.createElementNSPlus("xls:Address",{attributes:{countryCode:e.countryCode}});return e.freeFormAddress?this.writeNode("freeFormAddress",e.freeFormAddress,t):(e.street&&this.writeNode("StreetAddress",e,t),e.municipality&&this.writeNode("Municipality",e.municipality,t),e.countrySubdivision&&this.writeNode("CountrySubdivision",e.countrySubdivision,t),e.postalCode&&this.writeNode("PostalCode",e.postalCode,t)),t},freeFormAddress:function(e){return this.createElementNSPlus("freeFormAddress",{value:e})},StreetAddress:function(e){var t=this.createElementNSPlus("xls:StreetAddress");e.building&&this.writeNode(t,"Building",e.building),e=e.street;for(var i=0,s=(e=OpenLayers.Util.isArray(e)?e:[e]).length;i<s;i++)this.writeNode("Street",e[i],t);return t},Building:function(e){return this.createElementNSPlus("xls:Building",{attributes:{number:e.number,subdivision:e.subdivision,buildingName:e.buildingName}})},Street:function(e){return this.createElementNSPlus("xls:Street",{value:e})},Municipality:function(e){return this.createElementNSPlus("xls:Place",{attributes:{type:"Municipality"},value:e})},CountrySubdivision:function(e){return this.createElementNSPlus("xls:Place",{attributes:{type:"CountrySubdivision"},value:e})},PostalCode:function(e){return this.createElementNSPlus("xls:PostalCode",{value:e})}}},CLASS_NAME:"OpenLayers.Format.XLS.v1"}),OpenLayers.Format.XLS.v1_1_0=OpenLayers.Class(OpenLayers.Format.XLS.v1,{VERSION:"1.1",schemaLocation:"http://www.opengis.net/xls http://schemas.opengis.net/ols/1.1.0/LocationUtilityService.xsd",CLASS_NAME:"OpenLayers.Format.XLS.v1_1_0"}),OpenLayers.Format.XLS.v1_1=OpenLayers.Format.XLS.v1_1_0,OpenLayers.Renderer.SVG=OpenLayers.Class(OpenLayers.Renderer.Elements,{xmlns:"http://www.w3.org/2000/svg",xlinkns:"http://www.w3.org/1999/xlink",MAX_PIXEL:15e3,translationParameters:null,symbolMetrics:null,initialize:function(e){this.supported()&&(OpenLayers.Renderer.Elements.prototype.initialize.apply(this,arguments),this.translationParameters={x:0,y:0},this.symbolMetrics={})},supported:function(){return document.implementation&&(document.implementation.hasFeature("org.w3c.svg","1.0")||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#SVG","1.1")||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))},inValidRange:function(e,t,i){return e+=i?0:this.translationParameters.x,t+=i?0:this.translationParameters.y,e>=-this.MAX_PIXEL&&e<=this.MAX_PIXEL&&t>=-this.MAX_PIXEL&&t<=this.MAX_PIXEL},setExtent:function(e,t){var i=OpenLayers.Renderer.Elements.prototype.setExtent.apply(this,arguments),s=this.getResolution(),n=-e.left/s,s=e.top/s;return t?(this.left=n,this.top=s,this.rendererRoot.setAttributeNS(null,"viewBox","0 0 "+this.size.w+" "+this.size.h),this.translate(this.xOffset,0),!0):((n=this.translate(n-this.left+this.xOffset,s-this.top))||this.setExtent(e,!0),i&&n)},translate:function(e,t){return!!this.inValidRange(e,t,!0)&&(this.root.setAttributeNS(null,"transform",e||t?"translate("+e+","+t+")":""),this.translationParameters={x:e,y:t},!0)},setSize:function(e){OpenLayers.Renderer.prototype.setSize.apply(this,arguments),this.rendererRoot.setAttributeNS(null,"width",this.size.w),this.rendererRoot.setAttributeNS(null,"height",this.size.h)},getNodeType:function(e,t){var i=null;switch(e.CLASS_NAME){case"OpenLayers.Geometry.Point":i=t.externalGraphic?"image":this.isComplexSymbol(t.graphicName)?"svg":"circle";break;case"OpenLayers.Geometry.Rectangle":i="rect";break;case"OpenLayers.Geometry.LineString":i="polyline";break;case"OpenLayers.Geometry.LinearRing":i="polygon";break;case"OpenLayers.Geometry.Polygon":case"OpenLayers.Geometry.Curve":i="path"}return i},setStyle:function(e,t,i){t=t||e._style,i=i||e._options;(h=t.title||t.graphicTitle)&&(e.setAttributeNS(null,"title",h),0<(l=e.getElementsByTagName("title")).length?l[0].firstChild.textContent=h:((l=this.nodeFactory(null,"title")).textContent=h,e.appendChild(l)));var s,n,r,a,o,l=parseFloat(e.getAttributeNS(null,"r")),h=1;return"OpenLayers.Geometry.Point"==e._geometryClass&&l&&(e.style.visibility="",!1===t.graphic?e.style.visibility="hidden":t.externalGraphic?(o=this.getPosition(e),t.graphicWidth&&t.graphicHeight&&e.setAttributeNS(null,"preserveAspectRatio","none"),l=t.graphicWidth||t.graphicHeight,r=t.graphicHeight||t.graphicWidth,l=l||2*t.pointRadius,r=r||2*t.pointRadius,s=null!=t.graphicYOffset?t.graphicYOffset:-.5*r,n=t.graphicOpacity||t.fillOpacity,e.setAttributeNS(null,"x",(o.x+(null!=t.graphicXOffset?t.graphicXOffset:-.5*l)).toFixed()),e.setAttributeNS(null,"y",(o.y+s).toFixed()),e.setAttributeNS(null,"width",l),e.setAttributeNS(null,"height",r),e.setAttributeNS(this.xlinkns,"xlink:href",t.externalGraphic),e.setAttributeNS(null,"style","opacity: "+n),e.onclick=OpenLayers.Event.preventDefault):this.isComplexSymbol(t.graphicName)?(r=2*(l=3*t.pointRadius),a=this.importSymbol(t.graphicName),o=this.getPosition(e),h=3*this.symbolMetrics[a.id][0]/r,s=e.parentNode,n=e.nextSibling,s&&s.removeChild(e),e.firstChild&&e.removeChild(e.firstChild),e.appendChild(a.firstChild.cloneNode(!0)),e.setAttributeNS(null,"viewBox",a.getAttributeNS(null,"viewBox")),e.setAttributeNS(null,"width",r),e.setAttributeNS(null,"height",r),e.setAttributeNS(null,"x",o.x-l),e.setAttributeNS(null,"y",o.y-l),n?s.insertBefore(e,n):s&&s.appendChild(e)):e.setAttributeNS(null,"r",t.pointRadius),void 0===(l=t.rotation)&&void 0===e._rotation||!o||(e._rotation=l,l|=0,"svg"!==e.nodeName?e.setAttributeNS(null,"transform","rotate("+l+" "+o.x+" "+o.y+")"):(o=this.symbolMetrics[a.id],e.firstChild.setAttributeNS(null,"transform","rotate("+l+" "+o[1]+" "+o[2]+")")))),i.isFilled?(e.setAttributeNS(null,"fill",t.fillColor),e.setAttributeNS(null,"fill-opacity",t.fillOpacity)):e.setAttributeNS(null,"fill","none"),i.isStroked?(e.setAttributeNS(null,"stroke",t.strokeColor),e.setAttributeNS(null,"stroke-opacity",t.strokeOpacity),e.setAttributeNS(null,"stroke-width",t.strokeWidth*h),e.setAttributeNS(null,"stroke-linecap",t.strokeLinecap||"round"),e.setAttributeNS(null,"stroke-linejoin","round"),t.strokeDashstyle&&e.setAttributeNS(null,"stroke-dasharray",this.dashStyle(t,h))):e.setAttributeNS(null,"stroke","none"),t.pointerEvents&&e.setAttributeNS(null,"pointer-events",t.pointerEvents),null!=t.cursor&&e.setAttributeNS(null,"cursor",t.cursor),e},dashStyle:function(e,t){var i=e.strokeWidth*t,s=e.strokeDashstyle;switch(s){case"solid":return"none";case"dot":return[1,4*i].join();case"dash":return[4*i,4*i].join();case"dashdot":return[4*i,4*i,1,4*i].join();case"longdash":return[8*i,4*i].join();case"longdashdot":return[8*i,4*i,1,4*i].join();default:return OpenLayers.String.trim(s).replace(/\s+/g,",")}},createNode:function(e,t){e=document.createElementNS(this.xmlns,e);return t&&e.setAttributeNS(null,"id",t),e},nodeTypeCompare:function(e,t){return t==e.nodeName},createRenderRoot:function(){var e=this.nodeFactory(this.container.id+"_svgRoot","svg");return e.style.display="block",e},createRoot:function(e){return this.nodeFactory(this.container.id+e,"g")},createDefs:function(){var e=this.nodeFactory(this.container.id+"_defs","defs");return this.rendererRoot.appendChild(e),e},drawPoint:function(e,t){return this.drawCircle(e,t,1)},drawCircle:function(e,t,i){var s=this.getResolution(),n=(t.x-this.featureDx)/s+this.left;return t=this.top-t.y/s,!!this.inValidRange(n,t)&&(e.setAttributeNS(null,"cx",n),e.setAttributeNS(null,"cy",t),e.setAttributeNS(null,"r",i),e)},drawLineString:function(e,t){t=this.getComponentsString(t.components);return!!t.path&&(e.setAttributeNS(null,"points",t.path),t.complete?e:null)},drawLinearRing:function(e,t){t=this.getComponentsString(t.components);return!!t.path&&(e.setAttributeNS(null,"points",t.path),t.complete?e:null)},drawPolygon:function(e,t){for(var i,s,n="",r=!0,a=!0,o=0,l=t.components.length;o<l;o++)n+=" M",(s=(i=this.getComponentsString(t.components[o].components," ")).path)?(n+=" "+s,a=i.complete&&a):r=!1;return!!r&&(e.setAttributeNS(null,"d",n+" z"),e.setAttributeNS(null,"fill-rule","evenodd"),a?e:null)},drawRectangle:function(e,t){var i=this.getResolution(),s=(t.x-this.featureDx)/i+this.left,n=this.top-t.y/i;return!!this.inValidRange(s,n)&&(e.setAttributeNS(null,"x",s),e.setAttributeNS(null,"y",n),e.setAttributeNS(null,"width",t.width/i),e.setAttributeNS(null,"height",t.height/i),e)},drawText:function(e,t,i){(a=!!t.labelOutlineWidth)&&((n=OpenLayers.Util.extend({},t)).fontColor=n.labelOutlineColor,n.fontStrokeColor=n.labelOutlineColor,n.fontStrokeWidth=t.labelOutlineWidth,t.labelOutlineOpacity&&(n.fontOpacity=t.labelOutlineOpacity),delete n.labelOutlineWidth,this.drawText(e,n,i));var s=this.getResolution(),n=(i.x-this.featureDx)/s+this.left,r=i.y/s-this.top,a=a?this.LABEL_OUTLINE_SUFFIX:this.LABEL_ID_SUFFIX;(s=this.nodeFactory(e+a,"text")).setAttributeNS(null,"x",n),s.setAttributeNS(null,"y",-r),t.fontColor&&s.setAttributeNS(null,"fill",t.fontColor),t.fontStrokeColor&&s.setAttributeNS(null,"stroke",t.fontStrokeColor),t.fontStrokeWidth&&s.setAttributeNS(null,"stroke-width",t.fontStrokeWidth),t.fontOpacity&&s.setAttributeNS(null,"opacity",t.fontOpacity),t.fontFamily&&s.setAttributeNS(null,"font-family",t.fontFamily),t.fontSize&&s.setAttributeNS(null,"font-size",t.fontSize),t.fontWeight&&s.setAttributeNS(null,"font-weight",t.fontWeight),t.fontStyle&&s.setAttributeNS(null,"font-style",t.fontStyle),!0===t.labelSelect?(s.setAttributeNS(null,"pointer-events","visible"),s._featureId=e):s.setAttributeNS(null,"pointer-events","none"),r=t.labelAlign||OpenLayers.Renderer.defaultSymbolizer.labelAlign,s.setAttributeNS(null,"text-anchor",OpenLayers.Renderer.SVG.LABEL_ALIGN[r[0]]||"middle"),!0===OpenLayers.IS_GECKO&&s.setAttributeNS(null,"dominant-baseline",OpenLayers.Renderer.SVG.LABEL_ALIGN[r[1]]||"central");for(var o=t.label.split("\n"),l=o.length;s.childNodes.length>l;)s.removeChild(s.lastChild);for(var h=0;h<l;h++){var p,u=this.nodeFactory(e+a+"_tspan_"+h,"tspan");!0===t.labelSelect&&(u._featureId=e,u._geometry=i,u._geometryClass=i.CLASS_NAME),!1===OpenLayers.IS_GECKO&&u.setAttributeNS(null,"baseline-shift",OpenLayers.Renderer.SVG.LABEL_VSHIFT[r[1]]||"-35%"),u.setAttribute("x",n),0==h?(null==(p=OpenLayers.Renderer.SVG.LABEL_VFACTOR[r[1]])&&(p=-.5),u.setAttribute("dy",p*(l-1)+"em")):u.setAttribute("dy","1em"),u.textContent=""===o[h]?" ":o[h],u.parentNode||s.appendChild(u)}s.parentNode||this.textRoot.appendChild(s)},getComponentsString:function(e,t){for(var i,s=[],n=!0,r=e.length,a=[],o=0;o<r;o++)i=e[o],s.push(i),(i=this.getShortString(i))?a.push(i):(0<o&&this.getShortString(e[o-1])&&a.push(this.clipLine(e[o],e[o-1])),o<r-1&&this.getShortString(e[o+1])&&a.push(this.clipLine(e[o],e[o+1])),n=!1);return{path:a.join(t||","),complete:n}},clipLine:function(e,t){if(t.equals(e))return"";var i,s=this.getResolution(),n=this.MAX_PIXEL-this.translationParameters.x,r=this.MAX_PIXEL-this.translationParameters.y,a=(t.x-this.featureDx)/s+this.left,t=this.top-t.y/s,o=(e.x-this.featureDx)/s+this.left,s=this.top-e.y/s;return(o<-n||n<o)&&(i=(s-t)/(o-a),s=t+((o=o<0?-n:n)-a)*i),(s<-r||r<s)&&(i=(o-a)/(s-t),o=a+((s=s<0?-r:r)-t)*i),o+","+s},getShortString:function(e){var t=this.getResolution(),i=(e.x-this.featureDx)/t+this.left;return e=this.top-e.y/t,!!this.inValidRange(i,e)&&i+","+e},getPosition:function(e){return{x:parseFloat(e.getAttributeNS(null,"cx")),y:parseFloat(e.getAttributeNS(null,"cy"))}},importSymbol:function(e){this.defs||(this.defs=this.createDefs());var t=this.container.id+"-"+e;if(null!=(a=document.getElementById(t)))return a;var i=OpenLayers.Renderer.symbol[e];if(!i)throw Error(e+" is not a valid symbol name");e=this.nodeFactory(t,"symbol");var s=this.nodeFactory(null,"polygon");e.appendChild(s);for(var n,r,a=new OpenLayers.Bounds(Number.MAX_VALUE,Number.MAX_VALUE,0,0),o=[],l=0;l<i.length;l+=2)n=i[l],r=i[l+1],a.left=Math.min(a.left,n),a.bottom=Math.min(a.bottom,r),a.right=Math.max(a.right,n),a.top=Math.max(a.top,r),o.push(n,",",r);return s.setAttributeNS(null,"points",o.join(" ")),i=a.getWidth(),s=a.getHeight(),e.setAttributeNS(null,"viewBox",[a.left-i,a.bottom-s,3*i,3*s].join(" ")),this.symbolMetrics[t]=[Math.max(i,s),a.getCenterLonLat().lon,a.getCenterLonLat().lat],this.defs.appendChild(e),e},getFeatureIdFromEvent:function(e){var t=OpenLayers.Renderer.Elements.prototype.getFeatureIdFromEvent.apply(this,arguments);return t=t?t:(t=e.target).parentNode&&t!=this.rendererRoot?t.parentNode._featureId:void 0},CLASS_NAME:"OpenLayers.Renderer.SVG"}),OpenLayers.Renderer.SVG.LABEL_ALIGN={l:"start",r:"end",b:"bottom",t:"hanging"},OpenLayers.Renderer.SVG.LABEL_VSHIFT={t:"-70%",b:"0"},OpenLayers.Renderer.SVG.LABEL_VFACTOR={t:0,b:-1},OpenLayers.Renderer.SVG.preventDefault=function(e){OpenLayers.Event.preventDefault(e)},OpenLayers.Format.SLD.v1_0_0=OpenLayers.Class(OpenLayers.Format.SLD.v1,{VERSION:"1.0.0",schemaLocation:"http://www.opengis.net/sld http://schemas.opengis.net/sld/1.0.0/StyledLayerDescriptor.xsd",CLASS_NAME:"OpenLayers.Format.SLD.v1_0_0"}),OpenLayers.Format.OWSContext=OpenLayers.Class(OpenLayers.Format.Context,{defaultVersion:"0.3.1",getVersion:function(e,t){var i=OpenLayers.Format.XML.VersionedOGC.prototype.getVersion.apply(this,arguments);return i="0.3.0"===i?this.defaultVersion:i},toContext:function(e){var t={};return"OpenLayers.Map"==e.CLASS_NAME&&(t.bounds=e.getExtent(),t.maxExtent=e.maxExtent,t.projection=e.projection,t.size=e.getSize(),t.layers=e.layers),t},CLASS_NAME:"OpenLayers.Format.OWSContext"}),OpenLayers.Format.OWSContext.v0_3_1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{owc:"http://www.opengis.net/ows-context",gml:"http://www.opengis.net/gml",kml:"http://www.opengis.net/kml/2.2",ogc:"http://www.opengis.net/ogc",ows:"http://www.opengis.net/ows",sld:"http://www.opengis.net/sld",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},VERSION:"0.3.1",schemaLocation:"http://www.opengis.net/ows-context http://www.ogcnetwork.net/schemas/owc/0.3.1/owsContext.xsd",defaultPrefix:"owc",extractAttributes:!0,xy:!0,regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},featureNS:"http://mapserver.gis.umn.edu/mapserver",featureType:"vector",geometryName:"geometry",nestingLayerLookup:null,initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e]),OpenLayers.Format.GML.v2.prototype.setGeometryTypes.call(this)},setNestingPath:function(e){if(e.layersContext)for(var t=0,i=e.layersContext.length;t<i;t++){var s=e.layersContext[t],n=[],r=e.title||"";e.metadata&&e.metadata.nestingPath&&(n=e.metadata.nestingPath.slice()),""!=r&&n.push(r),s.metadata.nestingPath=n,s.layersContext&&this.setNestingPath(s)}},decomposeNestingPath:function(e){var t=[];if(OpenLayers.Util.isArray(e)){for(e=e.slice();0<e.length;)t.push(e.slice()),e.pop();t.reverse()}return t},read:function(e){(e="string"==typeof e?OpenLayers.Format.XML.prototype.read.apply(this,[e]):e)&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),this.setNestingPath({layersContext:t.layersContext}),this.processLayer(e=[],t),delete t.layersContext,t.layersContext=e,t},processLayer:function(e,t){if(t.layersContext)for(var i=0,s=t.layersContext.length;i<s;i++){var n=t.layersContext[i];e.push(n),n.layersContext&&this.processLayer(e,n)}},write:function(e,t){this.nestingLayerLookup={},OpenLayers.Util.applyDefaults(t=t||{},e);e=this.writeNode("OWSContext",t);return this.nestingLayerLookup=null,this.setAttributeNS(e,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[e])},readers:{kml:{Document:function(e,t){t.features=new OpenLayers.Format.KML({kmlns:this.namespaces.kml,extractStyles:!0}).read(e)}},owc:{OWSContext:function(e,t){this.readChildNodes(e,t)},General:function(e,t){this.readChildNodes(e,t)},ResourceList:function(e,t){this.readChildNodes(e,t)},Layer:function(e,t){var i={metadata:{},visibility:"1"!=e.getAttribute("hidden"),queryable:"1"==e.getAttribute("queryable"),opacity:null!=e.getAttribute("opacity")?parseFloat(e.getAttribute("opacity")):null,name:e.getAttribute("name"),categoryLayer:null==e.getAttribute("name"),formats:[],styles:[]};t.layersContext||(t.layersContext=[]),t.layersContext.push(i),this.readChildNodes(e,i)},InlineGeometry:function(e,t){t.features=[];var i,s=this.getElementsByTagNameNS(e,this.namespaces.gml,"featureMember");(i=1<=s.length?s[0]:i)&&i.firstChild&&(s=i.firstChild.nextSibling||i.firstChild,this.setNamespace("feature",s.namespaceURI),this.featureType=s.localName||s.nodeName.split(":").pop(),this.readChildNodes(e,t))},Server:function(e,t){(t.service||t.version)&&t.service==OpenLayers.Format.Context.serviceTypes.WMS||(t.service=e.getAttribute("service"),t.version=e.getAttribute("version"),this.readChildNodes(e,t))},Name:function(e,t){t.name=this.getChildValue(e),this.readChildNodes(e,t)},Title:function(e,t){t.title=this.getChildValue(e),this.readChildNodes(e,t)},StyleList:function(e,t){this.readChildNodes(e,t.styles)},Style:function(e,t){var i={};t.push(i),this.readChildNodes(e,i)},LegendURL:function(e,t){var i={};t.legend=i,this.readChildNodes(e,i)},OnlineResource:function(e,t){t.url=this.getAttributeNS(e,this.namespaces.xlink,"href"),this.readChildNodes(e,t)}},ows:OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows,gml:OpenLayers.Format.GML.v2.prototype.readers.gml,sld:OpenLayers.Format.SLD.v1_0_0.prototype.readers.sld,feature:OpenLayers.Format.GML.v2.prototype.readers.feature},writers:{owc:{OWSContext:function(e){var t=this.createElementNSPlus("OWSContext",{attributes:{version:this.VERSION,id:e.id||OpenLayers.Util.createUniqueID("OpenLayers_OWSContext_")}});return this.writeNode("General",e,t),this.writeNode("ResourceList",e,t),t},General:function(e){var t=this.createElementNSPlus("General");return this.writeNode("ows:BoundingBox",e,t),this.writeNode("ows:Title",e.title||"OpenLayers OWSContext",t),t},ResourceList:function(e){for(var t=this.createElementNSPlus("ResourceList"),i=0,s=e.layers.length;i<s;i++){var n=e.layers[i],r=this.decomposeNestingPath(n.metadata.nestingPath);this.writeNode("_Layer",{layer:n,subPaths:r},t)}return t},Server:function(e){var t=this.createElementNSPlus("Server",{attributes:{version:e.version,service:e.service}});return this.writeNode("OnlineResource",e,t),t},OnlineResource:function(e){return this.createElementNSPlus("OnlineResource",{attributes:{"xlink:href":e.url}})},InlineGeometry:function(e){var t=this.createElementNSPlus("InlineGeometry");null!==(i=e.getDataExtent())&&this.writeNode("gml:boundedBy",i,t);for(var i=0,s=e.features.length;i<s;i++)this.writeNode("gml:featureMember",e.features[i],t);return t},StyleList:function(e){for(var t=this.createElementNSPlus("StyleList"),i=0,s=e.length;i<s;i++)this.writeNode("Style",e[i],t);return t},Style:function(e){var t=this.createElementNSPlus("Style");return this.writeNode("Name",e,t),this.writeNode("Title",e,t),e.legend&&this.writeNode("LegendURL",e,t),t},Name:function(e){return this.createElementNSPlus("Name",{value:e.name})},Title:function(e){return this.createElementNSPlus("Title",{value:e.title})},LegendURL:function(e){var t=this.createElementNSPlus("LegendURL");return this.writeNode("OnlineResource",e.legend,t),t},_WMS:function(e){var t=this.createElementNSPlus("Layer",{attributes:{name:e.params.LAYERS,queryable:e.queryable?"1":"0",hidden:e.visibility?"0":"1",opacity:e.hasOwnProperty("opacity")?e.opacity:null}});return this.writeNode("ows:Title",e.name,t),this.writeNode("ows:OutputFormat",e.params.FORMAT,t),this.writeNode("Server",{service:OpenLayers.Format.Context.serviceTypes.WMS,version:e.params.VERSION,url:e.url},t),e.metadata.styles&&0<e.metadata.styles.length&&this.writeNode("StyleList",e.metadata.styles,t),t},_Layer:function(e){var t=e.layer,i=e.subPaths,s=null;return 0<i.length?(i=(t=i[0].join("/")).lastIndexOf("/"),s=this.nestingLayerLookup[t],i=0<i?t.substring(i+1,t.length):t,s||(s=this.createElementNSPlus("Layer"),this.writeNode("ows:Title",i,s),this.nestingLayerLookup[t]=s),e.subPaths.shift(),this.writeNode("_Layer",e,s)):(t instanceof OpenLayers.Layer.WMS?s=this.writeNode("_WMS",t):t instanceof OpenLayers.Layer.Vector&&(t.protocol instanceof OpenLayers.Protocol.WFS.v1?s=this.writeNode("_WFS",t):t.protocol instanceof OpenLayers.Protocol.HTTP?t.protocol.format instanceof OpenLayers.Format.GML?(t.protocol.format.version="2.1.2",s=this.writeNode("_GML",t)):t.protocol.format instanceof OpenLayers.Format.KML&&(t.protocol.format.version="2.2",s=this.writeNode("_KML",t)):(this.setNamespace("feature",this.featureNS),s=this.writeNode("_InlineGeometry",t))),t.options.maxScale&&this.writeNode("sld:MinScaleDenominator",t.options.maxScale,s),t.options.minScale&&this.writeNode("sld:MaxScaleDenominator",t.options.minScale,s),this.nestingLayerLookup[t.name]=s),s},_WFS:function(e){var t=this.createElementNSPlus("Layer",{attributes:{name:e.protocol.featurePrefix+":"+e.protocol.featureType,hidden:e.visibility?"0":"1"}});return this.writeNode("ows:Title",e.name,t),this.writeNode("Server",{service:OpenLayers.Format.Context.serviceTypes.WFS,version:e.protocol.version,url:e.protocol.url},t),t},_InlineGeometry:function(e){var t=this.createElementNSPlus("Layer",{attributes:{name:this.featureType,hidden:e.visibility?"0":"1"}});return this.writeNode("ows:Title",e.name,t),this.writeNode("InlineGeometry",e,t),t},_GML:function(e){var t=this.createElementNSPlus("Layer");return this.writeNode("ows:Title",e.name,t),this.writeNode("Server",{service:OpenLayers.Format.Context.serviceTypes.GML,url:e.protocol.url,version:e.protocol.format.version},t),t},_KML:function(e){var t=this.createElementNSPlus("Layer");return this.writeNode("ows:Title",e.name,t),this.writeNode("Server",{service:OpenLayers.Format.Context.serviceTypes.KML,version:e.protocol.format.version,url:e.protocol.url},t),t}},gml:OpenLayers.Util.applyDefaults({boundedBy:function(e){var t=this.createElementNSPlus("gml:boundedBy");return this.writeNode("gml:Box",e,t),t}},OpenLayers.Format.GML.v2.prototype.writers.gml),ows:OpenLayers.Format.OWSCommon.v1_0_0.prototype.writers.ows,sld:OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld,feature:OpenLayers.Format.GML.v2.prototype.writers.feature},CLASS_NAME:"OpenLayers.Format.OWSContext.v0_3_1"}),OpenLayers.Popup=OpenLayers.Class({events:null,id:"",lonlat:null,div:null,contentSize:null,size:null,contentHTML:null,backgroundColor:"",opacity:"",border:"",contentDiv:null,groupDiv:null,closeDiv:null,autoSize:!1,minSize:null,maxSize:null,displayClass:"olPopup",contentDisplayClass:"olPopupContent",padding:0,disableFirefoxOverflowHack:!1,fixPadding:function(){"number"==typeof this.padding&&(this.padding=new OpenLayers.Bounds(this.padding,this.padding,this.padding,this.padding))},panMapIfOutOfView:!1,keepInMap:!1,closeOnMove:!1,map:null,initialize:function(e,t,i,s,n,r){null==e&&(e=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")),this.id=e,this.lonlat=t,this.contentSize=null!=i?i:new OpenLayers.Size(OpenLayers.Popup.WIDTH,OpenLayers.Popup.HEIGHT),null!=s&&(this.contentHTML=s),this.backgroundColor=OpenLayers.Popup.COLOR,this.opacity=OpenLayers.Popup.OPACITY,this.border=OpenLayers.Popup.BORDER,this.div=OpenLayers.Util.createDiv(this.id,null,null,null,null,null,"hidden"),this.div.className=this.displayClass,this.groupDiv=OpenLayers.Util.createDiv(this.id+"_GroupDiv",null,null,null,"relative",null,"hidden"),e=this.div.id+"_contentDiv",this.contentDiv=OpenLayers.Util.createDiv(e,null,this.contentSize.clone(),null,"relative"),this.contentDiv.className=this.contentDisplayClass,this.groupDiv.appendChild(this.contentDiv),this.div.appendChild(this.groupDiv),n&&this.addCloseBox(r),this.registerEvents()},destroy:function(){this.border=this.opacity=this.backgroundColor=this.contentHTML=this.size=this.lonlat=this.id=null,this.closeOnMove&&this.map&&this.map.events.unregister("movestart",this,this.hide),this.events.destroy(),this.events=null,this.closeDiv&&(OpenLayers.Event.stopObservingElement(this.closeDiv),this.groupDiv.removeChild(this.closeDiv)),this.closeDiv=null,this.div.removeChild(this.groupDiv),(this.groupDiv=null)!=this.map&&this.map.removePopup(this),this.panMapIfOutOfView=this.padding=this.maxSize=this.minSize=this.autoSize=this.div=this.map=null},draw:function(e){return null==e&&null!=this.lonlat&&null!=this.map&&(e=this.map.getLayerPxFromLonLat(this.lonlat)),this.closeOnMove&&this.map.events.register("movestart",this,this.hide),this.disableFirefoxOverflowHack||"firefox"!=OpenLayers.BROWSER_NAME||(this.map.events.register("movestart",this,function(){var e=document.defaultView.getComputedStyle(this.contentDiv,null).getPropertyValue("overflow");"hidden"!=e&&(this.contentDiv._oldOverflow=e,this.contentDiv.style.overflow="hidden")}),this.map.events.register("moveend",this,function(){var e=this.contentDiv._oldOverflow;e&&(this.contentDiv.style.overflow=e,this.contentDiv._oldOverflow=null)})),this.moveTo(e),this.autoSize||this.size||this.setSize(this.contentSize),this.setBackgroundColor(),this.setOpacity(),this.setBorder(),this.setContentHTML(),this.panMapIfOutOfView&&this.panIntoView(),this.div},updatePosition:function(){var e;this.lonlat&&this.map&&((e=this.map.getLayerPxFromLonLat(this.lonlat))&&this.moveTo(e))},moveTo:function(e){null!=e&&null!=this.div&&(this.div.style.left=e.x+"px",this.div.style.top=e.y+"px")},visible:function(){return OpenLayers.Element.visible(this.div)},toggle:function(){this.visible()?this.hide():this.show()},show:function(){this.div.style.display="",this.panMapIfOutOfView&&this.panIntoView()},hide:function(){this.div.style.display="none"},setSize:function(e){this.size=e.clone();var t=this.getContentDivPadding(),i=t.left+t.right,s=t.top+t.bottom;this.fixPadding(),i+=this.padding.left+this.padding.right,s+=this.padding.top+this.padding.bottom,this.closeDiv&&(i+=parseInt(this.closeDiv.style.width)+t.right),this.size.w+=i,this.size.h+=s,"msie"==OpenLayers.BROWSER_NAME&&(this.contentSize.w+=t.left+t.right,this.contentSize.h+=t.bottom+t.top),null!=this.div&&(this.div.style.width=this.size.w+"px",this.div.style.height=this.size.h+"px"),null!=this.contentDiv&&(this.contentDiv.style.width=e.w+"px",this.contentDiv.style.height=e.h+"px")},updateSize:function(){var e="<div class='"+this.contentDisplayClass+"'>"+this.contentDiv.innerHTML+"</div>",t=this.map?this.map.div:document.body,i=OpenLayers.Util.getRenderedDimensions(e,null,{displayClass:this.displayClass,containerElement:t}),s=this.getSafeContentSize(i),n=null,n=s.equals(i)?i:(i={w:s.w<i.w?s.w:null,h:s.h<i.h?s.h:null}).w&&i.h?s:(e=OpenLayers.Util.getRenderedDimensions(e,i,{displayClass:this.contentDisplayClass,containerElement:t}),"hidden"!=OpenLayers.Element.getStyle(this.contentDiv,"overflow")&&e.equals(s)&&(s=OpenLayers.Util.getScrollbarWidth(),i.w?e.h+=s:e.w+=s),this.getSafeContentSize(e));this.setSize(n)},setBackgroundColor:function(e){null!=e&&(this.backgroundColor=e),null!=this.div&&(this.div.style.backgroundColor=this.backgroundColor)},setOpacity:function(e){null!=e&&(this.opacity=e),null!=this.div&&(this.div.style.opacity=this.opacity,this.div.style.filter="alpha(opacity="+100*this.opacity+")")},setBorder:function(e){null!=e&&(this.border=e),null!=this.div&&(this.div.style.border=this.border)},setContentHTML:function(e){null!=e&&(this.contentHTML=e),null!=this.contentDiv&&null!=this.contentHTML&&this.contentHTML!=this.contentDiv.innerHTML&&(this.contentDiv.innerHTML=this.contentHTML,this.autoSize&&(this.registerImageListeners(),this.updateSize()))},registerImageListeners:function(){for(var e=function(){null!==this.popup.id&&(this.popup.updateSize(),this.popup.visible()&&this.popup.panMapIfOutOfView&&this.popup.panIntoView(),OpenLayers.Event.stopObserving(this.img,"load",this.img._onImgLoad))},t=this.contentDiv.getElementsByTagName("img"),i=0,s=t.length;i<s;i++){var n=t[i];0!=n.width&&0!=n.height||(n._onImgLoad=OpenLayers.Function.bind(e,{popup:this,img:n}),OpenLayers.Event.observe(n,"load",n._onImgLoad))}},getSafeContentSize:function(e){e=e.clone();var t,i=this.getContentDivPadding(),s=i.left+i.right,n=i.top+i.bottom;if(this.fixPadding(),s+=this.padding.left+this.padding.right,n+=this.padding.top+this.padding.bottom,this.closeDiv&&(s+=(t=parseInt(this.closeDiv.style.width))+i.right),this.minSize&&(e.w=Math.max(e.w,this.minSize.w-s),e.h=Math.max(e.h,this.minSize.h-n)),this.maxSize&&(e.w=Math.min(e.w,this.maxSize.w-s),e.h=Math.min(e.h,this.maxSize.h-n)),this.map&&this.map.size){if(t=i=0,this.keepInMap&&!this.panMapIfOutOfView)switch(t=this.map.getPixelFromLonLat(this.lonlat),this.relativePosition){case"tr":i=t.x,t=this.map.size.h-t.y;break;case"tl":i=this.map.size.w-t.x,t=this.map.size.h-t.y;break;case"bl":i=this.map.size.w-t.x,t=t.y;break;case"br":i=t.x,t=t.y;break;default:i=t.x,t=this.map.size.h-t.y}n=this.map.size.h-this.map.paddingForPopups.top-this.map.paddingForPopups.bottom-n-t,e.w=Math.min(e.w,this.map.size.w-this.map.paddingForPopups.left-this.map.paddingForPopups.right-s-i),e.h=Math.min(e.h,n)}return e},getContentDivPadding:function(){var e=this._contentDivPadding;return e||(null==this.div.parentNode&&(this.div.style.display="none",document.body.appendChild(this.div)),this._contentDivPadding=e=new OpenLayers.Bounds(OpenLayers.Element.getStyle(this.contentDiv,"padding-left"),OpenLayers.Element.getStyle(this.contentDiv,"padding-bottom"),OpenLayers.Element.getStyle(this.contentDiv,"padding-right"),OpenLayers.Element.getStyle(this.contentDiv,"padding-top")),this.div.parentNode==document.body&&(document.body.removeChild(this.div),this.div.style.display="")),e},addCloseBox:function(e){this.closeDiv=OpenLayers.Util.createDiv(this.id+"_close",null,{w:17,h:17}),this.closeDiv.className="olPopupCloseBox";var t=this.getContentDivPadding();this.closeDiv.style.right=t.right+"px",this.closeDiv.style.top=t.top+"px",this.groupDiv.appendChild(this.closeDiv),OpenLayers.Event.observe(this.closeDiv,"touchend",OpenLayers.Function.bindAsEventListener(e=e||function(e){this.hide(),OpenLayers.Event.stop(e)},this)),OpenLayers.Event.observe(this.closeDiv,"click",OpenLayers.Function.bindAsEventListener(e,this))},panIntoView:function(){var e=this.map.getSize(),t=this.map.getViewPortPxFromLayerPx(new OpenLayers.Pixel(parseInt(this.div.style.left),parseInt(this.div.style.top))),i=t.clone();t.x<this.map.paddingForPopups.left?i.x=this.map.paddingForPopups.left:t.x+this.size.w>e.w-this.map.paddingForPopups.right&&(i.x=e.w-this.map.paddingForPopups.right-this.size.w),t.y<this.map.paddingForPopups.top?i.y=this.map.paddingForPopups.top:t.y+this.size.h>e.h-this.map.paddingForPopups.bottom&&(i.y=e.h-this.map.paddingForPopups.bottom-this.size.h),this.map.pan(t.x-i.x,t.y-i.y)},registerEvents:function(){this.events=new OpenLayers.Events(this,this.div,null,!0),this.events.on({mousedown:this.onmousedown,mousemove:this.onmousemove,mouseup:this.onmouseup,click:this.onclick,mouseout:this.onmouseout,dblclick:this.ondblclick,touchstart:function(e){OpenLayers.Event.stop(e,!0)},scope:this})},onmousedown:function(e){this.mousedown=!0,OpenLayers.Event.stop(e,!0)},onmousemove:function(e){this.mousedown&&OpenLayers.Event.stop(e,!0)},onmouseup:function(e){this.mousedown&&(this.mousedown=!1,OpenLayers.Event.stop(e,!0))},onclick:function(e){OpenLayers.Event.stop(e,!0)},onmouseout:function(e){this.mousedown=!1},ondblclick:function(e){OpenLayers.Event.stop(e,!0)},CLASS_NAME:"OpenLayers.Popup"}),OpenLayers.Popup.WIDTH=200,OpenLayers.Popup.HEIGHT=200,OpenLayers.Popup.COLOR="white",OpenLayers.Popup.OPACITY=1,OpenLayers.Popup.BORDER="0px",OpenLayers.Control.ScaleLine=OpenLayers.Class(OpenLayers.Control,{maxWidth:100,topOutUnits:"km",topInUnits:"m",bottomOutUnits:"mi",bottomInUnits:"ft",eTop:null,eBottom:null,geodesic:!1,draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),this.eTop||(this.eTop=document.createElement("div"),this.eTop.className=this.displayClass+"Top",this.div.appendChild(this.eTop),this.eTop.style.visibility=""==this.topOutUnits||""==this.topInUnits?"hidden":"visible",this.eBottom=document.createElement("div"),this.eBottom.className=this.displayClass+"Bottom",this.div.appendChild(this.eBottom),this.eBottom.style.visibility=""==this.bottomOutUnits||""==this.bottomInUnits?"hidden":"visible"),this.map.events.register("moveend",this,this.update),this.update(),this.div},getBarLen:function(e){var t=parseInt(Math.log(e)/Math.log(10)),t=Math.pow(10,t);return(5<(e=parseInt(e/t))?5:2<e?2:1)*t},update:function(){var e,t,i,s,n,r,a,o,l,h=this.map.getResolution();h&&(l=this.map.getUnits(),e=OpenLayers.INCHES_PER_UNIT,n=this.maxWidth*h*e[l],t=1,!0===this.geodesic&&(n*=t=(this.map.getGeodesicPixelSize().w||1e-6)*this.maxWidth/(n/e.km)),s=1e5<n?(i=this.topOutUnits,this.bottomOutUnits):(i=this.topInUnits,this.bottomInUnits),a=n/e[i],o=n/e[s],n=this.getBarLen(a),r=this.getBarLen(o),a=n/e[l]*e[i],o=r/e[l]*e[s],l=a/h/t,h=o/h/t,"visible"==this.eBottom.style.visibility&&(this.eBottom.style.width=Math.round(h)+"px",this.eBottom.innerHTML=r+" "+s),"visible"==this.eTop.style.visibility&&(this.eTop.style.width=Math.round(l)+"px",this.eTop.innerHTML=n+" "+i))},CLASS_NAME:"OpenLayers.Control.ScaleLine"}),OpenLayers.Icon=OpenLayers.Class({url:null,size:null,offset:null,calculateOffset:null,imageDiv:null,px:null,initialize:function(e,t,i,s){this.url=e,this.size=t||{w:20,h:20},this.offset=i||{x:-this.size.w/2,y:-this.size.h/2},this.calculateOffset=s,e=OpenLayers.Util.createUniqueID("OL_Icon_"),this.imageDiv=OpenLayers.Util.createAlphaImageDiv(e)},destroy:function(){this.erase(),OpenLayers.Event.stopObservingElement(this.imageDiv.firstChild),this.imageDiv.innerHTML="",this.imageDiv=null},clone:function(){return new OpenLayers.Icon(this.url,this.size,this.offset,this.calculateOffset)},setSize:function(e){null!=e&&(this.size=e),this.draw()},setUrl:function(e){null!=e&&(this.url=e),this.draw()},draw:function(e){return OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv,null,null,this.size,this.url,"absolute"),this.moveTo(e),this.imageDiv},erase:function(){null!=this.imageDiv&&null!=this.imageDiv.parentNode&&OpenLayers.Element.remove(this.imageDiv)},setOpacity:function(e){OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv,null,null,null,null,null,null,null,e)},moveTo:function(e){null!=e&&(this.px=e),null!=this.imageDiv&&(null==this.px?this.display(!1):(this.calculateOffset&&(this.offset=this.calculateOffset(this.size)),OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv,null,{x:this.px.x+this.offset.x,y:this.px.y+this.offset.y})))},display:function(e){this.imageDiv.style.display=e?"":"none"},isDrawn:function(){return this.imageDiv&&this.imageDiv.parentNode&&11!=this.imageDiv.parentNode.nodeType},CLASS_NAME:"OpenLayers.Icon"}),OpenLayers.Marker=OpenLayers.Class({icon:null,lonlat:null,events:null,map:null,initialize:function(e,t){this.lonlat=e;e=t||OpenLayers.Marker.defaultIcon();null==this.icon?this.icon=e:(this.icon.url=e.url,this.icon.size=e.size,this.icon.offset=e.offset,this.icon.calculateOffset=e.calculateOffset),this.events=new OpenLayers.Events(this,this.icon.imageDiv)},destroy:function(){this.erase(),this.map=null,this.events.destroy(),(this.events=null)!=this.icon&&(this.icon.destroy(),this.icon=null)},draw:function(e){return this.icon.draw(e)},erase:function(){null!=this.icon&&this.icon.erase()},moveTo:function(e){null!=e&&null!=this.icon&&this.icon.moveTo(e),this.lonlat=this.map.getLonLatFromLayerPx(e)},isDrawn:function(){return this.icon&&this.icon.isDrawn()},onScreen:function(){var e=!1;return e=this.map?this.map.getExtent().containsLonLat(this.lonlat):e},inflate:function(e){this.icon&&this.icon.setSize({w:this.icon.size.w*e,h:this.icon.size.h*e})},setOpacity:function(e){this.icon.setOpacity(e)},setUrl:function(e){this.icon.setUrl(e)},display:function(e){this.icon.display(e)},CLASS_NAME:"OpenLayers.Marker"}),OpenLayers.Marker.defaultIcon=function(){return new OpenLayers.Icon(OpenLayers.Util.getImageLocation("marker.png"),{w:21,h:25},{x:-10.5,y:-25})},OpenLayers.Layer.TileCache=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:!0,format:"image/png",serverResolutions:null,initialize:function(e,t,i,s){this.layername=i,OpenLayers.Layer.Grid.prototype.initialize.apply(this,[e,t,{},s]),this.extension=this.format.split("/")[1].toLowerCase(),this.extension="jpg"==this.extension?"jpeg":this.extension},clone:function(e){return null==e&&(e=new OpenLayers.Layer.TileCache(this.name,this.url,this.layername,this.getOptions())),OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getURL:function(e){var t=this.getServerResolution(),i=this.maxExtent,s=this.tileSize,n=Math.round((e.left-i.left)/(t*s.w));return e=Math.round((e.bottom-i.bottom)/(t*s.h)),t=null!=this.serverResolutions?OpenLayers.Util.indexOf(this.serverResolutions,t):this.map.getZoom(),n=[this.layername,OpenLayers.Number.zeroPad(t,2),OpenLayers.Number.zeroPad(parseInt(n/1e6),3),OpenLayers.Number.zeroPad(parseInt(n/1e3)%1e3,3),OpenLayers.Number.zeroPad(parseInt(n)%1e3,3),OpenLayers.Number.zeroPad(parseInt(e/1e6),3),OpenLayers.Number.zeroPad(parseInt(e/1e3)%1e3,3),OpenLayers.Number.zeroPad(parseInt(e)%1e3,3)+"."+this.extension].join("/"),t=this.url,(t="/"==(t=OpenLayers.Util.isArray(t)?this.selectUrl(n,t):t).charAt(t.length-1)?t:t+"/")+n},CLASS_NAME:"OpenLayers.Layer.TileCache"}),OpenLayers.Strategy.Paging=OpenLayers.Class(OpenLayers.Strategy,{features:null,length:10,num:null,paging:!1,activate:function(){var e=OpenLayers.Strategy.prototype.activate.call(this);return e&&this.layer.events.on({beforefeaturesadded:this.cacheFeatures,scope:this}),e},deactivate:function(){var e=OpenLayers.Strategy.prototype.deactivate.call(this);return e&&(this.clearCache(),this.layer.events.un({beforefeaturesadded:this.cacheFeatures,scope:this})),e},cacheFeatures:function(e){this.paging||(this.clearCache(),this.features=e.features,this.pageNext(e))},clearCache:function(){if(this.features)for(var e=0;e<this.features.length;++e)this.features[e].destroy();this.num=this.features=null},pageCount:function(){return Math.ceil((this.features?this.features.length:0)/this.length)},pageNum:function(){return this.num},pageLength:function(e){return e&&0<e&&(this.length=e),this.length},pageNext:function(e){var t=!1;return this.features&&(null===this.num&&(this.num=-1),t=this.page((this.num+1)*this.length,e)),t},pagePrevious:function(){var e=!1;return this.features&&(null===this.num&&(this.num=this.pageCount()),e=this.page((this.num-1)*this.length)),e},page:function(e,t){var i,s=!1;return this.features&&0<=e&&e<this.features.length&&((i=Math.floor(e/this.length))!=this.num&&(this.paging=!0,s=this.features.slice(e,e+this.length),this.layer.removeFeatures(this.layer.features),this.num=i,t&&t.features?t.features=s:this.layer.addFeatures(s),s=!(this.paging=!1))),s},CLASS_NAME:"OpenLayers.Strategy.Paging"}),OpenLayers.Control.DragFeature=OpenLayers.Class(OpenLayers.Control,{geometryTypes:null,onStart:function(e,t){},onDrag:function(e,t){},onComplete:function(e,t){},onEnter:function(e){},onLeave:function(e){},documentDrag:!1,layer:null,feature:null,dragCallbacks:{},featureCallbacks:{},lastPixel:null,initialize:function(e,t){OpenLayers.Control.prototype.initialize.apply(this,[t]),this.layer=e,this.handlers={drag:new OpenLayers.Handler.Drag(this,OpenLayers.Util.extend({down:this.downFeature,move:this.moveFeature,up:this.upFeature,out:this.cancel,done:this.doneDragging},this.dragCallbacks),{documentDrag:this.documentDrag}),feature:new OpenLayers.Handler.Feature(this,this.layer,OpenLayers.Util.extend({click:this.clickFeature,clickout:this.clickoutFeature,over:this.overFeature,out:this.outFeature},this.featureCallbacks),{geometryTypes:this.geometryTypes})}},clickFeature:function(e){this.handlers.feature.touch&&!this.over&&this.overFeature(e)&&(this.handlers.drag.dragstart(this.handlers.feature.evt),this.handlers.drag.stopDown=!1)},clickoutFeature:function(e){this.handlers.feature.touch&&this.over&&(this.outFeature(e),this.handlers.drag.stopDown=!0)},destroy:function(){this.layer=null,OpenLayers.Control.prototype.destroy.apply(this,[])},activate:function(){return this.handlers.feature.activate()&&OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){return this.handlers.drag.deactivate(),this.handlers.feature.deactivate(),this.feature=null,this.dragging=!1,this.lastPixel=null,OpenLayers.Element.removeClass(this.map.viewPortDiv,this.displayClass+"Over"),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},overFeature:function(e){var t=!1;return this.handlers.drag.dragging?this.over=this.feature.id==e.id:(this.feature=e,this.handlers.drag.activate(),this.over=t=!0,OpenLayers.Element.addClass(this.map.viewPortDiv,this.displayClass+"Over"),this.onEnter(e)),t},downFeature:function(e){this.lastPixel=e,this.onStart(this.feature,e)},moveFeature:function(e){var t=this.map.getResolution();this.feature.geometry.move(t*(e.x-this.lastPixel.x),t*(this.lastPixel.y-e.y)),this.layer.drawFeature(this.feature),this.lastPixel=e,this.onDrag(this.feature,e)},upFeature:function(e){this.over||this.handlers.drag.deactivate()},doneDragging:function(e){this.onComplete(this.feature,e)},outFeature:function(e){this.handlers.drag.dragging?this.feature.id==e.id&&(this.over=!1):(this.over=!1,this.handlers.drag.deactivate(),OpenLayers.Element.removeClass(this.map.viewPortDiv,this.displayClass+"Over"),this.onLeave(e),this.feature=null)},cancel:function(){this.handlers.drag.deactivate(),this.over=!1},setMap:function(e){this.handlers.drag.setMap(e),this.handlers.feature.setMap(e),OpenLayers.Control.prototype.setMap.apply(this,arguments)},CLASS_NAME:"OpenLayers.Control.DragFeature"}),OpenLayers.Control.TransformFeature=OpenLayers.Class(OpenLayers.Control,{geometryTypes:null,layer:null,preserveAspectRatio:!1,rotate:!0,feature:null,renderIntent:"temporary",rotationHandleSymbolizer:null,box:null,center:null,scale:1,ratio:1,rotation:0,handles:null,rotationHandles:null,dragControl:null,irregular:!1,initialize:function(e,t){OpenLayers.Control.prototype.initialize.apply(this,[t]),this.layer=e,this.rotationHandleSymbolizer||(this.rotationHandleSymbolizer={stroke:!1,pointRadius:10,fillOpacity:0,cursor:"pointer"}),this.createBox(),this.createControl()},activate:function(){var e=!1;return OpenLayers.Control.prototype.activate.apply(this,arguments)&&(this.dragControl.activate(),this.layer.addFeatures([this.box]),this.rotate&&this.layer.addFeatures(this.rotationHandles),this.layer.addFeatures(this.handles),e=!0),e},deactivate:function(){var e=!1;return OpenLayers.Control.prototype.deactivate.apply(this,arguments)&&(this.layer.removeFeatures(this.handles),this.rotate&&this.layer.removeFeatures(this.rotationHandles),this.layer.removeFeatures([this.box]),this.dragControl.deactivate(),e=!0),e},setMap:function(e){this.dragControl.setMap(e),OpenLayers.Control.prototype.setMap.apply(this,arguments)},setFeature:function(e,t){t=OpenLayers.Util.applyDefaults(t,{rotation:0,scale:1,ratio:1});var i=this.rotation,s=this.center;OpenLayers.Util.extend(this,t),!1!==this.events.triggerEvent("beforesetfeature",{feature:e})&&(this.feature=e,this.activate(),this._setfeature=!0,t=this.feature.geometry.getBounds(),this.box.move(t.getCenterLonLat()),this.box.geometry.rotate(-i,s),this._angle=0,i=this.rotation?((i=e.geometry.clone()).rotate(-this.rotation,this.center),(i=new OpenLayers.Feature.Vector(i.getBounds().toGeometry())).geometry.rotate(this.rotation,this.center),this.box.geometry.rotate(this.rotation,this.center),this.box.move(i.geometry.getBounds().getCenterLonLat()),i.geometry.components[0].components[0].getBounds().getCenterLonLat()):new OpenLayers.LonLat(t.left,t.bottom),this.handles[0].move(i),delete this._setfeature,this.events.triggerEvent("setfeature",{feature:e}))},unsetFeature:function(){this.active?this.deactivate():(this.feature=null,this.rotation=0,this.ratio=this.scale=1)},createBox:function(){var h=this;this.center=new OpenLayers.Geometry.Point(0,0),this.box=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString([new OpenLayers.Geometry.Point(-1,-1),new OpenLayers.Geometry.Point(0,-1),new OpenLayers.Geometry.Point(1,-1),new OpenLayers.Geometry.Point(1,0),new OpenLayers.Geometry.Point(1,1),new OpenLayers.Geometry.Point(0,1),new OpenLayers.Geometry.Point(-1,1),new OpenLayers.Geometry.Point(-1,0),new OpenLayers.Geometry.Point(-1,-1)]),null,"string"==typeof this.renderIntent?null:this.renderIntent),this.box.geometry.move=function(e,t){h._moving=!0,OpenLayers.Geometry.LineString.prototype.move.apply(this,arguments),h.center.move(e,t),delete h._moving};for(var e,t,i,s=function(e,t){OpenLayers.Geometry.Point.prototype.move.apply(this,arguments),this._rotationHandle&&this._rotationHandle.geometry.move(e,t),this._handle.geometry.move(e,t)},n=function(e,t,i){OpenLayers.Geometry.Point.prototype.resize.apply(this,arguments),this._rotationHandle&&this._rotationHandle.geometry.resize(e,t,i),this._handle.geometry.resize(e,t,i)},r=function(e,t){OpenLayers.Geometry.Point.prototype.rotate.apply(this,arguments),this._rotationHandle&&this._rotationHandle.geometry.rotate(e,t),this._handle.geometry.rotate(e,t)},a=function(e,t){var i,s,n,r,a,o=this.x,l=this.y;OpenLayers.Geometry.Point.prototype.move.call(this,e,t),h._moving||(e=h.dragControl.handlers.drag.evt,t=!(!h._setfeature&&h.preserveAspectRatio||e&&e.shiftKey),i=new OpenLayers.Geometry.Point(o,l),e=h.center,this.rotate(-h.rotation,e),i.rotate(-h.rotation,e),s=this.x-e.x,n=this.y-e.y,r=s-(this.x-i.x),a=n-(this.y-i.y),h.irregular&&!h._setfeature&&(s-=(this.x-i.x)/2,n-=(this.y-i.y)/2),this.x=o,this.y=l,i=1,t?(n=Math.abs(a)<1e-5?1:n/a,i=(Math.abs(r)<1e-5?1:s/r)/n):(r=Math.sqrt(r*r+a*a),n=Math.sqrt(s*s+n*n)/r),h._moving=!0,h.box.geometry.rotate(-h.rotation,e),delete h._moving,h.box.geometry.resize(n,e,i),h.box.geometry.rotate(h.rotation,e),h.transformFeature({scale:n,ratio:i}),h.irregular&&!h._setfeature&&((s=e.clone()).x+=Math.abs(o-e.x)<1e-5?0:this.x-o,s.y+=Math.abs(l-e.y)<1e-5?0:this.y-l,h.box.geometry.move(this.x-o,this.y-l),h.transformFeature({center:s})))},o=function(e,t){var i,s,n,r,a=this.x,o=this.y;OpenLayers.Geometry.Point.prototype.move.call(this,e,t),h._moving||(i=(i=h.dragControl.handlers.drag.evt)&&i.shiftKey?45:1,s=h.center,n=this.x-s.x,r=this.y-s.y,this.x=a,this.y=o,a=Math.atan2(r-t,n-e),a=Math.atan2(r,n)-a,a*=180/Math.PI,h._angle=(h._angle+a)%360,a=h.rotation%i,(Math.abs(h._angle)>=i||0!==a)&&(a=Math.round(h._angle/i)*i-a,h._angle=0,h.box.geometry.rotate(a,s),h.transformFeature({rotation:a})))},l=Array(8),p=Array(4),u="sw s se e ne n nw w".split(" "),c=0;c<8;++c)e=this.box.geometry.components[c],t=new OpenLayers.Feature.Vector(e.clone(),{role:u[c]+"-resize"},"string"==typeof this.renderIntent?null:this.renderIntent),0==c%2&&((i=new OpenLayers.Feature.Vector(e.clone(),{role:u[c]+"-rotate"},"string"==typeof this.rotationHandleSymbolizer?null:this.rotationHandleSymbolizer)).geometry.move=o,e._rotationHandle=i,p[c/2]=i),e.move=s,e.resize=n,e.rotate=r,t.geometry.move=a,e._handle=t,l[c]=t;this.rotationHandles=p,this.handles=l},createControl:function(){var n=this;this.dragControl=new OpenLayers.Control.DragFeature(this.layer,{documentDrag:!0,moveFeature:function(e){this.feature===n.feature&&(this.feature=n.box),OpenLayers.Control.DragFeature.prototype.moveFeature.apply(this,arguments)},onDrag:function(e,t){e===n.box&&n.transformFeature({center:n.center})},onStart:function(e,t){var i=!n.geometryTypes||-1!==OpenLayers.Util.indexOf(n.geometryTypes,e.geometry.CLASS_NAME),s=OpenLayers.Util.indexOf(n.handles,e)+OpenLayers.Util.indexOf(n.rotationHandles,e);e!==n.feature&&e!==n.box&&-2==s&&i&&n.setFeature(e)},onComplete:function(e,t){n.events.triggerEvent("transformcomplete",{feature:n.feature})}})},drawHandles:function(){for(var e=this.layer,t=0;t<8;++t)this.rotate&&0==t%2&&e.drawFeature(this.rotationHandles[t/2],this.rotationHandleSymbolizer),e.drawFeature(this.handles[t],this.renderIntent)},transformFeature:function(e){var t,i,s,n;this._setfeature||(this.scale*=e.scale||1,this.ratio*=e.ratio||1,t=this.rotation,this.rotation=(this.rotation+(e.rotation||0))%360,!1!==this.events.triggerEvent("beforetransform",e)&&(s=(i=this.feature).geometry,n=this.center,s.rotate(-t,n),e.scale||e.ratio?s.resize(e.scale,n,e.ratio):e.center&&i.move(e.center.getBounds().getCenterLonLat()),s.rotate(this.rotation,n),this.layer.drawFeature(i),i.toState(OpenLayers.State.UPDATE),this.events.triggerEvent("transform",e))),this.layer.drawFeature(this.box,this.renderIntent),this.drawHandles()},destroy:function(){for(var e,t=0;t<8;++t)(e=this.box.geometry.components[t])._handle.destroy(),e._handle=null,e._rotationHandle&&e._rotationHandle.destroy(),e._rotationHandle=null;this.rotationHandles=this.rotationHandleSymbolizer=this.handles=this.feature=this.center=null,this.box.destroy(),this.layer=this.box=null,this.dragControl.destroy(),this.dragControl=null,OpenLayers.Control.prototype.destroy.apply(this,arguments)},CLASS_NAME:"OpenLayers.Control.TransformFeature"}),OpenLayers.Handler.Box=OpenLayers.Class(OpenLayers.Handler,{dragHandler:null,boxDivClassName:"olHandlerBoxZoomBox",boxOffsets:null,initialize:function(e,t,i){OpenLayers.Handler.prototype.initialize.apply(this,arguments),this.dragHandler=new OpenLayers.Handler.Drag(this,{down:this.startBox,move:this.moveBox,out:this.removeBox,up:this.endBox},{keyMask:this.keyMask})},destroy:function(){OpenLayers.Handler.prototype.destroy.apply(this,arguments),this.dragHandler&&(this.dragHandler.destroy(),this.dragHandler=null)},setMap:function(e){OpenLayers.Handler.prototype.setMap.apply(this,arguments),this.dragHandler&&this.dragHandler.setMap(e)},startBox:function(e){this.callback("start",[]),this.zoomBox=OpenLayers.Util.createDiv("zoomBox",{x:-9999,y:-9999}),this.zoomBox.className=this.boxDivClassName,this.zoomBox.style.zIndex=this.map.Z_INDEX_BASE.Popup-1,this.map.viewPortDiv.appendChild(this.zoomBox),OpenLayers.Element.addClass(this.map.viewPortDiv,"olDrawBox")},moveBox:function(e){var t=this.dragHandler.start.x,i=this.dragHandler.start.y,s=Math.abs(t-e.x),n=Math.abs(i-e.y),r=this.getBoxOffsets();this.zoomBox.style.width=s+r.width+1+"px",this.zoomBox.style.height=n+r.height+1+"px",this.zoomBox.style.left=(e.x<t?t-s-r.left:t-r.left)+"px",this.zoomBox.style.top=(e.y<i?i-n-r.top:i-r.top)+"px"},endBox:function(e){var t,i,s,n;i=5<Math.abs(this.dragHandler.start.x-e.x)||5<Math.abs(this.dragHandler.start.y-e.y)?(t=this.dragHandler.start,i=Math.min(t.y,e.y),s=Math.max(t.y,e.y),n=Math.min(t.x,e.x),e=Math.max(t.x,e.x),new OpenLayers.Bounds(n,s,e,i)):this.dragHandler.start.clone(),this.removeBox(),this.callback("done",[i])},removeBox:function(){this.map.viewPortDiv.removeChild(this.zoomBox),this.boxOffsets=this.zoomBox=null,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDrawBox")},activate:function(){return!!OpenLayers.Handler.prototype.activate.apply(this,arguments)&&(this.dragHandler.activate(),!0)},deactivate:function(){return!!OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.dragHandler.deactivate()&&this.zoomBox&&this.removeBox(),!0)},getBoxOffsets:function(){var e,t,i,s,n;return this.boxOffsets||((t=document.createElement("div")).style.position="absolute",t.style.border="1px solid black",t.style.width="3px",document.body.appendChild(t),e=3==t.clientWidth,document.body.removeChild(t),t=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-left-width")),i=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-right-width")),s=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-top-width")),n=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-bottom-width")),this.boxOffsets={left:t,right:i,top:s,bottom:n,width:!1==e?t+i:0,height:!1==e?s+n:0}),this.boxOffsets},CLASS_NAME:"OpenLayers.Handler.Box"}),OpenLayers.Control.ZoomBox=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,out:!1,keyMask:null,alwaysZoom:!1,zoomOnClick:!0,draw:function(){this.handler=new OpenLayers.Handler.Box(this,{done:this.zoomBox},{keyMask:this.keyMask})},zoomBox:function(e){var t,i,s,n,r,a;e instanceof OpenLayers.Bounds?(t=e.getCenterPixel(),i=this.out?(i=Math.min(this.map.size.h/(e.bottom-e.top),this.map.size.w/(e.right-e.left)),s=this.map.getExtent(),r=(n=this.map.getLonLatFromPixel(t)).lon-s.getWidth()/2*i,e=n.lon+s.getWidth()/2*i,a=n.lat-s.getHeight()/2*i,i=n.lat+s.getHeight()/2*i,new OpenLayers.Bounds(r,a,e,i)):(r=this.map.getLonLatFromPixel({x:e.left,y:e.bottom}),e=this.map.getLonLatFromPixel({x:e.right,y:e.top}),new OpenLayers.Bounds(r.lon,r.lat,e.lon,e.lat)),r=this.map.getZoom(),e=(a=this.map.getSize()).w/2,a=a.h/2,i=this.map.getZoomForExtent(i),(s=this.map.getResolution())==(n=this.map.getResolutionForZoom(i))?this.map.setCenter(this.map.getLonLatFromPixel(t)):this.map.zoomTo(i,{x:(s*t.x-n*e)/(s-n),y:(s*t.y-n*a)/(s-n)}),r==this.map.getZoom()&&1==this.alwaysZoom&&this.map.zoomTo(r+(this.out?-1:1))):this.zoomOnClick&&(this.out?this.map.zoomTo(this.map.getZoom()-1,e):this.map.zoomTo(this.map.getZoom()+1,e))},CLASS_NAME:"OpenLayers.Control.ZoomBox"}),OpenLayers.Control.DragPan=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,panned:!1,interval:0,documentDrag:!1,kinetic:null,enableKinetic:!0,kineticInterval:10,draw:function(){var e;this.enableKinetic&&OpenLayers.Kinetic&&(e={interval:this.kineticInterval},"object"===_typeof(this.enableKinetic)&&(e=OpenLayers.Util.extend(e,this.enableKinetic)),this.kinetic=new OpenLayers.Kinetic(e)),this.handler=new OpenLayers.Handler.Drag(this,{move:this.panMap,done:this.panMapDone,down:this.panMapStart},{interval:this.interval,documentDrag:this.documentDrag})},panMapStart:function(){this.kinetic&&this.kinetic.begin()},panMap:function(e){this.kinetic&&this.kinetic.update(e),this.panned=!0,this.map.pan(this.handler.last.x-e.x,this.handler.last.y-e.y,{dragging:!0,animate:!1})},panMapDone:function(e){var t,s;this.panned&&(t=null,this.kinetic&&(t=this.kinetic.end(e)),this.map.pan(this.handler.last.x-e.x,this.handler.last.y-e.y,{dragging:!!t,animate:!1}),t&&(s=this).kinetic.move(t,function(e,t,i){s.map.pan(e,t,{dragging:!i,animate:!1})}),this.panned=!1)},CLASS_NAME:"OpenLayers.Control.DragPan"}),OpenLayers.Control.Navigation=OpenLayers.Class(OpenLayers.Control,{dragPan:null,dragPanOptions:null,pinchZoom:null,pinchZoomOptions:null,documentDrag:!1,zoomBox:null,zoomBoxEnabled:!0,zoomWheelEnabled:!0,mouseWheelOptions:null,handleRightClicks:!1,zoomBoxKeyMask:OpenLayers.Handler.MOD_SHIFT,autoActivate:!0,initialize:function(e){this.handlers={},OpenLayers.Control.prototype.initialize.apply(this,arguments)},destroy:function(){this.deactivate(),this.dragPan&&this.dragPan.destroy(),this.dragPan=null,this.zoomBox&&this.zoomBox.destroy(),this.zoomBox=null,this.pinchZoom&&this.pinchZoom.destroy(),this.pinchZoom=null,OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){return this.dragPan.activate(),this.zoomWheelEnabled&&this.handlers.wheel.activate(),this.handlers.click.activate(),this.zoomBoxEnabled&&this.zoomBox.activate(),this.pinchZoom&&this.pinchZoom.activate(),OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){return this.pinchZoom&&this.pinchZoom.deactivate(),this.zoomBox.deactivate(),this.dragPan.deactivate(),this.handlers.click.deactivate(),this.handlers.wheel.deactivate(),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},draw:function(){this.handleRightClicks&&(this.map.viewPortDiv.oncontextmenu=OpenLayers.Function.False),this.handlers.click=new OpenLayers.Handler.Click(this,{click:this.defaultClick,dblclick:this.defaultDblClick,dblrightclick:this.defaultDblRightClick},{double:!0,stopDouble:!0}),this.dragPan=new OpenLayers.Control.DragPan(OpenLayers.Util.extend({map:this.map,documentDrag:this.documentDrag},this.dragPanOptions)),this.zoomBox=new OpenLayers.Control.ZoomBox({map:this.map,keyMask:this.zoomBoxKeyMask}),this.dragPan.draw(),this.zoomBox.draw(),this.handlers.wheel=new OpenLayers.Handler.MouseWheel(this,{up:this.wheelUp,down:this.wheelDown},OpenLayers.Util.extend(this.map.fractionalZoom?{}:{cumulative:!1,interval:50,maxDelta:6},this.mouseWheelOptions)),OpenLayers.Control.PinchZoom&&(this.pinchZoom=new OpenLayers.Control.PinchZoom(OpenLayers.Util.extend({map:this.map},this.pinchZoomOptions)))},defaultClick:function(e){e.lastTouches&&2==e.lastTouches.length&&this.map.zoomOut()},defaultDblClick:function(e){this.map.zoomTo(this.map.zoom+1,e.xy)},defaultDblRightClick:function(e){this.map.zoomTo(this.map.zoom-1,e.xy)},wheelChange:function(e,t){this.map.fractionalZoom||(t=Math.round(t));var i=this.map.getZoom(),t=Math.max(i+t,0);(t=Math.min(t,this.map.getNumZoomLevels()))!==i&&this.map.zoomTo(t,e.xy)},wheelUp:function(e,t){this.wheelChange(e,t||1)},wheelDown:function(e,t){this.wheelChange(e,t||-1)},disableZoomBox:function(){this.zoomBoxEnabled=!1,this.zoomBox.deactivate()},enableZoomBox:function(){this.zoomBoxEnabled=!0,this.active&&this.zoomBox.activate()},disableZoomWheel:function(){this.zoomWheelEnabled=!1,this.handlers.wheel.deactivate()},enableZoomWheel:function(){this.zoomWheelEnabled=!0,this.active&&this.handlers.wheel.activate()},CLASS_NAME:"OpenLayers.Control.Navigation"}),OpenLayers.Control.DrawFeature=OpenLayers.Class(OpenLayers.Control,{layer:null,callbacks:null,multi:!1,featureAdded:function(){},initialize:function(e,t,i){OpenLayers.Control.prototype.initialize.apply(this,[i]),this.callbacks=OpenLayers.Util.extend({done:this.drawFeature,modify:function(e,t){this.layer.events.triggerEvent("sketchmodified",{vertex:e,feature:t})},create:function(e,t){this.layer.events.triggerEvent("sketchstarted",{vertex:e,feature:t})}},this.callbacks),this.layer=e,this.handlerOptions=this.handlerOptions||{},this.handlerOptions.layerOptions=OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions,{renderers:e.renderers,rendererOptions:e.rendererOptions}),"multi"in this.handlerOptions||(this.handlerOptions.multi=this.multi),(e=this.layer.styleMap&&this.layer.styleMap.styles.temporary)&&(this.handlerOptions.layerOptions=OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions,{styleMap:new OpenLayers.StyleMap({default:e})})),this.handler=new t(this,this.callbacks,this.handlerOptions)},drawFeature:function(e){e=new OpenLayers.Feature.Vector(e),!1!==this.layer.events.triggerEvent("sketchcomplete",{feature:e})&&(e.state=OpenLayers.State.INSERT,this.layer.addFeatures([e]),this.featureAdded(e),this.events.triggerEvent("featureadded",{feature:e}))},insertXY:function(e,t){this.handler&&this.handler.line&&this.handler.insertXY(e,t)},insertDeltaXY:function(e,t){this.handler&&this.handler.line&&this.handler.insertDeltaXY(e,t)},insertDirectionLength:function(e,t){this.handler&&this.handler.line&&this.handler.insertDirectionLength(e,t)},insertDeflectionLength:function(e,t){this.handler&&this.handler.line&&this.handler.insertDeflectionLength(e,t)},undo:function(){return this.handler.undo&&this.handler.undo()},redo:function(){return this.handler.redo&&this.handler.redo()},finishSketch:function(){this.handler.finishGeometry()},cancel:function(){this.handler.cancel()},CLASS_NAME:"OpenLayers.Control.DrawFeature"}),OpenLayers.Handler.Polygon=OpenLayers.Class(OpenLayers.Handler.Path,{holeModifier:null,drawingHole:!1,polygon:null,createFeature:function(e){e=this.layer.getLonLatFromViewPortPx(e),e=new OpenLayers.Geometry.Point(e.lon,e.lat),this.point=new OpenLayers.Feature.Vector(e),this.line=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LinearRing([this.point.geometry])),this.polygon=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon([this.line.geometry])),this.callback("create",[this.point.geometry,this.getSketch()]),this.point.geometry.clearBounds(),this.layer.addFeatures([this.polygon,this.point],{silent:!0})},addPoint:function(e){if(!this.drawingHole&&this.holeModifier&&this.evt&&this.evt[this.holeModifier])for(var t,i=this.point.geometry,s=this.control.layer.features,n=s.length-1;0<=n;--n)if(((t=s[n].geometry)instanceof OpenLayers.Geometry.Polygon||t instanceof OpenLayers.Geometry.MultiPolygon)&&t.intersects(i)){i=s[n],this.control.layer.removeFeatures([i],{silent:!0}),this.control.layer.events.registerPriority("sketchcomplete",this,this.finalizeInteriorRing),this.control.layer.events.registerPriority("sketchmodified",this,this.enforceTopology),i.geometry.addComponent(this.line.geometry),this.polygon=i,this.drawingHole=!0;break}OpenLayers.Handler.Path.prototype.addPoint.apply(this,arguments)},getCurrentPointIndex:function(){return this.line.geometry.components.length-2},enforceTopology:function(e){e=e.vertex;var t=this.line.geometry.components;this.polygon.geometry.intersects(e)||(t=t[t.length-3],e.x=t.x,e.y=t.y)},finishGeometry:function(){this.line.geometry.removeComponent(this.line.geometry.components[this.line.geometry.components.length-2]),this.removePoint(),this.finalize()},finalizeInteriorRing:function(){var e=this.line.geometry,t=0!==e.getArea();if(t){for(var i=this.polygon.geometry.components,s=i.length-2;0<=s;--s)if(e.intersects(i[s])){t=!1;break}if(t)e:for(s=i.length-2;0<s;--s)for(var n=i[s].components,r=0,a=n.length;r<a;++r)if(e.containsPoint(n[r])){t=!1;break e}}return t?this.polygon.state!==OpenLayers.State.INSERT&&(this.polygon.state=OpenLayers.State.UPDATE):this.polygon.geometry.removeComponent(e),this.restoreFeature(),!1},cancel:function(){return this.drawingHole&&(this.polygon.geometry.removeComponent(this.line.geometry),this.restoreFeature(!0)),OpenLayers.Handler.Path.prototype.cancel.apply(this,arguments)},restoreFeature:function(e){this.control.layer.events.unregister("sketchcomplete",this,this.finalizeInteriorRing),this.control.layer.events.unregister("sketchmodified",this,this.enforceTopology),this.layer.removeFeatures([this.polygon],{silent:!0}),this.control.layer.addFeatures([this.polygon],{silent:!0}),this.drawingHole=!1,e||this.control.layer.events.triggerEvent("sketchcomplete",{feature:this.polygon})},destroyFeature:function(e){OpenLayers.Handler.Path.prototype.destroyFeature.call(this,e),this.polygon=null},drawFeature:function(){this.layer.drawFeature(this.polygon,this.style),this.layer.drawFeature(this.point,this.style)},getSketch:function(){return this.polygon},getGeometry:function(){var e=this.polygon&&this.polygon.geometry;return e=e&&this.multi?new OpenLayers.Geometry.MultiPolygon([e]):e},CLASS_NAME:"OpenLayers.Handler.Polygon"}),OpenLayers.Control.EditingToolbar=OpenLayers.Class(OpenLayers.Control.Panel,{citeCompliant:!1,initialize:function(e,t){OpenLayers.Control.Panel.prototype.initialize.apply(this,[t]),this.addControls([new OpenLayers.Control.Navigation]);t=[new OpenLayers.Control.DrawFeature(e,OpenLayers.Handler.Point,{displayClass:"olControlDrawFeaturePoint",handlerOptions:{citeCompliant:this.citeCompliant}}),new OpenLayers.Control.DrawFeature(e,OpenLayers.Handler.Path,{displayClass:"olControlDrawFeaturePath",handlerOptions:{citeCompliant:this.citeCompliant}}),new OpenLayers.Control.DrawFeature(e,OpenLayers.Handler.Polygon,{displayClass:"olControlDrawFeaturePolygon",handlerOptions:{citeCompliant:this.citeCompliant}})];this.addControls(t)},draw:function(){var e=OpenLayers.Control.Panel.prototype.draw.apply(this,arguments);return null===this.defaultControl&&(this.defaultControl=this.controls[0]),e},CLASS_NAME:"OpenLayers.Control.EditingToolbar"}),OpenLayers.Strategy.BBOX=OpenLayers.Class(OpenLayers.Strategy,{bounds:null,resolution:null,ratio:2,resFactor:null,response:null,activate:function(){var e=OpenLayers.Strategy.prototype.activate.call(this);return e&&(this.layer.events.on({moveend:this.update,refresh:this.update,visibilitychanged:this.update,scope:this}),this.update()),e},deactivate:function(){var e=OpenLayers.Strategy.prototype.deactivate.call(this);return e&&this.layer.events.un({moveend:this.update,refresh:this.update,visibilitychanged:this.update,scope:this}),e},update:function(e){var t=this.getMapBounds();null!==t&&(e&&e.force||this.layer.visibility&&this.layer.calculateInRange()&&this.invalidBounds(t))&&(this.calculateBounds(t),this.resolution=this.layer.map.getResolution(),this.triggerRead(e))},getMapBounds:function(){if(null===this.layer.map)return null;var e=this.layer.map.getExtent();return e=e&&!this.layer.projection.equals(this.layer.map.getProjectionObject())?e.clone().transform(this.layer.map.getProjectionObject(),this.layer.projection):e},invalidBounds:function(e){return e=e||this.getMapBounds(),e=!(e=!this.bounds||!this.bounds.containsBounds(e))&&this.resFactor?(e=this.resolution/this.layer.map.getResolution())>=this.resFactor||e<=1/this.resFactor:e},calculateBounds:function(e){var t=(e=e||this.getMapBounds()).getCenterLonLat(),i=e.getWidth()*this.ratio;e=e.getHeight()*this.ratio,this.bounds=new OpenLayers.Bounds(t.lon-i/2,t.lat-e/2,t.lon+i/2,t.lat+e/2)},triggerRead:function(e){!this.response||e&&!0===e.noAbort||(this.layer.protocol.abort(this.response),this.layer.events.triggerEvent("loadend"));var t={filter:this.createFilter()};this.layer.events.triggerEvent("loadstart",t),this.response=this.layer.protocol.read(OpenLayers.Util.applyDefaults({filter:t.filter,callback:this.merge,scope:this},e))},createFilter:function(){var e=new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.BBOX,value:this.bounds,projection:this.layer.projection});return e=this.layer.filter?new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.AND,filters:[this.layer.filter,e]}):e},merge:function(e){if(this.layer.destroyFeatures(),e.success()){var t=e.features;if(t&&0<t.length){var i=this.layer.projection,s=this.layer.map.getProjectionObject();if(!s.equals(i))for(var n,r=0,a=t.length;r<a;++r)(n=t[r].geometry)&&n.transform(i,s);this.layer.addFeatures(t)}}else this.bounds=null;this.response=null,this.layer.events.triggerEvent("loadend",{response:e})},CLASS_NAME:"OpenLayers.Strategy.BBOX"}),OpenLayers.Layer.WorldWind=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{},isBaseLayer:!0,lzd:null,zoomLevels:null,initialize:function(e,t,i,s,n,r){this.lzd=i,this.zoomLevels=s,(i=[]).push(e,t,n,r),OpenLayers.Layer.Grid.prototype.initialize.apply(this,i),this.params=OpenLayers.Util.applyDefaults(this.params,this.DEFAULT_PARAMS)},getZoom:function(){var e=this.map.getZoom();return this.map.getMaxExtent(),e-Math.log(this.maxResolution/(this.lzd/512))/Math.log(2)},getURL:function(e){e=this.adjustBounds(e);var t=this.getZoom(),i=this.map.getMaxExtent(),s=this.lzd/Math.pow(2,this.getZoom()),n=Math.floor((e.left-i.left)/s);return e=Math.floor((e.bottom-i.bottom)/s),this.map.getResolution()<=this.lzd/512&&this.getZoom()<=this.zoomLevels?this.getFullRequestString({L:t,X:n,Y:e}):OpenLayers.Util.getImageLocation("blank.gif")},CLASS_NAME:"OpenLayers.Layer.WorldWind"}),OpenLayers.Protocol.CSW=function(e){e=OpenLayers.Util.applyDefaults(e,OpenLayers.Protocol.CSW.DEFAULTS);var t=OpenLayers.Protocol.CSW["v"+e.version.replace(/\./g,"_")];if(t)return new t(e);throw"Unsupported CSW version: "+e.version},OpenLayers.Protocol.CSW.DEFAULTS={version:"2.0.2"},OpenLayers.Format.WMTSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.0.0",yx:{"urn:ogc:def:crs:EPSG::4326":!0},createLayer:function(e,t){if(!("layer"in t))throw Error("Missing property 'layer' in configuration.");for(var i,s=e.contents,n=0,r=s.layers.length;n<r;++n)if(s.layers[n].identifier===t.layer){i=s.layers[n];break}if(!i)throw Error("Layer not found");var a,o=t.format;if(!o&&i.formats&&i.formats.length&&(o=i.formats[0]),t.matrixSet?a=s.tileMatrixSets[t.matrixSet]:1<=i.tileMatrixSetLinks.length&&(a=s.tileMatrixSets[i.tileMatrixSetLinks[0].tileMatrixSet]),!a)throw Error("matrixSet not found");for(var l,n=0,r=i.styles.length;n<r&&!(l=i.styles[n]).isDefault;++n);!(s=t.requestEncoding)&&(s="KVP",e.operationsMetadata.GetTile.dcp.http)&&(h=e.operationsMetadata.GetTile.dcp.http).get[0].constraints&&!(h=h.get[0].constraints.GetEncoding.allowedValues).KVP&&(h.REST||h.RESTful)&&(s="REST");var h=[],p=t.params||{};delete t.params;for(var u=0,c=i.dimensions.length;u<c;u++){var d=i.dimensions[u];h.push(d.identifier),p.hasOwnProperty(d.identifier)||(p[d.identifier]=d.default)}u=t.projection||a.supportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"),c=t.units||("EPSG:4326"===u?"degrees":"m"),d=[];for(y in a.matrixIds)a.matrixIds.hasOwnProperty(y)&&d.push(28e-5*a.matrixIds[y].scaleDenominator/OpenLayers.METERS_PER_INCH/OpenLayers.INCHES_PER_UNIT[c]);if("REST"===s&&i.resourceUrls)for(var y=[],r=0,m=i.resourceUrls.length;r<m;++r)(n=i.resourceUrls[r]).format===o&&"tile"===n.resourceType&&y.push(n.template);else{y=[];for(var f,n=0,r=(m=e.operationsMetadata.GetTile.dcp.http.get).length;n<r;n++)(f=m[n].constraints)&&!f.GetEncoding.allowedValues[s]||y.push(m[n].url)}return new OpenLayers.Layer.WMTS(OpenLayers.Util.applyDefaults(t,{url:y,requestEncoding:s,name:i.title,style:l.identifier,format:o,matrixIds:a.matrixIds,matrixSet:a.identifier,projection:u,units:c,resolutions:!1===t.isBaseLayer?void 0:d,serverResolutions:d,tileFullExtent:a.bounds,dimensions:h,params:p}))},CLASS_NAME:"OpenLayers.Format.WMTSCapabilities"}),OpenLayers.Layer.Google.v3={DEFAULTS:{sphericalMercator:!0,projection:"EPSG:900913"},animationEnabled:!0,loadMapObject:function(){this.type||(this.type=google.maps.MapTypeId.ROADMAP);var e,t=OpenLayers.Layer.Google.cache[this.map.id];t?(e=t.mapObject,++t.count):(e=this.map.getCenter(),(t=document.createElement("div")).className="olForeignContainer",t.style.width="100%",t.style.height="100%",e=new google.maps.Map(t,{center:e?new google.maps.LatLng(e.lat,e.lon):new google.maps.LatLng(0,0),zoom:this.map.getZoom()||0,mapTypeId:this.type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1}),(t=document.createElement("div")).style.width="100%",t.style.height="100%",e.controls[google.maps.ControlPosition.TOP_LEFT].push(t),OpenLayers.Layer.Google.cache[this.map.id]=t={googleControl:t,mapObject:e,count:1}),this.mapObject=e,this.setGMapVisibility(this.visibility)},onMapResize:function(){this.visibility&&google.maps.event.trigger(this.mapObject,"resize")},setGMapVisibility:function(e){var t=OpenLayers.Layer.Google.cache[this.map.id],i=this.map;if(t){for(var s,n,r=this.type,a=i.layers,o=a.length-1;0<=o;--o)if((s=a[o])instanceof OpenLayers.Layer.Google&&!0===s.visibility&&!0===s.inRange){r=s.type,e=!0;break}a=this.mapObject.getDiv(),!0===e?(a.parentNode!==i.div&&(t.rendered?(i.div.appendChild(a),t.googleControl.appendChild(i.viewPortDiv),google.maps.event.trigger(this.mapObject,"resize")):(n=this,google.maps.event.addListenerOnce(this.mapObject,"tilesloaded",function(){t.rendered=!0,n.setGMapVisibility(n.getVisibility()),n.moveTo(n.map.getCenter())}))),this.mapObject.setMapTypeId(r)):t.googleControl.hasChildNodes()&&(i.div.appendChild(i.viewPortDiv),i.div.removeChild(a))}},getMapContainer:function(){return this.mapObject.getDiv()},getMapObjectBoundsFromOLBounds:function(e){var t=null;return null!=e&&(t=this.sphericalMercator?this.inverseMercator(e.bottom,e.left):new OpenLayers.LonLat(e.bottom,e.left),e=this.sphericalMercator?this.inverseMercator(e.top,e.right):new OpenLayers.LonLat(e.top,e.right),t=new google.maps.LatLngBounds(new google.maps.LatLng(t.lat,t.lon),new google.maps.LatLng(e.lat,e.lon))),t},getMapObjectLonLatFromMapObjectPixel:function(e){var t=this.map.getSize(),i=this.getLongitudeFromMapObjectLonLat(this.mapObject.center),s=this.getLatitudeFromMapObjectLonLat(this.mapObject.center),n=this.map.getResolution();return e=new OpenLayers.LonLat(i+(e.x-t.w/2)*n,s-(e.y-t.h/2)*n),this.wrapDateLine&&(e=e.wrapDateLine(this.maxExtent)),this.getMapObjectLonLatFromLonLat(e.lon,e.lat)},getMapObjectPixelFromMapObjectLonLat:function(e){var t=this.getLongitudeFromMapObjectLonLat(e),i=(e=this.getLatitudeFromMapObjectLonLat(e),this.map.getResolution()),s=this.map.getExtent();return this.getMapObjectPixelFromXY(1/i*(t-s.left),1/i*(s.top-e))},setMapObjectCenter:function(e,t){var i;!1===this.animationEnabled&&t!=this.mapObject.zoom&&(i=this.getMapContainer(),google.maps.event.addListenerOnce(this.mapObject,"idle",function(){i.style.visibility=""}),i.style.visibility="hidden"),this.mapObject.setOptions({center:e,zoom:t})},getMapObjectZoomFromMapObjectBounds:function(e){return this.mapObject.getBoundsZoomLevel(e)},getMapObjectLonLatFromLonLat:function(e,t){var i=this.sphericalMercator?(i=this.inverseMercator(e,t),new google.maps.LatLng(i.lat,i.lon)):new google.maps.LatLng(t,e);return i},getMapObjectPixelFromXY:function(e,t){return new google.maps.Point(e,t)}},OpenLayers.Format.WPSDescribeProcess=OpenLayers.Class(OpenLayers.Format.XML,{VERSION:"1.0.0",namespaces:{wps:"http://www.opengis.net/wps/1.0.0",ows:"http://www.opengis.net/ows/1.1",xsi:"http://www.w3.org/2001/XMLSchema-instance"},schemaLocation:"http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd",defaultPrefix:"wps",regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},read:function(e){(e="string"==typeof e?OpenLayers.Format.XML.prototype.read.apply(this,[e]):e)&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),t},readers:{wps:{ProcessDescriptions:function(e,t){t.processDescriptions={},this.readChildNodes(e,t.processDescriptions)},ProcessDescription:function(e,t){var i={processVersion:this.getAttributeNS(e,this.namespaces.wps,"processVersion"),statusSupported:"true"===e.getAttribute("statusSupported"),storeSupported:"true"===e.getAttribute("storeSupported")};this.readChildNodes(e,i),t[i.identifier]=i},DataInputs:function(e,t){t.dataInputs=[],this.readChildNodes(e,t.dataInputs)},ProcessOutputs:function(e,t){t.processOutputs=[],this.readChildNodes(e,t.processOutputs)},Output:function(e,t){var i={};this.readChildNodes(e,i),t.push(i)},ComplexOutput:function(e,t){t.complexOutput={},this.readChildNodes(e,t.complexOutput)},LiteralOutput:function(e,t){t.literalOutput={},this.readChildNodes(e,t.literalOutput)},Input:function(e,t){var i={maxOccurs:parseInt(e.getAttribute("maxOccurs")),minOccurs:parseInt(e.getAttribute("minOccurs"))};this.readChildNodes(e,i),t.push(i)},BoundingBoxData:function(e,t){t.boundingBoxData={},this.readChildNodes(e,t.boundingBoxData)},CRS:function(e,t){t.CRSs||(t.CRSs={}),t.CRSs[this.getChildValue(e)]=!0},LiteralData:function(e,t){t.literalData={},this.readChildNodes(e,t.literalData)},ComplexData:function(e,t){t.complexData={},this.readChildNodes(e,t.complexData)},Default:function(e,t){t.default={},this.readChildNodes(e,t.default)},Supported:function(e,t){t.supported={},this.readChildNodes(e,t.supported)},Format:function(e,t){var i={};this.readChildNodes(e,i),t.formats||(t.formats={}),t.formats[i.mimeType]=!0},MimeType:function(e,t){t.mimeType=this.getChildValue(e)}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.WPSDescribeProcess"}),OpenLayers.Format.WKT=OpenLayers.Class(OpenLayers.Format,{initialize:function(e){this.regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},OpenLayers.Format.prototype.initialize.apply(this,[e])},read:function(e){var t,i;if(e=e.replace(/[\n\r]/g," "),(i=this.regExes.typeStr.exec(e))&&(e=i[1].toLowerCase(),i=i[2],this.parse[e]&&(t=this.parse[e].apply(this,[i])),this.internalProjection&&this.externalProjection))if(t&&"OpenLayers.Feature.Vector"==t.CLASS_NAME)t.geometry.transform(this.externalProjection,this.internalProjection);else if(t&&"geometrycollection"!=e&&"object"==_typeof(t))for(e=0,i=t.length;e<i;e++)t[e].geometry.transform(this.externalProjection,this.internalProjection);return t},write:function(e){var t,i=e.constructor==Array||!(e=[e]),s=[];i&&s.push("GEOMETRYCOLLECTION(");for(var n=0,r=e.length;n<r;++n)i&&0<n&&s.push(","),t=e[n].geometry,s.push(this.extractGeometry(t));return i&&s.push(")"),s.join("")},extractGeometry:function(e){var t=e.CLASS_NAME.split(".")[2].toLowerCase();return this.extract[t]?(this.internalProjection&&this.externalProjection&&(e=e.clone()).transform(this.internalProjection,this.externalProjection),("collection"==t?"GEOMETRYCOLLECTION":t.toUpperCase())+"("+this.extract[t].apply(this,[e])+")"):null},extract:{point:function(e){return e.x+" "+e.y},multipoint:function(e){for(var t=[],i=0,s=e.components.length;i<s;++i)t.push("("+this.extract.point.apply(this,[e.components[i]])+")");return t.join(",")},linestring:function(e){for(var t=[],i=0,s=e.components.length;i<s;++i)t.push(this.extract.point.apply(this,[e.components[i]]));return t.join(",")},multilinestring:function(e){for(var t=[],i=0,s=e.components.length;i<s;++i)t.push("("+this.extract.linestring.apply(this,[e.components[i]])+")");return t.join(",")},polygon:function(e){for(var t=[],i=0,s=e.components.length;i<s;++i)t.push("("+this.extract.linestring.apply(this,[e.components[i]])+")");return t.join(",")},multipolygon:function(e){for(var t=[],i=0,s=e.components.length;i<s;++i)t.push("("+this.extract.polygon.apply(this,[e.components[i]])+")");return t.join(",")},collection:function(e){for(var t=[],i=0,s=e.components.length;i<s;++i)t.push(this.extractGeometry.apply(this,[e.components[i]]));return t.join(",")}},parse:{point:function(e){return e=OpenLayers.String.trim(e).split(this.regExes.spaces),new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(e[0],e[1]))},multipoint:function(e){for(var t=OpenLayers.String.trim(e).split(","),i=[],s=0,n=t.length;s<n;++s)e=t[s].replace(this.regExes.trimParens,"$1"),i.push(this.parse.point.apply(this,[e]).geometry);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiPoint(i))},linestring:function(e){for(var t=[],i=0,s=(e=OpenLayers.String.trim(e).split(",")).length;i<s;++i)t.push(this.parse.point.apply(this,[e[i]]).geometry);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString(t))},multilinestring:function(e){for(var t=OpenLayers.String.trim(e).split(this.regExes.parenComma),i=[],s=0,n=t.length;s<n;++s)e=t[s].replace(this.regExes.trimParens,"$1"),i.push(this.parse.linestring.apply(this,[e]).geometry);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiLineString(i))},polygon:function(e){for(var t,i=[],s=0,n=(e=OpenLayers.String.trim(e).split(this.regExes.parenComma)).length;s<n;++s)t=e[s].replace(this.regExes.trimParens,"$1"),t=this.parse.linestring.apply(this,[t]).geometry,t=new OpenLayers.Geometry.LinearRing(t.components),i.push(t);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon(i))},multipolygon:function(e){for(var t=OpenLayers.String.trim(e).split(this.regExes.doubleParenComma),i=[],s=0,n=t.length;s<n;++s)e=t[s].replace(this.regExes.trimParens,"$1"),i.push(this.parse.polygon.apply(this,[e]).geometry);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiPolygon(i))},geometrycollection:function(e){e=e.replace(/,\s*([A-Za-z])/g,"|$1");for(var t=[],i=0,s=(e=OpenLayers.String.trim(e).split("|")).length;i<s;++i)t.push(OpenLayers.Format.WKT.prototype.read.apply(this,[e[i]]));return t}},CLASS_NAME:"OpenLayers.Format.WKT"}),OpenLayers.WPSProcess=OpenLayers.Class({client:null,server:null,identifier:null,description:null,localWPS:"http://geoserver/wps",formats:null,chained:0,executeCallbacks:null,initialize:function(e){OpenLayers.Util.extend(this,e),this.executeCallbacks=[],this.formats={"application/wkt":new OpenLayers.Format.WKT,"application/json":new OpenLayers.Format.GeoJSON}},describe:function(t){var e;t=t||{},this.description?t.callback&&(e=this.description,window.setTimeout(function(){t.callback.call(t.scope,e)},0)):this.client.describeProcess(this.server,this.identifier,function(e){this.description||this.parseDescription(e),t.callback&&t.callback.call(t.scope,this.description)},this)},configure:function(r){return this.describe({callback:function(){for(var e,t=this.description,i=r.inputs,s=0,n=t.dataInputs.length;s<n;++s)e=t.dataInputs[s],this.setInputData(e,i[e.identifier]);r.callback&&r.callback.call(r.scope)},scope:this}),this},execute:function(n){this.configure({inputs:n.inputs,callback:function(){var i=this,s=this.getOutputIndex(i.description.processOutputs,n.output);i.setResponseForm({outputIndex:s}),function e(){OpenLayers.Util.removeItem(i.executeCallbacks,e),0!==i.chained?i.executeCallbacks.push(e):OpenLayers.Request.POST({url:i.client.servers[i.server].url,data:(new OpenLayers.Format.WPSExecute).write(i.description),success:function(e){var t=i.findMimeType(i.description.processOutputs[s].complexOutput.supported.formats);(e=i.formats[t].read(e.responseText))instanceof OpenLayers.Feature.Vector&&(e=[e]),n.success&&((t={})[n.output||"result"]=e,n.success.call(n.scope,t))},scope:i})}()},scope:this})},output:function(e){return new OpenLayers.WPSProcess.ChainLink({process:this,output:e})},parseDescription:function(e){e=this.client.servers[this.server],this.description=(new OpenLayers.Format.WPSDescribeProcess).read(e.processDescription[this.identifier]).processDescriptions[this.identifier]},setInputData:function(e,t){var i;delete e.data,delete e.reference,t instanceof OpenLayers.WPSProcess.ChainLink?(++this.chained,e.reference={method:"POST",href:t.process.server===this.server?this.localWPS:this.client.servers[t.process.server].url},t.process.describe({callback:function(){--this.chained,this.chainProcess(e,t)},scope:this})):(e.data={},(i=e.complexData)?(i=this.findMimeType(i.supported.formats),e.data.complexData={mimeType:i,value:this.formats[i].write(this.toFeatures(t))}):e.data.literalData={value:t})},setResponseForm:function(e){var t=this.description.processOutputs[(e=e||{}).outputIndex||0];this.description.responseForm={rawDataOutput:{identifier:t.identifier,mimeType:this.findMimeType(t.complexOutput.supported.formats,e.supportedFormats)}}},getOutputIndex:function(e,t){var i;if(t){for(var s=e.length-1;0<=s;--s)if(e[s].identifier===t){i=s;break}}else i=0;return i},chainProcess:function(e,t){var i=this.getOutputIndex(t.process.description.processOutputs,t.output),s=(e.reference.mimeType=this.findMimeType(e.complexData.supported.formats,t.process.description.processOutputs[i].complexOutput.supported.formats),{});for(s[e.reference.mimeType]=!0,t.process.setResponseForm({outputIndex:i,supportedFormats:s}),e.reference.body=t.process.description;0<this.executeCallbacks.length;)this.executeCallbacks[0]()},toFeatures:function(e){var t=OpenLayers.Util.isArray(e);t||(e=[e]);for(var i,s=Array(e.length),n=0,r=e.length;n<r;++n)i=e[n],s[n]=i instanceof OpenLayers.Feature.Vector?i:new OpenLayers.Feature.Vector(i);return t?s:s[0]},findMimeType:function(e,t){for(var i in t=t||this.formats,e)if(i in t)return i},CLASS_NAME:"OpenLayers.WPSProcess"}),OpenLayers.WPSProcess.ChainLink=OpenLayers.Class({process:null,output:null,initialize:function(e){OpenLayers.Util.extend(this,e)},CLASS_NAME:"OpenLayers.WPSProcess.ChainLink"}),OpenLayers.WPSClient=OpenLayers.Class({servers:null,version:"1.0.0",lazy:!1,events:null,initialize:function(e){for(var t in OpenLayers.Util.extend(this,e),this.events=new OpenLayers.Events(this),this.servers={},e.servers)this.servers[t]="string"==typeof e.servers[t]?{url:e.servers[t],version:this.version,processDescription:{}}:e.servers[t]},execute:function(e){this.getProcess(e.server,e.process).execute({inputs:e.inputs,success:e.success,scope:e.scope})},getProcess:function(e,t){e=new OpenLayers.WPSProcess({client:this,server:e,identifier:t});return this.lazy||e.describe(),e},describeProcess:function(e,i,s,n){var t=this.servers[e];t.processDescription[i]?window.setTimeout(function(){s.call(n,t.processDescription[i])},0):i in t.processDescription?this.events.register("describeprocess",this,function e(t){t.identifier===i&&(this.events.unregister("describeprocess",this,e),s.call(n,t.raw))}):(t.processDescription[i]=null,OpenLayers.Request.GET({url:t.url,params:{SERVICE:"WPS",VERSION:t.version,REQUEST:"DescribeProcess",IDENTIFIER:i},success:function(e){t.processDescription[i]=e.responseText,this.events.triggerEvent("describeprocess",{identifier:i,raw:e.responseText})},scope:this}))},destroy:function(){this.events.destroy(),this.servers=this.events=null},CLASS_NAME:"OpenLayers.WPSClient"}),OpenLayers.Format.CSWGetRecords.v2_0_2=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{csw:"http://www.opengis.net/cat/csw/2.0.2",dc:"http://purl.org/dc/elements/1.1/",dct:"http://purl.org/dc/terms/",gmd:"http://www.isotc211.org/2005/gmd",geonet:"http://www.fao.org/geonetwork",ogc:"http://www.opengis.net/ogc",ows:"http://www.opengis.net/ows",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},defaultPrefix:"csw",version:"2.0.2",schemaLocation:"http://www.opengis.net/cat/csw/2.0.2 http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd",requestId:null,resultType:null,outputFormat:null,outputSchema:null,startPosition:null,maxRecords:null,DistributedSearch:null,ResponseHandler:null,Query:null,regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},read:function(e){(e="string"==typeof e?OpenLayers.Format.XML.prototype.read.apply(this,[e]):e)&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),t},readers:{csw:{GetRecordsResponse:function(e,t){t.records=[],this.readChildNodes(e,t);e=this.getAttributeNS(e,"","version");""!=e&&(t.version=e)},RequestId:function(e,t){t.RequestId=this.getChildValue(e)},SearchStatus:function(e,t){t.SearchStatus={};e=this.getAttributeNS(e,"","timestamp");""!=e&&(t.SearchStatus.timestamp=e)},SearchResults:function(e,t){this.readChildNodes(e,t);for(var i=e.attributes,s={},n=0,r=i.length;n<r;++n)s[i[n].name]="numberOfRecordsMatched"==i[n].name||"numberOfRecordsReturned"==i[n].name||"nextRecord"==i[n].name?parseInt(i[n].nodeValue):i[n].nodeValue;t.SearchResults=s},SummaryRecord:function(e,t){var i={type:"SummaryRecord"};this.readChildNodes(e,i),t.records.push(i)},BriefRecord:function(e,t){var i={type:"BriefRecord"};this.readChildNodes(e,i),t.records.push(i)},DCMIRecord:function(e,t){var i={type:"DCMIRecord"};this.readChildNodes(e,i),t.records.push(i)},Record:function(e,t){var i={type:"Record"};this.readChildNodes(e,i),t.records.push(i)},"*":function(e,t){t[e.localName||e.nodeName.split(":").pop()]=this.getChildValue(e)}},geonet:{info:function(e,t){var i={};this.readChildNodes(e,i),t.gninfo=i}},dc:{"*":function(e,t){var i=e.localName||e.nodeName.split(":").pop();OpenLayers.Util.isArray(t[i])||(t[i]=[]);for(var s={},n=e.attributes,r=0,a=n.length;r<a;++r)s[n[r].name]=n[r].nodeValue;s.value=this.getChildValue(e),""!=s.value&&t[i].push(s)}},dct:{"*":function(e,t){var i=e.localName||e.nodeName.split(":").pop();OpenLayers.Util.isArray(t[i])||(t[i]=[]),t[i].push(this.getChildValue(e))}},ows:OpenLayers.Util.applyDefaults({BoundingBox:function(e,t){t.bounds&&(t.BoundingBox=[{crs:t.projection,value:[t.bounds.left,t.bounds.bottom,t.bounds.right,t.bounds.top]}],delete t.projection,delete t.bounds),OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows.BoundingBox.apply(this,arguments)}},OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows)},write:function(e){return(e=this.writeNode("csw:GetRecords",e)).setAttribute("xmlns:gmd",this.namespaces.gmd),OpenLayers.Format.XML.prototype.write.apply(this,[e])},writers:{csw:{GetRecords:function(e){var t=this.createElementNSPlus("csw:GetRecords",{attributes:{service:"CSW",version:this.version,requestId:(e=e||{}).requestId||this.requestId,resultType:e.resultType||this.resultType,outputFormat:e.outputFormat||this.outputFormat,outputSchema:e.outputSchema||this.outputSchema,startPosition:e.startPosition||this.startPosition,maxRecords:e.maxRecords||this.maxRecords}}),i=((e.DistributedSearch||this.DistributedSearch)&&this.writeNode("csw:DistributedSearch",e.DistributedSearch||this.DistributedSearch,t),e.ResponseHandler||this.ResponseHandler);if(OpenLayers.Util.isArray(i)&&0<i.length)for(var s=0,n=i.length;s<n;s++)this.writeNode("csw:ResponseHandler",i[s],t);return this.writeNode("Query",e.Query||this.Query,t),t},DistributedSearch:function(e){return this.createElementNSPlus("csw:DistributedSearch",{attributes:{hopCount:e.hopCount}})},ResponseHandler:function(e){return this.createElementNSPlus("csw:ResponseHandler",{value:e.value})},Query:function(e){var t=this.createElementNSPlus("csw:Query",{attributes:{typeNames:(e=e||{}).typeNames||"csw:Record"}}),i=e.ElementName;if(OpenLayers.Util.isArray(i)&&0<i.length)for(var s=0,n=i.length;s<n;s++)this.writeNode("csw:ElementName",i[s],t);else this.writeNode("csw:ElementSetName",e.ElementSetName||{value:"summary"},t);return e.Constraint&&this.writeNode("csw:Constraint",e.Constraint,t),e.SortBy&&this.writeNode("ogc:SortBy",e.SortBy,t),t},ElementName:function(e){return this.createElementNSPlus("csw:ElementName",{value:e.value})},ElementSetName:function(e){return this.createElementNSPlus("csw:ElementSetName",{attributes:{typeNames:e.typeNames},value:e.value})},Constraint:function(e){var t,i=this.createElementNSPlus("csw:Constraint",{attributes:{version:e.version}});return e.Filter?(t=new OpenLayers.Format.Filter({version:e.version}),i.appendChild(t.write(e.Filter))):e.CqlText&&(e=this.createElementNSPlus("CqlText",{value:e.CqlText.value}),i.appendChild(e)),i}},ogc:OpenLayers.Format.Filter.v1_1_0.prototype.writers.ogc},CLASS_NAME:"OpenLayers.Format.CSWGetRecords.v2_0_2"}),OpenLayers.Marker.Box=OpenLayers.Class(OpenLayers.Marker,{bounds:null,div:null,initialize:function(e,t,i){this.bounds=e,this.div=OpenLayers.Util.createDiv(),this.div.style.overflow="hidden",this.events=new OpenLayers.Events(this,this.div),this.setBorder(t,i)},destroy:function(){this.div=this.bounds=null,OpenLayers.Marker.prototype.destroy.apply(this,arguments)},setBorder:function(e,t){this.div.style.border=(t=t||2)+"px solid "+(e=e||"red")},draw:function(e,t){return OpenLayers.Util.modifyDOMElement(this.div,null,e,t),this.div},onScreen:function(){var e=!1;return e=this.map?this.map.getExtent().containsBounds(this.bounds,!0,!0):e},display:function(e){this.div.style.display=e?"":"none"},CLASS_NAME:"OpenLayers.Marker.Box"}),OpenLayers.Format.Text=OpenLayers.Class(OpenLayers.Format,{defaultStyle:null,extractStyles:!0,initialize:function(e){!1!==(e=e||{}).extractStyles&&(e.defaultStyle={externalGraphic:OpenLayers.Util.getImageLocation("marker.png"),graphicWidth:21,graphicHeight:25,graphicXOffset:-10.5,graphicYOffset:-12.5}),OpenLayers.Format.prototype.initialize.apply(this,[e])},read:function(e){e=e.split("\n");for(var t,i=[],s=0;s<e.length-1;s++)if("#"!=(r=e[s].replace(/^\s*/,"").replace(/\s*$/,"")).charAt(0))if(t){for(var n,r=r.split("\t"),a=new OpenLayers.Geometry.Point(0,0),o={},l=this.defaultStyle?OpenLayers.Util.applyDefaults({},this.defaultStyle):null,h=!1,p=0;p<r.length;p++)r[p]&&("point"==t[p]?(h=r[p].split(","),a.y=parseFloat(h[0]),a.x=parseFloat(h[1]),h=!0):"lat"==t[p]?(a.y=parseFloat(r[p]),h=!0):"lon"==t[p]?(a.x=parseFloat(r[p]),h=!0):"title"==t[p]?o.title=r[p]:"image"==t[p]||"icon"==t[p]&&l?l.externalGraphic=r[p]:"iconSize"==t[p]&&l?(n=r[p].split(","),l.graphicWidth=parseFloat(n[0]),l.graphicHeight=parseFloat(n[1])):"iconOffset"==t[p]&&l?(n=r[p].split(","),l.graphicXOffset=parseFloat(n[0]),l.graphicYOffset=parseFloat(n[1])):"description"==t[p]?o.description=r[p]:"overflow"==t[p]?o.overflow=r[p]:o[t[p]]=r[p]);h&&(this.internalProjection&&this.externalProjection&&a.transform(this.externalProjection,this.internalProjection),r=new OpenLayers.Feature.Vector(a,o,l),i.push(r))}else t=r.split("\t");return i},CLASS_NAME:"OpenLayers.Format.Text"}),OpenLayers.Layer.Text=OpenLayers.Class(OpenLayers.Layer.Markers,{location:null,features:null,formatOptions:null,selectedFeature:null,initialize:function(e,t){OpenLayers.Layer.Markers.prototype.initialize.apply(this,arguments),this.features=[]},destroy:function(){OpenLayers.Layer.Markers.prototype.destroy.apply(this,arguments),this.clearFeatures(),this.features=null},loadText:function(){this.loaded||null==this.location||(this.events.triggerEvent("loadstart"),OpenLayers.Request.GET({url:this.location,success:this.parseData,failure:function(e){this.events.triggerEvent("loadend")},scope:this}),this.loaded=!0)},moveTo:function(e,t,i){OpenLayers.Layer.Markers.prototype.moveTo.apply(this,arguments),this.visibility&&!this.loaded&&this.loadText()},parseData:function(e){e=e.responseText;var t={};OpenLayers.Util.extend(t,this.formatOptions),this.map&&!this.projection.equals(this.map.getProjectionObject())&&(t.externalProjection=this.projection,t.internalProjection=this.map.getProjectionObject()),e=new OpenLayers.Format.Text(t).read(e);for(var t=0,i=e.length;t<i;t++){var s,n,r={},a=e[t],o=new OpenLayers.LonLat(a.geometry.x,a.geometry.y);a.style.graphicWidth&&a.style.graphicHeight&&(s=new OpenLayers.Size(a.style.graphicWidth,a.style.graphicHeight)),void 0!==a.style.graphicXOffset&&void 0!==a.style.graphicYOffset&&(n=new OpenLayers.Pixel(a.style.graphicXOffset,a.style.graphicYOffset)),null!=a.style.externalGraphic?r.icon=new OpenLayers.Icon(a.style.externalGraphic,s,n):(r.icon=OpenLayers.Marker.defaultIcon(),null!=s&&r.icon.setSize(s)),null!=a.attributes.title&&null!=a.attributes.description&&(r.popupContentHTML="<h2>"+a.attributes.title+"</h2><p>"+a.attributes.description+"</p>"),r.overflow=a.attributes.overflow||"auto",r=new OpenLayers.Feature(this,o,r),this.features.push(r),o=r.createMarker(),null!=a.attributes.title&&null!=a.attributes.description&&o.events.register("click",r,this.markerClick),this.addMarker(o)}this.events.triggerEvent("loadend")},markerClick:function(e){var t=this==this.layer.selectedFeature;this.layer.selectedFeature=t?null:this;for(var i=0,s=this.layer.map.popups.length;i<s;i++)this.layer.map.removePopup(this.layer.map.popups[i]);t||this.layer.map.addPopup(this.createPopup()),OpenLayers.Event.stop(e)},clearFeatures:function(){if(null!=this.features)for(;0<this.features.length;){var e=this.features[0];OpenLayers.Util.removeItem(this.features,e),e.destroy()}},CLASS_NAME:"OpenLayers.Layer.Text"}),OpenLayers.Handler.RegularPolygon=OpenLayers.Class(OpenLayers.Handler.Drag,{sides:4,radius:null,snapAngle:null,snapToggle:"shiftKey",layerOptions:null,persist:!1,irregular:!1,citeCompliant:!1,angle:null,fixedRadius:!1,feature:null,layer:null,origin:null,initialize:function(e,t,i){i&&i.layerOptions&&i.layerOptions.styleMap||(this.style=OpenLayers.Util.extend(OpenLayers.Feature.Vector.style.default,{})),OpenLayers.Handler.Drag.prototype.initialize.apply(this,[e,t,i]),this.options=i||{}},setOptions:function(e){OpenLayers.Util.extend(this.options,e),OpenLayers.Util.extend(this,e)},activate:function(){var e=!1;return OpenLayers.Handler.Drag.prototype.activate.apply(this,arguments)&&(e=OpenLayers.Util.extend({displayInLayerSwitcher:!1,calculateInRange:OpenLayers.Function.True,wrapDateLine:this.citeCompliant},this.layerOptions),this.layer=new OpenLayers.Layer.Vector(this.CLASS_NAME,e),this.map.addLayer(this.layer),e=!0),e},deactivate:function(){var e=!1;return OpenLayers.Handler.Drag.prototype.deactivate.apply(this,arguments)&&(this.dragging&&this.cancel(),null!=this.layer.map&&(this.layer.destroy(!1),this.feature&&this.feature.destroy()),e=!(this.feature=this.layer=null)),e},down:function(e){this.fixedRadius=!!this.radius,e=this.layer.getLonLatFromViewPortPx(e.xy),this.origin=new OpenLayers.Geometry.Point(e.lon,e.lat),this.fixedRadius&&!this.irregular||(this.radius=this.map.getResolution()),this.persist&&this.clear(),this.feature=new OpenLayers.Feature.Vector,this.createGeometry(),this.callback("create",[this.origin,this.feature]),this.layer.addFeatures([this.feature],{silent:!0}),this.layer.drawFeature(this.feature,this.style)},move:function(e){var t,i=this.layer.getLonLatFromViewPortPx(e.xy),i=new OpenLayers.Geometry.Point(i.lon,i.lat);this.irregular?(e=Math.sqrt(2)*Math.abs(i.y-this.origin.y)/2,this.radius=Math.max(this.map.getResolution()/2,e)):this.fixedRadius?this.origin=i:(this.calculateAngle(i,e),this.radius=Math.max(this.map.getResolution()/2,i.distanceTo(this.origin))),this.modifyGeometry(),this.irregular&&(e=i.x-this.origin.x,t=0==(i=i.y-this.origin.y)?e/(this.radius*Math.sqrt(2)):e/i,this.feature.geometry.resize(1,this.origin,t),this.feature.geometry.move(e/2,i/2)),this.layer.drawFeature(this.feature,this.style)},up:function(e){this.finalize(),this.start==this.last&&this.callback("done",[e.xy])},out:function(e){this.finalize()},createGeometry:function(){this.angle=Math.PI*(1/this.sides-.5),this.snapAngle&&(this.angle+=this.snapAngle*(Math.PI/180)),this.feature.geometry=OpenLayers.Geometry.Polygon.createRegularPolygon(this.origin,this.radius,this.sides,this.snapAngle)},modifyGeometry:function(){var e,t,i=this.feature.geometry.components[0];i.components.length!=this.sides+1&&(this.createGeometry(),i=this.feature.geometry.components[0]);for(var s=0;s<this.sides;++s)t=i.components[s],e=this.angle+2*s*Math.PI/this.sides,t.x=this.origin.x+this.radius*Math.cos(e),t.y=this.origin.y+this.radius*Math.sin(e),t.clearBounds()},calculateAngle:function(e,t){e=Math.atan2(e.y-this.origin.y,e.x-this.origin.x);this.snapAngle&&this.snapToggle&&!t[this.snapToggle]?(t=Math.PI/180*this.snapAngle,this.angle=Math.round(e/t)*t):this.angle=e},cancel:function(){this.callback("cancel",null),this.finalize()},finalize:function(){this.origin=null,this.radius=this.options.radius},clear:function(){this.layer&&(this.layer.renderer.clear(),this.layer.destroyFeatures())},callback:function(e,t){this.callbacks[e]&&this.callbacks[e].apply(this.control,[this.feature.geometry.clone()]),this.persist||"done"!=e&&"cancel"!=e||this.clear()},CLASS_NAME:"OpenLayers.Handler.RegularPolygon"}),OpenLayers.Control.SLDSelect=OpenLayers.Class(OpenLayers.Control,{clearOnDeactivate:!1,layers:null,callbacks:null,selectionSymbolizer:{Polygon:{fillColor:"#FF0000",stroke:!1},Line:{strokeColor:"#FF0000",strokeWidth:2},Point:{graphicName:"square",fillColor:"#FF0000",pointRadius:5}},layerOptions:null,sketchStyle:null,wfsCache:{},layerCache:{},initialize:function(e,t){OpenLayers.Control.prototype.initialize.apply(this,[t]),this.callbacks=OpenLayers.Util.extend({done:this.select,click:this.select},this.callbacks),this.handlerOptions=this.handlerOptions||{},this.layerOptions=OpenLayers.Util.applyDefaults(this.layerOptions,{displayInLayerSwitcher:!1,tileOptions:{maxGetUrlLength:2048}}),this.sketchStyle&&(this.handlerOptions.layerOptions=OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions,{styleMap:new OpenLayers.StyleMap({default:this.sketchStyle})})),this.handler=new e(this,this.callbacks,this.handlerOptions)},destroy:function(){for(var e in this.layerCache)delete this.layerCache[e];for(e in this.wfsCache)delete this.wfsCache[e];OpenLayers.Control.prototype.destroy.apply(this,arguments)},coupleLayerVisiblity:function(e){this.setVisibility(e.object.getVisibility())},createSelectionLayer:function(e){var t;return this.layerCache[e.id]?t=this.layerCache[e.id]:(t=new OpenLayers.Layer.WMS(e.name,e.url,e.params,OpenLayers.Util.applyDefaults(this.layerOptions,e.getOptions())),this.layerCache[e.id]=t,!1===this.layerOptions.displayInLayerSwitcher&&e.events.on({visibilitychanged:this.coupleLayerVisiblity,scope:t}),this.map.addLayer(t)),t},createSLD:function(e,t,i){for(var s={version:"1.0.0",namedLayers:{}},n=(""+e.params.LAYERS).split(","),r=0,a=n.length;r<a;r++){var o=n[r],l=(s.namedLayers[o]={name:o,userStyles:[]},this.selectionSymbolizer),h=i[r];0<=h.type.indexOf("Polygon")?l={Polygon:this.selectionSymbolizer.Polygon}:0<=h.type.indexOf("LineString")?l={Line:this.selectionSymbolizer.Line}:0<=h.type.indexOf("Point")&&(l={Point:this.selectionSymbolizer.Point}),s.namedLayers[o].userStyles.push({name:"default",rules:[new OpenLayers.Rule({symbolizer:l,filter:t[r],maxScaleDenominator:e.options.minScale})]})}return new OpenLayers.Format.SLD({srsName:this.map.getProjection()}).write(s)},parseDescribeLayer:function(e){var t=new OpenLayers.Format.WMSDescribeLayer;(i=e.responseXML)&&i.documentElement||(i=e.responseText),e=t.read(i);for(var t=[],i=null,s=0,n=e.length;s<n;s++)"WFS"==e[s].owsType&&(t.push(e[s].typeName),i=e[s].owsURL);OpenLayers.Request.GET({url:i,params:{SERVICE:"WFS",TYPENAME:t.toString(),REQUEST:"DescribeFeatureType",VERSION:"1.0.0"},callback:function(e){var t=new OpenLayers.Format.WFSDescribeFeatureType,i=e.responseXML;i&&i.documentElement||(i=e.responseText),e=t.read(i),this.control.wfsCache[this.layer.id]=e,this.control._queue&&this.control.applySelection()},scope:this})},getGeometryAttributes:function(e){for(var t=[],i=0,s=(e=this.wfsCache[e.id]).featureTypes.length;i<s;i++)for(var n=e.featureTypes[i].properties,r=0,a=n.length;r<a;r++){var o=n[r],l=o.type;(0<=l.indexOf("LineString")||0<=l.indexOf("GeometryAssociationType")||0<=l.indexOf("GeometryPropertyType")||0<=l.indexOf("Point")||0<=l.indexOf("Polygon"))&&t.push(o)}return t},activate:function(){var e=OpenLayers.Control.prototype.activate.call(this);if(e)for(var t=0,i=this.layers.length;t<i;t++){var s=this.layers[t];s&&!this.wfsCache[s.id]&&OpenLayers.Request.GET({url:s.url,params:{SERVICE:"WMS",VERSION:s.params.VERSION,LAYERS:s.params.LAYERS,REQUEST:"DescribeLayer"},callback:this.parseDescribeLayer,scope:{layer:s,control:this}})}return e},deactivate:function(){var e=OpenLayers.Control.prototype.deactivate.call(this);if(e)for(var t=0,i=this.layers.length;t<i;t++){var s,n,r=this.layers[t];!r||!0!==this.clearOnDeactivate||(n=(s=this.layerCache)[r.id])&&(r.events.un({visibilitychanged:this.coupleLayerVisiblity,scope:n}),n.destroy(),delete s[r.id])}return e},setLayers:function(e){this.active?(this.deactivate(),this.layers=e,this.activate()):this.layers=e},createFilter:function(e,t){var i=null;return this.handler instanceof OpenLayers.Handler.RegularPolygon?i=!0===this.handler.irregular?new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.BBOX,property:e.name,value:t.getBounds()}):new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.INTERSECTS,property:e.name,value:t}):this.handler instanceof OpenLayers.Handler.Polygon?i=new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.INTERSECTS,property:e.name,value:t}):this.handler instanceof OpenLayers.Handler.Path?i=0<=e.type.indexOf("Point")?new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.DWITHIN,property:e.name,distance:.01*this.map.getExtent().getWidth(),distanceUnits:this.map.getUnits(),value:t}):new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.INTERSECTS,property:e.name,value:t}):this.handler instanceof OpenLayers.Handler.Click&&(i=0<=e.type.indexOf("Polygon")?new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.INTERSECTS,property:e.name,value:t}):new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.DWITHIN,property:e.name,distance:.01*this.map.getExtent().getWidth(),distanceUnits:this.map.getUnits(),value:t})),i},select:function(h){this._queue=function(){for(var e=0,t=this.layers.length;e<t;e++){for(var i=this.layers[e],s=this.getGeometryAttributes(i),n=[],r=0,a=s.length;r<a;r++){var o,l=s[r];null!==l&&(h instanceof OpenLayers.Geometry||(o=this.map.getLonLatFromPixel(h.xy),h=new OpenLayers.Geometry.Point(o.lon,o.lat)),null!==(l=this.createFilter(l,h))&&n.push(l))}r=this.createSelectionLayer(i),this.events.triggerEvent("selected",{layer:i,filters:n}),i=this.createSLD(i,n,s),r.mergeNewParams({SLD_BODY:i}),delete this._queue}},this.applySelection()},applySelection:function(){for(var e=!0,t=0,i=this.layers.length;t<i;t++)if(!this.wfsCache[this.layers[t].id]){e=!1;break}e&&this._queue.call(this)},CLASS_NAME:"OpenLayers.Control.SLDSelect"}),OpenLayers.Control.Scale=OpenLayers.Class(OpenLayers.Control,{element:null,geodesic:!1,initialize:function(e,t){OpenLayers.Control.prototype.initialize.apply(this,[t]),this.element=OpenLayers.Util.getElement(e)},draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),this.element||(this.element=document.createElement("div"),this.div.appendChild(this.element)),this.map.events.register("moveend",this,this.updateScale),this.updateScale(),this.div},updateScale:function(){var e;if(!0===this.geodesic){if(!this.map.getUnits())return;e=OpenLayers.INCHES_PER_UNIT,e=(this.map.getGeodesicPixelSize().w||1e-6)*e.km*OpenLayers.DOTS_PER_INCH}else e=this.map.getScale();e&&(e=9500<=e&&e<=95e4?Math.round(e/1e3)+"K":95e4<=e?Math.round(e/1e6)+"M":Math.round(e),this.element.innerHTML=OpenLayers.i18n("Scale = 1 : ${scaleDenom}",{scaleDenom:e}))},CLASS_NAME:"OpenLayers.Control.Scale"}),OpenLayers.Layer.MapGuide=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:!0,useHttpTile:!1,singleTile:!1,useOverlay:!1,useAsyncOverlay:!0,TILE_PARAMS:{operation:"GETTILEIMAGE",version:"1.2.0"},SINGLE_TILE_PARAMS:{operation:"GETMAPIMAGE",format:"PNG",locale:"en",clip:"1",version:"1.0.0"},OVERLAY_PARAMS:{operation:"GETDYNAMICMAPOVERLAYIMAGE",format:"PNG",locale:"en",clip:"1",version:"2.0.0"},FOLDER_PARAMS:{tileColumnsPerFolder:30,tileRowsPerFolder:30,format:"png",querystring:null},defaultSize:new OpenLayers.Size(300,300),tileOriginCorner:"tl",initialize:function(e,t,i,s){OpenLayers.Layer.Grid.prototype.initialize.apply(this,arguments),null!=s&&null!=s.isBaseLayer||(this.isBaseLayer="true"!=this.transparent&&1!=this.transparent),s&&null!=s.useOverlay&&(this.useOverlay=s.useOverlay),this.singleTile?this.useOverlay?(OpenLayers.Util.applyDefaults(this.params,this.OVERLAY_PARAMS),this.useAsyncOverlay||(this.params.version="1.0.0")):OpenLayers.Util.applyDefaults(this.params,this.SINGLE_TILE_PARAMS):(this.useHttpTile?OpenLayers.Util.applyDefaults(this.params,this.FOLDER_PARAMS):OpenLayers.Util.applyDefaults(this.params,this.TILE_PARAMS),this.setTileSize(this.defaultSize))},clone:function(e){return null==e&&(e=new OpenLayers.Layer.MapGuide(this.name,this.url,this.params,this.getOptions())),OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getURL:function(e){var t=e.getCenterLonLat(),i=this.map.getSize();return t=this.singleTile?(e={setdisplaydpi:OpenLayers.DOTS_PER_INCH,setdisplayheight:i.h*this.ratio,setdisplaywidth:i.w*this.ratio,setviewcenterx:t.lon,setviewcentery:t.lat,setviewscale:this.map.getScale()},this.useOverlay&&!this.useAsyncOverlay&&((t=OpenLayers.Util.extend(t={},e)).operation="GETVISIBLEMAPEXTENT",t.version="1.0.0",t.session=this.params.session,t.mapName=this.params.mapName,t.format="text/xml",t=this.getFullRequestString(t),OpenLayers.Request.GET({url:t,async:!1})),this.getFullRequestString(e)):(i=this.map.getResolution(),t=Math.floor((e.left-this.maxExtent.left)/i),t=Math.round(t/this.tileSize.w),e=Math.floor((this.maxExtent.top-e.top)/i),e=Math.round(e/this.tileSize.h),this.useHttpTile?this.getImageFilePath({tilecol:t,tilerow:e,scaleindex:this.resolutions.length-this.map.zoom-1}):this.getFullRequestString({tilecol:t,tilerow:e,scaleindex:this.resolutions.length-this.map.zoom-1}))},getFullRequestString:function(e,t){var i,t=null==t?this.url:t,s=t="object"==_typeof(t)?t[Math.floor(Math.random()*t.length)]:t,n=OpenLayers.Util.extend({},this.params),n=OpenLayers.Util.extend(n,e),r=OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(t));for(i in n)i.toUpperCase()in r&&delete n[i];return s=""!=(n=(n=OpenLayers.Util.getParameterString(n)).replace(/,/g,"+"))?"&"==(r=t.charAt(t.length-1))||"?"==r?s+n:-1==t.indexOf("?")?s+"?"+n:s+"&"+n:s},getImageFilePath:function(e,t){var t=null==t?this.url:t,i=("object"==_typeof(t)&&(t=t[Math.floor(Math.random()*t.length)]),""),s="";return e.tilerow<0&&(i="-"),i=0==e.tilerow?i+"0":i+Math.floor(Math.abs(e.tilerow/this.params.tileRowsPerFolder))*this.params.tileRowsPerFolder,e.tilecol<0&&(s="-"),s=0==e.tilecol?s+"0":s+Math.floor(Math.abs(e.tilecol/this.params.tileColumnsPerFolder))*this.params.tileColumnsPerFolder,i="/S"+Math.floor(e.scaleindex)+"/"+this.params.basemaplayergroupname+"/R"+i+"/C"+s+"/"+e.tilerow%this.params.tileRowsPerFolder+"_"+e.tilecol%this.params.tileColumnsPerFolder+"."+this.params.format,this.params.querystring&&(i+="?"+this.params.querystring),t+i},CLASS_NAME:"OpenLayers.Layer.MapGuide"}),OpenLayers.Control.Measure=OpenLayers.Class(OpenLayers.Control,{callbacks:null,displaySystem:"metric",geodesic:!1,displaySystemUnits:{geographic:["dd"],english:["mi","ft","in"],metric:["km","m"]},partialDelay:300,delayedTrigger:null,persist:!1,immediate:!1,initialize:function(e,t){OpenLayers.Control.prototype.initialize.apply(this,[t]);t={done:this.measureComplete,point:this.measurePartial};this.immediate&&(t.modify=this.measureImmediate),this.callbacks=OpenLayers.Util.extend(t,this.callbacks),this.handlerOptions=OpenLayers.Util.extend({persist:this.persist},this.handlerOptions),this.handler=new e(this,this.callbacks,this.handlerOptions)},deactivate:function(){return this.cancelDelay(),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},cancel:function(){this.cancelDelay(),this.handler.cancel()},setImmediate:function(e){(this.immediate=e)?this.callbacks.modify=this.measureImmediate:delete this.callbacks.modify},updateHandler:function(e,t){var i=this.active;i&&this.deactivate(),this.handler=new e(this,this.callbacks,t),i&&this.activate()},measureComplete:function(e){this.cancelDelay(),this.measure(e,"measure")},measurePartial:function(e,t){this.cancelDelay(),t=t.clone(),this.handler.freehandMode(this.handler.evt)?this.measure(t,"measurepartial"):this.delayedTrigger=window.setTimeout(OpenLayers.Function.bind(function(){this.delayedTrigger=null,this.measure(t,"measurepartial")},this),this.partialDelay)},measureImmediate:function(e,t,i){i&&!this.handler.freehandMode(this.handler.evt)&&(this.cancelDelay(),this.measure(t.geometry,"measurepartial"))},cancelDelay:function(){null!==this.delayedTrigger&&(window.clearTimeout(this.delayedTrigger),this.delayedTrigger=null)},measure:function(e,t){var i,s=-1<e.CLASS_NAME.indexOf("LineString")?(i=this.getBestLength(e),1):(i=this.getBestArea(e),2);this.events.triggerEvent(t,{measure:i[0],units:i[1],order:s,geometry:e})},getBestArea:function(e){for(var t,i,s=this.displaySystemUnits[this.displaySystem],n=0,r=s.length;n<r&&(t=s[n],!(1<(i=this.getArea(e,t))));++n);return[i,t]},getArea:function(e,t){var i,e=this.geodesic?(i=e.getGeodesicArea(this.map.getProjectionObject()),"m"):(i=e.getArea(),this.map.getUnits()),t=OpenLayers.INCHES_PER_UNIT[t];return t&&(i*=Math.pow(OpenLayers.INCHES_PER_UNIT[e]/t,2)),i},getBestLength:function(e){for(var t,i,s=this.displaySystemUnits[this.displaySystem],n=0,r=s.length;n<r&&(t=s[n],!(1<(i=this.getLength(e,t))));++n);return[i,t]},getLength:function(e,t){var i,e=this.geodesic?(i=e.getGeodesicLength(this.map.getProjectionObject()),"m"):(i=e.getLength(),this.map.getUnits()),t=OpenLayers.INCHES_PER_UNIT[t];return t&&(i*=OpenLayers.INCHES_PER_UNIT[e]/t),i},CLASS_NAME:"OpenLayers.Control.Measure"}),OpenLayers.Format.WMC.v1_0_0=OpenLayers.Class(OpenLayers.Format.WMC.v1,{VERSION:"1.0.0",schemaLocation:"http://www.opengis.net/context http://schemas.opengis.net/context/1.0.0/context.xsd",initialize:function(e){OpenLayers.Format.WMC.v1.prototype.initialize.apply(this,[e])},read_wmc_SRS:function(e,t){var i=this.getChildValue(t);"object"!=_typeof(e.projections)&&(e.projections={});for(var s=0,n=(i=i.split(/ +/)).length;s<n;s++)e.projections[i[s]]=!0},write_wmc_Layer:function(e){var t=OpenLayers.Format.WMC.v1.prototype.write_wmc_Layer.apply(this,[e]);if(e.srs){var i,s=[];for(i in e.srs)s.push(i);t.appendChild(this.createElementDefaultNS("SRS",s.join(" ")))}t.appendChild(this.write_wmc_FormatList(e)),t.appendChild(this.write_wmc_StyleList(e)),e.dimensions&&t.appendChild(this.write_wmc_DimensionList(e)),t.appendChild(this.write_wmc_LayerExtension(e))},CLASS_NAME:"OpenLayers.Format.WMC.v1_0_0"}),OpenLayers.Popup.Anchored=OpenLayers.Class(OpenLayers.Popup,{relativePosition:null,keepInMap:!0,anchor:null,initialize:function(e,t,i,s,n,r,a){OpenLayers.Popup.prototype.initialize.apply(this,[e,t,i,s,r,a]),this.anchor=null!=n?n:{size:new OpenLayers.Size(0,0),offset:new OpenLayers.Pixel(0,0)}},destroy:function(){this.relativePosition=this.anchor=null,OpenLayers.Popup.prototype.destroy.apply(this,arguments)},show:function(){this.updatePosition(),OpenLayers.Popup.prototype.show.apply(this,arguments)},moveTo:function(e){var t=this.relativePosition;this.relativePosition=this.calculateRelativePosition(e),OpenLayers.Popup.prototype.moveTo.call(this,this.calculateNewPx(e)),this.relativePosition!=t&&this.updateRelativePosition()},setSize:function(e){var t;OpenLayers.Popup.prototype.setSize.apply(this,arguments),this.lonlat&&this.map&&(t=this.map.getLayerPxFromLonLat(this.lonlat),this.moveTo(t))},calculateRelativePosition:function(e){return e=this.map.getLonLatFromLayerPx(e),e=this.map.getExtent().determineQuadrant(e),OpenLayers.Bounds.oppositeQuadrant(e)},updateRelativePosition:function(){},calculateNewPx:function(e){e=e.offset(this.anchor.offset);var t=this.size||this.contentSize,i="t"==this.relativePosition.charAt(0);return e.y+=i?-t.h:this.anchor.size.h,i="l"==this.relativePosition.charAt(1),e.x+=i?-t.w:this.anchor.size.w,e},CLASS_NAME:"OpenLayers.Popup.Anchored"}),OpenLayers.Popup.Framed=OpenLayers.Class(OpenLayers.Popup.Anchored,{imageSrc:null,imageSize:null,isAlphaImage:!1,positionBlocks:null,blocks:null,fixedRelativePosition:!1,initialize:function(e,t,i,s,n,r,a){OpenLayers.Popup.Anchored.prototype.initialize.apply(this,arguments),this.fixedRelativePosition&&(this.updateRelativePosition(),this.calculateRelativePosition=function(e){return this.relativePosition}),this.contentDiv.style.position="absolute",this.contentDiv.style.zIndex=1,r&&(this.closeDiv.style.zIndex=1),this.groupDiv.style.position="absolute",this.groupDiv.style.top="0px",this.groupDiv.style.left="0px",this.groupDiv.style.height="100%",this.groupDiv.style.width="100%"},destroy:function(){this.isAlphaImage=this.imageSize=this.imageSrc=null,this.fixedRelativePosition=!1,this.positionBlocks=null;for(var e=0;e<this.blocks.length;e++){var t=this.blocks[e];t.image&&t.div.removeChild(t.image),t.image=null,t.div&&this.groupDiv.removeChild(t.div),t.div=null}this.blocks=null,OpenLayers.Popup.Anchored.prototype.destroy.apply(this,arguments)},setBackgroundColor:function(e){},setBorder:function(){},setOpacity:function(e){},setSize:function(e){OpenLayers.Popup.Anchored.prototype.setSize.apply(this,arguments),this.updateBlocks()},updateRelativePosition:function(){var e;this.padding=this.positionBlocks[this.relativePosition].padding,this.closeDiv&&(e=this.getContentDivPadding(),this.closeDiv.style.right=e.right+this.padding.right+"px",this.closeDiv.style.top=e.top+this.padding.top+"px"),this.updateBlocks()},calculateNewPx:function(e){var t=OpenLayers.Popup.Anchored.prototype.calculateNewPx.apply(this,arguments);return t.offset(this.positionBlocks[this.relativePosition].offset)},createBlocks:function(){this.blocks=[];var e,t=null;for(e in this.positionBlocks){t=e;break}for(t=this.positionBlocks[t],e=0;e<t.blocks.length;e++){var i={};this.blocks.push(i),i.div=OpenLayers.Util.createDiv(this.id+"_FrameDecorationDiv_"+e,null,null,null,"absolute",null,"hidden",null),i.image=(this.isAlphaImage?OpenLayers.Util.createAlphaImageDiv:OpenLayers.Util.createImage)(this.id+"_FrameDecorationImg_"+e,null,this.imageSize,this.imageSrc,"absolute",null,null,null),i.div.appendChild(i.image),this.groupDiv.appendChild(i.div)}},updateBlocks:function(){if(this.blocks||this.createBlocks(),this.size&&this.relativePosition){for(var e=this.positionBlocks[this.relativePosition],t=0;t<e.blocks.length;t++){var i=e.blocks[t],s=this.blocks[t],n=i.anchor.left,r=i.anchor.bottom,a=i.anchor.right,o=i.anchor.top,l=isNaN(i.size.w)?this.size.w-(a+n):i.size.w,h=isNaN(i.size.h)?this.size.h-(r+o):i.size.h;s.div.style.width=(l<0?0:l)+"px",s.div.style.height=(h<0?0:h)+"px",s.div.style.left=null!=n?n+"px":"",s.div.style.bottom=null!=r?r+"px":"",s.div.style.right=null!=a?a+"px":"",s.div.style.top=null!=o?o+"px":"",s.image.style.left=i.position.x+"px",s.image.style.top=i.position.y+"px"}this.contentDiv.style.left=this.padding.left+"px",this.contentDiv.style.top=this.padding.top+"px"}},CLASS_NAME:"OpenLayers.Popup.Framed"}),OpenLayers.Popup.FramedCloud=OpenLayers.Class(OpenLayers.Popup.Framed,{contentDisplayClass:"olFramedCloudPopupContent",autoSize:!0,panMapIfOutOfView:!0,imageSize:new OpenLayers.Size(1276,736),isAlphaImage:!1,fixedRelativePosition:!1,positionBlocks:{tl:{offset:new OpenLayers.Pixel(44,0),padding:new OpenLayers.Bounds(8,40,8,9),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,51,22,0),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,50,0,0),position:new OpenLayers.Pixel(-1238,0)},{size:new OpenLayers.Size("auto",19),anchor:new OpenLayers.Bounds(0,32,22,null),position:new OpenLayers.Pixel(0,-631)},{size:new OpenLayers.Size(22,18),anchor:new OpenLayers.Bounds(null,32,0,null),position:new OpenLayers.Pixel(-1238,-632)},{size:new OpenLayers.Size(81,35),anchor:new OpenLayers.Bounds(null,0,0,null),position:new OpenLayers.Pixel(0,-688)}]},tr:{offset:new OpenLayers.Pixel(-45,0),padding:new OpenLayers.Bounds(8,40,8,9),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,51,22,0),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,50,0,0),position:new OpenLayers.Pixel(-1238,0)},{size:new OpenLayers.Size("auto",19),anchor:new OpenLayers.Bounds(0,32,22,null),position:new OpenLayers.Pixel(0,-631)},{size:new OpenLayers.Size(22,19),anchor:new OpenLayers.Bounds(null,32,0,null),position:new OpenLayers.Pixel(-1238,-631)},{size:new OpenLayers.Size(81,35),anchor:new OpenLayers.Bounds(0,0,null,null),position:new OpenLayers.Pixel(-215,-687)}]},bl:{offset:new OpenLayers.Pixel(45,0),padding:new OpenLayers.Bounds(8,9,8,40),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,21,22,32),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,21,0,32),position:new OpenLayers.Pixel(-1238,0)},{size:new OpenLayers.Size("auto",21),anchor:new OpenLayers.Bounds(0,0,22,null),position:new OpenLayers.Pixel(0,-629)},{size:new OpenLayers.Size(22,21),anchor:new OpenLayers.Bounds(null,0,0,null),position:new OpenLayers.Pixel(-1238,-629)},{size:new OpenLayers.Size(81,33),anchor:new OpenLayers.Bounds(null,null,0,0),position:new OpenLayers.Pixel(-101,-674)}]},br:{offset:new OpenLayers.Pixel(-44,0),padding:new OpenLayers.Bounds(8,9,8,40),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,21,22,32),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,21,0,32),position:new OpenLayers.Pixel(-1238,0)},{size:new OpenLayers.Size("auto",21),anchor:new OpenLayers.Bounds(0,0,22,null),position:new OpenLayers.Pixel(0,-629)},{size:new OpenLayers.Size(22,21),anchor:new OpenLayers.Bounds(null,0,0,null),position:new OpenLayers.Pixel(-1238,-629)},{size:new OpenLayers.Size(81,33),anchor:new OpenLayers.Bounds(0,null,null,0),position:new OpenLayers.Pixel(-311,-674)}]}},minSize:new OpenLayers.Size(105,10),maxSize:new OpenLayers.Size(1200,660),initialize:function(e,t,i,s,n,r,a){this.imageSrc=OpenLayers.Util.getImageLocation("cloud-popup-relative.png"),OpenLayers.Popup.Framed.prototype.initialize.apply(this,arguments),this.contentDiv.className=this.contentDisplayClass},CLASS_NAME:"OpenLayers.Popup.FramedCloud"}),OpenLayers.Tile.Image.IFrame={useIFrame:null,blankImageUrl:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAQAIBRAA7",draw:function(){var e,t;return OpenLayers.Tile.Image.prototype.shouldDraw.call(this)&&(e=this.layer.getURL(this.bounds),t=this.useIFrame,this.useIFrame=null!==this.maxGetUrlLength&&!this.layer.async&&e.length>this.maxGetUrlLength,e=t&&!this.useIFrame,t=!t&&this.useIFrame,(e||t)&&(this.imgDiv&&this.imgDiv.parentNode===this.frame&&this.frame.removeChild(this.imgDiv),this.imgDiv=null,e&&this.frame.removeChild(this.frame.firstChild))),OpenLayers.Tile.Image.prototype.draw.apply(this,arguments)},getImage:function(){var e,t;return!0===this.useIFrame?(this.frame.childNodes.length||((t=(e=document.createElement("div")).style).position="absolute",t.width="100%",t.height="100%",t.zIndex=1,t.backgroundImage="url("+this.blankImageUrl+")",this.frame.appendChild(e)),e=this.id+"_iFrame",parseFloat(navigator.appVersion.split("MSIE")[1])<9?((t=document.createElement('<iframe name="'+e+'">')).style.backgroundColor="#FFFFFF",t.style.filter="chroma(color=#FFFFFF)"):((t=document.createElement("iframe")).style.backgroundColor="transparent",t.name=e),t.scrolling="no",t.marginWidth="0px",t.marginHeight="0px",t.frameBorder="0",t.style.position="absolute",t.style.width="100%",t.style.height="100%",this.layer.opacity<1&&OpenLayers.Util.modifyDOMElement(t,null,null,null,null,null,null,this.layer.opacity),this.frame.appendChild(t),this.imgDiv=t):OpenLayers.Tile.Image.prototype.getImage.apply(this,arguments)},createRequestForm:function(){var e=document.createElement("form");e.method="POST";var t,i,s=((s=this.layer.params._OLSALT)?s+"_":"")+this.bounds.toBBOX();for(i in e.action=OpenLayers.Util.urlAppend(this.layer.url,s),e.target=this.id+"_iFrame",this.layer.getImageSize(),s=OpenLayers.Util.getParameters(this.url))(t=document.createElement("input")).type="hidden",t.name=i,t.value=s[i],e.appendChild(t);return e},setImgSrc:function(e){!0===this.useIFrame?e?(e=this.createRequestForm(),this.frame.appendChild(e),e.submit(),this.frame.removeChild(e)):this.imgDiv.parentNode===this.frame&&(this.frame.removeChild(this.imgDiv),this.imgDiv=null):OpenLayers.Tile.Image.prototype.setImgSrc.apply(this,arguments)},onImageLoad:function(){OpenLayers.Tile.Image.prototype.onImageLoad.apply(this,arguments),!0===this.useIFrame&&(this.imgDiv.style.opacity=1,this.frame.style.opacity=this.layer.opacity)},createBackBuffer:function(){var e;return e=!1===this.useIFrame?OpenLayers.Tile.Image.prototype.createBackBuffer.call(this):e}},OpenLayers.Format.SOSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.0.0",CLASS_NAME:"OpenLayers.Format.SOSCapabilities"}),OpenLayers.Format.SOSCapabilities.v1_0_0=OpenLayers.Class(OpenLayers.Format.SOSCapabilities,{namespaces:{ows:"http://www.opengis.net/ows/1.1",sos:"http://www.opengis.net/sos/1.0",gml:"http://www.opengis.net/gml",xlink:"http://www.w3.org/1999/xlink"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e]),this.options=e},read:function(e){(e="string"==typeof e?OpenLayers.Format.XML.prototype.read.apply(this,[e]):e)&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),t},readers:{gml:OpenLayers.Util.applyDefaults({name:function(e,t){t.name=this.getChildValue(e)},TimePeriod:function(e,t){t.timePeriod={},this.readChildNodes(e,t.timePeriod)},beginPosition:function(e,t){t.beginPosition=this.getChildValue(e)},endPosition:function(e,t){t.endPosition=this.getChildValue(e)}},OpenLayers.Format.GML.v3.prototype.readers.gml),sos:{Capabilities:function(e,t){this.readChildNodes(e,t)},Contents:function(e,t){t.contents={},this.readChildNodes(e,t.contents)},ObservationOfferingList:function(e,t){t.offeringList={},this.readChildNodes(e,t.offeringList)},ObservationOffering:function(e,t){var i=this.getAttributeNS(e,this.namespaces.gml,"id");t[i]={procedures:[],observedProperties:[],featureOfInterestIds:[],responseFormats:[],resultModels:[],responseModes:[]},this.readChildNodes(e,t[i])},time:function(e,t){t.time={},this.readChildNodes(e,t.time)},procedure:function(e,t){t.procedures.push(this.getAttributeNS(e,this.namespaces.xlink,"href"))},observedProperty:function(e,t){t.observedProperties.push(this.getAttributeNS(e,this.namespaces.xlink,"href"))},featureOfInterest:function(e,t){t.featureOfInterestIds.push(this.getAttributeNS(e,this.namespaces.xlink,"href"))},responseFormat:function(e,t){t.responseFormats.push(this.getChildValue(e))},resultModel:function(e,t){t.resultModels.push(this.getChildValue(e))},responseMode:function(e,t){t.responseModes.push(this.getChildValue(e))}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.SOSCapabilities.v1_0_0"}),OpenLayers.Handler.Pinch=OpenLayers.Class(OpenLayers.Handler,{started:!1,stopDown:!1,pinching:!1,last:null,start:null,touchstart:function(e){var t=!0;if(this.pinching=!1,OpenLayers.Event.isMultiTouch(e))this.started=!0,this.last=this.start={distance:this.getDistance(e.touches),delta:0,scale:1},this.callback("start",[e,this.start]),t=!this.stopDown;else{if(this.started)return!1;this.started=!1,this.last=this.start=null}return OpenLayers.Event.preventDefault(e),t},touchmove:function(e){if(this.started&&OpenLayers.Event.isMultiTouch(e)){this.pinching=!0;var t=this.getPinchData(e);this.callback("move",[e,t]),this.last=t,OpenLayers.Event.stop(e)}else if(this.started)return!1;return!0},touchend:function(e){return!(this.started&&!OpenLayers.Event.isMultiTouch(e))||(this.pinching=this.started=!1,this.callback("done",[e,this.start,this.last]),this.last=this.start=null,!1)},activate:function(){var e=!1;return e=OpenLayers.Handler.prototype.activate.apply(this,arguments)?!(this.pinching=!1):e},deactivate:function(){var e=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.pinching=this.started=!1,e=!(this.last=this.start=null)),e},getDistance:function(e){var t=e[0];return e=e[1],Math.sqrt(Math.pow(t.olClientX-e.olClientX,2)+Math.pow(t.olClientY-e.olClientY,2))},getPinchData:function(e){return{distance:e=this.getDistance(e.touches),delta:this.last.distance-e,scale:e/this.start.distance}},CLASS_NAME:"OpenLayers.Handler.Pinch"}),OpenLayers.Control.NavToolbar=OpenLayers.Class(OpenLayers.Control.Panel,{initialize:function(e){OpenLayers.Control.Panel.prototype.initialize.apply(this,[e]),this.addControls([new OpenLayers.Control.Navigation,new OpenLayers.Control.ZoomBox])},draw:function(){var e=OpenLayers.Control.Panel.prototype.draw.apply(this,arguments);return null===this.defaultControl&&(this.defaultControl=this.controls[0]),e},CLASS_NAME:"OpenLayers.Control.NavToolbar"}),OpenLayers.Strategy.Refresh=OpenLayers.Class(OpenLayers.Strategy,{force:!1,interval:0,timer:null,activate:function(){var e=OpenLayers.Strategy.prototype.activate.call(this);return e&&(!0===this.layer.visibility&&this.start(),this.layer.events.on({visibilitychanged:this.reset,scope:this})),e},deactivate:function(){var e=OpenLayers.Strategy.prototype.deactivate.call(this);return e&&(this.stop(),this.layer.events.un({visibilitychanged:this.reset,scope:this})),e},reset:function(){!0===this.layer.visibility?this.start():this.stop()},start:function(){this.interval&&"number"==typeof this.interval&&0<this.interval&&(this.timer=window.setInterval(OpenLayers.Function.bind(this.refresh,this),this.interval))},refresh:function(){this.layer&&this.layer.refresh&&"function"==typeof this.layer.refresh&&this.layer.refresh({force:this.force})},stop:function(){null!==this.timer&&(window.clearInterval(this.timer),this.timer=null)},CLASS_NAME:"OpenLayers.Strategy.Refresh"}),OpenLayers.Layer.ArcGIS93Rest=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{format:"png"},isBaseLayer:!0,initialize:function(e,t,i,s){var n=[];i=OpenLayers.Util.upperCaseObject(i),n.push(e,t,i,s),OpenLayers.Layer.Grid.prototype.initialize.apply(this,n),OpenLayers.Util.applyDefaults(this.params,OpenLayers.Util.upperCaseObject(this.DEFAULT_PARAMS)),this.params.TRANSPARENT&&"true"==this.params.TRANSPARENT.toString().toLowerCase()&&(null!=s&&s.isBaseLayer||(this.isBaseLayer=!1),"jpg"==this.params.FORMAT&&(this.params.FORMAT=OpenLayers.Util.alphaHack()?"gif":"png"))},clone:function(e){return null==e&&(e=new OpenLayers.Layer.ArcGIS93Rest(this.name,this.url,this.params,this.getOptions())),OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getURL:function(e){e=this.adjustBounds(e);var t=(t=this.projection.getCode().split(":"))[t.length-1],i=this.getImageSize();if(e={BBOX:e.toBBOX(),SIZE:i.w+","+i.h,F:"image",BBOXSR:t,IMAGESR:t},this.layerDefs){var s,t=[];for(s in this.layerDefs)this.layerDefs.hasOwnProperty(s)&&this.layerDefs[s]&&(t.push(s),t.push(":"),t.push(this.layerDefs[s]),t.push(";"));0<t.length&&(e.LAYERDEFS=t.join(""))}return this.getFullRequestString(e)},setLayerFilter:function(e,t){this.layerDefs||(this.layerDefs={}),t?this.layerDefs[e]=t:delete this.layerDefs[e]},clearLayerFilter:function(e){e?delete this.layerDefs[e]:delete this.layerDefs},mergeNewParams:function(e){return e=[OpenLayers.Util.upperCaseObject(e)],OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this,e)},CLASS_NAME:"OpenLayers.Layer.ArcGIS93Rest"}),OpenLayers.Handler.Hover=OpenLayers.Class(OpenLayers.Handler,{delay:500,pixelTolerance:null,stopMove:!1,px:null,timerId:null,mousemove:function(e){return this.passesTolerance(e.xy)&&(this.clearTimer(),this.callback("move",[e]),this.px=e.xy,e=OpenLayers.Util.extend({},e),this.timerId=window.setTimeout(OpenLayers.Function.bind(this.delayedCall,this,e),this.delay)),!this.stopMove},mouseout:function(e){return OpenLayers.Util.mouseLeft(e,this.map.viewPortDiv)&&(this.clearTimer(),this.callback("move",[e])),!0},passesTolerance:function(e){var t=!0;return t=this.pixelTolerance&&this.px&&Math.sqrt(Math.pow(this.px.x-e.x,2)+Math.pow(this.px.y-e.y,2))<this.pixelTolerance?!1:t},clearTimer:function(){null!=this.timerId&&(window.clearTimeout(this.timerId),this.timerId=null)},delayedCall:function(e){this.callback("pause",[e])},deactivate:function(){var e=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.clearTimer(),e=!0),e},CLASS_NAME:"OpenLayers.Handler.Hover"}),OpenLayers.Control.GetFeature=OpenLayers.Class(OpenLayers.Control,{protocol:null,multipleKey:null,toggleKey:null,modifiers:null,multiple:!1,click:!0,single:!0,clickout:!0,toggle:!1,clickTolerance:5,hover:!1,box:!1,maxFeatures:10,features:null,hoverFeature:null,handlers:null,hoverResponse:null,filterType:OpenLayers.Filter.Spatial.BBOX,initialize:function(e){e.handlerOptions=e.handlerOptions||{},OpenLayers.Control.prototype.initialize.apply(this,[e]),this.features={},this.handlers={},this.click&&(this.handlers.click=new OpenLayers.Handler.Click(this,{click:this.selectClick},this.handlerOptions.click||{})),this.box&&(this.handlers.box=new OpenLayers.Handler.Box(this,{done:this.selectBox},OpenLayers.Util.extend(this.handlerOptions.box,{boxDivClassName:"olHandlerBoxSelectFeature"}))),this.hover&&(this.handlers.hover=new OpenLayers.Handler.Hover(this,{move:this.cancelHover,pause:this.selectHover},OpenLayers.Util.extend(this.handlerOptions.hover,{delay:250,pixelTolerance:2})))},activate:function(){if(!this.active)for(var e in this.handlers)this.handlers[e].activate();return OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){if(this.active)for(var e in this.handlers)this.handlers[e].deactivate();return OpenLayers.Control.prototype.deactivate.apply(this,arguments)},selectClick:function(e){var t=this.pixelToBounds(e.xy);this.setModifiers(e),this.request(t,{single:this.single})},selectBox:function(e){var t;if(e instanceof OpenLayers.Bounds)t=this.map.getLonLatFromPixel({x:e.left,y:e.bottom}),e=this.map.getLonLatFromPixel({x:e.right,y:e.top}),t=new OpenLayers.Bounds(t.lon,t.lat,e.lon,e.lat);else{if(this.click)return;t=this.pixelToBounds(e)}this.setModifiers(this.handlers.box.dragHandler.evt),this.request(t)},selectHover:function(e){e=this.pixelToBounds(e.xy),this.request(e,{single:!0,hover:!0})},cancelHover:function(){this.hoverResponse&&(this.protocol.abort(this.hoverResponse),this.hoverResponse=null,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait"))},request:function(t,i){i=i||{};var e=new OpenLayers.Filter.Spatial({type:this.filterType,value:t});OpenLayers.Element.addClass(this.map.viewPortDiv,"olCursorWait"),e=this.protocol.read({maxFeatures:1==i.single?this.maxFeatures:void 0,filter:e,callback:function(e){e.success()&&(e.features.length?1==i.single?this.selectBestFeature(e.features,t.getCenterLonLat(),i):this.select(e.features):i.hover?this.hoverSelect():(this.events.triggerEvent("clickout"),this.clickout&&this.unselectAll())),OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait")},scope:this}),1==i.hover&&(this.hoverResponse=e)},selectBestFeature:function(e,t,i){if(i=i||{},e.length){t=new OpenLayers.Geometry.Point(t.lon,t.lat);for(var s,n,r,a=Number.MAX_VALUE,o=0;o<e.length&&!((s=e[o]).geometry&&((r=t.distanceTo(s.geometry,{edge:!1}))<a&&(n=s,0==(a=r))));++o);1==i.hover?this.hoverSelect(n):this.select(n||e)}},setModifiers:function(e){this.modifiers={multiple:this.multiple||this.multipleKey&&e[this.multipleKey],toggle:this.toggle||this.toggleKey&&e[this.toggleKey]}},select:function(e){if(this.modifiers.multiple||this.modifiers.toggle||this.unselectAll(),OpenLayers.Util.isArray(e)||(e=[e]),!1!==this.events.triggerEvent("beforefeaturesselected",{features:e})){for(var t,i=[],s=0,n=e.length;s<n;++s)t=e[s],this.features[t.fid||t.id]?this.modifiers.toggle&&this.unselect(this.features[t.fid||t.id]):!1!==this.events.triggerEvent("beforefeatureselected",{feature:t})&&(this.features[t.fid||t.id]=t,i.push(t),this.events.triggerEvent("featureselected",{feature:t}));this.events.triggerEvent("featuresselected",{features:i})}},hoverSelect:function(e){var t=e?e.fid||e.id:null,i=this.hoverFeature?this.hoverFeature.fid||this.hoverFeature.id:null;i&&i!=t&&(this.events.triggerEvent("outfeature",{feature:this.hoverFeature}),this.hoverFeature=null),t&&t!=i&&(this.events.triggerEvent("hoverfeature",{feature:e}),this.hoverFeature=e)},unselect:function(e){delete this.features[e.fid||e.id],this.events.triggerEvent("featureunselected",{feature:e})},unselectAll:function(){for(var e in this.features)this.unselect(this.features[e])},setMap:function(e){for(var t in this.handlers)this.handlers[t].setMap(e);OpenLayers.Control.prototype.setMap.apply(this,arguments)},pixelToBounds:function(e){var t=e.add(-this.clickTolerance/2,this.clickTolerance/2);return e=e.add(this.clickTolerance/2,-this.clickTolerance/2),t=this.map.getLonLatFromPixel(t),e=this.map.getLonLatFromPixel(e),new OpenLayers.Bounds(t.lon,t.lat,e.lon,e.lat)},CLASS_NAME:"OpenLayers.Control.GetFeature"}),OpenLayers.Format.QueryStringFilter=function(){var n={};return n[OpenLayers.Filter.Comparison.EQUAL_TO]="eq",n[OpenLayers.Filter.Comparison.NOT_EQUAL_TO]="ne",n[OpenLayers.Filter.Comparison.LESS_THAN]="lt",n[OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO]="lte",n[OpenLayers.Filter.Comparison.GREATER_THAN]="gt",n[OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO]="gte",n[OpenLayers.Filter.Comparison.LIKE]="ilike",OpenLayers.Class(OpenLayers.Format,{wildcarded:!1,srsInBBOX:!1,write:function(e,t){t=t||{};var i,s=e.CLASS_NAME;switch(s=s.substring(s.lastIndexOf(".")+1)){case"Spatial":switch(e.type){case OpenLayers.Filter.Spatial.BBOX:t.bbox=e.value.toArray(),this.srsInBBOX&&e.projection&&t.bbox.push(e.projection.getCode());break;case OpenLayers.Filter.Spatial.DWITHIN:t.tolerance=e.distance;case OpenLayers.Filter.Spatial.WITHIN:t.lon=e.value.x,t.lat=e.value.y;break;default:OpenLayers.Console.warn("Unknown spatial filter type "+e.type)}break;case"Comparison":void 0!==(s=n[e.type])?(i=e.value,e.type==OpenLayers.Filter.Comparison.LIKE&&(i=i.replace(/%/g,"\\%").replace(/\\\\\.(\*)?/g,function(e,t){return t?e:"\\\\_"}).replace(/\\\\\.\*/g,"\\\\%").replace(/(\\)?\.(\*)?/g,function(e,t,i){return t||i?e:"_"}).replace(/(\\)?\.\*/g,function(e,t){return t?e:"%"}).replace(/\\\./g,".").replace(/(\\)?\\\*/g,function(e,t){return t?e:"*"}),this.wildcarded&&(i="%"+i+"%")),t[e.property+"__"+s]=i,t.queryable=t.queryable||[],t.queryable.push(e.property)):OpenLayers.Console.warn("Unknown comparison filter type "+e.type);break;case"Logical":if(e.type===OpenLayers.Filter.Logical.AND)for(s=0,i=e.filters.length;s<i;s++)t=this.write(e.filters[s],t);else OpenLayers.Console.warn("Unsupported logical filter type "+e.type);break;default:OpenLayers.Console.warn("Unknown filter type "+s)}return t},CLASS_NAME:"OpenLayers.Format.QueryStringFilter"})}(),OpenLayers.Control.MousePosition=OpenLayers.Class(OpenLayers.Control,{autoActivate:!0,element:null,prefix:"",separator:", ",suffix:"",numDigits:5,granularity:10,emptyString:null,lastXy:null,displayProjection:null,destroy:function(){this.deactivate(),OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){return!!OpenLayers.Control.prototype.activate.apply(this,arguments)&&(this.map.events.register("mousemove",this,this.redraw),this.map.events.register("mouseout",this,this.reset),this.redraw(),!0)},deactivate:function(){return!!OpenLayers.Control.prototype.deactivate.apply(this,arguments)&&(this.map.events.unregister("mousemove",this,this.redraw),this.map.events.unregister("mouseout",this,this.reset),!(this.element.innerHTML=""))},draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),this.element||(this.div.left="",this.div.top="",this.element=this.div),this.div},redraw:function(e){var t;null==e?this.reset():null==this.lastXy||Math.abs(e.xy.x-this.lastXy.x)>this.granularity||Math.abs(e.xy.y-this.lastXy.y)>this.granularity?this.lastXy=e.xy:(t=this.map.getLonLatFromPixel(e.xy))&&(this.displayProjection&&t.transform(this.map.getProjectionObject(),this.displayProjection),this.lastXy=e.xy,(e=this.formatOutput(t))!=this.element.innerHTML&&(this.element.innerHTML=e))},reset:function(e){null!=this.emptyString&&(this.element.innerHTML=this.emptyString)},formatOutput:function(e){var t=parseInt(this.numDigits);return this.prefix+e.lon.toFixed(t)+this.separator+e.lat.toFixed(t)+this.suffix},CLASS_NAME:"OpenLayers.Control.MousePosition"}),OpenLayers.Control.Geolocate=OpenLayers.Class(OpenLayers.Control,{geolocation:null,available:"geolocation"in navigator,bind:!0,watch:!1,geolocationOptions:null,destroy:function(){this.deactivate(),OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){return this.available&&!this.geolocation&&(this.geolocation=navigator.geolocation),this.geolocation?!!OpenLayers.Control.prototype.activate.apply(this,arguments)&&(this.watch?this.watchId=this.geolocation.watchPosition(OpenLayers.Function.bind(this.geolocate,this),OpenLayers.Function.bind(this.failure,this),this.geolocationOptions):this.getCurrentLocation(),!0):(this.events.triggerEvent("locationuncapable"),!1)},deactivate:function(){return this.active&&null!==this.watchId&&this.geolocation.clearWatch(this.watchId),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},geolocate:function(e){var t=new OpenLayers.LonLat(e.coords.longitude,e.coords.latitude).transform(new OpenLayers.Projection("EPSG:4326"),this.map.getProjectionObject());this.bind&&this.map.setCenter(t),this.events.triggerEvent("locationupdated",{position:e,point:new OpenLayers.Geometry.Point(t.lon,t.lat)})},getCurrentLocation:function(){return!(!this.active||this.watch)&&(this.geolocation.getCurrentPosition(OpenLayers.Function.bind(this.geolocate,this),OpenLayers.Function.bind(this.failure,this),this.geolocationOptions),!0)},failure:function(e){this.events.triggerEvent("locationfailed",{error:e})},CLASS_NAME:"OpenLayers.Control.Geolocate"}),OpenLayers.Tile.UTFGrid=OpenLayers.Class(OpenLayers.Tile,{url:null,utfgridResolution:2,json:null,format:null,destroy:function(){this.clear(),OpenLayers.Tile.prototype.destroy.apply(this,arguments)},draw:function(){var e,t=OpenLayers.Tile.prototype.draw.apply(this,arguments);return t?(this.isLoading?(this.abortLoading(),this.events.triggerEvent("reload")):(this.isLoading=!0,this.events.triggerEvent("loadstart")),this.url=this.layer.getURL(this.bounds),this.layer.useJSONP?((e=new OpenLayers.Protocol.Script({url:this.url,callback:function(e){this.isLoading=!1,this.events.triggerEvent("loadend"),this.json=e.data},scope:this})).read(),this.request=e):this.request=OpenLayers.Request.GET({url:this.url,callback:function(e){this.isLoading=!1,this.events.triggerEvent("loadend"),200===e.status&&this.parseData(e.responseText)},scope:this})):this.unload(),t},abortLoading:function(){this.request&&(this.request.abort(),delete this.request),this.isLoading=!1},getFeatureInfo:function(e,t){var i=null;return i=this.json&&null!==(e=this.getFeatureId(e,t))?{id:e,data:this.json.data[e]}:i},getFeatureId:function(e,t){var i,s=null;return this.json&&(i=this.utfgridResolution,i=this.json.grid[Math.floor(t/i)].charCodeAt(Math.floor(e/i)),i=this.indexFromCharCode(i),t=this.json.keys,!isNaN(i)&&i in t&&(s=t[i])),s},indexFromCharCode:function(e){return 93<=e&&e--,35<=e&&e--,e-32},parseData:function(e){this.format||(this.format=new OpenLayers.Format.JSON),this.json=this.format.read(e)},clear:function(){this.json=null},CLASS_NAME:"OpenLayers.Tile.UTFGrid"}),OpenLayers.Protocol.HTTP=OpenLayers.Class(OpenLayers.Protocol,{url:null,headers:null,params:null,callback:null,scope:null,readWithPOST:!1,updateWithPOST:!1,deleteWithPOST:!1,wildcarded:!1,srsInBBOX:!1,initialize:function(e){var i;this.params={},this.headers={},OpenLayers.Protocol.prototype.initialize.apply(this,arguments),!this.filterToParams&&OpenLayers.Format.QueryStringFilter&&(i=new OpenLayers.Format.QueryStringFilter({wildcarded:this.wildcarded,srsInBBOX:this.srsInBBOX}),this.filterToParams=function(e,t){return i.write(e,t)})},destroy:function(){this.headers=this.params=null,OpenLayers.Protocol.prototype.destroy.apply(this)},read:function(e){OpenLayers.Protocol.prototype.read.apply(this,arguments),(e=e||{}).params=OpenLayers.Util.applyDefaults(e.params,this.options.params),(e=OpenLayers.Util.applyDefaults(e,this.options)).filter&&this.filterToParams&&(e.params=this.filterToParams(e.filter,e.params));var t=(void 0!==e.readWithPOST?e:this).readWithPOST,i=new OpenLayers.Protocol.Response({requestType:"read"});return t?((t=e.headers||{})["Content-Type"]="application/x-www-form-urlencoded",i.priv=OpenLayers.Request.POST({url:e.url,callback:this.createCallback(this.handleRead,i,e),data:OpenLayers.Util.getParameterString(e.params),headers:t})):i.priv=OpenLayers.Request.GET({url:e.url,callback:this.createCallback(this.handleRead,i,e),params:e.params,headers:e.headers}),i},handleRead:function(e,t){this.handleResponse(e,t)},create:function(e,t){t=OpenLayers.Util.applyDefaults(t,this.options);var i=new OpenLayers.Protocol.Response({reqFeatures:e,requestType:"create"});return i.priv=OpenLayers.Request.POST({url:t.url,callback:this.createCallback(this.handleCreate,i,t),headers:t.headers,data:this.format.write(e)}),i},handleCreate:function(e,t){this.handleResponse(e,t)},update:function(e,t){var i=(t=t||{}).url||e.url||this.options.url+"/"+e.fid,s=(t=OpenLayers.Util.applyDefaults(t,this.options),new OpenLayers.Protocol.Response({reqFeatures:e,requestType:"update"}));return s.priv=OpenLayers.Request[this.updateWithPOST?"POST":"PUT"]({url:i,callback:this.createCallback(this.handleUpdate,s,t),headers:t.headers,data:this.format.write(e)}),s},handleUpdate:function(e,t){this.handleResponse(e,t)},delete:function(e,t){var i=(t=t||{}).url||e.url||this.options.url+"/"+e.fid,s=(t=OpenLayers.Util.applyDefaults(t,this.options),new OpenLayers.Protocol.Response({reqFeatures:e,requestType:"delete"})),n=this.deleteWithPOST?"POST":"DELETE",i={url:i,callback:this.createCallback(this.handleDelete,s,t),headers:t.headers};return this.deleteWithPOST&&(i.data=this.format.write(e)),s.priv=OpenLayers.Request[n](i),s},handleDelete:function(e,t){this.handleResponse(e,t)},handleResponse:function(e,t){var i=e.priv;t.callback&&(200<=i.status&&i.status<300?("delete"!=e.requestType&&(e.features=this.parseFeatures(i)),e.code=OpenLayers.Protocol.Response.SUCCESS):e.code=OpenLayers.Protocol.Response.FAILURE,t.callback.call(t.scope,e))},parseFeatures:function(e){var t=e.responseXML;return!(t=t&&t.documentElement?t:e.responseText)||t.length<=0?null:this.format.read(t)},commit:function(e,t){function n(e){this.callUserCallback(e,t),c=c&&e.success(),u<=++s&&t.callback&&(d.code=c?OpenLayers.Protocol.Response.SUCCESS:OpenLayers.Protocol.Response.FAILURE,t.callback.apply(t.scope,[d]))}t=OpenLayers.Util.applyDefaults(t,this.options);var i=[],s=0,r={};r[OpenLayers.State.INSERT]=[],r[OpenLayers.State.UPDATE]=[],r[OpenLayers.State.DELETE]=[];for(var a,o=[],l=0,h=e.length;l<h;++l)(a=r[(p=e[l]).state])&&(a.push(p),o.push(p));var p,u=(0<r[OpenLayers.State.INSERT].length?1:0)+r[OpenLayers.State.UPDATE].length+r[OpenLayers.State.DELETE].length,c=!0,d=new OpenLayers.Protocol.Response({reqFeatures:o});for(0<(p=r[OpenLayers.State.INSERT]).length&&i.push(this.create(p,OpenLayers.Util.applyDefaults({callback:function(e){for(var t=e.features?e.features.length:0,i=Array(t),s=0;s<t;++s)i[s]=e.features[s].fid;d.insertIds=i,n.apply(this,[e])},scope:this},t.create))),l=(p=r[OpenLayers.State.UPDATE]).length-1;0<=l;--l)i.push(this.update(p[l],OpenLayers.Util.applyDefaults({callback:n,scope:this},t.update)));for(l=(p=r[OpenLayers.State.DELETE]).length-1;0<=l;--l)i.push(this.delete(p[l],OpenLayers.Util.applyDefaults({callback:n,scope:this},t.delete)));return i},abort:function(e){e&&e.priv.abort()},callUserCallback:function(e,t){t=t[e.requestType];t&&t.callback&&t.callback.call(t.scope,e)},CLASS_NAME:"OpenLayers.Protocol.HTTP"}),OpenLayers.Strategy.Cluster=OpenLayers.Class(OpenLayers.Strategy,{distance:20,threshold:null,features:null,clusters:null,clustering:!1,resolution:null,activate:function(){var e=OpenLayers.Strategy.prototype.activate.call(this);return e&&this.layer.events.on({beforefeaturesadded:this.cacheFeatures,featuresremoved:this.clearCache,moveend:this.cluster,scope:this}),e},deactivate:function(){var e=OpenLayers.Strategy.prototype.deactivate.call(this);return e&&(this.clearCache(),this.layer.events.un({beforefeaturesadded:this.cacheFeatures,featuresremoved:this.clearCache,moveend:this.cluster,scope:this})),e},cacheFeatures:function(e){var t=!0;return this.clustering||(this.clearCache(),this.features=e.features,this.cluster(),t=!1),t},clearCache:function(){this.clustering||(this.features=null)},cluster:function(e){if((!e||e.zoomChanged)&&this.features&&((e=this.layer.map.getResolution())!=this.resolution||!this.clustersExist())){this.resolution=e,e=[];for(var t,i,s=0;s<this.features.length;++s)if((t=this.features[s]).geometry){for(var n=!1,r=e.length-1;0<=r;--r)if(i=e[r],this.shouldCluster(i,t)){this.addToCluster(i,t),n=!0;break}n||e.push(this.createCluster(this.features[s]))}if(this.clustering=!0,this.layer.removeAllFeatures(),this.clustering=!1,0<e.length){if(1<this.threshold)for(t=e.slice(),e=[],s=0,i=t.length;s<i;++s)(n=t[s]).attributes.count<this.threshold?Array.prototype.push.apply(e,n.cluster):e.push(n);this.clustering=!0,this.layer.addFeatures(e),this.clustering=!1}this.clusters=e}},clustersExist:function(){var e=!1;if(this.clusters&&0<this.clusters.length&&this.clusters.length==this.layer.features.length)for(var e=!0,t=0;t<this.clusters.length;++t)if(this.clusters[t]!=this.layer.features[t]){e=!1;break}return e},shouldCluster:function(e,t){e=e.geometry.getBounds().getCenterLonLat(),t=t.geometry.getBounds().getCenterLonLat();return Math.sqrt(Math.pow(e.lon-t.lon,2)+Math.pow(e.lat-t.lat,2))/this.resolution<=this.distance},addToCluster:function(e,t){e.cluster.push(t),e.attributes.count+=1},createCluster:function(e){var t=e.geometry.getBounds().getCenterLonLat();return(t=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(t.lon,t.lat),{count:1})).cluster=[e],t},CLASS_NAME:"OpenLayers.Strategy.Cluster"}),OpenLayers.Strategy.Filter=OpenLayers.Class(OpenLayers.Strategy,{filter:null,cache:null,caching:!1,activate:function(){var e=OpenLayers.Strategy.prototype.activate.apply(this,arguments);return e&&(this.cache=[],this.layer.events.on({beforefeaturesadded:this.handleAdd,beforefeaturesremoved:this.handleRemove,scope:this})),e},deactivate:function(){return this.cache=null,this.layer&&this.layer.events&&this.layer.events.un({beforefeaturesadded:this.handleAdd,beforefeaturesremoved:this.handleRemove,scope:this}),OpenLayers.Strategy.prototype.deactivate.apply(this,arguments)},handleAdd:function(e){if(!this.caching&&this.filter){var t=e.features;e.features=[];for(var i,s=0,n=t.length;s<n;++s)i=t[s],(this.filter.evaluate(i)?e.features:this.cache).push(i)}},handleRemove:function(e){this.caching||(this.cache=[])},setFilter:function(e){this.filter=e,e=this.cache,this.cache=[],this.handleAdd({features:this.layer.features}),0<this.cache.length&&(this.caching=!0,this.layer.removeFeatures(this.cache.slice()),this.caching=!1),0<e.length&&(this.handleAdd(e={features:e}),0<e.features.length&&(this.caching=!0,this.layer.addFeatures(e.features),this.caching=!1))},CLASS_NAME:"OpenLayers.Strategy.Filter"}),OpenLayers.Protocol.SOS=function(e){e=OpenLayers.Util.applyDefaults(e,OpenLayers.Protocol.SOS.DEFAULTS);var t=OpenLayers.Protocol.SOS["v"+e.version.replace(/\./g,"_")];if(t)return new t(e);throw"Unsupported SOS version: "+e.version},OpenLayers.Protocol.SOS.DEFAULTS={version:"1.0.0"},OpenLayers.Format.WFSDescribeFeatureType=OpenLayers.Class(OpenLayers.Format.XML,{regExes:{trimSpace:/^\s*|\s*$/g},namespaces:{xsd:"http://www.w3.org/2001/XMLSchema"},readers:{xsd:{schema:function(e,t){for(var i,s,n=[],r={},a=(this.readChildNodes(e,{complexTypes:n,customTypes:r}),e.attributes),o=0,l=a.length;o<l;++o)0===(s=(i=a[o]).name).indexOf("xmlns")?this.setNamespace(s.split(":")[1]||"",i.value):t[s]=i.value;for(t.featureTypes=n,t.targetPrefix=this.namespaceAlias[t.targetNamespace],o=0,l=n.length;o<l;++o)i=r[(a=n[o]).typeName],r[a.typeName]&&(a.typeName=i.name)},complexType:function(e,t){var i={typeName:e.getAttribute("name")};this.readChildNodes(e,i),t.complexTypes.push(i)},complexContent:function(e,t){this.readChildNodes(e,t)},extension:function(e,t){this.readChildNodes(e,t)},sequence:function(e,t){var i={elements:[]};this.readChildNodes(e,i),t.properties=i.elements},element:function(e,t){if(t.elements){for(var i,s,n={},r=0,a=(i=e.attributes).length;r<a;++r)n[(s=i[r]).name]=s.value;(i=n.type)||(this.readChildNodes(e,i={}),n.restriction=i,n.type=i.base),n.localType=(i.base||i).split(":").pop(),t.elements.push(n),this.readChildNodes(e,n)}t.complexTypes&&(n=(i=e.getAttribute("type")).split(":").pop(),t.customTypes[n]={name:e.getAttribute("name"),type:i})},annotation:function(e,t){t.annotation={},this.readChildNodes(e,t.annotation)},appinfo:function(e,t){t.appinfo||(t.appinfo=[]),t.appinfo.push(this.getChildValue(e))},documentation:function(e,t){t.documentation||(t.documentation=[]);var i=this.getChildValue(e);t.documentation.push({lang:e.getAttribute("xml:lang"),textContent:i.replace(this.regExes.trimSpace,"")})},simpleType:function(e,t){this.readChildNodes(e,t)},restriction:function(e,t){t.base=e.getAttribute("base"),this.readRestriction(e,t)}}},readRestriction:function(e,t){for(var i,s,n=e.childNodes,r=0,a=n.length;r<a;++r)1==(i=n[r]).nodeType&&(s=i.nodeName.split(":").pop(),i=i.getAttribute("value"),t[s]?("string"==typeof t[s]&&(t[s]=[t[s]]),t[s].push(i)):t[s]=i)},read:function(e){var t,i={};return"ExceptionReport"===(e=(e="string"==typeof e?OpenLayers.Format.XML.prototype.read.apply(this,[e]):e)&&9==e.nodeType?e.documentElement:e).nodeName.split(":").pop()?(t=new OpenLayers.Format.OGCExceptionReport,i.error=t.read(e)):this.readNode(e,i),i},CLASS_NAME:"OpenLayers.Format.WFSDescribeFeatureType"}),OpenLayers.Format.GeoRSS=OpenLayers.Class(OpenLayers.Format.XML,{rssns:"http://backend.userland.com/rss2",featureNS:"http://mapserver.gis.umn.edu/mapserver",georssns:"http://www.georss.org/georss",geons:"http://www.w3.org/2003/01/geo/wgs84_pos#",featureTitle:"Untitled",featureDescription:"No Description",gmlParser:null,xy:!1,createGeometryFromItem:function(e){var t=this.getElementsByTagNameNS(e,this.georssns,"point"),i=this.getElementsByTagNameNS(e,this.geons,"lat"),s=this.getElementsByTagNameNS(e,this.geons,"long"),n=this.getElementsByTagNameNS(e,this.georssns,"line"),r=this.getElementsByTagNameNS(e,this.georssns,"polygon"),a=this.getElementsByTagNameNS(e,this.georssns,"where");if(e=this.getElementsByTagNameNS(e,this.georssns,"box"),0<t.length||0<i.length&&0<s.length){0<t.length?2!=(i=OpenLayers.String.trim(t[0].firstChild.nodeValue).split(/\s+/)).length&&(i=OpenLayers.String.trim(t[0].firstChild.nodeValue).split(/\s*,\s*/)):i=[parseFloat(i[0].firstChild.nodeValue),parseFloat(s[0].firstChild.nodeValue)];var o=new OpenLayers.Geometry.Point(i[1],i[0])}else if(0<n.length){for(i=OpenLayers.String.trim(this.getChildValue(n[0])).split(/\s+/),s=[],n=0,r=i.length;n<r;n+=2)t=new OpenLayers.Geometry.Point(i[n+1],i[n]),s.push(t);o=new OpenLayers.Geometry.LineString(s)}else if(0<r.length){for(s=[],r=(i=OpenLayers.String.trim(this.getChildValue(r[n=0])).split(/\s+/)).length;n<r;n+=2)t=new OpenLayers.Geometry.Point(i[n+1],i[n]),s.push(t);o=new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing(s)])}else 0<a.length?(this.gmlParser||(this.gmlParser=new OpenLayers.Format.GML({xy:this.xy})),o=this.gmlParser.parseFeature(a[0]).geometry):0<e.length&&(s=[],3<(i=OpenLayers.String.trim(e[0].firstChild.nodeValue).split(/\s+/)).length&&(t=new OpenLayers.Geometry.Point(i[1],i[0]),s.push(t),t=new OpenLayers.Geometry.Point(i[1],i[2]),s.push(t),t=new OpenLayers.Geometry.Point(i[3],i[2]),s.push(t),t=new OpenLayers.Geometry.Point(i[3],i[0]),s.push(t),t=new OpenLayers.Geometry.Point(i[1],i[0]),s.push(t)),o=new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing(s)]));return o&&this.internalProjection&&this.externalProjection&&o.transform(this.externalProjection,this.internalProjection),o},createFeatureFromItem:function(e){var t=this.createGeometryFromItem(e),i=this._getChildValue(e,"*","title",this.featureTitle),s=this._getChildValue(e,"*","description",this._getChildValue(e,"*","content",this._getChildValue(e,"*","summary",this.featureDescription))),n=this._getChildValue(e,"*","link");if(!n)try{n=this.getElementsByTagNameNS(e,"*","link")[0].getAttribute("href")}catch(e){n=null}return e=this._getChildValue(e,"*","id",null),(t=new OpenLayers.Feature.Vector(t,{title:i,description:s,link:n})).fid=e,t},_getChildValue:function(e,t,i,s){return(e=this.getElementsByTagNameNS(e,t,i))&&e[0]&&e[0].firstChild&&e[0].firstChild.nodeValue?this.getChildValue(e[0]):null==s?"":s},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));var t=null;e=(t=0==(t=this.getElementsByTagNameNS(e,"*","item")).length?this.getElementsByTagNameNS(e,"*","entry"):t).length;for(var i=Array(e),s=0;s<e;s++)i[s]=this.createFeatureFromItem(t[s]);return i},write:function(e){if(OpenLayers.Util.isArray(e))for(var t=this.createElementNS(this.rssns,"rss"),i=0,s=e.length;i<s;i++)t.appendChild(this.createFeatureXML(e[i]));else t=this.createFeatureXML(e);return OpenLayers.Format.XML.prototype.write.apply(this,[t])},createFeatureXML:function(e){var t,i=this.buildGeometryNode(e.geometry),s=this.createElementNS(this.rssns,"item"),n=this.createElementNS(this.rssns,"title"),r=(n.appendChild(this.createTextNode(e.attributes.title||"")),this.createElementNS(this.rssns,"description"));for(t in r.appendChild(this.createTextNode(e.attributes.description||"")),s.appendChild(n),s.appendChild(r),e.attributes.link&&((n=this.createElementNS(this.rssns,"link")).appendChild(this.createTextNode(e.attributes.link)),s.appendChild(n)),e.attributes)"link"!=t&&"title"!=t&&"description"!=t&&(n=this.createTextNode(e.attributes[t]),-1!=(r=t).search(":")&&(r=t.split(":")[1]),(r=this.createElementNS(this.featureNS,"feature:"+r)).appendChild(n),s.appendChild(r));return s.appendChild(i),s},buildGeometryNode:function(e){var t;if(this.internalProjection&&this.externalProjection&&(e=e.clone()).transform(this.internalProjection,this.externalProjection),"OpenLayers.Geometry.Polygon"==e.CLASS_NAME)(t=this.createElementNS(this.georssns,"georss:polygon")).appendChild(this.buildCoordinatesNode(e.components[0]));else if("OpenLayers.Geometry.LineString"==e.CLASS_NAME)(t=this.createElementNS(this.georssns,"georss:line")).appendChild(this.buildCoordinatesNode(e));else{if("OpenLayers.Geometry.Point"!=e.CLASS_NAME)throw"Couldn't parse "+e.CLASS_NAME;(t=this.createElementNS(this.georssns,"georss:point")).appendChild(this.buildCoordinatesNode(e))}return t},buildCoordinatesNode:function(e){var t=null;if(t=e.components?e.components:t){e=t.length;for(var i=Array(e),s=0;s<e;s++)i[s]=t[s].y+" "+t[s].x;t=i.join(" ")}else t=e.y+" "+e.x;return this.createTextNode(t)},CLASS_NAME:"OpenLayers.Format.GeoRSS"}),OpenLayers.Format.WPSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.0.0",CLASS_NAME:"OpenLayers.Format.WPSCapabilities"}),OpenLayers.Format.WPSCapabilities.v1_0_0=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ows:"http://www.opengis.net/ows/1.1",wps:"http://www.opengis.net/wps/1.0.0",xlink:"http://www.w3.org/1999/xlink"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},read:function(e){(e="string"==typeof e?OpenLayers.Format.XML.prototype.read.apply(this,[e]):e)&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),t},readers:{wps:{Capabilities:function(e,t){this.readChildNodes(e,t)},ProcessOfferings:function(e,t){t.processOfferings={},this.readChildNodes(e,t.processOfferings)},Process:function(e,t){var i={processVersion:this.getAttributeNS(e,this.namespaces.wps,"processVersion")};this.readChildNodes(e,i),t[i.identifier]=i},Languages:function(e,t){t.languages=[],this.readChildNodes(e,t.languages)},Default:function(e,t){var i={isDefault:!0};this.readChildNodes(e,i),t.push(i)},Supported:function(e,t){var i={};this.readChildNodes(e,i),t.push(i)}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.WPSCapabilities.v1_0_0"}),OpenLayers.Control.PinchZoom=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,pinchOrigin:null,currentCenter:null,autoActivate:!0,preserveCenter:!1,initialize:function(e){OpenLayers.Control.prototype.initialize.apply(this,arguments),this.handler=new OpenLayers.Handler.Pinch(this,{start:this.pinchStart,move:this.pinchMove,done:this.pinchDone},this.handlerOptions)},pinchStart:function(e,t){e=this.preserveCenter?this.map.getPixelFromLonLat(this.map.getCenter()):e.xy;this.currentCenter=this.pinchOrigin=e},pinchMove:function(e,t){var t=t.scale,i=this.map.layerContainerOriginPx,s=this.pinchOrigin,e=this.preserveCenter?this.map.getPixelFromLonLat(this.map.getCenter()):e.xy,n=Math.round(i.x+e.x-s.x+(t-1)*(i.x-s.x)),i=Math.round(i.y+e.y-s.y+(t-1)*(i.y-s.y));this.map.applyTransform(n,i,t),this.currentCenter=e},pinchDone:function(e,t,i){var s,n;this.map.applyTransform(),(e=this.map.getZoomForResolution(this.map.getResolution()/i.scale,!0))===this.map.getZoom()&&this.currentCenter.equals(this.pinchOrigin)||(t=this.map.getResolutionForZoom(e),i=this.map.getLonLatFromPixel(this.pinchOrigin),s=this.currentCenter,n=this.map.getSize(),i.lon+=t*(n.w/2-s.x),i.lat-=t*(n.h/2-s.y),this.map.div.clientWidth=this.map.div.clientWidth,this.map.setCenter(i,e))},CLASS_NAME:"OpenLayers.Control.PinchZoom"}),OpenLayers.Control.TouchNavigation=OpenLayers.Class(OpenLayers.Control,{dragPan:null,dragPanOptions:null,pinchZoom:null,pinchZoomOptions:null,clickHandlerOptions:null,documentDrag:!1,autoActivate:!0,initialize:function(e){this.handlers={},OpenLayers.Control.prototype.initialize.apply(this,arguments)},destroy:function(){this.deactivate(),this.dragPan&&this.dragPan.destroy(),this.dragPan=null,this.pinchZoom&&(this.pinchZoom.destroy(),delete this.pinchZoom),OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){return!!OpenLayers.Control.prototype.activate.apply(this,arguments)&&(this.dragPan.activate(),this.handlers.click.activate(),this.pinchZoom.activate(),!0)},deactivate:function(){return!!OpenLayers.Control.prototype.deactivate.apply(this,arguments)&&(this.dragPan.deactivate(),this.handlers.click.deactivate(),this.pinchZoom.deactivate(),!0)},draw:function(){var e={click:this.defaultClick,dblclick:this.defaultDblClick},t=OpenLayers.Util.extend({double:!0,stopDouble:!0,pixelTolerance:2},this.clickHandlerOptions);this.handlers.click=new OpenLayers.Handler.Click(this,e,t),this.dragPan=new OpenLayers.Control.DragPan(OpenLayers.Util.extend({map:this.map,documentDrag:this.documentDrag},this.dragPanOptions)),this.dragPan.draw(),this.pinchZoom=new OpenLayers.Control.PinchZoom(OpenLayers.Util.extend({map:this.map},this.pinchZoomOptions))},defaultClick:function(e){e.lastTouches&&2==e.lastTouches.length&&this.map.zoomOut()},defaultDblClick:function(e){this.map.zoomTo(this.map.zoom+1,e.xy)},CLASS_NAME:"OpenLayers.Control.TouchNavigation"}),OpenLayers.Console.warn("OpenLayers.Rico is deprecated"),OpenLayers.Rico=OpenLayers.Rico||{},OpenLayers.Rico.Color=OpenLayers.Class({initialize:function(e,t,i){this.rgb={r:e,g:t,b:i}},setRed:function(e){this.rgb.r=e},setGreen:function(e){this.rgb.g=e},setBlue:function(e){this.rgb.b=e},setHue:function(e){var t=this.asHSB();t.h=e,this.rgb=OpenLayers.Rico.Color.HSBtoRGB(t.h,t.s,t.b)},setSaturation:function(e){var t=this.asHSB();t.s=e,this.rgb=OpenLayers.Rico.Color.HSBtoRGB(t.h,t.s,t.b)},setBrightness:function(e){var t=this.asHSB();t.b=e,this.rgb=OpenLayers.Rico.Color.HSBtoRGB(t.h,t.s,t.b)},darken:function(e){var t=this.asHSB();this.rgb=OpenLayers.Rico.Color.HSBtoRGB(t.h,t.s,Math.max(t.b-e,0))},brighten:function(e){var t=this.asHSB();this.rgb=OpenLayers.Rico.Color.HSBtoRGB(t.h,t.s,Math.min(t.b+e,1))},blend:function(e){this.rgb.r=Math.floor((this.rgb.r+e.rgb.r)/2),this.rgb.g=Math.floor((this.rgb.g+e.rgb.g)/2),this.rgb.b=Math.floor((this.rgb.b+e.rgb.b)/2)},isBright:function(){return this.asHSB(),.5<this.asHSB().b},isDark:function(){return!this.isBright()},asRGB:function(){return"rgb("+this.rgb.r+","+this.rgb.g+","+this.rgb.b+")"},asHex:function(){return"#"+this.rgb.r.toColorPart()+this.rgb.g.toColorPart()+this.rgb.b.toColorPart()},asHSB:function(){return OpenLayers.Rico.Color.RGBtoHSB(this.rgb.r,this.rgb.g,this.rgb.b)},toString:function(){return this.asHex()}}),OpenLayers.Rico.Color.createFromHex=function(e){if(4==e.length){var t=e;e="#";for(var i=1;i<4;i++)e+=t.charAt(i)+t.charAt(i)}return t=(e=0==e.indexOf("#")?e.substring(1):e).substring(0,2),i=e.substring(2,4),e=e.substring(4,6),new OpenLayers.Rico.Color(parseInt(t,16),parseInt(i,16),parseInt(e,16))},OpenLayers.Rico.Color.createColorFromBackground=function(e){var t=OpenLayers.Element.getStyle(OpenLayers.Util.getElement(e),"backgroundColor");return"transparent"==t&&e.parentNode?OpenLayers.Rico.Color.createColorFromBackground(e.parentNode):null==t?new OpenLayers.Rico.Color(255,255,255):0==t.indexOf("rgb(")?(e=t.substring(4,t.length-1).split(","),new OpenLayers.Rico.Color(parseInt(e[0]),parseInt(e[1]),parseInt(e[2]))):0==t.indexOf("#")?OpenLayers.Rico.Color.createFromHex(t):new OpenLayers.Rico.Color(255,255,255)},OpenLayers.Rico.Color.HSBtoRGB=function(e,t,i){var s=0,n=0,r=0;if(0==t)r=n=s=parseInt(255*i+.5);else{var a=(e=6*(e-Math.floor(e)))-Math.floor(e),o=i*(1-t),l=i*(1-t*a);switch(t=i*(1-t*(1-a)),parseInt(e)){case 0:s=255*i+.5,n=255*t+.5,r=255*o+.5;break;case 1:s=255*l+.5,n=255*i+.5,r=255*o+.5;break;case 2:s=255*o+.5,n=255*i+.5,r=255*t+.5;break;case 3:s=255*o+.5,n=255*l+.5,r=255*i+.5;break;case 4:s=255*t+.5,n=255*o+.5,r=255*i+.5;break;case 5:s=255*i+.5,n=255*o+.5,r=255*l+.5}}return{r:parseInt(s),g:parseInt(n),b:parseInt(r)}},OpenLayers.Rico.Color.RGBtoHSB=function(e,t,i){var s,n,r,a=t<e?e:t,o=e<t?e:t;return i<o&&(o=i),0==(s=0!=(a=a<i?i:a)?(a-o)/a:0)?e=0:(n=(a-e)/(a-o),r=(a-t)/(a-o),i=(a-i)/(a-o),(e=(e==a?i-r:t==a?2+n-i:4+r-n)/6)<0&&(e+=1)),{h:e,s:s,b:a/255}},OpenLayers.Style2=OpenLayers.Class({id:null,name:null,title:null,description:null,layerName:null,isDefault:!1,rules:null,initialize:function(e){OpenLayers.Util.extend(this,e),this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){for(var e=0,t=this.rules.length;e<t;e++)this.rules[e].destroy();delete this.rules},clone:function(){var e=OpenLayers.Util.extend({},this);if(this.rules){e.rules=[];for(var t=0,i=this.rules.length;t<i;++t)e.rules.push(this.rules[t].clone())}return new OpenLayers.Style2(e)},CLASS_NAME:"OpenLayers.Style2"}),OpenLayers.Format.WFS=OpenLayers.Class(OpenLayers.Format.GML,{layer:null,wfsns:"http://www.opengis.net/wfs",ogcns:"http://www.opengis.net/ogc",initialize:function(e,t){OpenLayers.Format.GML.prototype.initialize.apply(this,[e]),this.layer=t,this.layer.featureNS&&(this.featureNS=this.layer.featureNS),this.layer.options.geometry_column&&(this.geometryName=this.layer.options.geometry_column),this.layer.options.typename&&(this.featureName=this.layer.options.typename)},write:function(e){var t=this.createElementNS(this.wfsns,"wfs:Transaction");t.setAttribute("version","1.0.0"),t.setAttribute("service","WFS");for(var i=0;i<e.length;i++)switch(e[i].state){case OpenLayers.State.INSERT:t.appendChild(this.insert(e[i]));break;case OpenLayers.State.UPDATE:t.appendChild(this.update(e[i]));break;case OpenLayers.State.DELETE:t.appendChild(this.remove(e[i]))}return OpenLayers.Format.XML.prototype.write.apply(this,[t])},createFeatureXML:function(e){var t,i=this.buildGeometryNode(e.geometry);for(t in(s=this.createElementNS(this.featureNS,"feature:"+this.geometryName)).appendChild(i),(i=this.createElementNS(this.featureNS,"feature:"+this.featureName)).appendChild(s),e.attributes){var s=this.createTextNode(e.attributes[t]),n=t;-1!=t.search(":")&&(n=t.split(":")[1]),(n=this.createElementNS(this.featureNS,"feature:"+n)).appendChild(s),i.appendChild(n)}return i},insert:function(e){var t=this.createElementNS(this.wfsns,"wfs:Insert");return t.appendChild(this.createFeatureXML(e)),t},update:function(e){e.fid||OpenLayers.Console.userError(OpenLayers.i18n("noFID"));var t,i=this.createElementNS(this.wfsns,"wfs:Update"),s=(i.setAttribute("typeName",this.featurePrefix+":"+this.featureName),i.setAttribute("xmlns:"+this.featurePrefix,this.featureNS),this.createElementNS(this.wfsns,"wfs:Property")),n=this.createElementNS(this.wfsns,"wfs:Name"),r=this.createTextNode(this.geometryName);for(t in n.appendChild(r),s.appendChild(n),n=this.createElementNS(this.wfsns,"wfs:Value"),r=this.buildGeometryNode(e.geometry),e.layer&&r.setAttribute("srsName",e.layer.projection.getCode()),n.appendChild(r),s.appendChild(n),i.appendChild(s),e.attributes)s=this.createElementNS(this.wfsns,"wfs:Property"),(n=this.createElementNS(this.wfsns,"wfs:Name")).appendChild(this.createTextNode(t)),s.appendChild(n),(n=this.createElementNS(this.wfsns,"wfs:Value")).appendChild(this.createTextNode(e.attributes[t])),s.appendChild(n),i.appendChild(s);return s=this.createElementNS(this.ogcns,"ogc:Filter"),(t=this.createElementNS(this.ogcns,"ogc:FeatureId")).setAttribute("fid",e.fid),s.appendChild(t),i.appendChild(s),i},remove:function(e){if(!e.fid)return OpenLayers.Console.userError(OpenLayers.i18n("noFID")),!1;var t=this.createElementNS(this.wfsns,"wfs:Delete"),i=(t.setAttribute("typeName",this.featurePrefix+":"+this.featureName),t.setAttribute("xmlns:"+this.featurePrefix,this.featureNS),this.createElementNS(this.ogcns,"ogc:Filter")),s=this.createElementNS(this.ogcns,"ogc:FeatureId");return s.setAttribute("fid",e.fid),i.appendChild(s),t.appendChild(i),t},destroy:function(){this.layer=null},CLASS_NAME:"OpenLayers.Format.WFS"}),OpenLayers.Format.SLD.v1_0_0_GeoServer=OpenLayers.Class(OpenLayers.Format.SLD.v1_0_0,{version:"1.0.0",profile:"GeoServer",readers:OpenLayers.Util.applyDefaults({sld:OpenLayers.Util.applyDefaults({Priority:function(e,t){e=this.readers.ogc._expression.call(this,e);e&&(t.priority=e)},VendorOption:function(e,t){t.vendorOptions||(t.vendorOptions={}),t.vendorOptions[e.getAttribute("name")]=this.getChildValue(e)},TextSymbolizer:function(e,t){OpenLayers.Format.SLD.v1_0_0.prototype.readers.sld.TextSymbolizer.apply(this,arguments);t=this.multipleSymbolizers?t.symbolizers[t.symbolizers.length-1]:t.symbolizer.Text;void 0===t.graphic&&(t.graphic=!1)}},OpenLayers.Format.SLD.v1_0_0.prototype.readers.sld)},OpenLayers.Format.SLD.v1_0_0.prototype.readers),writers:OpenLayers.Util.applyDefaults({sld:OpenLayers.Util.applyDefaults({Priority:function(e){return this.writers.sld._OGCExpression.call(this,"sld:Priority",e)},VendorOption:function(e){return this.createElementNSPlus("sld:VendorOption",{attributes:{name:e.name},value:e.value})},TextSymbolizer:function(e){var t=OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.TextSymbolizer.apply(this,arguments);return!1!==e.graphic&&(e.externalGraphic||e.graphicName)&&this.writeNode("Graphic",e,t),"priority"in e&&this.writeNode("Priority",e.priority,t),this.addVendorOptions(t,e)},PointSymbolizer:function(e){var t=OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.PointSymbolizer.apply(this,arguments);return this.addVendorOptions(t,e)},LineSymbolizer:function(e){var t=OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.LineSymbolizer.apply(this,arguments);return this.addVendorOptions(t,e)},PolygonSymbolizer:function(e){var t=OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.PolygonSymbolizer.apply(this,arguments);return this.addVendorOptions(t,e)}},OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld)},OpenLayers.Format.SLD.v1_0_0.prototype.writers),addVendorOptions:function(e,t){if(t.vendorOptions)for(var i in t.vendorOptions)this.writeNode("VendorOption",{name:i,value:t.vendorOptions[i]},e);return e},CLASS_NAME:"OpenLayers.Format.SLD.v1_0_0_GeoServer"}),OpenLayers.Layer.Boxes=OpenLayers.Class(OpenLayers.Layer.Markers,{drawMarker:function(e){var t=this.map.getLayerPxFromLonLat({lon:e.bounds.left,lat:e.bounds.top}),i=this.map.getLayerPxFromLonLat({lon:e.bounds.right,lat:e.bounds.bottom});null==i||null==t?e.display(!1):(t=e.draw(t,{w:Math.max(1,i.x-t.x),h:Math.max(1,i.y-t.y)}),e.drawn||(this.div.appendChild(t),e.drawn=!0))},removeMarker:function(e){OpenLayers.Util.removeItem(this.markers,e),null!=e.div&&e.div.parentNode==this.div&&this.div.removeChild(e.div)},CLASS_NAME:"OpenLayers.Layer.Boxes"}),OpenLayers.Format.WFSCapabilities.v1_0_0=OpenLayers.Class(OpenLayers.Format.WFSCapabilities.v1,{readers:{wfs:OpenLayers.Util.applyDefaults({Service:function(e,t){t.service={},this.readChildNodes(e,t.service)},Fees:function(e,t){e=this.getChildValue(e);e&&"none"!=e.toLowerCase()&&(t.fees=e)},AccessConstraints:function(e,t){e=this.getChildValue(e);e&&"none"!=e.toLowerCase()&&(t.accessConstraints=e)},OnlineResource:function(e,t){e=this.getChildValue(e);e&&"none"!=e.toLowerCase()&&(t.onlineResource=e)},Keywords:function(e,t){e=this.getChildValue(e);e&&"none"!=e.toLowerCase()&&(t.keywords=e.split(", "))},Capability:function(e,t){t.capability={},this.readChildNodes(e,t.capability)},Request:function(e,t){t.request={},this.readChildNodes(e,t.request)},GetFeature:function(e,t){t.getfeature={href:{},formats:[]},this.readChildNodes(e,t.getfeature)},ResultFormat:function(e,t){for(var i,s=e.childNodes,n=0;n<s.length;n++)1==(i=s[n]).nodeType&&t.formats.push(i.nodeName)},DCPType:function(e,t){this.readChildNodes(e,t)},HTTP:function(e,t){this.readChildNodes(e,t.href)},Get:function(e,t){t.get=e.getAttribute("onlineResource")},Post:function(e,t){t.post=e.getAttribute("onlineResource")},SRS:function(e,t){e=this.getChildValue(e);e&&(t.srs=e)}},OpenLayers.Format.WFSCapabilities.v1.prototype.readers.wfs)},CLASS_NAME:"OpenLayers.Format.WFSCapabilities.v1_0_0"}),OpenLayers.Format.WMSCapabilities.v1_3=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1,{readers:{wms:OpenLayers.Util.applyDefaults({WMS_Capabilities:function(e,t){this.readChildNodes(e,t)},LayerLimit:function(e,t){t.layerLimit=parseInt(this.getChildValue(e))},MaxWidth:function(e,t){t.maxWidth=parseInt(this.getChildValue(e))},MaxHeight:function(e,t){t.maxHeight=parseInt(this.getChildValue(e))},BoundingBox:function(e,t){var i=OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms.BoundingBox.apply(this,[e,t]);i.srs=e.getAttribute("CRS"),t.bbox[i.srs]=i},CRS:function(e,t){this.readers.wms.SRS.apply(this,[e,t])},EX_GeographicBoundingBox:function(e,t){t.llbbox=[],this.readChildNodes(e,t.llbbox)},westBoundLongitude:function(e,t){t[0]=this.getChildValue(e)},eastBoundLongitude:function(e,t){t[2]=this.getChildValue(e)},southBoundLatitude:function(e,t){t[1]=this.getChildValue(e)},northBoundLatitude:function(e,t){t[3]=this.getChildValue(e)},MinScaleDenominator:function(e,t){t.maxScale=parseFloat(this.getChildValue(e)).toPrecision(16)},MaxScaleDenominator:function(e,t){t.minScale=parseFloat(this.getChildValue(e)).toPrecision(16)},Dimension:function(e,t){e={name:e.getAttribute("name").toLowerCase(),units:e.getAttribute("units"),unitsymbol:e.getAttribute("unitSymbol"),nearestVal:"1"===e.getAttribute("nearestValue"),multipleVal:"1"===e.getAttribute("multipleValues"),default:e.getAttribute("default")||"",current:"1"===e.getAttribute("current"),values:this.getChildValue(e).split(",")};t.dimensions[e.name]=e},Keyword:function(e,t){e={value:this.getChildValue(e),vocabulary:e.getAttribute("vocabulary")};t.keywords&&t.keywords.push(e)}},OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms),sld:{UserDefinedSymbolization:function(e,t){this.readers.wms.UserDefinedSymbolization.apply(this,[e,t]),t.userSymbols.inlineFeature=1==parseInt(e.getAttribute("InlineFeature")),t.userSymbols.remoteWCS=1==parseInt(e.getAttribute("RemoteWCS"))},DescribeLayer:function(e,t){this.readers.wms.DescribeLayer.apply(this,[e,t])},GetLegendGraphic:function(e,t){this.readers.wms.GetLegendGraphic.apply(this,[e,t])}}},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_3"}),OpenLayers.Layer.Zoomify=OpenLayers.Class(OpenLayers.Layer.Grid,{size:null,isBaseLayer:!0,standardTileSize:256,tileOriginCorner:"tl",numberOfTiers:0,tileCountUpToTier:null,tierSizeInTiles:null,tierImageSize:null,initialize:function(e,t,i,s){this.initializeZoomify(i),OpenLayers.Layer.Grid.prototype.initialize.apply(this,[e,t,i,{},s])},initializeZoomify:function(e){var t=e.clone();for(this.size=e.clone(),e=new OpenLayers.Size(Math.ceil(t.w/this.standardTileSize),Math.ceil(t.h/this.standardTileSize)),this.tierSizeInTiles=[e],this.tierImageSize=[t];t.w>this.standardTileSize||t.h>this.standardTileSize;)t=new OpenLayers.Size(Math.floor(t.w/2),Math.floor(t.h/2)),e=new OpenLayers.Size(Math.ceil(t.w/this.standardTileSize),Math.ceil(t.h/this.standardTileSize)),this.tierSizeInTiles.push(e),this.tierImageSize.push(t);for(this.tierSizeInTiles.reverse(),this.tierImageSize.reverse(),this.numberOfTiers=this.tierSizeInTiles.length,t=[1],this.tileCountUpToTier=[0],e=1;e<this.numberOfTiers;e++)t.unshift(Math.pow(2,e)),this.tileCountUpToTier.push(this.tierSizeInTiles[e-1].w*this.tierSizeInTiles[e-1].h+this.tileCountUpToTier[e-1]);this.serverResolutions||(this.serverResolutions=t)},destroy:function(){OpenLayers.Layer.Grid.prototype.destroy.apply(this,arguments),this.tileCountUpToTier.length=0,this.tierSizeInTiles.length=0,this.tierImageSize.length=0},clone:function(e){return null==e&&(e=new OpenLayers.Layer.Zoomify(this.name,this.url,this.size,this.options)),OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getURL:function(e){e=this.adjustBounds(e);var t=this.getServerResolution(),i=Math.round((e.left-this.tileOrigin.lon)/(t*this.tileSize.w));return e=Math.round((this.tileOrigin.lat-e.top)/(t*this.tileSize.h)),t=this.getZoomForResolution(t),i="TileGroup"+Math.floor((i+e*this.tierSizeInTiles[t].w+this.tileCountUpToTier[t])/256)+"/"+t+"-"+i+"-"+e+".jpg",t=this.url,(t=OpenLayers.Util.isArray(t)?this.selectUrl(i,t):t)+i},getImageSize:function(){var e,t,i,s,n;return 0<arguments.length?(t=this.adjustBounds(arguments[0]),i=this.getServerResolution(),e=Math.round((t.left-this.tileOrigin.lon)/(i*this.tileSize.w)),t=Math.round((this.tileOrigin.lat-t.top)/(i*this.tileSize.h)),i=this.getZoomForResolution(i),s=this.standardTileSize,n=this.standardTileSize,e==this.tierSizeInTiles[i].w-1&&(s=this.tierImageSize[i].w%this.standardTileSize),t==this.tierSizeInTiles[i].h-1&&(n=this.tierImageSize[i].h%this.standardTileSize),new OpenLayers.Size(s,n)):this.tileSize},setMap:function(e){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments),this.tileOrigin=new OpenLayers.LonLat(this.map.maxExtent.left,this.map.maxExtent.top)},CLASS_NAME:"OpenLayers.Layer.Zoomify"}),OpenLayers.Layer.MapServer=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{mode:"map",map_imagetype:"png"},initialize:function(e,t,i,s){OpenLayers.Layer.Grid.prototype.initialize.apply(this,arguments),this.params=OpenLayers.Util.applyDefaults(this.params,this.DEFAULT_PARAMS),null!=s&&null!=s.isBaseLayer||(this.isBaseLayer="true"!=this.params.transparent&&1!=this.params.transparent)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.MapServer(this.name,this.url,this.params,this.getOptions())),OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getURL:function(e){e=[(e=this.adjustBounds(e)).left,e.bottom,e.right,e.top];var t=this.getImageSize();return this.getFullRequestString({mapext:e,imgext:e,map_size:[t.w,t.h],imgx:t.w/2,imgy:t.h/2,imgxy:[t.w,t.h]})},getFullRequestString:function(e,t){var i,t=null==t?this.url:t,s=OpenLayers.Util.extend({},this.params),s=OpenLayers.Util.extend(s,e),n=OpenLayers.Util.getParameterString(s),n=(OpenLayers.Util.isArray(t)&&(t=this.selectUrl(n,t)),OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(t)));for(i in s)i.toUpperCase()in n&&delete s[i];return n=OpenLayers.Util.getParameterString(s),s=t,s=""!=(n=n.replace(/,/g,"+"))?"&"==(i=t.charAt(t.length-1))||"?"==i?s+n:-1==t.indexOf("?")?s+"?"+n:s+"&"+n:s},CLASS_NAME:"OpenLayers.Layer.MapServer"}),OpenLayers.Renderer.VML=OpenLayers.Class(OpenLayers.Renderer.Elements,{xmlns:"urn:schemas-microsoft-com:vml",symbolCache:{},offset:null,initialize:function(e){if(this.supported()){if(!document.namespaces.olv){document.namespaces.add("olv",this.xmlns);for(var t=document.createStyleSheet(),i="shape rect oval fill stroke imagedata group textbox".split(" "),s=0,n=i.length;s<n;s++)t.addRule("olv\\:"+i[s],"behavior: url(#default#VML); position: absolute; display: inline-block;")}OpenLayers.Renderer.Elements.prototype.initialize.apply(this,arguments)}},supported:function(){return!!document.namespaces},setExtent:function(e,t){var i=OpenLayers.Renderer.Elements.prototype.setExtent.apply(this,arguments),s=this.getResolution(),n=e.left/s|0,s=e.top/s-this.size.h|0;t||!this.offset?(this.offset={x:n,y:s},s=n=0):(n-=this.offset.x,s-=this.offset.y),this.root.coordorigin=n-this.xOffset+" "+s;for(var r=0,a=(n=[this.root,this.vectorRoot,this.textRoot]).length;r<a;++r)(s=n[r]).coordsize=this.size.w+" "+this.size.h;return this.root.style.flip="y",i},setSize:function(e){OpenLayers.Renderer.prototype.setSize.apply(this,arguments);for(var t,i=[this.rendererRoot,this.root,this.vectorRoot,this.textRoot],s=this.size.w+"px",n=this.size.h+"px",r=0,a=i.length;r<a;++r)(t=i[r]).style.width=s,t.style.height=n},getNodeType:function(e,t){var i=null;switch(e.CLASS_NAME){case"OpenLayers.Geometry.Point":i=t.externalGraphic?"olv:rect":this.isComplexSymbol(t.graphicName)?"olv:shape":"olv:oval";break;case"OpenLayers.Geometry.Rectangle":i="olv:rect";break;case"OpenLayers.Geometry.LineString":case"OpenLayers.Geometry.LinearRing":case"OpenLayers.Geometry.Polygon":case"OpenLayers.Geometry.Curve":i="olv:shape"}return i},setStyle:function(e,t,i,s){t=t||e._style,i=i||e._options;var n,r,a,o=t.fillColor,l=t.title||t.graphicTitle;return l&&(e.title=l),"OpenLayers.Geometry.Point"===e._geometryClass&&(t.externalGraphic?(i.isFilled=!0,o=t.graphicWidth||t.graphicHeight,l=t.graphicHeight||t.graphicWidth,o=o||2*t.pointRadius,l=l||2*t.pointRadius,n=this.getResolution(),r=null!=t.graphicXOffset?t.graphicXOffset:-.5*o,a=null!=t.graphicYOffset?t.graphicYOffset:-.5*l,e.style.left=((s.x-this.featureDx)/n-this.offset.x+r|0)+"px",e.style.top=(s.y/n-this.offset.y-(a+l)|0)+"px",e.style.width=o+"px",e.style.height=l+"px",e.style.flip="y",i.isStroked=!(o="none")):this.isComplexSymbol(t.graphicName)?(l=this.importSymbol(t.graphicName),e.path=l.path,e.coordorigin=l.left+","+l.bottom,l=l.size,e.coordsize=l+","+l,this.drawCircle(e,s,t.pointRadius),e.style.flip="y"):this.drawCircle(e,s,t.pointRadius)),i.isFilled?e.fillcolor=o:e.filled="false",s=0==(s=e.getElementsByTagName("fill")).length?null:s[0],i.isFilled?((s=s||this.createNode("olv:fill",e.id+"_fill")).opacity=t.fillOpacity,"OpenLayers.Geometry.Point"===e._geometryClass&&t.externalGraphic&&(t.graphicOpacity&&(s.opacity=t.graphicOpacity),s.src=t.externalGraphic,s.type="frame",t.graphicWidth&&t.graphicHeight||(s.aspect="atmost")),s.parentNode!=e&&e.appendChild(s)):s&&e.removeChild(s),void 0===(o=t.rotation)&&void 0===e._rotation||(e._rotation=o,t.externalGraphic?(this.graphicRotate(e,r,a,t),s.opacity=0):"OpenLayers.Geometry.Point"===e._geometryClass&&(e.style.rotation=o||0)),r=0==(r=e.getElementsByTagName("stroke")).length?null:r[0],i.isStroked?(r||(r=this.createNode("olv:stroke",e.id+"_stroke"),e.appendChild(r)),r.on=!0,r.color=t.strokeColor,r.weight=t.strokeWidth+"px",r.opacity=t.strokeOpacity,r.endcap="butt"==t.strokeLinecap?"flat":t.strokeLinecap||"round",t.strokeDashstyle&&(r.dashstyle=this.dashStyle(t))):(e.stroked=!1,r&&(r.on=!1)),"inherit"!=t.cursor&&null!=t.cursor&&(e.style.cursor=t.cursor),e},graphicRotate:function(e,t,i,s){var n,r,a,o,l,h,p=(s=s||e._style).rotation||0;s.graphicWidth&&s.graphicHeight?(n=Math.max(s.graphicWidth,s.graphicHeight),r=s.graphicWidth/s.graphicHeight,a=Math.round(s.graphicWidth||n*r),o=Math.round(s.graphicHeight||n),e.style.width=a+"px",e.style.height=o+"px",(l=document.getElementById(e.id+"_image"))||(l=this.createNode("olv:imagedata",e.id+"_image"),e.appendChild(l)),l.style.width=a+"px",l.style.height=o+"px",l.src=s.externalGraphic,l.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='', sizingMethod='scale')",l=p*Math.PI/180,p=Math.sin(l),p="progid:DXImageTransform.Microsoft.Matrix(M11="+(l=Math.cos(l))+",M12="+-p+",M21="+p+",M22="+l+",SizingMethod='auto expand')\n",(l=s.graphicOpacity||s.fillOpacity)&&1!=l&&(p+="progid:DXImageTransform.Microsoft.BasicImage(opacity="+l+")\n"),e.style.filter=p,p=new OpenLayers.Geometry.Point(-t,-i),(a=new OpenLayers.Bounds(0,0,a,o).toGeometry()).rotate(s.rotation,p),a=a.getBounds(),e.style.left=Math.round(parseInt(e.style.left)+a.left)+"px",e.style.top=Math.round(parseInt(e.style.top)-a.bottom)+"px"):((h=new Image).onreadystatechange=OpenLayers.Function.bind(function(){"complete"!=h.readyState&&"interactive"!=h.readyState||(r=h.width/h.height,n=Math.max(2*s.pointRadius,s.graphicWidth||0,s.graphicHeight||0),t*=r,s.graphicWidth=n*r,s.graphicHeight=n,this.graphicRotate(e,t,i,s))},this),h.src=s.externalGraphic)},postDraw:function(e){e.style.visibility="visible";var t=e._style.fillColor,i=e._style.strokeColor;"none"==t&&e.fillcolor!=t&&(e.fillcolor=t),"none"==i&&e.strokecolor!=i&&(e.strokecolor=i)},setNodeDimension:function(e,t){var i,t=t.getBounds();t&&(i=this.getResolution(),t=new OpenLayers.Bounds((t.left-this.featureDx)/i-this.offset.x|0,t.bottom/i-this.offset.y|0,(t.right-this.featureDx)/i-this.offset.x|0,t.top/i-this.offset.y|0),e.style.left=t.left+"px",e.style.top=t.top+"px",e.style.width=t.getWidth()+"px",e.style.height=t.getHeight()+"px",e.coordorigin=t.left+" "+t.top,e.coordsize=t.getWidth()+" "+t.getHeight())},dashStyle:function(e){switch(e=e.strokeDashstyle){case"solid":case"dot":case"dash":case"dashdot":case"longdash":case"longdashdot":return e;default:return 2==(e=e.split(/[ ,]/)).length?+e[0]>=2*e[1]?"longdash":1==e[0]||1==e[1]?"dot":"dash":4==e.length?+e[0]>=2*e[1]?"longdashdot":"dashdot":"solid"}},createNode:function(e,t){e=document.createElement(e);return t&&(e.id=t),e.unselectable="on",e.onselectstart=OpenLayers.Function.False,e},nodeTypeCompare:function(e,t){var i=t.indexOf(":"),e=(-1!=i&&(t=t.substr(i+1)),e.nodeName);return t==(e=-1!=(i=e.indexOf(":"))?e.substr(i+1):e)},createRenderRoot:function(){return this.nodeFactory(this.container.id+"_vmlRoot","div")},createRoot:function(e){return this.nodeFactory(this.container.id+e,"olv:group")},drawPoint:function(e,t){return this.drawCircle(e,t,1)},drawCircle:function(e,t,i){var s;return!isNaN(t.x)&&!isNaN(t.y)&&(s=this.getResolution(),e.style.left=((t.x-this.featureDx)/s-this.offset.x|0)-i+"px",e.style.top=(t.y/s-this.offset.y|0)-i+"px",e.style.width=(t=2*i)+"px",e.style.height=t+"px",e)},drawLineString:function(e,t){return this.drawLine(e,t,!1)},drawLinearRing:function(e,t){return this.drawLine(e,t,!0)},drawLine:function(e,t,i){this.setNodeDimension(e,t);for(var s,n,r=this.getResolution(),a=t.components.length,o=Array(a),l=0;l<a;l++)n=((s=t.components[l]).x-this.featureDx)/r-this.offset.x|0,s=s.y/r-this.offset.y|0,o[l]=" "+n+","+s+" l ";return t=i?" x e":" e",e.path="m"+o.join("")+t,e},drawPolygon:function(e,t){this.setNodeDimension(e,t);for(var i,s,n,r,a,o,l,h,p=this.getResolution(),u=[],c=0,d=t.components.length;c<d;c++){for(u.push("m"),s=0===c,r=n=null,a=0,o=(i=t.components[c].components).length;a<o;a++)h=((l=i[a]).x-this.featureDx)/p-this.offset.x|0,l=l.y/p-this.offset.y|0,u.push(h=" "+h+","+l),0==a&&u.push(" l"),s||(n?n!=h&&(r?r!=h&&(s=!0):r=h):n=h);u.push(s?" x ":" ")}return u.push("e"),e.path=u.join(""),e},drawRectangle:function(e,t){var i=this.getResolution();return e.style.left=((t.x-this.featureDx)/i-this.offset.x|0)+"px",e.style.top=(t.y/i-this.offset.y|0)+"px",e.style.width=(t.width/i|0)+"px",e.style.height=(t.height/i|0)+"px",e},drawText:function(e,t,i){var s=this.nodeFactory(e+this.LABEL_ID_SUFFIX,"olv:rect"),n=this.nodeFactory(e+this.LABEL_ID_SUFFIX+"_textbox","olv:textbox"),r=this.getResolution();s.style.left=((i.x-this.featureDx)/r-this.offset.x|0)+"px",s.style.top=(i.y/r-this.offset.y|0)+"px",s.style.flip="y",n.innerText=t.label,"inherit"!=t.cursor&&null!=t.cursor&&(n.style.cursor=t.cursor),t.fontColor&&(n.style.color=t.fontColor),t.fontOpacity&&(n.style.filter="alpha(opacity="+100*t.fontOpacity+")"),t.fontFamily&&(n.style.fontFamily=t.fontFamily),t.fontSize&&(n.style.fontSize=t.fontSize),t.fontWeight&&(n.style.fontWeight=t.fontWeight),t.fontStyle&&(n.style.fontStyle=t.fontStyle),!0===t.labelSelect&&(s._featureId=e,n._featureId=e,n._geometry=i,n._geometryClass=i.CLASS_NAME),n.style.whiteSpace="nowrap",n.inset="1px,0px,0px,0px",s.parentNode||(s.appendChild(n),this.textRoot.appendChild(s)),1==(t=t.labelAlign||"cm").length&&(t+="m"),e=n.clientWidth*OpenLayers.Renderer.VML.LABEL_SHIFT[t.substr(0,1)],n=n.clientHeight*OpenLayers.Renderer.VML.LABEL_SHIFT[t.substr(1,1)],s.style.left=parseInt(s.style.left)-e-1+"px",s.style.top=parseInt(s.style.top)+n+"px"},moveRoot:function(e){e=this.map.getLayer(e.container.id);(e=e instanceof OpenLayers.Layer.Vector.RootContainer?this.map.getLayer(this.container.id):e)&&e.renderer.clear(),OpenLayers.Renderer.Elements.prototype.moveRoot.apply(this,arguments),e&&e.redraw()},importSymbol:function(e){var t=this.container.id+"-"+e,i=this.symbolCache[t];if(i)return i;if(!(i=OpenLayers.Renderer.symbol[e]))throw Error(e+" is not a valid symbol name");e=new OpenLayers.Bounds(Number.MAX_VALUE,Number.MAX_VALUE,0,0);for(var s=["m"],n=0;n<i.length;n+=2){var r=i[n],a=i[n+1];e.left=Math.min(e.left,r),e.bottom=Math.min(e.bottom,a),e.right=Math.max(e.right,r),e.top=Math.max(e.top,a),s.push(r),s.push(a),0==n&&s.push("l")}return s.push("x e"),i=s.join(" "),0<(s=(e.getWidth()-e.getHeight())/2)?(e.bottom-=s,e.top+=s):(e.left+=s,e.right-=s),i={path:i,size:e.getWidth(),left:e.left,bottom:e.bottom},this.symbolCache[t]=i},CLASS_NAME:"OpenLayers.Renderer.VML"}),OpenLayers.Renderer.VML.LABEL_SHIFT={l:0,c:.5,r:1,t:0,m:.5,b:1},OpenLayers.Control.CacheRead=OpenLayers.Class(OpenLayers.Control,{fetchEvent:"tileloadstart",layers:null,autoActivate:!0,setMap:function(e){OpenLayers.Control.prototype.setMap.apply(this,arguments);for(var t=this.layers||e.layers,i=t.length-1;0<=i;--i)this.addLayer({layer:t[i]});this.layers||e.events.on({addlayer:this.addLayer,removeLayer:this.removeLayer,scope:this})},addLayer:function(e){e.layer.events.register(this.fetchEvent,this,this.fetch)},removeLayer:function(e){e.layer.events.unregister(this.fetchEvent,this,this.fetch)},fetch:function(e){var t,i;this.active&&window.localStorage&&e.tile instanceof OpenLayers.Tile.Image&&(i=(t=e.tile).url,!t.layer.crossOriginKeyword&&OpenLayers.ProxyHost&&0===i.indexOf(OpenLayers.ProxyHost)&&(i=OpenLayers.Control.CacheWrite.urlMap[i]),(i=window.localStorage.getItem("olCache_"+i))&&(t.url=i,"tileerror"===e.type&&t.setImgSrc(i)))},destroy:function(){if(this.layers||this.map)for(var e=this.layers||this.map.layers,t=e.length-1;0<=t;--t)this.removeLayer({layer:e[t]});this.map&&this.map.events.un({addlayer:this.addLayer,removeLayer:this.removeLayer,scope:this}),OpenLayers.Control.prototype.destroy.apply(this,arguments)},CLASS_NAME:"OpenLayers.Control.CacheRead"}),OpenLayers.Protocol.WFS.v1_0_0=OpenLayers.Class(OpenLayers.Protocol.WFS.v1,{version:"1.0.0",CLASS_NAME:"OpenLayers.Protocol.WFS.v1_0_0"}),OpenLayers.Format.WMSGetFeatureInfo=OpenLayers.Class(OpenLayers.Format.XML,{layerIdentifier:"_layer",featureIdentifier:"_feature",regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},gmlFormat:null,read:function(e){var t,i=(e="string"==typeof e?OpenLayers.Format.XML.prototype.read.apply(this,[e]):e).documentElement;return e=i?(t=this["read_"+i.nodeName])?t.call(this,i):new OpenLayers.Format.GML(this.options||{}).read(e):e},read_msGMLOutput:function(e){var t=[];if(e=this.getSiblingNodesByTagCriteria(e,this.layerIdentifier))for(var i=0,s=e.length;i<s;++i){var n=e[i],r=n.nodeName,r=(r=n.prefix?r.split(":")[1]:r).replace(this.layerIdentifier,"");if(n=this.getSiblingNodesByTagCriteria(n,this.featureIdentifier))for(var a=0;a<n.length;a++){var o=n[a],l=this.parseGeometry(o),o=this.parseAttributes(o);(o=new OpenLayers.Feature.Vector(l.geometry,o,null)).bounds=l.bounds,o.type=r,t.push(o)}}return t},read_FeatureInfoResponse:function(e){for(var t=[],i=0,s=(e=this.getElementsByTagNameNS(e,"*","FIELDS")).length;i<s;i++){var n,r=e[i],a={},o=r.attributes.length;if(0<o)for(n=0;n<o;n++){var l=r.attributes[n];a[l.nodeName]=l.nodeValue}else for(n=0,o=(r=r.childNodes).length;n<o;++n)3!=(l=r[n]).nodeType&&(a[l.getAttribute("name")]=l.getAttribute("value"));t.push(new OpenLayers.Feature.Vector(null,a,null))}return t},getSiblingNodesByTagCriteria:function(e,t){var i,s,n=[];if(e&&e.hasChildNodes())for(var r,a=(r=e.childNodes).length,o=0;o<a;o++){for(s=r[o];s&&1!=s.nodeType;)s=s.nextSibling,o++;0<(i=s?s.nodeName:"").length&&-1<i.indexOf(t)?n.push(s):0<(i=this.getSiblingNodesByTagCriteria(s,t)).length&&(0==n.length?n=i:n.push(i))}return n},parseAttributes:function(e){var t={};if(1==e.nodeType)for(var i=(e=e.childNodes).length,s=0;s<i;++s){var n,r=e[s];1==r.nodeType&&(n=r.childNodes,r=r.prefix?r.nodeName.split(":")[1]:r.nodeName,0==n.length?t[r]=null:1!=n.length||3!=(n=n[0]).nodeType&&4!=n.nodeType||(n=n.nodeValue.replace(this.regExes.trimSpace,""),t[r]=n))}return t},parseGeometry:function(e){this.gmlFormat||(this.gmlFormat=new OpenLayers.Format.GML);var t,i=null;return(e=this.gmlFormat.parseFeature(e))&&(t=e.geometry&&e.geometry.clone(),i=e.bounds&&e.bounds.clone(),e.destroy()),{geometry:t,bounds:i}},CLASS_NAME:"OpenLayers.Format.WMSGetFeatureInfo"}),OpenLayers.Control.WMTSGetFeatureInfo=OpenLayers.Class(OpenLayers.Control,{hover:!1,requestEncoding:"KVP",drillDown:!1,maxFeatures:10,clickCallback:"click",layers:null,queryVisible:!0,infoFormat:"text/html",vendorParams:{},format:null,formatOptions:null,handler:null,hoverRequest:null,pending:0,initialize:function(e){(e=e||{}).handlerOptions=e.handlerOptions||{},OpenLayers.Control.prototype.initialize.apply(this,[e]),this.format||(this.format=new OpenLayers.Format.WMSGetFeatureInfo(e.formatOptions)),!0===this.drillDown&&(this.hover=!1),this.hover?this.handler=new OpenLayers.Handler.Hover(this,{move:this.cancelHover,pause:this.getInfoForHover},OpenLayers.Util.extend(this.handlerOptions.hover||{},{delay:250})):((e={})[this.clickCallback]=this.getInfoForClick,this.handler=new OpenLayers.Handler.Click(this,e,this.handlerOptions.click||{}))},getInfoForClick:function(e){this.request(e.xy,{})},getInfoForHover:function(e){this.request(e.xy,{hover:!0})},cancelHover:function(){this.hoverRequest&&(--this.pending,this.pending<=0&&(OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait"),this.pending=0),this.hoverRequest.abort(),this.hoverRequest=null)},findLayers:function(){for(var e,t=this.layers||this.map.layers,i=[],s=t.length-1;0<=s&&(!((e=t[s])instanceof OpenLayers.Layer.WMTS)||e.requestEncoding!==this.requestEncoding||this.queryVisible&&!e.getVisibility()||(i.push(e),this.drillDown&&!this.hover));--s);return i},buildRequestOptions:function(t,i){var e=this.map.getLonLatFromPixel(i),s=t.getURL(new OpenLayers.Bounds(e.lon,e.lat,e.lon,e.lat)),s=OpenLayers.Util.getParameters(s),e=t.getTileInfo(e);return OpenLayers.Util.extend(s,{service:"WMTS",version:t.version,request:"GetFeatureInfo",infoFormat:this.infoFormat,i:e.i,j:e.j}),OpenLayers.Util.applyDefaults(s,this.vendorParams),{url:OpenLayers.Util.isArray(t.url)?t.url[0]:t.url,params:OpenLayers.Util.upperCaseObject(s),callback:function(e){this.handleResponse(i,e,t)},scope:this}},request:function(e,t){t=t||{};var i=this.findLayers();if(0<i.length){for(var s,n=0,r=i.length;n<r;n++)s=i[n],!1!==this.events.triggerEvent("beforegetfeatureinfo",{xy:e,layer:s})&&(++this.pending,s=this.buildRequestOptions(s,e),s=OpenLayers.Request.GET(s),!0===t.hover&&(this.hoverRequest=s));0<this.pending&&OpenLayers.Element.addClass(this.map.viewPortDiv,"olCursorWait")}},handleResponse:function(t,i,s){if(--this.pending,this.pending<=0&&(OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait"),this.pending=0),i.status&&(i.status<200||300<=i.status))this.events.triggerEvent("exception",{xy:t,request:i,layer:s});else{var e,n,r=i.responseXML;r&&r.documentElement||(r=i.responseText);try{e=this.format.read(r)}catch(e){n=!0,this.events.triggerEvent("exception",{xy:t,request:i,error:e,layer:s})}n||this.events.triggerEvent("getfeatureinfo",{text:i.responseText,features:e,request:i,xy:t,layer:s})}},CLASS_NAME:"OpenLayers.Control.WMTSGetFeatureInfo"}),OpenLayers.Protocol.CSW.v2_0_2=OpenLayers.Class(OpenLayers.Protocol,{formatOptions:null,initialize:function(e){OpenLayers.Protocol.prototype.initialize.apply(this,[e]),e.format||(this.format=new OpenLayers.Format.CSWGetRecords.v2_0_2(OpenLayers.Util.extend({},this.formatOptions)))},destroy:function(){this.options&&!this.options.format&&this.format.destroy(),this.format=null,OpenLayers.Protocol.prototype.destroy.apply(this)},read:function(e){e=OpenLayers.Util.extend({},e),OpenLayers.Util.applyDefaults(e,this.options||{});var t=new OpenLayers.Protocol.Response({requestType:"read"}),i=this.format.write(e.params||e);return t.priv=OpenLayers.Request.POST({url:e.url,callback:this.createCallback(this.handleRead,t,e),params:e.params,headers:e.headers,data:i}),t},handleRead:function(e,t){var i;t.callback&&(200<=(i=e.priv).status&&i.status<300?(e.data=this.parseData(i),e.code=OpenLayers.Protocol.Response.SUCCESS):e.code=OpenLayers.Protocol.Response.FAILURE,t.callback.call(t.scope,e))},parseData:function(e){var t=e.responseXML;return!(t=t&&t.documentElement?t:e.responseText)||t.length<=0?null:this.format.read(t)},CLASS_NAME:"OpenLayers.Protocol.CSW.v2_0_2"}),OpenLayers.Format.WCSCapabilities.v1_1_0=OpenLayers.Class(OpenLayers.Format.WCSCapabilities.v1,{namespaces:{wcs:"http://www.opengis.net/wcs/1.1",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",ows:"http://www.opengis.net/ows/1.1"},errorProperty:"operationsMetadata",readers:{wcs:OpenLayers.Util.applyDefaults({Capabilities:function(e,t){this.readChildNodes(e,t)},Contents:function(e,t){t.contentMetadata=[],this.readChildNodes(e,t.contentMetadata)},CoverageSummary:function(e,t){var i={};this.readChildNodes(e,i),t.push(i)},Identifier:function(e,t){t.identifier=this.getChildValue(e)},Title:function(e,t){t.title=this.getChildValue(e)},Abstract:function(e,t){t.abstract=this.getChildValue(e)},SupportedCRS:function(e,t){e=this.getChildValue(e);e&&(t.supportedCRS||(t.supportedCRS=[]),t.supportedCRS.push(e))},SupportedFormat:function(e,t){e=this.getChildValue(e);e&&(t.supportedFormat||(t.supportedFormat=[]),t.supportedFormat.push(e))}},OpenLayers.Format.WCSCapabilities.v1.prototype.readers.wcs),ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.WCSCapabilities.v1_1_0"}),OpenLayers.Control.Graticule=OpenLayers.Class(OpenLayers.Control,{autoActivate:!0,intervals:[45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],displayInLayerSwitcher:!0,visible:!0,numPoints:50,targetSize:200,layerName:null,labelled:!0,labelFormat:"dm",lineSymbolizer:{strokeColor:"#333",strokeWidth:1,strokeOpacity:.5},labelSymbolizer:{},gratLayer:null,initialize:function(e){(e=e||{}).layerName=e.layerName||OpenLayers.i18n("Graticule"),OpenLayers.Control.prototype.initialize.apply(this,[e]),this.labelSymbolizer.stroke=!1,this.labelSymbolizer.fill=!1,this.labelSymbolizer.label="${label}",this.labelSymbolizer.labelAlign="${labelAlign}",this.labelSymbolizer.labelXOffset="${xOffset}",this.labelSymbolizer.labelYOffset="${yOffset}"},destroy:function(){this.deactivate(),OpenLayers.Control.prototype.destroy.apply(this,arguments),this.gratLayer&&(this.gratLayer.destroy(),this.gratLayer=null)},draw:function(){var e;return OpenLayers.Control.prototype.draw.apply(this,arguments),this.gratLayer||(e=new OpenLayers.Style({},{rules:[new OpenLayers.Rule({symbolizer:{Point:this.labelSymbolizer,Line:this.lineSymbolizer}})]}),this.gratLayer=new OpenLayers.Layer.Vector(this.layerName,{styleMap:new OpenLayers.StyleMap({default:e}),visibility:this.visible,displayInLayerSwitcher:this.displayInLayerSwitcher})),this.div},activate:function(){return!!OpenLayers.Control.prototype.activate.apply(this,arguments)&&(this.map.addLayer(this.gratLayer),this.map.events.register("moveend",this,this.update),this.update(),!0)},deactivate:function(){return!!OpenLayers.Control.prototype.deactivate.apply(this,arguments)&&(this.map.events.unregister("moveend",this,this.update),this.map.removeLayer(this.gratLayer),!0)},update:function(){var e=this.map.getExtent();if(e){this.gratLayer.destroyFeatures();var t=new OpenLayers.Projection("EPSG:4326"),i=this.map.getProjectionObject(),s=this.map.getResolution(),n=(i.proj&&"longlat"==i.proj.projName&&(this.numPoints=1),this.map.getCenter()),r=new OpenLayers.Pixel(n.lon,n.lat);OpenLayers.Projection.transform(r,i,t);for(n=(n=this.targetSize*s)*n,s=0;s<this.intervals.length;++s){var a,o=(a=this.intervals[s])/2,l=r.offset({x:-o,y:-o}),o=r.offset({x:o,y:o});if(OpenLayers.Projection.transform(l,t,i),OpenLayers.Projection.transform(o,t,i),(l.x-o.x)*(l.x-o.x)+(l.y-o.y)*(l.y-o.y)<=n)break}r.x=Math.floor(r.x/a)*a,r.y=Math.floor(r.y/a)*a;for(s=0,n=[r.clone()],o=r.clone();o=o.offset({x:0,y:a}),h=OpenLayers.Projection.transform(o.clone(),t,i),n.unshift(o),e.containsPixel(h)&&++s<1e3;);for(o=r.clone();o=o.offset({x:0,y:-a}),h=OpenLayers.Projection.transform(o.clone(),t,i),n.push(o),e.containsPixel(h)&&++s<1e3;);for(s=0,l=[r.clone()],o=r.clone();o=o.offset({x:-a,y:0}),h=OpenLayers.Projection.transform(o.clone(),t,i),l.unshift(o),e.containsPixel(h)&&++s<1e3;);for(o=r.clone();o=o.offset({x:a,y:0}),h=OpenLayers.Projection.transform(o.clone(),t,i),l.push(o),e.containsPixel(h)&&++s<1e3;);for(a=[],s=0;s<l.length;++s){for(var h=l[s].x,r=[],p=null,u=((c=Math.min(n[0].y,90))-(o=Math.max(n[n.length-1].y,-90)))/this.numPoints,c=o,o=0;o<=this.numPoints;++o){var d=new OpenLayers.Geometry.Point(h,c);d.transform(t,i),r.push(d),c+=u,d.y>=e.bottom&&!p&&(p=d)}this.labelled&&(p=new OpenLayers.Geometry.Point(p.x,e.bottom),h={value:h,label:this.labelled?OpenLayers.Util.getFormattedLonLat(h,"lon",this.labelFormat):"",labelAlign:"cb",xOffset:0,yOffset:2},this.gratLayer.addFeatures(new OpenLayers.Feature.Vector(p,h))),r=new OpenLayers.Geometry.LineString(r),a.push(new OpenLayers.Feature.Vector(r))}for(o=0;o<n.length;++o)if(!((c=n[o].y)<-90||90<c)){for(r=[],s=l[0].x,u=(l[l.length-1].x-s)/this.numPoints,h=s,p=null,s=0;s<=this.numPoints;++s)(d=new OpenLayers.Geometry.Point(h,c)).transform(t,i),r.push(d),h+=u,d.x<e.right&&(p=d);this.labelled&&(p=new OpenLayers.Geometry.Point(e.right,p.y),h={value:c,label:this.labelled?OpenLayers.Util.getFormattedLonLat(c,"lat",this.labelFormat):"",labelAlign:"rb",xOffset:-2,yOffset:2},this.gratLayer.addFeatures(new OpenLayers.Feature.Vector(p,h))),r=new OpenLayers.Geometry.LineString(r),a.push(new OpenLayers.Feature.Vector(r))}this.gratLayer.addFeatures(a)}},CLASS_NAME:"OpenLayers.Control.Graticule"}),OpenLayers.Console.warn("OpenLayers.Rico is deprecated"),OpenLayers.Rico=OpenLayers.Rico||{},OpenLayers.Rico.Corner={round:function(e,t){e=OpenLayers.Util.getElement(e),this._setOptions(t);var t=this.options.color,i=("fromElement"==this.options.color&&(t=this._background(e)),this.options.bgColor);"fromParent"==this.options.bgColor&&(i=this._background(e.offsetParent)),this._roundCornersImpl(e,t,i)},changeColor:function(e,t){e.style.backgroundColor=t;for(var i=e.parentNode.getElementsByTagName("span"),s=0;s<i.length;s++)i[s].style.backgroundColor=t},changeOpacity:function(e,t){var i="alpha(opacity="+100*t+")";e.style.opacity=t,e.style.filter=i;for(var s=e.parentNode.getElementsByTagName("span"),n=0;n<s.length;n++)s[n].style.opacity=t,s[n].style.filter=i},reRound:function(e,t){var i=e.parentNode.childNodes[2];e.parentNode.removeChild(e.parentNode.childNodes[0]),e.parentNode.removeChild(i),this.round(e.parentNode,t)},_roundCornersImpl:function(e,t,i){this.options.border&&this._renderBorder(e,i),this._isTopRounded()&&this._roundTopCorners(e,t,i),this._isBottomRounded()&&this._roundBottomCorners(e,t,i)},_renderBorder:function(e,t){t="1px solid "+this._borderColor(t);e.innerHTML="<div style='border-left: "+t+";border-right: "+t+"'>"+e.innerHTML+"</div>"},_roundTopCorners:function(e,t,i){for(var s=this._createCorner(i),n=0;n<this.options.numSlices;n++)s.appendChild(this._createCornerSlice(t,i,n,"top"));e.style.paddingTop=0,e.insertBefore(s,e.firstChild)},_roundBottomCorners:function(e,t,i){for(var s=this._createCorner(i),n=this.options.numSlices-1;0<=n;n--)s.appendChild(this._createCornerSlice(t,i,n,"bottom"));e.style.paddingBottom=0,e.appendChild(s)},_createCorner:function(e){var t=document.createElement("div");return t.style.backgroundColor=this._isTransparent()?"transparent":e,t},_createCornerSlice:function(e,t,i,s){var n=document.createElement("span"),r=n.style;return r.backgroundColor=e,r.display="block",r.height="1px",r.overflow="hidden",r.fontSize="1px",e=this._borderColor(e,t),this.options.border&&0==i?(r.borderTopStyle="solid",r.borderTopWidth="1px",r.borderLeftWidth="0px",r.borderRightWidth="0px",r.borderBottomWidth="0px",r.height="0px",r.borderColor=e):e&&(r.borderColor=e,r.borderStyle="solid",r.borderWidth="0px 1px"),this.options.compact||i!=this.options.numSlices-1||(r.height="2px"),this._setMargin(n,i,s),this._setBorder(n,i,s),n},_setOptions:function(e){this.options={corners:"all",color:"fromElement",bgColor:"fromParent",blend:!0,border:!1,compact:!1},OpenLayers.Util.extend(this.options,e||{}),this.options.numSlices=this.options.compact?2:4,this._isTransparent()&&(this.options.blend=!1)},_whichSideTop:function(){return this._hasString(this.options.corners,"all","top")||0<=this.options.corners.indexOf("tl")&&0<=this.options.corners.indexOf("tr")?"":0<=this.options.corners.indexOf("tl")?"left":0<=this.options.corners.indexOf("tr")?"right":""},_whichSideBottom:function(){return this._hasString(this.options.corners,"all","bottom")||0<=this.options.corners.indexOf("bl")&&0<=this.options.corners.indexOf("br")?"":0<=this.options.corners.indexOf("bl")?"left":0<=this.options.corners.indexOf("br")?"right":""},_borderColor:function(e,t){return"transparent"==e?t:this.options.border||(this.options.blend?this._blend(t,e):"")},_setMargin:function(e,t,i){t=this._marginSize(t),"left"==(i="top"==i?this._whichSideTop():this._whichSideBottom())?(e.style.marginLeft=t+"px",e.style.marginRight="0px"):"right"==i?(e.style.marginRight=t+"px",e.style.marginLeft="0px"):(e.style.marginLeft=t+"px",e.style.marginRight=t+"px")},_setBorder:function(e,t,i){t=this._borderSize(t),"left"==(i="top"==i?this._whichSideTop():this._whichSideBottom())?(e.style.borderLeftWidth=t+"px",e.style.borderRightWidth="0px"):"right"==i?(e.style.borderRightWidth=t+"px",e.style.borderLeftWidth="0px"):(e.style.borderLeftWidth=t+"px",e.style.borderRightWidth=t+"px"),0!=this.options.border&&(e.style.borderLeftWidth=t+"px",e.style.borderRightWidth=t+"px")},_marginSize:function(e){if(this._isTransparent())return 0;return(this.options.compact&&this.options.blend?[1,0]:this.options.compact?[2,1]:this.options.blend?[3,2,1,0]:[5,3,2,1])[e]},_borderSize:function(e){return this.options.compact&&(this.options.blend||this._isTransparent())?1:this.options.compact?[1,0][e]:this.options.blend?[2,1,1,1][e]:this.options.border?[0,2,0,0][e]:this._isTransparent()?[5,3,2,1][e]:0},_hasString:function(e){for(var t=1;t<arguments.length;t++)if(0<=e.indexOf(arguments[t]))return!0;return!1},_blend:function(e,t){e=OpenLayers.Rico.Color.createFromHex(e);return e.blend(OpenLayers.Rico.Color.createFromHex(t)),e},_background:function(e){try{return OpenLayers.Rico.Color.createColorFromBackground(e).asHex()}catch(e){return"#ffffff"}},_isTransparent:function(){return"transparent"==this.options.color},_isTopRounded:function(){return this._hasString(this.options.corners,"all","top","tl","tr")},_isBottomRounded:function(){return this._hasString(this.options.corners,"all","bottom","bl","br")},_hasSingleTextChild:function(e){return 1==e.childNodes.length&&3==e.childNodes[0].nodeType}},OpenLayers.Control.NavigationHistory=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOGGLE,previous:null,previousOptions:null,next:null,nextOptions:null,limit:50,autoActivate:!0,clearOnDeactivate:!1,registry:null,nextStack:null,previousStack:null,listeners:null,restoring:!1,initialize:function(e){OpenLayers.Control.prototype.initialize.apply(this,[e]),this.registry=OpenLayers.Util.extend({moveend:this.getState},this.registry),e={trigger:OpenLayers.Function.bind(this.previousTrigger,this),displayClass:this.displayClass+" "+this.displayClass+"Previous"},OpenLayers.Util.extend(e,this.previousOptions),this.previous=new OpenLayers.Control.Button(e),e={trigger:OpenLayers.Function.bind(this.nextTrigger,this),displayClass:this.displayClass+" "+this.displayClass+"Next"},OpenLayers.Util.extend(e,this.nextOptions),this.next=new OpenLayers.Control.Button(e),this.clear()},onPreviousChange:function(e,t){e&&!this.previous.active?this.previous.activate():!e&&this.previous.active&&this.previous.deactivate()},onNextChange:function(e,t){e&&!this.next.active?this.next.activate():!e&&this.next.active&&this.next.deactivate()},destroy:function(){for(var e in OpenLayers.Control.prototype.destroy.apply(this),this.previous.destroy(),this.next.destroy(),this.deactivate(),this)this[e]=null},setMap:function(e){this.map=e,this.next.setMap(e),this.previous.setMap(e)},draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments),this.next.draw(),this.previous.draw()},previousTrigger:function(){var e=this.previousStack.shift(),t=this.previousStack.shift();return null!=t?(this.nextStack.unshift(e),this.previousStack.unshift(t),this.restoring=!0,this.restore(t),this.restoring=!1,this.onNextChange(this.nextStack[0],this.nextStack.length),this.onPreviousChange(this.previousStack[1],this.previousStack.length-1)):this.previousStack.unshift(e),t},nextTrigger:function(){var e=this.nextStack.shift();return null!=e&&(this.previousStack.unshift(e),this.restoring=!0,this.restore(e),this.restoring=!1,this.onNextChange(this.nextStack[0],this.nextStack.length),this.onPreviousChange(this.previousStack[1],this.previousStack.length-1)),e},clear:function(){this.previousStack=[],this.previous.deactivate(),this.nextStack=[],this.next.deactivate()},getState:function(){return{center:this.map.getCenter(),resolution:this.map.getResolution(),projection:this.map.getProjectionObject(),units:this.map.getProjectionObject().getUnits()||this.map.units||this.map.baseLayer.units}},restore:function(e){var t,i,s;this.map.getProjectionObject()==e.projection?(i=this.map.getZoomForResolution(e.resolution),t=e.center):((t=e.center.clone()).transform(e.projection,this.map.getProjectionObject()),i=e.units,s=this.map.getProjectionObject().getUnits()||this.map.units||this.map.baseLayer.units,i=this.map.getZoomForResolution((i&&s?OpenLayers.INCHES_PER_UNIT[i]/OpenLayers.INCHES_PER_UNIT[s]:1)*e.resolution)),this.map.setCenter(t,i)},setListeners:function(){for(var t in this.listeners={},this.registry)this.listeners[t]=OpenLayers.Function.bind(function(){var e;return this.restoring||(e=this.registry[t].apply(this,arguments),this.previousStack.unshift(e),1<this.previousStack.length&&this.onPreviousChange(this.previousStack[1],this.previousStack.length-1),this.previousStack.length>this.limit+1&&this.previousStack.pop(),0<this.nextStack.length&&(this.nextStack=[],this.onNextChange(null,0))),!0},this)},activate:function(){var e=!1;if(this.map&&OpenLayers.Control.prototype.activate.apply(this)){for(var t in null==this.listeners&&this.setListeners(),this.listeners)this.map.events.register(t,this,this.listeners[t]);e=!0,0==this.previousStack.length&&this.initStack()}return e},initStack:function(){this.map.getCenter()&&this.listeners.moveend()},deactivate:function(){var e=!1;if(this.map&&OpenLayers.Control.prototype.deactivate.apply(this)){for(var t in this.listeners)this.map.events.unregister(t,this,this.listeners[t]);this.clearOnDeactivate&&this.clear(),e=!0}return e},CLASS_NAME:"OpenLayers.Control.NavigationHistory"}),OpenLayers.Layer.UTFGrid=OpenLayers.Class(OpenLayers.Layer.XYZ,{isBaseLayer:!1,projection:new OpenLayers.Projection("EPSG:900913"),useJSONP:!1,tileClass:OpenLayers.Tile.UTFGrid,initialize:function(e){OpenLayers.Layer.Grid.prototype.initialize.apply(this,[e.name,e.url,{},e]),this.tileOptions=OpenLayers.Util.extend({utfgridResolution:this.utfgridResolution},this.tileOptions)},createBackBuffer:function(){},clone:function(e){return null==e&&(e=new OpenLayers.Layer.UTFGrid(this.getOptions())),OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getFeatureInfo:function(e){var t=null;return t=(e=this.getTileData(e))&&e.tile?e.tile.getFeatureInfo(e.i,e.j):t},getFeatureId:function(e){var t=null;return t=(e=this.getTileData(e)).tile?e.tile.getFeatureId(e.i,e.j):t},CLASS_NAME:"OpenLayers.Layer.UTFGrid"}),OpenLayers.TileManager=OpenLayers.Class({cacheSize:256,tilesPerFrame:2,frameDelay:16,moveDelay:100,zoomDelay:200,maps:null,tileQueueId:null,tileQueue:null,tileCache:null,tileCacheIndex:null,initialize:function(e){OpenLayers.Util.extend(this,e),this.maps=[],this.tileQueueId={},this.tileQueue={},this.tileCache={},this.tileCacheIndex=[]},addMap:function(e){if(!this._destroyed&&OpenLayers.Layer.Grid){this.maps.push(e),this.tileQueue[e.id]=[];for(var t=0,i=e.layers.length;t<i;++t)this.addLayer({layer:e.layers[t]});e.events.on({move:this.move,zoomend:this.zoomEnd,changelayer:this.changeLayer,addlayer:this.addLayer,preremovelayer:this.removeLayer,scope:this})}},removeMap:function(e){if(!this._destroyed&&OpenLayers.Layer.Grid){if(window.clearTimeout(this.tileQueueId[e.id]),e.layers)for(var t=0,i=e.layers.length;t<i;++t)this.removeLayer({layer:e.layers[t]});e.events&&e.events.un({move:this.move,zoomend:this.zoomEnd,changelayer:this.changeLayer,addlayer:this.addLayer,preremovelayer:this.removeLayer,scope:this}),delete this.tileQueue[e.id],delete this.tileQueueId[e.id],OpenLayers.Util.removeItem(this.maps,e)}},move:function(e){this.updateTimeout(e.object,this.moveDelay,!0)},zoomEnd:function(e){this.updateTimeout(e.object,this.zoomDelay)},changeLayer:function(e){"visibility"!==e.property&&"params"!==e.property||this.updateTimeout(e.object,0)},addLayer:function(e){var t,i,s;if((e=e.layer)instanceof OpenLayers.Layer.Grid)for(e.events.on({addtile:this.addTile,retile:this.clearTileQueue,scope:this}),t=e.grid.length-1;0<=t;--t)for(i=e.grid[t].length-1;0<=i;--i)s=e.grid[t][i],this.addTile({tile:s}),s.url&&!s.imgDiv&&this.manageTileCache({object:s})},removeLayer:function(e){if((e=e.layer)instanceof OpenLayers.Layer.Grid&&(this.clearTileQueue({object:e}),e.events&&e.events.un({addtile:this.addTile,retile:this.clearTileQueue,scope:this}),e.grid))for(var t,i,s=e.grid.length-1;0<=s;--s)for(t=e.grid[s].length-1;0<=t;--t)i=e.grid[s][t],this.unloadTile({object:i})},updateTimeout:function(e,t,i){window.clearTimeout(this.tileQueueId[e.id]);var s=this.tileQueue[e.id];i&&!s.length||(this.tileQueueId[e.id]=window.setTimeout(OpenLayers.Function.bind(function(){this.drawTilesFromQueue(e),s.length&&this.updateTimeout(e,this.frameDelay)},this),t))},addTile:function(e){e.tile instanceof OpenLayers.Tile.Image?e.tile.events.on({beforedraw:this.queueTileDraw,beforeload:this.manageTileCache,loadend:this.addToCache,unload:this.unloadTile,scope:this}):this.removeLayer({layer:e.tile.layer})},unloadTile:function(e){(e=e.object).events.un({beforedraw:this.queueTileDraw,beforeload:this.manageTileCache,loadend:this.addToCache,unload:this.unloadTile,scope:this}),OpenLayers.Util.removeItem(this.tileQueue[e.layer.map.id],e)},queueTileDraw:function(e){var t=!1,i=(e=e.object).layer,s=i.getURL(e.bounds),n=this.tileCache[s];return n&&"olTileImage"!==n.className&&(delete this.tileCache[s],OpenLayers.Util.removeItem(this.tileCacheIndex,s),n=null),!i.url||!i.async&&n||(t=this.tileQueue[i.map.id],~OpenLayers.Util.indexOf(t,e)||t.push(e),t=!0),!t},drawTilesFromQueue:function(e){var t=this.tileQueue[e.id],i=this.tilesPerFrame;for(e=e.zoomTween&&e.zoomTween.playing;!e&&t.length&&i;)t.shift().draw(!0),--i},manageTileCache:function(e){e=e.object;var t=this.tileCache[e.url];t&&(t.parentNode&&OpenLayers.Element.hasClass(t.parentNode,"olBackBuffer")&&(t.parentNode.removeChild(t),t.id=null),t.parentNode||(t.style.visibility="hidden",t.style.opacity=0,e.setImage(t),OpenLayers.Util.removeItem(this.tileCacheIndex,e.url),this.tileCacheIndex.push(e.url)))},addToCache:function(e){e=e.object,this.tileCache[e.url]||OpenLayers.Element.hasClass(e.imgDiv,"olImageLoadError")||(this.tileCacheIndex.length>=this.cacheSize&&(delete this.tileCache[this.tileCacheIndex[0]],this.tileCacheIndex.shift()),this.tileCache[e.url]=e.imgDiv,this.tileCacheIndex.push(e.url))},clearTileQueue:function(e){e=e.object;for(var t=this.tileQueue[e.map.id],i=t.length-1;0<=i;--i)t[i].layer===e&&t.splice(i,1)},destroy:function(){for(var e=this.maps.length-1;0<=e;--e)this.removeMap(this.maps[e]);this.tileCacheIndex=this.tileCache=this.tileQueueId=this.tileQueue=this.maps=null,this._destroyed=!0}}),OpenLayers.Layer.ArcGISCache=OpenLayers.Class(OpenLayers.Layer.XYZ,{url:null,tileOrigin:null,tileSize:new OpenLayers.Size(256,256),useArcGISServer:!0,type:"png",useScales:!1,overrideDPI:!1,initialize:function(e,t,i){if(OpenLayers.Layer.XYZ.prototype.initialize.apply(this,arguments),this.resolutions&&(this.serverResolutions=this.resolutions,this.maxExtent=this.getMaxExtentForResolution(this.resolutions[0])),this.layerInfo){var s=this.layerInfo,n=new OpenLayers.Bounds(s.fullExtent.xmin,s.fullExtent.ymin,s.fullExtent.xmax,s.fullExtent.ymax);if(this.projection="EPSG:"+s.spatialReference.wkid,this.sphericalMercator=102100==s.spatialReference.wkid,this.units="esriFeet"==s.units?"ft":"m",s.tileInfo){this.tileSize=new OpenLayers.Size(s.tileInfo.width||s.tileInfo.cols,s.tileInfo.height||s.tileInfo.rows),this.tileOrigin=new OpenLayers.LonLat(s.tileInfo.origin.x,s.tileInfo.origin.y);var r,a,o,l=new OpenLayers.Geometry.Point(n.left,n.top),n=new OpenLayers.Geometry.Point(n.right,n.bottom);for(r in this.useScales?this.scales=[]:this.resolutions=[],this.lods=[],s.tileInfo.lods)s.tileInfo.lods.hasOwnProperty(r)&&(a=s.tileInfo.lods[r],this.useScales?this.scales.push(a.scale):this.resolutions.push(a.resolution),o=this.getContainingTileCoords(l,a.resolution),a.startTileCol=o.x,a.startTileRow=o.y,o=this.getContainingTileCoords(n,a.resolution),a.endTileCol=o.x,a.endTileRow=o.y,this.lods.push(a));this.maxExtent=this.calculateMaxExtentWithLOD(this.lods[0]),this.serverResolutions=this.resolutions,this.overrideDPI&&s.tileInfo.dpi&&(OpenLayers.DOTS_PER_INCH=s.tileInfo.dpi)}}},getContainingTileCoords:function(e,t){return new OpenLayers.Pixel(Math.max(Math.floor((e.x-this.tileOrigin.lon)/(this.tileSize.w*t)),0),Math.max(Math.floor((this.tileOrigin.lat-e.y)/(this.tileSize.h*t)),0))},calculateMaxExtentWithLOD:function(e){var t=this.tileOrigin.lon+e.startTileCol*this.tileSize.w*e.resolution,i=this.tileOrigin.lat-e.startTileRow*this.tileSize.h*e.resolution;return new OpenLayers.Bounds(t,i-(e.endTileRow-e.startTileRow+1)*this.tileSize.h*e.resolution,t+(e.endTileCol-e.startTileCol+1)*this.tileSize.w*e.resolution,i)},calculateMaxExtentWithExtent:function(e,t){var i=new OpenLayers.Geometry.Point(e.left,e.top),e=new OpenLayers.Geometry.Point(e.right,e.bottom),i=this.getContainingTileCoords(i,t),e=this.getContainingTileCoords(e,t);return this.calculateMaxExtentWithLOD({resolution:t,startTileCol:i.x,startTileRow:i.y,endTileCol:e.x,endTileRow:e.y})},getUpperLeftTileCoord:function(e){var t=new OpenLayers.Geometry.Point(this.maxExtent.left,this.maxExtent.top);return this.getContainingTileCoords(t,e)},getLowerRightTileCoord:function(e){var t=new OpenLayers.Geometry.Point(this.maxExtent.right,this.maxExtent.bottom);return this.getContainingTileCoords(t,e)},getMaxExtentForResolution:function(e){var t=this.getUpperLeftTileCoord(e),i=this.getLowerRightTileCoord(e),s=this.tileOrigin.lon+t.x*this.tileSize.w*e,n=this.tileOrigin.lat-t.y*this.tileSize.h*e;return new OpenLayers.Bounds(s,n-(i.y-t.y+1)*this.tileSize.h*e,s+(i.x-t.x+1)*this.tileSize.w*e,n)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.ArcGISCache(this.name,this.url,this.options)),OpenLayers.Layer.XYZ.prototype.clone.apply(this,[e])},initGriddedTiles:function(e){delete this._tileOrigin,OpenLayers.Layer.XYZ.prototype.initGriddedTiles.apply(this,arguments)},getMaxExtent:function(){var e=this.map.getResolution();return this.maxExtent=this.getMaxExtentForResolution(e)},getTileOrigin:function(){var e;return this._tileOrigin||(e=this.getMaxExtent(),this._tileOrigin=new OpenLayers.LonLat(e.left,e.bottom)),this._tileOrigin},getURL:function(e){var t=this.getResolution(),i=this.tileOrigin.lon+t*this.tileSize.w/2,s=this.tileOrigin.lat-t*this.tileSize.h/2;if(e=e.getCenterLonLat(),i=Math.round(Math.abs((e.lon-i)/(t*this.tileSize.w))),s=Math.round(Math.abs((s-e.lat)/(t*this.tileSize.h))),e=this.map.getZoom(),this.lods){if(i<(t=this.lods[this.map.getZoom()]).startTileCol||i>t.endTileCol||s<t.startTileRow||s>t.endTileRow)return null}else{var n=this.getUpperLeftTileCoord(t),t=this.getLowerRightTileCoord(t);if(i<n.x||i>=t.x||s<n.y||s>=t.y)return null}return t=this.url,n=""+i+s+e,OpenLayers.Util.isArray(t)&&(t=this.selectUrl(n,t)),this.useArcGISServer?t+="/tile/${z}/${y}/${x}":(i="C"+OpenLayers.Number.zeroPad(i,8,16),s="R"+OpenLayers.Number.zeroPad(s,8,16),e="L"+OpenLayers.Number.zeroPad(e,2,10),t=t+"/${z}/${y}/${x}."+this.type),t=OpenLayers.String.format(t,{x:i,y:s,z:e}),OpenLayers.Util.urlAppend(t,OpenLayers.Util.getParameterString(this.params))},CLASS_NAME:"OpenLayers.Layer.ArcGISCache"}),OpenLayers.Control.WMSGetFeatureInfo=OpenLayers.Class(OpenLayers.Control,{hover:!1,drillDown:!1,maxFeatures:10,clickCallback:"click",output:"features",layers:null,queryVisible:!1,url:null,layerUrls:null,infoFormat:"text/html",vendorParams:{},format:null,formatOptions:null,handler:null,hoverRequest:null,initialize:function(e){(e=e||{}).handlerOptions=e.handlerOptions||{},OpenLayers.Control.prototype.initialize.apply(this,[e]),this.format||(this.format=new OpenLayers.Format.WMSGetFeatureInfo(e.formatOptions)),!0===this.drillDown&&(this.hover=!1),this.hover?this.handler=new OpenLayers.Handler.Hover(this,{move:this.cancelHover,pause:this.getInfoForHover},OpenLayers.Util.extend(this.handlerOptions.hover||{},{delay:250})):((e={})[this.clickCallback]=this.getInfoForClick,this.handler=new OpenLayers.Handler.Click(this,e,this.handlerOptions.click||{}))},getInfoForClick:function(e){this.events.triggerEvent("beforegetfeatureinfo",{xy:e.xy}),OpenLayers.Element.addClass(this.map.viewPortDiv,"olCursorWait"),this.request(e.xy,{})},getInfoForHover:function(e){this.events.triggerEvent("beforegetfeatureinfo",{xy:e.xy}),this.request(e.xy,{hover:!0})},cancelHover:function(){this.hoverRequest&&(this.hoverRequest.abort(),this.hoverRequest=null)},findLayers:function(){for(var e,t,i=this.layers||this.map.layers,s=[],n=i.length-1;0<=n;--n)(e=i[n])instanceof OpenLayers.Layer.WMS&&(!this.queryVisible||e.getVisibility())&&(t=OpenLayers.Util.isArray(e.url)?e.url[0]:e.url,!1!==this.drillDown||this.url||(this.url=t),!0!==this.drillDown&&!this.urlMatches(t)||s.push(e));return s},urlMatches:function(e){var t=OpenLayers.Util.isEquivalentUrl(this.url,e);if(!t&&this.layerUrls)for(var i=0,s=this.layerUrls.length;i<s;++i)if(OpenLayers.Util.isEquivalentUrl(this.layerUrls[i],e)){t=!0;break}return t},buildWMSOptions:function(t,e,i,s){for(var n=[],r=[],a=0,o=e.length;a<o;a++)null!=e[a].params.LAYERS&&(n=n.concat(e[a].params.LAYERS),r=r.concat(this.getStyleNames(e[a])));return e=e[0],a=this.map.getProjection(),(o=e.projection)&&o.equals(this.map.getProjectionObject())&&(a=o.getCode()),s=OpenLayers.Util.extend({service:"WMS",version:e.params.VERSION,request:"GetFeatureInfo",exceptions:e.params.EXCEPTIONS,bbox:this.map.getExtent().toBBOX(null,e.reverseAxisOrder()),feature_count:this.maxFeatures,height:this.map.getSize().h,width:this.map.getSize().w,format:s,info_format:e.params.INFO_FORMAT||this.infoFormat},1.3<=parseFloat(e.params.VERSION)?{crs:a,i:parseInt(i.x),j:parseInt(i.y)}:{srs:a,x:parseInt(i.x),y:parseInt(i.y)}),0!=n.length&&(s=OpenLayers.Util.extend({layers:n,query_layers:n,styles:r},s)),OpenLayers.Util.applyDefaults(s,this.vendorParams),{url:t,params:OpenLayers.Util.upperCaseObject(s),callback:function(e){this.handleResponse(i,e,t)},scope:this}},getStyleNames:function(e){return e.params.STYLES||(OpenLayers.Util.isArray(e.params.LAYERS)?Array(e.params.LAYERS.length):e.params.LAYERS.replace(/[^,]/g,""))},request:function(e,t){if(0==(i=this.findLayers()).length)this.events.triggerEvent("nogetfeatureinfo"),OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait");else if(t=t||{},!1===this.drillDown){var i=this.buildWMSOptions(this.url,i,e,i[0].params.FORMAT),s=OpenLayers.Request.GET(i);!0===t.hover&&(this.hoverRequest=s)}else{this._numRequests=this._requestCount=0,this.features=[];for(var s={},n=0,r=i.length;n<r;n++){var a,o=i[n];(a=OpenLayers.Util.isArray(o.url)?o.url[0]:o.url)in s?s[a].push(o):(this._numRequests++,s[a]=[o])}for(a in s)i=s[a],i=this.buildWMSOptions(a,i,e,i[0].params.FORMAT),OpenLayers.Request.GET(i)}},triggerGetFeatureInfo:function(e,t,i){this.events.triggerEvent("getfeatureinfo",{text:e.responseText,features:i,request:e,xy:t}),OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait")},handleResponse:function(e,t,i){var s=t.responseXML;s&&s.documentElement||(s=t.responseText),s=this.format.read(s),!1===this.drillDown?this.triggerGetFeatureInfo(t,e,s):(this._requestCount++,this._features="object"===this.output?(this._features||[]).concat({url:i,features:s}):(this._features||[]).concat(s),this._requestCount===this._numRequests&&(this.triggerGetFeatureInfo(t,e,this._features.concat()),delete this._features,delete this._requestCount,delete this._numRequests))},CLASS_NAME:"OpenLayers.Control.WMSGetFeatureInfo"}),OpenLayers.Format.WMSCapabilities.v1_3_0=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_3,{version:"1.3.0",CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_3_0"}),OpenLayers.Format.SOSGetFeatureOfInterest=OpenLayers.Class(OpenLayers.Format.XML,{VERSION:"1.0.0",namespaces:{sos:"http://www.opengis.net/sos/1.0",gml:"http://www.opengis.net/gml",sa:"http://www.opengis.net/sampling/1.0",xsi:"http://www.w3.org/2001/XMLSchema-instance"},schemaLocation:"http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd",defaultPrefix:"sos",regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},read:function(e){(e="string"==typeof e?OpenLayers.Format.XML.prototype.read.apply(this,[e]):e)&&9==e.nodeType&&(e=e.documentElement);var t={features:[]};this.readNode(e,t),e=[];for(var i=0,s=t.features.length;i<s;i++){var n=t.features[i];this.internalProjection&&this.externalProjection&&n.components[0]&&n.components[0].transform(this.externalProjection,this.internalProjection),n=new OpenLayers.Feature.Vector(n.components[0],n.attributes),e.push(n)}return e},readers:{sa:{SamplingPoint:function(e,t){var i;t.attributes||(t.features.push(i={attributes:{}}),t=i),t.attributes.id=this.getAttributeNS(e,this.namespaces.gml,"id"),this.readChildNodes(e,t)},position:function(e,t){this.readChildNodes(e,t)}},gml:OpenLayers.Util.applyDefaults({FeatureCollection:function(e,t){this.readChildNodes(e,t)},featureMember:function(e,t){var i={attributes:{}};t.features.push(i),this.readChildNodes(e,i)},name:function(e,t){t.attributes.name=this.getChildValue(e)},pos:function(e,t){this.externalProjection||(this.externalProjection=new OpenLayers.Projection(e.getAttribute("srsName"))),OpenLayers.Format.GML.v3.prototype.readers.gml.pos.apply(this,[e,t])}},OpenLayers.Format.GML.v3.prototype.readers.gml)},writers:{sos:{GetFeatureOfInterest:function(e){for(var t=this.createElementNSPlus("GetFeatureOfInterest",{attributes:{version:this.VERSION,service:"SOS","xsi:schemaLocation":this.schemaLocation}}),i=0,s=e.fois.length;i<s;i++)this.writeNode("FeatureOfInterestId",{foi:e.fois[i]},t);return t},FeatureOfInterestId:function(e){return this.createElementNSPlus("FeatureOfInterestId",{value:e.foi})}}},CLASS_NAME:"OpenLayers.Format.SOSGetFeatureOfInterest"}),OpenLayers.Format.SOSGetObservation=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ows:"http://www.opengis.net/ows",gml:"http://www.opengis.net/gml",sos:"http://www.opengis.net/sos/1.0",ogc:"http://www.opengis.net/ogc",om:"http://www.opengis.net/om/1.0",sa:"http://www.opengis.net/sampling/1.0",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},VERSION:"1.0.0",schemaLocation:"http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosGetObservation.xsd",defaultPrefix:"sos",read:function(e){(e="string"==typeof e?OpenLayers.Format.XML.prototype.read.apply(this,[e]):e)&&9==e.nodeType&&(e=e.documentElement);var t={measurements:[],observations:[]};return this.readNode(e,t),t},write:function(e){return(e=this.writeNode("sos:GetObservation",e)).setAttribute("xmlns:om",this.namespaces.om),e.setAttribute("xmlns:ogc",this.namespaces.ogc),this.setAttributeNS(e,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[e])},readers:{om:{ObservationCollection:function(e,t){t.id=this.getAttributeNS(e,this.namespaces.gml,"id"),this.readChildNodes(e,t)},member:function(e,t){this.readChildNodes(e,t)},Measurement:function(e,t){var i={};t.measurements.push(i),this.readChildNodes(e,i)},Observation:function(e,t){var i={};t.observations.push(i),this.readChildNodes(e,i)},samplingTime:function(e,t){var i={};t.samplingTime=i,this.readChildNodes(e,i)},observedProperty:function(e,t){t.observedProperty=this.getAttributeNS(e,this.namespaces.xlink,"href"),this.readChildNodes(e,t)},procedure:function(e,t){t.procedure=this.getAttributeNS(e,this.namespaces.xlink,"href"),this.readChildNodes(e,t)},featureOfInterest:function(e,t){var i={features:[]};t.fois=[],t.fois.push(i),this.readChildNodes(e,i);for(var s=[],n=0,r=i.features.length;n<r;n++){var a=i.features[n];s.push(new OpenLayers.Feature.Vector(a.components[0],a.attributes))}i.features=s},result:function(e,t){var i={};t.result=i,""!==this.getChildValue(e)?(i.value=this.getChildValue(e),i.uom=e.getAttribute("uom")):this.readChildNodes(e,i)}},sa:OpenLayers.Format.SOSGetFeatureOfInterest.prototype.readers.sa,gml:OpenLayers.Util.applyDefaults({TimeInstant:function(e,t){var i={};t.timeInstant=i,this.readChildNodes(e,i)},timePosition:function(e,t){t.timePosition=this.getChildValue(e)}},OpenLayers.Format.SOSGetFeatureOfInterest.prototype.readers.gml)},writers:{sos:{GetObservation:function(e){var t,i,s=this.createElementNSPlus("GetObservation",{attributes:{version:this.VERSION,service:"SOS"}});for(t in this.writeNode("offering",e,s),e.eventTime&&this.writeNode("eventTime",e,s),e.procedures)this.writeNode("procedure",e.procedures[t],s);for(i in e.observedProperties)this.writeNode("observedProperty",e.observedProperties[i],s);return e.foi&&this.writeNode("featureOfInterest",e.foi,s),this.writeNode("responseFormat",e,s),e.resultModel&&this.writeNode("resultModel",e,s),e.responseMode&&this.writeNode("responseMode",e,s),s},featureOfInterest:function(e){var t=this.createElementNSPlus("featureOfInterest");return this.writeNode("ObjectID",e.objectId,t),t},ObjectID:function(e){return this.createElementNSPlus("ObjectID",{value:e})},responseFormat:function(e){return this.createElementNSPlus("responseFormat",{value:e.responseFormat})},procedure:function(e){return this.createElementNSPlus("procedure",{value:e})},offering:function(e){return this.createElementNSPlus("offering",{value:e.offering})},observedProperty:function(e){return this.createElementNSPlus("observedProperty",{value:e})},eventTime:function(e){var t=this.createElementNSPlus("eventTime");return"latest"===e.eventTime&&this.writeNode("ogc:TM_Equals",e,t),t},resultModel:function(e){return this.createElementNSPlus("resultModel",{value:e.resultModel})},responseMode:function(e){return this.createElementNSPlus("responseMode",{value:e.responseMode})}},ogc:{TM_Equals:function(e){var t=this.createElementNSPlus("ogc:TM_Equals");return this.writeNode("ogc:PropertyName",{property:"urn:ogc:data:time:iso8601"},t),"latest"===e.eventTime&&this.writeNode("gml:TimeInstant",{value:"latest"},t),t},PropertyName:function(e){return this.createElementNSPlus("ogc:PropertyName",{value:e.property})}},gml:{TimeInstant:function(e){var t=this.createElementNSPlus("gml:TimeInstant");return this.writeNode("gml:timePosition",e,t),t},timePosition:function(e){return this.createElementNSPlus("gml:timePosition",{value:e.value})}}},CLASS_NAME:"OpenLayers.Format.SOSGetObservation"}),OpenLayers.Control.UTFGrid=OpenLayers.Class(OpenLayers.Control,{autoActivate:!0,layers:null,defaultHandlerOptions:{delay:300,pixelTolerance:4,stopMove:!1,single:!0,double:!1,stopSingle:!1,stopDouble:!1},handlerMode:"click",setHandler:function(e){this.handlerMode=e,this.resetHandler()},resetHandler:function(){return this.handler&&(this.handler.deactivate(),this.handler.destroy(),this.handler=null),"hover"==this.handlerMode?this.handler=new OpenLayers.Handler.Hover(this,{pause:this.handleEvent,move:this.reset},this.handlerOptions):"click"==this.handlerMode?this.handler=new OpenLayers.Handler.Click(this,{click:this.handleEvent},this.handlerOptions):"move"==this.handlerMode&&(this.handler=new OpenLayers.Handler.Hover(this,{pause:this.handleEvent,move:this.handleEvent},this.handlerOptions)),!!this.handler},initialize:function(e){(e=e||{}).handlerOptions=e.handlerOptions||this.defaultHandlerOptions,OpenLayers.Control.prototype.initialize.apply(this,[e]),this.resetHandler()},handleEvent:function(e){if(null==e)this.reset();else{var t=this.map.getLonLatFromPixel(e.xy);if(t){var i=this.findLayers();if(0<i.length){for(var s,n={},r=0,a=i.length;r<a;r++)s=i[r],n[OpenLayers.Util.indexOf(this.map.layers,s)]=s.getFeatureInfo(t);this.callback(n,t,e.xy)}}}},callback:function(e){},reset:function(e){this.callback(null)},findLayers:function(){for(var e,t=this.layers||this.map.layers,i=[],s=t.length-1;0<=s;--s)(e=t[s])instanceof OpenLayers.Layer.UTFGrid&&i.push(e);return i},CLASS_NAME:"OpenLayers.Control.UTFGrid"}),OpenLayers.Format.CQL=function(){function o(e){for(var t=[],a=[];e.length;){var i=e.shift();switch(i.type){case"PROPERTY":case"GEOMETRY":case"VALUE":a.push(i);break;case"COMPARISON":case"BETWEEN":case"IS_NULL":case"LOGICAL":for(var s=c[i.type];0<t.length&&c[t[t.length-1].type]<=s;)a.push(t.pop());t.push(i);break;case"SPATIAL":case"NOT":case"LPAREN":t.push(i);break;case"RPAREN":for(;0<t.length&&"LPAREN"!=t[t.length-1].type;)a.push(t.pop());t.pop(),0<t.length&&"SPATIAL"==t[t.length-1].type&&a.push(t.pop());case"COMMA":case"END":break;default:throw Error("Unknown token type "+i.type)}}for(;0<t.length;)a.push(t.pop());if(e=function e(){switch((s=a.pop()).type){case"LOGICAL":var t=e(),i=e();return new OpenLayers.Filter.Logical({filters:[i,t],type:u[s.text.toUpperCase()]});case"NOT":return s=e(),new OpenLayers.Filter.Logical({filters:[s],type:OpenLayers.Filter.Logical.NOT});case"BETWEEN":return a.pop(),i=e(),s=e(),t=e(),new OpenLayers.Filter.Comparison({property:t,lowerBoundary:s,upperBoundary:i,type:OpenLayers.Filter.Comparison.BETWEEN});case"COMPARISON":return i=e(),t=e(),new OpenLayers.Filter.Comparison({property:t,value:i,type:p[s.text.toUpperCase()]});case"IS_NULL":return t=e(),new OpenLayers.Filter.Comparison({property:t,type:p[s.text.toUpperCase()]});case"VALUE":return(t=s.text.match(/^'(.*)'$/))?t[1].replace(/''/g,"'"):Number(s.text);case"SPATIAL":switch(s.text.toUpperCase()){case"BBOX":var s=e(),t=e(),i=e(),n=e(),r=e();return new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.BBOX,property:r,value:OpenLayers.Bounds.fromArray([n,i,t,s])});case"INTERSECTS":return i=e(),t=e(),new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.INTERSECTS,property:t,value:i});case"WITHIN":return i=e(),t=e(),new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.WITHIN,property:t,value:i});case"CONTAINS":return i=e(),t=e(),new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.CONTAINS,property:t,value:i});case"DWITHIN":return s=e(),i=e(),t=e(),new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.DWITHIN,value:i,property:t,distance:Number(s)})}case"GEOMETRY":return OpenLayers.Geometry.fromWKT(s.text);default:return s.text}}(),0<a.length){for(e="Remaining tokens after building AST: \n",t=a.length-1;0<=t;t--)e+=a[t].type+": "+a[t].text+"\n";throw Error(e)}return e}var e,l={PROPERTY:/^[_a-zA-Z]\w*/,COMPARISON:/^(=|<>|<=|<|>=|>|LIKE)/i,IS_NULL:/^IS NULL/i,COMMA:/^,/,LOGICAL:/^(AND|OR)/i,VALUE:/^('([^']|'')*'|\d+(\.\d*)?|\.\d+)/,LPAREN:/^\(/,RPAREN:/^\)/,SPATIAL:/^(BBOX|INTERSECTS|DWITHIN|WITHIN|CONTAINS)/i,NOT:/^NOT/i,BETWEEN:/^BETWEEN/i,GEOMETRY:function(e){if(t=/^(POINT|LINESTRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON|GEOMETRYCOLLECTION)/.exec(e)){var t,i=e.length;if(-1<(t=e.indexOf("(",t[0].length)))for(var s=1;t<i&&0<s;)switch(t++,e.charAt(t)){case"(":s++;break;case")":s--}return[e.substr(0,t+1)]}},END:/^$/},h={LPAREN:["GEOMETRY","SPATIAL","PROPERTY","VALUE","LPAREN"],RPAREN:["NOT","LOGICAL","END","RPAREN"],PROPERTY:["COMPARISON","BETWEEN","COMMA","IS_NULL"],BETWEEN:["VALUE"],IS_NULL:["END"],COMPARISON:["VALUE"],COMMA:["GEOMETRY","VALUE","PROPERTY"],VALUE:["LOGICAL","COMMA","RPAREN","END"],SPATIAL:["LPAREN"],LOGICAL:["NOT","VALUE","SPATIAL","PROPERTY","LPAREN"],NOT:["PROPERTY","LPAREN"],GEOMETRY:["COMMA","RPAREN"]},p={"=":OpenLayers.Filter.Comparison.EQUAL_TO,"<>":OpenLayers.Filter.Comparison.NOT_EQUAL_TO,"<":OpenLayers.Filter.Comparison.LESS_THAN,"<=":OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO,">":OpenLayers.Filter.Comparison.GREATER_THAN,">=":OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO,LIKE:OpenLayers.Filter.Comparison.LIKE,BETWEEN:OpenLayers.Filter.Comparison.BETWEEN,"IS NULL":OpenLayers.Filter.Comparison.IS_NULL},n={},u={AND:OpenLayers.Filter.Logical.AND,OR:OpenLayers.Filter.Logical.OR},r={},c={RPAREN:3,LOGICAL:2,COMPARISON:1};for(e in p)p.hasOwnProperty(e)&&(n[p[e]]=e);for(e in u)u.hasOwnProperty(e)&&(r[u[e]]=e);return OpenLayers.Class(OpenLayers.Format,{read:function(e){var t=e;e=[];var i=["NOT","GEOMETRY","SPATIAL","PROPERTY","LPAREN"];do{e:{for(var s=i,n=void 0,i=void 0,r=s.length,n=0;n<r;n++){var i=s[n],a=l[i]instanceof RegExp?l[i].exec(t):(0,l[i])(t);if(a){s={type:i,text:s=a[0],remainder:t=t.substr(s.length).replace(/^\s*/,"")};break e}}for(e="ERROR: In parsing: ["+t+"], expected one of: ",n=0;n<r;n++)e+="\n    "+(i=s[n])+": "+l[i];throw Error(e)}if(t=s.remainder,i=h[s.type],"END"!=s.type&&!i)throw Error("No follows list for "+s.type)}while(e.push(s),"END"!=s.type);return e=o(e),this.keepData&&(this.data=e),e},write:function(e){if(e instanceof OpenLayers.Geometry)return e.toString();switch(e.CLASS_NAME){case"OpenLayers.Filter.Spatial":switch(e.type){case OpenLayers.Filter.Spatial.BBOX:return"BBOX("+e.property+","+e.value.toBBOX()+")";case OpenLayers.Filter.Spatial.DWITHIN:return"DWITHIN("+e.property+", "+this.write(e.value)+", "+e.distance+")";case OpenLayers.Filter.Spatial.WITHIN:return"WITHIN("+e.property+", "+this.write(e.value)+")";case OpenLayers.Filter.Spatial.INTERSECTS:return"INTERSECTS("+e.property+", "+this.write(e.value)+")";case OpenLayers.Filter.Spatial.CONTAINS:return"CONTAINS("+e.property+", "+this.write(e.value)+")";default:throw Error("Unknown spatial filter type: "+e.type)}case"OpenLayers.Filter.Logical":if(e.type==OpenLayers.Filter.Logical.NOT)return"NOT ("+this.write(e.filters[0])+")";for(var t="(",i=!0,s=0;s<e.filters.length;s++)i?i=!1:t+=") "+r[e.type]+" (",t+=this.write(e.filters[s]);return t+")";case"OpenLayers.Filter.Comparison":return e.type==OpenLayers.Filter.Comparison.BETWEEN?e.property+" BETWEEN "+this.write(e.lowerBoundary)+" AND "+this.write(e.upperBoundary):null!==e.value?e.property+" "+n[e.type]+" "+this.write(e.value):e.property+" "+n[e.type];case void 0:if("string"==typeof e)return"'"+e.replace(/'/g,"''")+"'";if("number"==typeof e)return String(e);default:throw Error("Can't encode: "+e.CLASS_NAME+" "+e)}},CLASS_NAME:"OpenLayers.Format.CQL"})}(),OpenLayers.Control.Split=OpenLayers.Class(OpenLayers.Control,{layer:null,source:null,sourceOptions:null,tolerance:null,edge:!0,deferDelete:!1,mutual:!0,targetFilter:null,sourceFilter:null,handler:null,initialize:function(e){OpenLayers.Control.prototype.initialize.apply(this,[e]),this.options=e||{},this.options.source&&this.setSource(this.options.source)},setSource:function(e){this.active?(this.deactivate(),this.handler&&(this.handler.destroy(),delete this.handler),this.source=e,this.activate()):this.source=e},activate:function(){var e=OpenLayers.Control.prototype.activate.call(this);return e&&(this.source?this.source.events&&this.source.events.on({sketchcomplete:this.onSketchComplete,afterfeaturemodified:this.afterFeatureModified,scope:this}):(this.handler||(this.handler=new OpenLayers.Handler.Path(this,{done:function(e){this.onSketchComplete({feature:new OpenLayers.Feature.Vector(e)})}},{layerOptions:this.sourceOptions})),this.handler.activate())),e},deactivate:function(){var e=OpenLayers.Control.prototype.deactivate.call(this);return e&&this.source&&this.source.events&&this.source.events.un({sketchcomplete:this.onSketchComplete,afterfeaturemodified:this.afterFeatureModified,scope:this}),e},onSketchComplete:function(e){return this.feature=null,!this.considerSplit(e.feature)},afterFeatureModified:function(e){e.modified&&"function"==typeof e.feature.geometry.split&&(this.feature=e.feature,this.considerSplit(e.feature))},removeByGeometry:function(e,t){for(var i=0,s=e.length;i<s;++i)if(e[i].geometry===t){e.splice(i,1);break}},isEligible:function(e){return!!e.geometry&&(e.state!==OpenLayers.State.DELETE&&"function"==typeof e.geometry.split&&this.feature!==e&&(!this.targetFilter||this.targetFilter.evaluate(e.attributes)))},considerSplit:function(e){var t=!1,i=!1;if(!this.sourceFilter||this.sourceFilter.evaluate(e.attributes)){for(var s,n,r,a=this.layer&&this.layer.features||[],o=[],l=[],h=this.layer===this.source&&this.mutual,p={edge:this.edge,tolerance:this.tolerance,mutual:h},u=[e.geometry],c=0,d=a.length;c<d;++c)if(r=a[c],this.isEligible(r)){for(var y=[r.geometry],m=0;m<u.length;++m)for(var f=u[m],g=0;g<y.length;++g)s=y[g],f.getBounds().intersectsBounds(s.getBounds())&&(s=f.split(s,p))&&!1!==(n=this.events.triggerEvent("beforesplit",{source:e,target:r}))&&(h&&(1<(n=s[0]).length&&(n.unshift(m,1),Array.prototype.splice.apply(u,n),m+=n.length-3),s=s[1]),1<s.length&&(s.unshift(g,1),Array.prototype.splice.apply(y,s),g+=s.length-3));1<y.length&&(this.geomsToFeatures(r,y),this.events.triggerEvent("split",{original:r,features:y}),Array.prototype.push.apply(o,y),l.push(r),i=!0)}if(1<u.length&&(this.geomsToFeatures(e,u),this.events.triggerEvent("split",{original:e,features:u}),Array.prototype.push.apply(o,u),l.push(e),t=!0),t||i){if(this.deferDelete){for(a=[],c=0,d=l.length;c<d;++c)(i=l[c]).state===OpenLayers.State.INSERT?a.push(i):(i.state=OpenLayers.State.DELETE,this.layer.drawFeature(i));for(this.layer.destroyFeatures(a,{silent:!0}),c=0,d=o.length;c<d;++c)o[c].state=OpenLayers.State.INSERT}else this.layer.destroyFeatures(l,{silent:!0});this.layer.addFeatures(o,{silent:!0}),this.events.triggerEvent("aftersplit",{source:e,features:o})}}return t},geomsToFeatures:function(e,t){var i=e.clone();delete i.geometry;for(var s,n=0,r=t.length;n<r;++n)(s=i.clone()).geometry=t[n],s.state=OpenLayers.State.INSERT,t[n]=s},destroy:function(){this.active&&this.deactivate(),OpenLayers.Control.prototype.destroy.call(this)},CLASS_NAME:"OpenLayers.Control.Split"}),OpenLayers.Layer.WMTS=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:!0,version:"1.0.0",requestEncoding:"KVP",url:null,layer:null,matrixSet:null,style:null,format:"image/jpeg",tileOrigin:null,tileFullExtent:null,formatSuffix:null,matrixIds:null,dimensions:null,params:null,zoomOffset:0,serverResolutions:null,formatSuffixMap:{"image/png":"png","image/png8":"png","image/png24":"png","image/png32":"png",png:"png","image/jpeg":"jpg","image/jpg":"jpg",jpeg:"jpg",jpg:"jpg"},matrix:null,initialize:function(e){var t,i;for(i in{url:!0,layer:!0,style:!0,matrixSet:!0})if(!(i in e))throw Error("Missing property '"+i+"' in layer configuration.");if(e.params=OpenLayers.Util.upperCaseObject(e.params),OpenLayers.Layer.Grid.prototype.initialize.apply(this,[e.name,e.url,e.params,e]),this.formatSuffix||(this.formatSuffix=this.formatSuffixMap[this.format]||this.format.split("/").pop()),this.matrixIds&&(e=this.matrixIds.length)&&"string"==typeof this.matrixIds[0])for(t=this.matrixIds,this.matrixIds=Array(e),i=0;i<e;++i)this.matrixIds[i]={identifier:t[i]}},setMap:function(){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments)},updateMatrixProperties:function(){(this.matrix=this.getMatrix())&&(this.matrix.topLeftCorner&&(this.tileOrigin=this.matrix.topLeftCorner),this.matrix.tileWidth&&this.matrix.tileHeight&&(this.tileSize=new OpenLayers.Size(this.matrix.tileWidth,this.matrix.tileHeight)),this.tileOrigin||(this.tileOrigin=new OpenLayers.LonLat(this.maxExtent.left,this.maxExtent.top)),this.tileFullExtent||(this.tileFullExtent=this.maxExtent))},moveTo:function(e,t,i){return!t&&this.matrix||this.updateMatrixProperties(),OpenLayers.Layer.Grid.prototype.moveTo.apply(this,arguments)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.WMTS(this.options)),OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getIdentifier:function(){return this.getServerZoom()},getMatrix:function(){var e;if(this.matrixIds&&0!==this.matrixIds.length)if("scaleDenominator"in this.matrixIds[0])for(var t,i=OpenLayers.METERS_PER_INCH*OpenLayers.INCHES_PER_UNIT[this.units]*this.getServerResolution()/28e-5,s=Number.POSITIVE_INFINITY,n=0,r=this.matrixIds.length;n<r;++n)(t=Math.abs(1-this.matrixIds[n].scaleDenominator/i))<s&&(s=t,e=this.matrixIds[n]);else e=this.matrixIds[this.getIdentifier()];else e={identifier:this.getIdentifier()};return e},getTileInfo:function(e){var t=this.getServerResolution(),i=(e.lon-this.tileOrigin.lon)/(t*this.tileSize.w),t=(e=(this.tileOrigin.lat-e.lat)/(t*this.tileSize.h),Math.floor(i)),s=Math.floor(e);return{col:t,row:s,i:Math.floor((i-t)*this.tileSize.w),j:Math.floor((e-s)*this.tileSize.h)}},getURL:function(e){e=this.adjustBounds(e);var t="";if(!this.tileFullExtent||this.tileFullExtent.intersectsBounds(e)){e=e.getCenterLonLat();var i=this.getTileInfo(e);e=this.dimensions;var s,t=OpenLayers.Util.isArray(this.url)?this.selectUrl([this.version,this.style,this.matrixSet,this.matrix.identifier,i.row,i.col].join(),this.url):this.url;if("REST"===this.requestEncoding.toUpperCase())if(s=this.params,-1!==t.indexOf("{")){if(t=t.replace(/\{/g,"${"),i={style:this.style,Style:this.style,TileMatrixSet:this.matrixSet,TileMatrix:this.matrix.identifier,TileRow:i.row,TileCol:i.col},e)for(var n,r=e.length-1;0<=r;--r)i[n=e[r]]=s[n.toUpperCase()];t=OpenLayers.String.format(t,i)}else{if(n=this.version+"/"+this.layer+"/"+this.style+"/",e)for(r=0;r<e.length;r++)s[e[r]]&&(n=n+s[e[r]]+"/");n=n+this.matrixSet+"/"+this.matrix.identifier+"/"+i.row+"/"+i.col+"."+this.formatSuffix,t.match(/\/$/)||(t+="/"),t+=n}else"KVP"===this.requestEncoding.toUpperCase()&&(s={SERVICE:"WMTS",REQUEST:"GetTile",VERSION:this.version,LAYER:this.layer,STYLE:this.style,TILEMATRIXSET:this.matrixSet,TILEMATRIX:this.matrix.identifier,TILEROW:i.row,TILECOL:i.col,FORMAT:this.format},t=OpenLayers.Layer.Grid.prototype.getFullRequestString.apply(this,[s]))}return t},mergeNewParams:function(e){if("KVP"===this.requestEncoding.toUpperCase())return OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this,[OpenLayers.Util.upperCaseObject(e)])},CLASS_NAME:"OpenLayers.Layer.WMTS"}),OpenLayers.Protocol.SOS.v1_0_0=OpenLayers.Class(OpenLayers.Protocol,{fois:null,formatOptions:null,initialize:function(e){OpenLayers.Protocol.prototype.initialize.apply(this,[e]),e.format||(this.format=new OpenLayers.Format.SOSGetFeatureOfInterest(this.formatOptions))},destroy:function(){this.options&&!this.options.format&&this.format.destroy(),this.format=null,OpenLayers.Protocol.prototype.destroy.apply(this)},read:function(e){e=OpenLayers.Util.extend({},e),OpenLayers.Util.applyDefaults(e,this.options||{});var t=new OpenLayers.Protocol.Response({requestType:"read"}),i=this.format,i=OpenLayers.Format.XML.prototype.write.apply(i,[i.writeNode("sos:GetFeatureOfInterest",{fois:this.fois})]);return t.priv=OpenLayers.Request.POST({url:e.url,callback:this.createCallback(this.handleRead,t,e),data:i}),t},handleRead:function(e,t){var i;t.callback&&(200<=(i=e.priv).status&&i.status<300?(e.features=this.parseFeatures(i),e.code=OpenLayers.Protocol.Response.SUCCESS):e.code=OpenLayers.Protocol.Response.FAILURE,t.callback.call(t.scope,e))},parseFeatures:function(e){var t=e.responseXML;return!(t=t&&t.documentElement?t:e.responseText)||t.length<=0?null:this.format.read(t)},CLASS_NAME:"OpenLayers.Protocol.SOS.v1_0_0"}),OpenLayers.Layer.KaMapCache=OpenLayers.Class(OpenLayers.Layer.KaMap,{IMAGE_EXTENSIONS:{jpeg:"jpg",gif:"gif",png:"png",png8:"png",png24:"png",dithered:"png"},DEFAULT_FORMAT:"jpeg",initialize:function(e,t,i,s){OpenLayers.Layer.KaMap.prototype.initialize.apply(this,arguments),this.extension=this.IMAGE_EXTENSIONS[this.params.i.toLowerCase()||this.DEFAULT_FORMAT]},getURL:function(e){e=this.adjustBounds(e);var t=this.map.getResolution(),i=Math.round(1e4*this.map.getScale())/1e4,s=Math.round(e.left/t),t=(e=-Math.round(e.top/t),Math.floor(s/this.tileSize.w/this.params.metaTileSize.w)*this.tileSize.w*this.params.metaTileSize.w),n=Math.floor(e/this.tileSize.h/this.params.metaTileSize.h)*this.tileSize.h*this.params.metaTileSize.h,i=["/",this.params.map,"/",i,"/",this.params.g.replace(/\s/g,"_"),"/def/t",n,"/l",t,"/t",e,"l",s,".",this.extension],s=this.url;return(s=OpenLayers.Util.isArray(s)?this.selectUrl(i.join(""),s):s)+i.join("")},CLASS_NAME:"OpenLayers.Layer.KaMapCache"}),OpenLayers.Protocol.WFS.v1_1_0=OpenLayers.Class(OpenLayers.Protocol.WFS.v1,{version:"1.1.0",initialize:function(e){OpenLayers.Protocol.WFS.v1.prototype.initialize.apply(this,arguments),this.outputFormat&&!this.readFormat&&("gml2"==this.outputFormat.toLowerCase()?this.readFormat=new OpenLayers.Format.GML.v2({featureType:this.featureType,featureNS:this.featureNS,geometryName:this.geometryName}):"json"==this.outputFormat.toLowerCase()&&(this.readFormat=new OpenLayers.Format.GeoJSON))},CLASS_NAME:"OpenLayers.Protocol.WFS.v1_1_0"}),OpenLayers.Format.WMSCapabilities.v1_1_1=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_1,{version:"1.1.1",readers:{wms:OpenLayers.Util.applyDefaults({SRS:function(e,t){t.srs[this.getChildValue(e)]=!0}},OpenLayers.Format.WMSCapabilities.v1_1.prototype.readers.wms)},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_1_1"}),OpenLayers.Format.WMSCapabilities.v1_1_1_WMSC=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_1_1,{version:"1.1.1",profile:"WMSC",readers:{wms:OpenLayers.Util.applyDefaults({VendorSpecificCapabilities:function(e,t){t.vendorSpecific={tileSets:[]},this.readChildNodes(e,t.vendorSpecific)},TileSet:function(e,t){var i={srs:{},bbox:{},resolutions:[]};this.readChildNodes(e,i),t.tileSets.push(i)},Resolutions:function(e,t){for(var i=this.getChildValue(e).split(" "),s=0,n=i.length;s<n;s++)""!=i[s]&&t.resolutions.push(parseFloat(i[s]))},Width:function(e,t){t.width=parseInt(this.getChildValue(e))},Height:function(e,t){t.height=parseInt(this.getChildValue(e))},Layers:function(e,t){t.layers=this.getChildValue(e)},Styles:function(e,t){t.styles=this.getChildValue(e)}},OpenLayers.Format.WMSCapabilities.v1_1_1.prototype.readers.wms)},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_1_1_WMSC"}),OpenLayers.Control.LayerSwitcher=OpenLayers.Class(OpenLayers.Control,{layerStates:null,layersDiv:null,baseLayersDiv:null,baseLayers:null,dataLbl:null,dataLayersDiv:null,dataLayers:null,minimizeDiv:null,maximizeDiv:null,ascending:!0,initialize:function(e){OpenLayers.Control.prototype.initialize.apply(this,arguments),this.layerStates=[]},destroy:function(){this.clearLayersArray("base"),this.clearLayersArray("data"),this.map.events.un({buttonclick:this.onButtonClick,addlayer:this.redraw,changelayer:this.redraw,removelayer:this.redraw,changebaselayer:this.redraw,scope:this}),this.events.unregister("buttonclick",this,this.onButtonClick),OpenLayers.Control.prototype.destroy.apply(this,arguments)},setMap:function(e){OpenLayers.Control.prototype.setMap.apply(this,arguments),this.map.events.on({addlayer:this.redraw,changelayer:this.redraw,removelayer:this.redraw,changebaselayer:this.redraw,scope:this}),this.outsideViewport?(this.events.attachToElement(this.div),this.events.register("buttonclick",this,this.onButtonClick)):this.map.events.register("buttonclick",this,this.onButtonClick)},draw:function(){return OpenLayers.Control.prototype.draw.apply(this),this.loadContents(),this.outsideViewport||this.minimizeControl(),this.redraw(),this.div},onButtonClick:function(e){(e=e.buttonElement)===this.minimizeDiv?this.minimizeControl():e===this.maximizeDiv?this.maximizeControl():e._layerSwitcher!==this.id||(e=e.for?document.getElementById(e.for):e).disabled||("radio"==e.type?(e.checked=!0,this.map.setBaseLayer(this.map.getLayer(e._layer))):(e.checked=!e.checked,this.updateMap()))},clearLayersArray:function(e){this[e+"LayersDiv"].innerHTML="",this[e+"Layers"]=[]},checkRedraw:function(){if(!this.layerStates.length||this.map.layers.length!=this.layerStates.length)return!0;for(var e=0,t=this.layerStates.length;e<t;e++){var i=this.layerStates[e],s=this.map.layers[e];if(i.name!=s.name||i.inRange!=s.inRange||i.id!=s.id||i.visibility!=s.visibility)return!0}return!1},redraw:function(){if(!this.checkRedraw())return this.div;this.clearLayersArray("base"),this.clearLayersArray("data");var e=!1,t=!1,i=this.map.layers.length;this.layerStates=Array(i);for(var s=0;s<i;s++){var n=this.map.layers[s];this.layerStates[s]={name:n.name,visibility:n.visibility,inRange:n.inRange,id:n.id}}var r=this.map.layers.slice();for(this.ascending||r.reverse(),s=0,i=r.length;s<i;s++){var a,o,l,h=(n=r[s]).isBaseLayer;n.displayInLayerSwitcher&&(h?t=!0:e=!0,a=h?n==this.map.baseLayer:n.getVisibility(),o=document.createElement("input"),l=OpenLayers.Util.createUniqueID(this.id+"_input_"),o.id=l,o.name=h?this.id+"_baseLayers":n.name,o.type=h?"radio":"checkbox",o.value=n.name,o.checked=a,o.defaultChecked=a,o.className="olButton",o._layer=n.id,o._layerSwitcher=this.id,h||n.inRange||(o.disabled=!0),(a=document.createElement("label")).for=o.id,OpenLayers.Element.addClass(a,"labelSpan olButton"),a._layer=n.id,a._layerSwitcher=this.id,h||n.inRange||(a.style.color="gray"),a.innerHTML=n.name,a.style.verticalAlign=h?"bottom":"baseline",l=document.createElement("br"),(h?this.baseLayers:this.dataLayers).push({layer:n,inputElem:o,labelSpan:a}),(n=h?this.baseLayersDiv:this.dataLayersDiv).appendChild(o),n.appendChild(a),n.appendChild(l))}return this.dataLbl.style.display=e?"":"none",this.baseLbl.style.display=t?"":"none",this.div},updateMap:function(){for(var e=0,t=this.baseLayers.length;e<t;e++){var i=this.baseLayers[e];i.inputElem.checked&&this.map.setBaseLayer(i.layer,!1)}for(e=0,t=this.dataLayers.length;e<t;e++)(i=this.dataLayers[e]).layer.setVisibility(i.inputElem.checked)},maximizeControl:function(e){this.div.style.width="",this.div.style.height="",this.showControls(!1),null!=e&&OpenLayers.Event.stop(e)},minimizeControl:function(e){this.div.style.width="0px",this.div.style.height="0px",this.showControls(!0),null!=e&&OpenLayers.Event.stop(e)},showControls:function(e){this.maximizeDiv.style.display=e?"":"none",this.minimizeDiv.style.display=e?"none":"",this.layersDiv.style.display=e?"none":""},loadContents:function(){this.layersDiv=document.createElement("div"),this.layersDiv.id=this.id+"_layersDiv",OpenLayers.Element.addClass(this.layersDiv,"layersDiv"),this.baseLbl=document.createElement("div"),this.baseLbl.innerHTML=OpenLayers.i18n("Base Layer"),OpenLayers.Element.addClass(this.baseLbl,"baseLbl"),this.baseLayersDiv=document.createElement("div"),OpenLayers.Element.addClass(this.baseLayersDiv,"baseLayersDiv"),this.dataLbl=document.createElement("div"),this.dataLbl.innerHTML=OpenLayers.i18n("Overlays"),OpenLayers.Element.addClass(this.dataLbl,"dataLbl"),this.dataLayersDiv=document.createElement("div"),OpenLayers.Element.addClass(this.dataLayersDiv,"dataLayersDiv"),this.ascending?(this.layersDiv.appendChild(this.baseLbl),this.layersDiv.appendChild(this.baseLayersDiv),this.layersDiv.appendChild(this.dataLbl),this.layersDiv.appendChild(this.dataLayersDiv)):(this.layersDiv.appendChild(this.dataLbl),this.layersDiv.appendChild(this.dataLayersDiv),this.layersDiv.appendChild(this.baseLbl),this.layersDiv.appendChild(this.baseLayersDiv)),this.div.appendChild(this.layersDiv);var e=OpenLayers.Util.getImageLocation("layer-switcher-maximize.png");this.maximizeDiv=OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_MaximizeDiv",null,null,e,"absolute"),OpenLayers.Element.addClass(this.maximizeDiv,"maximizeDiv olButton"),this.maximizeDiv.style.display="none",this.div.appendChild(this.maximizeDiv),e=OpenLayers.Util.getImageLocation("layer-switcher-minimize.png"),this.minimizeDiv=OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_MinimizeDiv",null,null,e,"absolute"),OpenLayers.Element.addClass(this.minimizeDiv,"minimizeDiv olButton"),this.minimizeDiv.style.display="none",this.div.appendChild(this.minimizeDiv)},CLASS_NAME:"OpenLayers.Control.LayerSwitcher"}),OpenLayers.Format.Atom=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{atom:"http://www.w3.org/2005/Atom",georss:"http://www.georss.org/georss"},feedTitle:"untitled",defaultEntryTitle:"untitled",gmlParser:null,xy:!1,read:function(e){return"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),this.parseFeatures(e)},write:function(e){var t;if(OpenLayers.Util.isArray(e)){(t=this.createElementNSPlus("atom:feed")).appendChild(this.createElementNSPlus("atom:title",{value:this.feedTitle}));for(var i=0,s=e.length;i<s;i++)t.appendChild(this.buildEntryNode(e[i]))}else t=this.buildEntryNode(e);return OpenLayers.Format.XML.prototype.write.apply(this,[t])},buildContentNode:function(e){var t=this.createElementNSPlus("atom:content",{attributes:{type:e.type||null}});if(e.src)t.setAttribute("src",e.src);else if("text"==e.type||null==e.type)t.appendChild(this.createTextNode(e.value));else if("html"==e.type){if("string"!=typeof e.value)throw"HTML content must be in form of an escaped string";t.appendChild(this.createTextNode(e.value))}else"xhtml"==e.type||"xhtml"==e.type||e.type.match(/(\+|\/)xml$/)?t.appendChild(e.value):t.appendChild(this.createTextNode(e.value));return t},buildEntryNode:function(e){var t=e.attributes,i=t.atom||{},s=this.createElementNSPlus("atom:entry");if(i.authors)for(var n=OpenLayers.Util.isArray(i.authors)?i.authors:[i.authors],r=0,a=n.length;r<a;r++)s.appendChild(this.buildPersonConstructNode("author",n[r]));if(i.categories)for(var o,r=0,a=(n=OpenLayers.Util.isArray(i.categories)?i.categories:[i.categories]).length;r<a;r++)o=n[r],s.appendChild(this.createElementNSPlus("atom:category",{attributes:{term:o.term,scheme:o.scheme||null,label:o.label||null}}));if(i.content&&s.appendChild(this.buildContentNode(i.content)),i.contributors)for(r=0,a=(n=OpenLayers.Util.isArray(i.contributors)?i.contributors:[i.contributors]).length;r<a;r++)s.appendChild(this.buildPersonConstructNode("contributor",n[r]));if(e.fid&&s.appendChild(this.createElementNSPlus("atom:id",{value:e.fid})),i.links)for(r=0,a=(n=OpenLayers.Util.isArray(i.links)?i.links:[i.links]).length;r<a;r++)o=n[r],s.appendChild(this.createElementNSPlus("atom:link",{attributes:{href:o.href,rel:o.rel||null,type:o.type||null,hreflang:o.hreflang||null,title:o.title||null,length:o.length||null}}));return i.published&&s.appendChild(this.createElementNSPlus("atom:published",{value:i.published})),i.rights&&s.appendChild(this.createElementNSPlus("atom:rights",{value:i.rights})),(i.summary||t.description)&&s.appendChild(this.createElementNSPlus("atom:summary",{value:i.summary||t.description})),s.appendChild(this.createElementNSPlus("atom:title",{value:i.title||t.title||this.defaultEntryTitle})),i.updated&&s.appendChild(this.createElementNSPlus("atom:updated",{value:i.updated})),e.geometry&&((t=this.createElementNSPlus("georss:where")).appendChild(this.buildGeometryNode(e.geometry)),s.appendChild(t)),s},initGmlParser:function(){this.gmlParser=new OpenLayers.Format.GML.v3({xy:this.xy,featureNS:"http://example.com#feature",internalProjection:this.internalProjection,externalProjection:this.externalProjection})},buildGeometryNode:function(e){return this.gmlParser||this.initGmlParser(),this.gmlParser.writeNode("feature:_geometry",e).firstChild},buildPersonConstructNode:function(e,t){var i=["uri","email"],s=this.createElementNSPlus("atom:"+e);s.appendChild(this.createElementNSPlus("atom:name",{value:t.name}));for(var n=0,r=i.length;n<r;n++)t[i[n]]&&s.appendChild(this.createElementNSPlus("atom:"+i[n],{value:t[i[n]]}));return s},getFirstChildValue:function(e,t,i,s){return(e=this.getElementsByTagNameNS(e,t,i))&&0<e.length?this.getChildValue(e[0],s):s},parseFeature:function(e){var t={},i=null,s=null,n=null,r=this.namespaces.atom;this.parsePersonConstructs(e,"author",t),0<(s=this.getElementsByTagNameNS(e,r,"category")).length&&(t.categories=[]);for(var a=0,o=s.length;a<o;a++)(i={}).term=s[a].getAttribute("term"),(n=s[a].getAttribute("scheme"))&&(i.scheme=n),(n=s[a].getAttribute("label"))&&(i.label=n),t.categories.push(i);0<(s=this.getElementsByTagNameNS(e,r,"content")).length&&(i={},(n=s[0].getAttribute("type"))&&(i.type=n),(n=s[0].getAttribute("src"))?i.src=n:("text"!=i.type&&"html"!=i.type&&null!=i.type&&("xhtml"==i.type||i.type.match(/(\+|\/)xml$/))?i.value=this.getChildEl(s[0]):i.value=this.getFirstChildValue(e,r,"content",null),t.content=i)),this.parsePersonConstructs(e,"contributor",t),t.id=this.getFirstChildValue(e,r,"id",null),0<(s=this.getElementsByTagNameNS(e,r,"link")).length&&(t.links=Array(s.length));for(var l=["rel","type","hreflang","title","length"],a=0,o=s.length;a<o;a++){(i={}).href=s[a].getAttribute("href");for(var h=0,p=l.length;h<p;h++)(n=s[a].getAttribute(l[h]))&&(i[l[h]]=n);t.links[a]=i}return(i=this.getFirstChildValue(e,r,"published",null))&&(t.published=i),(i=this.getFirstChildValue(e,r,"rights",null))&&(t.rights=i),(i=this.getFirstChildValue(e,r,"summary",null))&&(t.summary=i),t.title=this.getFirstChildValue(e,r,"title",null),t.updated=this.getFirstChildValue(e,r,"updated",null),i={title:t.title,description:t.summary,atom:t},e=this.parseLocations(e)[0],(e=new OpenLayers.Feature.Vector(e,i)).fid=t.id,e},parseFeatures:function(e){var t=[],i=this.getElementsByTagNameNS(e,this.namespaces.atom,"entry");0==i.length&&(i=[e]),e=0;for(var s=i.length;e<s;e++)t.push(this.parseFeature(i[e]));return t},parseLocations:function(e){var t=this.namespaces.georss,i={components:[]};if((o=this.getElementsByTagNameNS(e,t,"where"))&&0<o.length){this.gmlParser||this.initGmlParser();for(var s=0,n=o.length;s<n;s++)this.gmlParser.readChildNodes(o[s],i)}if(i=i.components,(o=this.getElementsByTagNameNS(e,t,"point"))&&0<o.length)for(s=0,n=o.length;s<n;s++){var r=OpenLayers.String.trim(o[s].firstChild.nodeValue).split(/\s+/);2!=r.length&&(r=OpenLayers.String.trim(o[s].firstChild.nodeValue).split(/\s*,\s*/)),i.push(new OpenLayers.Geometry.Point(r[1],r[0]))}var a=this.getElementsByTagNameNS(e,t,"line");if(a&&0<a.length)for(s=0,n=a.length;s<n;s++){for(var o,l=[],h=0,p=(o=OpenLayers.String.trim(a[s].firstChild.nodeValue).split(/\s+/)).length;h<p;h+=2)r=new OpenLayers.Geometry.Point(o[h+1],o[h]),l.push(r);i.push(new OpenLayers.Geometry.LineString(l))}if((e=this.getElementsByTagNameNS(e,t,"polygon"))&&0<e.length)for(s=0,n=e.length;s<n;s++){for(l=[],h=0,p=(o=OpenLayers.String.trim(e[s].firstChild.nodeValue).split(/\s+/)).length;h<p;h+=2)r=new OpenLayers.Geometry.Point(o[h+1],o[h]),l.push(r);i.push(new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing(l)]))}if(this.internalProjection&&this.externalProjection)for(s=0,n=i.length;s<n;s++)i[s]&&i[s].transform(this.externalProjection,this.internalProjection);return i},parsePersonConstructs:function(e,t,i){for(var s=[],n=this.namespaces.atom,r=["uri","email"],a=0,o=(e=this.getElementsByTagNameNS(e,n,t)).length;a<o;a++){var l={};l.name=this.getFirstChildValue(e[a],n,"name",null);for(var h=0,p=r.length;h<p;h++){var u=this.getFirstChildValue(e[a],n,r[h],null);u&&(l[r[h]]=u)}s.push(l)}0<s.length&&(i[t+"s"]=s)},CLASS_NAME:"OpenLayers.Format.Atom"}),OpenLayers.Control.KeyboardDefaults=OpenLayers.Class(OpenLayers.Control,{autoActivate:!0,slideFactor:75,observeElement:null,draw:function(){this.handler=new OpenLayers.Handler.Keyboard(this,{keydown:this.defaultKeyPress},{observeElement:this.observeElement||document})},defaultKeyPress:function(e){var t=!0,i=OpenLayers.Event.element(e);if(!i||"INPUT"!=i.tagName&&"TEXTAREA"!=i.tagName&&"SELECT"!=i.tagName){switch(e.keyCode){case OpenLayers.Event.KEY_LEFT:this.map.pan(-this.slideFactor,0);break;case OpenLayers.Event.KEY_RIGHT:this.map.pan(this.slideFactor,0);break;case OpenLayers.Event.KEY_UP:this.map.pan(0,-this.slideFactor);break;case OpenLayers.Event.KEY_DOWN:this.map.pan(0,this.slideFactor);break;case 33:i=this.map.getSize(),this.map.pan(0,-.75*i.h);break;case 34:i=this.map.getSize(),this.map.pan(0,.75*i.h);break;case 35:i=this.map.getSize(),this.map.pan(.75*i.w,0);break;case 36:i=this.map.getSize(),this.map.pan(-.75*i.w,0);break;case 43:case 61:case 187:case 107:this.map.zoomIn();break;case 45:case 109:case 189:case 95:this.map.zoomOut();break;default:t=!1}t&&OpenLayers.Event.stop(e)}},CLASS_NAME:"OpenLayers.Control.KeyboardDefaults"}),OpenLayers.Format.WMTSCapabilities.v1_0_0=OpenLayers.Class(OpenLayers.Format.OWSCommon.v1_1_0,{version:"1.0.0",namespaces:{ows:"http://www.opengis.net/ows/1.1",wmts:"http://www.opengis.net/wmts/1.0",xlink:"http://www.w3.org/1999/xlink"},yx:null,defaultPrefix:"wmts",initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e]),this.options=e,e=OpenLayers.Util.extend({},OpenLayers.Format.WMTSCapabilities.prototype.yx),this.yx=OpenLayers.Util.extend(e,this.yx)},read:function(e){(e="string"==typeof e?OpenLayers.Format.XML.prototype.read.apply(this,[e]):e)&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),t.version=this.version,t},readers:{wmts:{Capabilities:function(e,t){this.readChildNodes(e,t)},Contents:function(e,t){t.contents={},t.contents.layers=[],t.contents.tileMatrixSets={},this.readChildNodes(e,t.contents)},Layer:function(e,t){var i={styles:[],formats:[],dimensions:[],tileMatrixSetLinks:[],layers:[]};this.readChildNodes(e,i),t.layers.push(i)},Style:function(e,t){var i={};i.isDefault="true"===e.getAttribute("isDefault"),this.readChildNodes(e,i),t.styles.push(i)},Format:function(e,t){t.formats.push(this.getChildValue(e))},TileMatrixSetLink:function(e,t){var i={};this.readChildNodes(e,i),t.tileMatrixSetLinks.push(i)},TileMatrixSet:function(e,t){var i;t.layers?(this.readChildNodes(e,i={matrixIds:[]}),t.tileMatrixSets[i.identifier]=i):t.tileMatrixSet=this.getChildValue(e)},TileMatrix:function(e,t){var i={supportedCRS:t.supportedCRS};this.readChildNodes(e,i),t.matrixIds.push(i)},ScaleDenominator:function(e,t){t.scaleDenominator=parseFloat(this.getChildValue(e))},TopLeftCorner:function(e,t){var i,e=this.getChildValue(e).split(" ");t.supportedCRS&&(i=t.supportedCRS.replace(/urn:ogc:def:crs:(\w+):.+:(\w+)$/,"urn:ogc:def:crs:$1::$2"),i=!!this.yx[i]),t.topLeftCorner=i?new OpenLayers.LonLat(e[1],e[0]):new OpenLayers.LonLat(e[0],e[1])},TileWidth:function(e,t){t.tileWidth=parseInt(this.getChildValue(e))},TileHeight:function(e,t){t.tileHeight=parseInt(this.getChildValue(e))},MatrixWidth:function(e,t){t.matrixWidth=parseInt(this.getChildValue(e))},MatrixHeight:function(e,t){t.matrixHeight=parseInt(this.getChildValue(e))},ResourceURL:function(e,t){t.resourceUrl=t.resourceUrl||{};var i=e.getAttribute("resourceType");t.resourceUrls||(t.resourceUrls=[]),i=t.resourceUrl[i]={format:e.getAttribute("format"),template:e.getAttribute("template"),resourceType:i},t.resourceUrls.push(i)},WSDL:function(e,t){t.wsdl={},t.wsdl.href=e.getAttribute("xlink:href")},ServiceMetadataURL:function(e,t){t.serviceMetadataUrl={},t.serviceMetadataUrl.href=e.getAttribute("xlink:href")},LegendURL:function(e,t){t.legend={},t.legend.href=e.getAttribute("xlink:href"),t.legend.format=e.getAttribute("format")},Dimension:function(e,t){var i={values:[]};this.readChildNodes(e,i),t.dimensions.push(i)},Default:function(e,t){t.default=this.getChildValue(e)},Value:function(e,t){t.values.push(this.getChildValue(e))}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.WMTSCapabilities.v1_0_0"}),$(document).ready(function(){$(".burger-icon").on("click",function(){$(".burger-icon").addClass("hidden-element"),$(".header-logo-link").addClass("hidden-element"),$(".mobile-main-link").addClass("show-element"),$(".user-nav-wrapper").addClass("set-height-auto"),$(".main-nav").animate({height:"toggle"},400)}),$(".close-icon").on("click",function(){$(".burger-icon").removeClass("hidden-element"),$(".header-logo-link").removeClass("hidden-element"),$(".mobile-main-link").removeClass("show-element"),$(".user-nav-wrapper").removeClass("set-height-auto"),$(".main-nav").animate({height:"toggle"},0)})});